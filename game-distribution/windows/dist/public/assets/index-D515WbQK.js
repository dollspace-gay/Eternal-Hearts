var Qh=e=>{throw TypeError(e)};var Zs=(e,t,n)=>t.has(e)||Qh("Cannot "+n);var C=(e,t,n)=>(Zs(e,t,"read from private field"),n?n.call(e):t.get(e)),W=(e,t,n)=>t.has(e)?Qh("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),A=(e,t,n,a)=>(Zs(e,t,"write to private field"),a?a.call(e,n):t.set(e,n),n),H=(e,t,n)=>(Zs(e,t,"access private method"),n);var Go=(e,t,n,a)=>({set _(r){A(e,t,r,n)},get _(){return C(e,t,a)}});function Jw(e,t){for(var n=0;n<t.length;n++){const a=t[n];if(typeof a!="string"&&!Array.isArray(a)){for(const r in a)if(r!=="default"&&!(r in e)){const o=Object.getOwnPropertyDescriptor(a,r);o&&Object.defineProperty(e,r,o.get?o:{enumerable:!0,get:()=>a[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function wp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var bp={exports:{}},bs={},xp={exports:{}},U={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Do=Symbol.for("react.element"),eb=Symbol.for("react.portal"),tb=Symbol.for("react.fragment"),nb=Symbol.for("react.strict_mode"),ab=Symbol.for("react.profiler"),rb=Symbol.for("react.provider"),ob=Symbol.for("react.context"),ib=Symbol.for("react.forward_ref"),sb=Symbol.for("react.suspense"),cb=Symbol.for("react.memo"),lb=Symbol.for("react.lazy"),Xh=Symbol.iterator;function ub(e){return e===null||typeof e!="object"?null:(e=Xh&&e[Xh]||e["@@iterator"],typeof e=="function"?e:null)}var _p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kp=Object.assign,Sp={};function Ir(e,t,n){this.props=e,this.context=t,this.refs=Sp,this.updater=n||_p}Ir.prototype.isReactComponent={};Ir.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ir.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Cp(){}Cp.prototype=Ir.prototype;function cu(e,t,n){this.props=e,this.context=t,this.refs=Sp,this.updater=n||_p}var lu=cu.prototype=new Cp;lu.constructor=cu;kp(lu,Ir.prototype);lu.isPureReactComponent=!0;var Zh=Array.isArray,Ip=Object.prototype.hasOwnProperty,uu={current:null},Tp={key:!0,ref:!0,__self:!0,__source:!0};function qp(e,t,n){var a,r={},o=null,i=null;if(t!=null)for(a in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(o=""+t.key),t)Ip.call(t,a)&&!Tp.hasOwnProperty(a)&&(r[a]=t[a]);var s=arguments.length-2;if(s===1)r.children=n;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];r.children=l}if(e&&e.defaultProps)for(a in s=e.defaultProps,s)r[a]===void 0&&(r[a]=s[a]);return{$$typeof:Do,type:e,key:o,ref:i,props:r,_owner:uu.current}}function hb(e,t){return{$$typeof:Do,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function hu(e){return typeof e=="object"&&e!==null&&e.$$typeof===Do}function db(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Jh=/\/+/g;function Js(e,t){return typeof e=="object"&&e!==null&&e.key!=null?db(""+e.key):t.toString(36)}function bi(e,t,n,a,r){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Do:case eb:i=!0}}if(i)return i=e,r=r(i),e=a===""?"."+Js(i,0):a,Zh(r)?(n="",e!=null&&(n=e.replace(Jh,"$&/")+"/"),bi(r,t,n,"",function(u){return u})):r!=null&&(hu(r)&&(r=hb(r,n+(!r.key||i&&i.key===r.key?"":(""+r.key).replace(Jh,"$&/")+"/")+e)),t.push(r)),1;if(i=0,a=a===""?".":a+":",Zh(e))for(var s=0;s<e.length;s++){o=e[s];var l=a+Js(o,s);i+=bi(o,t,n,l,r)}else if(l=ub(e),typeof l=="function")for(e=l.call(e),s=0;!(o=e.next()).done;)o=o.value,l=a+Js(o,s++),i+=bi(o,t,n,l,r);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Ko(e,t,n){if(e==null)return e;var a=[],r=0;return bi(e,a,"","",function(o){return t.call(n,o,r++)}),a}function fb(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ye={current:null},xi={transition:null},pb={ReactCurrentDispatcher:Ye,ReactCurrentBatchConfig:xi,ReactCurrentOwner:uu};function Ep(){throw Error("act(...) is not supported in production builds of React.")}U.Children={map:Ko,forEach:function(e,t,n){Ko(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ko(e,function(){t++}),t},toArray:function(e){return Ko(e,function(t){return t})||[]},only:function(e){if(!hu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};U.Component=Ir;U.Fragment=tb;U.Profiler=ab;U.PureComponent=cu;U.StrictMode=nb;U.Suspense=sb;U.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pb;U.act=Ep;U.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=kp({},e.props),r=e.key,o=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,i=uu.current),t.key!==void 0&&(r=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)Ip.call(t,l)&&!Tp.hasOwnProperty(l)&&(a[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)a.children=n;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];a.children=s}return{$$typeof:Do,type:e.type,key:r,ref:o,props:a,_owner:i}};U.createContext=function(e){return e={$$typeof:ob,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:rb,_context:e},e.Consumer=e};U.createElement=qp;U.createFactory=function(e){var t=qp.bind(null,e);return t.type=e,t};U.createRef=function(){return{current:null}};U.forwardRef=function(e){return{$$typeof:ib,render:e}};U.isValidElement=hu;U.lazy=function(e){return{$$typeof:lb,_payload:{_status:-1,_result:e},_init:fb}};U.memo=function(e,t){return{$$typeof:cb,type:e,compare:t===void 0?null:t}};U.startTransition=function(e){var t=xi.transition;xi.transition={};try{e()}finally{xi.transition=t}};U.unstable_act=Ep;U.useCallback=function(e,t){return Ye.current.useCallback(e,t)};U.useContext=function(e){return Ye.current.useContext(e)};U.useDebugValue=function(){};U.useDeferredValue=function(e){return Ye.current.useDeferredValue(e)};U.useEffect=function(e,t){return Ye.current.useEffect(e,t)};U.useId=function(){return Ye.current.useId()};U.useImperativeHandle=function(e,t,n){return Ye.current.useImperativeHandle(e,t,n)};U.useInsertionEffect=function(e,t){return Ye.current.useInsertionEffect(e,t)};U.useLayoutEffect=function(e,t){return Ye.current.useLayoutEffect(e,t)};U.useMemo=function(e,t){return Ye.current.useMemo(e,t)};U.useReducer=function(e,t,n){return Ye.current.useReducer(e,t,n)};U.useRef=function(e){return Ye.current.useRef(e)};U.useState=function(e){return Ye.current.useState(e)};U.useSyncExternalStore=function(e,t,n){return Ye.current.useSyncExternalStore(e,t,n)};U.useTransition=function(){return Ye.current.useTransition()};U.version="18.3.1";xp.exports=U;var p=xp.exports;const Xt=wp(p),Pp=Jw({__proto__:null,default:Xt},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mb=p,gb=Symbol.for("react.element"),yb=Symbol.for("react.fragment"),vb=Object.prototype.hasOwnProperty,wb=mb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bb={key:!0,ref:!0,__self:!0,__source:!0};function jp(e,t,n){var a,r={},o=null,i=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(a in t)vb.call(t,a)&&!bb.hasOwnProperty(a)&&(r[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)r[a]===void 0&&(r[a]=t[a]);return{$$typeof:gb,type:e,key:o,ref:i,props:r,_owner:wb.current}}bs.Fragment=yb;bs.jsx=jp;bs.jsxs=jp;bp.exports=bs;var c=bp.exports,Np={exports:{}},it={},Rp={exports:{}},Ap={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(E,R){var z=E.length;E.push(R);e:for(;0<z;){var V=z-1>>>1,ce=E[V];if(0<r(ce,R))E[V]=R,E[z]=ce,z=V;else break e}}function n(E){return E.length===0?null:E[0]}function a(E){if(E.length===0)return null;var R=E[0],z=E.pop();if(z!==R){E[0]=z;e:for(var V=0,ce=E.length,wt=ce>>>1;V<wt;){var ct=2*(V+1)-1,Rr=E[ct],Gt=ct+1,ta=E[Gt];if(0>r(Rr,z))Gt<ce&&0>r(ta,Rr)?(E[V]=ta,E[Gt]=z,V=Gt):(E[V]=Rr,E[ct]=z,V=ct);else if(Gt<ce&&0>r(ta,z))E[V]=ta,E[Gt]=z,V=Gt;else break e}}return R}function r(E,R){var z=E.sortIndex-R.sortIndex;return z!==0?z:E.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,s=i.now();e.unstable_now=function(){return i.now()-s}}var l=[],u=[],h=1,d=null,f=3,w=!1,x=!1,m=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(E){for(var R=n(u);R!==null;){if(R.callback===null)a(u);else if(R.startTime<=E)a(u),R.sortIndex=R.expirationTime,t(l,R);else break;R=n(u)}}function k(E){if(m=!1,v(E),!x)if(n(l)!==null)x=!0,F(S);else{var R=n(u);R!==null&&Z(k,R.startTime-E)}}function S(E,R){x=!1,m&&(m=!1,g(q),q=-1),w=!0;var z=f;try{for(v(R),d=n(l);d!==null&&(!(d.expirationTime>R)||E&&!D());){var V=d.callback;if(typeof V=="function"){d.callback=null,f=d.priorityLevel;var ce=V(d.expirationTime<=R);R=e.unstable_now(),typeof ce=="function"?d.callback=ce:d===n(l)&&a(l),v(R)}else a(l);d=n(l)}if(d!==null)var wt=!0;else{var ct=n(u);ct!==null&&Z(k,ct.startTime-R),wt=!1}return wt}finally{d=null,f=z,w=!1}}var T=!1,I=null,q=-1,P=5,N=-1;function D(){return!(e.unstable_now()-N<P)}function O(){if(I!==null){var E=e.unstable_now();N=E;var R=!0;try{R=I(!0,E)}finally{R?$():(T=!1,I=null)}}else T=!1}var $;if(typeof y=="function")$=function(){y(O)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,X=L.port2;L.port1.onmessage=O,$=function(){X.postMessage(null)}}else $=function(){_(O,0)};function F(E){I=E,T||(T=!0,$())}function Z(E,R){q=_(function(){E(e.unstable_now())},R)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(E){E.callback=null},e.unstable_continueExecution=function(){x||w||(x=!0,F(S))},e.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<E?Math.floor(1e3/E):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(E){switch(f){case 1:case 2:case 3:var R=3;break;default:R=f}var z=f;f=R;try{return E()}finally{f=z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(E,R){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var z=f;f=E;try{return R()}finally{f=z}},e.unstable_scheduleCallback=function(E,R,z){var V=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?V+z:V):z=V,E){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=z+ce,E={id:h++,callback:R,priorityLevel:E,startTime:z,expirationTime:ce,sortIndex:-1},z>V?(E.sortIndex=z,t(u,E),n(l)===null&&E===n(u)&&(m?(g(q),q=-1):m=!0,Z(k,z-V))):(E.sortIndex=ce,t(l,E),x||w||(x=!0,F(S))),E},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(E){var R=f;return function(){var z=f;f=R;try{return E.apply(this,arguments)}finally{f=z}}}})(Ap);Rp.exports=Ap;var xb=Rp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _b=p,ot=xb;function j(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Lp=new Set,uo={};function Ia(e,t){pr(e,t),pr(e+"Capture",t)}function pr(e,t){for(uo[e]=t,e=0;e<t.length;e++)Lp.add(t[e])}var cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yc=Object.prototype.hasOwnProperty,kb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ed={},td={};function Sb(e){return Yc.call(td,e)?!0:Yc.call(ed,e)?!1:kb.test(e)?td[e]=!0:(ed[e]=!0,!1)}function Cb(e,t,n,a){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Ib(e,t,n,a){if(t===null||typeof t>"u"||Cb(e,t,n,a))return!0;if(a)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function He(e,t,n,a,r,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){je[e]=new He(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];je[t]=new He(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){je[e]=new He(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){je[e]=new He(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){je[e]=new He(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){je[e]=new He(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){je[e]=new He(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){je[e]=new He(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){je[e]=new He(e,5,!1,e.toLowerCase(),null,!1,!1)});var du=/[\-:]([a-z])/g;function fu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(du,fu);je[t]=new He(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(du,fu);je[t]=new He(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(du,fu);je[t]=new He(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){je[e]=new He(e,1,!1,e.toLowerCase(),null,!1,!1)});je.xlinkHref=new He("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){je[e]=new He(e,1,!1,e.toLowerCase(),null,!0,!0)});function pu(e,t,n,a){var r=je.hasOwnProperty(t)?je[t]:null;(r!==null?r.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Ib(t,n,r,a)&&(n=null),a||r===null?Sb(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=n===null?r.type===3?!1:"":n:(t=r.attributeName,a=r.attributeNamespace,n===null?e.removeAttribute(t):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,a?e.setAttributeNS(a,t,n):e.setAttribute(t,n))))}var mn=_b.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qo=Symbol.for("react.element"),Na=Symbol.for("react.portal"),Ra=Symbol.for("react.fragment"),mu=Symbol.for("react.strict_mode"),Hc=Symbol.for("react.profiler"),Mp=Symbol.for("react.provider"),Op=Symbol.for("react.context"),gu=Symbol.for("react.forward_ref"),Bc=Symbol.for("react.suspense"),Vc=Symbol.for("react.suspense_list"),yu=Symbol.for("react.memo"),kn=Symbol.for("react.lazy"),Dp=Symbol.for("react.offscreen"),nd=Symbol.iterator;function Lr(e){return e===null||typeof e!="object"?null:(e=nd&&e[nd]||e["@@iterator"],typeof e=="function"?e:null)}var pe=Object.assign,ec;function Ur(e){if(ec===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ec=t&&t[1]||""}return`
`+ec+e}var tc=!1;function nc(e,t){if(!e||tc)return"";tc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var a=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){a=u}e.call(t.prototype)}else{try{throw Error()}catch(u){a=u}e()}}catch(u){if(u&&a&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),o=a.stack.split(`
`),i=r.length-1,s=o.length-1;1<=i&&0<=s&&r[i]!==o[s];)s--;for(;1<=i&&0<=s;i--,s--)if(r[i]!==o[s]){if(i!==1||s!==1)do if(i--,s--,0>s||r[i]!==o[s]){var l=`
`+r[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=i&&0<=s);break}}}finally{tc=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ur(e):""}function Tb(e){switch(e.tag){case 5:return Ur(e.type);case 16:return Ur("Lazy");case 13:return Ur("Suspense");case 19:return Ur("SuspenseList");case 0:case 2:case 15:return e=nc(e.type,!1),e;case 11:return e=nc(e.type.render,!1),e;case 1:return e=nc(e.type,!0),e;default:return""}}function Uc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ra:return"Fragment";case Na:return"Portal";case Hc:return"Profiler";case mu:return"StrictMode";case Bc:return"Suspense";case Vc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Op:return(e.displayName||"Context")+".Consumer";case Mp:return(e._context.displayName||"Context")+".Provider";case gu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case yu:return t=e.displayName||null,t!==null?t:Uc(e.type)||"Memo";case kn:t=e._payload,e=e._init;try{return Uc(e(t))}catch{}}return null}function qb(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Uc(t);case 8:return t===mu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function $n(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function zp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Eb(e){var t=zp(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(i){a=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(i){a=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Xo(e){e._valueTracker||(e._valueTracker=Eb(e))}function Wp(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=zp(e)?e.checked?"true":"false":e.value),e=a,e!==n?(t.setValue(e),!0):!1}function zi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function $c(e,t){var n=t.checked;return pe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function ad(e,t){var n=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;n=$n(t.value!=null?t.value:n),e._wrapperState={initialChecked:a,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Fp(e,t){t=t.checked,t!=null&&pu(e,"checked",t,!1)}function Gc(e,t){Fp(e,t);var n=$n(t.value),a=t.type;if(n!=null)a==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Kc(e,t.type,n):t.hasOwnProperty("defaultValue")&&Kc(e,t.type,$n(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function rd(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Kc(e,t,n){(t!=="number"||zi(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var $r=Array.isArray;function Ba(e,t,n,a){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&a&&(e[n].defaultSelected=!0)}else{for(n=""+$n(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,a&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function Qc(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(j(91));return pe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function od(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(j(92));if($r(n)){if(1<n.length)throw Error(j(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:$n(n)}}function Yp(e,t){var n=$n(t.value),a=$n(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),a!=null&&(e.defaultValue=""+a)}function id(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Hp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xc(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Hp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Zo,Bp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,a,r){MSApp.execUnsafeLocalFunction(function(){return e(t,n,a,r)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Zo=Zo||document.createElement("div"),Zo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Zo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ho(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Zr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Pb=["Webkit","ms","Moz","O"];Object.keys(Zr).forEach(function(e){Pb.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Zr[t]=Zr[e]})});function Vp(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Zr.hasOwnProperty(e)&&Zr[e]?(""+t).trim():t+"px"}function Up(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var a=n.indexOf("--")===0,r=Vp(n,t[n],a);n==="float"&&(n="cssFloat"),a?e.setProperty(n,r):e[n]=r}}var jb=pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zc(e,t){if(t){if(jb[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(j(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(j(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(j(61))}if(t.style!=null&&typeof t.style!="object")throw Error(j(62))}}function Jc(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var el=null;function vu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var tl=null,Va=null,Ua=null;function sd(e){if(e=Fo(e)){if(typeof tl!="function")throw Error(j(280));var t=e.stateNode;t&&(t=Cs(t),tl(e.stateNode,e.type,t))}}function $p(e){Va?Ua?Ua.push(e):Ua=[e]:Va=e}function Gp(){if(Va){var e=Va,t=Ua;if(Ua=Va=null,sd(e),t)for(e=0;e<t.length;e++)sd(t[e])}}function Kp(e,t){return e(t)}function Qp(){}var ac=!1;function Xp(e,t,n){if(ac)return e(t,n);ac=!0;try{return Kp(e,t,n)}finally{ac=!1,(Va!==null||Ua!==null)&&(Qp(),Gp())}}function fo(e,t){var n=e.stateNode;if(n===null)return null;var a=Cs(n);if(a===null)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(j(231,t,typeof n));return n}var nl=!1;if(cn)try{var Mr={};Object.defineProperty(Mr,"passive",{get:function(){nl=!0}}),window.addEventListener("test",Mr,Mr),window.removeEventListener("test",Mr,Mr)}catch{nl=!1}function Nb(e,t,n,a,r,o,i,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(h){this.onError(h)}}var Jr=!1,Wi=null,Fi=!1,al=null,Rb={onError:function(e){Jr=!0,Wi=e}};function Ab(e,t,n,a,r,o,i,s,l){Jr=!1,Wi=null,Nb.apply(Rb,arguments)}function Lb(e,t,n,a,r,o,i,s,l){if(Ab.apply(this,arguments),Jr){if(Jr){var u=Wi;Jr=!1,Wi=null}else throw Error(j(198));Fi||(Fi=!0,al=u)}}function Ta(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Zp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function cd(e){if(Ta(e)!==e)throw Error(j(188))}function Mb(e){var t=e.alternate;if(!t){if(t=Ta(e),t===null)throw Error(j(188));return t!==e?null:e}for(var n=e,a=t;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(a=r.return,a!==null){n=a;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return cd(r),e;if(o===a)return cd(r),t;o=o.sibling}throw Error(j(188))}if(n.return!==a.return)n=r,a=o;else{for(var i=!1,s=r.child;s;){if(s===n){i=!0,n=r,a=o;break}if(s===a){i=!0,a=r,n=o;break}s=s.sibling}if(!i){for(s=o.child;s;){if(s===n){i=!0,n=o,a=r;break}if(s===a){i=!0,a=o,n=r;break}s=s.sibling}if(!i)throw Error(j(189))}}if(n.alternate!==a)throw Error(j(190))}if(n.tag!==3)throw Error(j(188));return n.stateNode.current===n?e:t}function Jp(e){return e=Mb(e),e!==null?em(e):null}function em(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=em(e);if(t!==null)return t;e=e.sibling}return null}var tm=ot.unstable_scheduleCallback,ld=ot.unstable_cancelCallback,Ob=ot.unstable_shouldYield,Db=ot.unstable_requestPaint,ve=ot.unstable_now,zb=ot.unstable_getCurrentPriorityLevel,wu=ot.unstable_ImmediatePriority,nm=ot.unstable_UserBlockingPriority,Yi=ot.unstable_NormalPriority,Wb=ot.unstable_LowPriority,am=ot.unstable_IdlePriority,xs=null,Yt=null;function Fb(e){if(Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(xs,e,void 0,(e.current.flags&128)===128)}catch{}}var It=Math.clz32?Math.clz32:Bb,Yb=Math.log,Hb=Math.LN2;function Bb(e){return e>>>=0,e===0?32:31-(Yb(e)/Hb|0)|0}var Jo=64,ei=4194304;function Gr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Hi(e,t){var n=e.pendingLanes;if(n===0)return 0;var a=0,r=e.suspendedLanes,o=e.pingedLanes,i=n&268435455;if(i!==0){var s=i&~r;s!==0?a=Gr(s):(o&=i,o!==0&&(a=Gr(o)))}else i=n&~r,i!==0?a=Gr(i):o!==0&&(a=Gr(o));if(a===0)return 0;if(t!==0&&t!==a&&!(t&r)&&(r=a&-a,o=t&-t,r>=o||r===16&&(o&4194240)!==0))return t;if(a&4&&(a|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)n=31-It(t),r=1<<n,a|=e[n],t&=~r;return a}function Vb(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ub(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,r=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-It(o),s=1<<i,l=r[i];l===-1?(!(s&n)||s&a)&&(r[i]=Vb(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}function rl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function rm(){var e=Jo;return Jo<<=1,!(Jo&4194240)&&(Jo=64),e}function rc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zo(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-It(t),e[t]=n}function $b(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-It(n),o=1<<r;t[r]=0,a[r]=-1,e[r]=-1,n&=~o}}function bu(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-It(n),r=1<<a;r&t|e[a]&t&&(e[a]|=t),n&=~r}}var te=0;function om(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var im,xu,sm,cm,lm,ol=!1,ti=[],zn=null,Wn=null,Fn=null,po=new Map,mo=new Map,Cn=[],Gb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ud(e,t){switch(e){case"focusin":case"focusout":zn=null;break;case"dragenter":case"dragleave":Wn=null;break;case"mouseover":case"mouseout":Fn=null;break;case"pointerover":case"pointerout":po.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":mo.delete(t.pointerId)}}function Or(e,t,n,a,r,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:o,targetContainers:[r]},t!==null&&(t=Fo(t),t!==null&&xu(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function Kb(e,t,n,a,r){switch(t){case"focusin":return zn=Or(zn,e,t,n,a,r),!0;case"dragenter":return Wn=Or(Wn,e,t,n,a,r),!0;case"mouseover":return Fn=Or(Fn,e,t,n,a,r),!0;case"pointerover":var o=r.pointerId;return po.set(o,Or(po.get(o)||null,e,t,n,a,r)),!0;case"gotpointercapture":return o=r.pointerId,mo.set(o,Or(mo.get(o)||null,e,t,n,a,r)),!0}return!1}function um(e){var t=oa(e.target);if(t!==null){var n=Ta(t);if(n!==null){if(t=n.tag,t===13){if(t=Zp(n),t!==null){e.blockedOn=t,lm(e.priority,function(){sm(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function _i(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=il(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var a=new n.constructor(n.type,n);el=a,n.target.dispatchEvent(a),el=null}else return t=Fo(n),t!==null&&xu(t),e.blockedOn=n,!1;t.shift()}return!0}function hd(e,t,n){_i(e)&&n.delete(t)}function Qb(){ol=!1,zn!==null&&_i(zn)&&(zn=null),Wn!==null&&_i(Wn)&&(Wn=null),Fn!==null&&_i(Fn)&&(Fn=null),po.forEach(hd),mo.forEach(hd)}function Dr(e,t){e.blockedOn===t&&(e.blockedOn=null,ol||(ol=!0,ot.unstable_scheduleCallback(ot.unstable_NormalPriority,Qb)))}function go(e){function t(r){return Dr(r,e)}if(0<ti.length){Dr(ti[0],e);for(var n=1;n<ti.length;n++){var a=ti[n];a.blockedOn===e&&(a.blockedOn=null)}}for(zn!==null&&Dr(zn,e),Wn!==null&&Dr(Wn,e),Fn!==null&&Dr(Fn,e),po.forEach(t),mo.forEach(t),n=0;n<Cn.length;n++)a=Cn[n],a.blockedOn===e&&(a.blockedOn=null);for(;0<Cn.length&&(n=Cn[0],n.blockedOn===null);)um(n),n.blockedOn===null&&Cn.shift()}var $a=mn.ReactCurrentBatchConfig,Bi=!0;function Xb(e,t,n,a){var r=te,o=$a.transition;$a.transition=null;try{te=1,_u(e,t,n,a)}finally{te=r,$a.transition=o}}function Zb(e,t,n,a){var r=te,o=$a.transition;$a.transition=null;try{te=4,_u(e,t,n,a)}finally{te=r,$a.transition=o}}function _u(e,t,n,a){if(Bi){var r=il(e,t,n,a);if(r===null)pc(e,t,a,Vi,n),ud(e,a);else if(Kb(r,e,t,n,a))a.stopPropagation();else if(ud(e,a),t&4&&-1<Gb.indexOf(e)){for(;r!==null;){var o=Fo(r);if(o!==null&&im(o),o=il(e,t,n,a),o===null&&pc(e,t,a,Vi,n),o===r)break;r=o}r!==null&&a.stopPropagation()}else pc(e,t,a,null,n)}}var Vi=null;function il(e,t,n,a){if(Vi=null,e=vu(a),e=oa(e),e!==null)if(t=Ta(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Zp(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Vi=e,null}function hm(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zb()){case wu:return 1;case nm:return 4;case Yi:case Wb:return 16;case am:return 536870912;default:return 16}default:return 16}}var On=null,ku=null,ki=null;function dm(){if(ki)return ki;var e,t=ku,n=t.length,a,r="value"in On?On.value:On.textContent,o=r.length;for(e=0;e<n&&t[e]===r[e];e++);var i=n-e;for(a=1;a<=i&&t[n-a]===r[o-a];a++);return ki=r.slice(e,1<a?1-a:void 0)}function Si(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ni(){return!0}function dd(){return!1}function st(e){function t(n,a,r,o,i){this._reactName=n,this._targetInst=r,this.type=a,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ni:dd,this.isPropagationStopped=dd,this}return pe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ni)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ni)},persist:function(){},isPersistent:ni}),t}var Tr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Su=st(Tr),Wo=pe({},Tr,{view:0,detail:0}),Jb=st(Wo),oc,ic,zr,_s=pe({},Wo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==zr&&(zr&&e.type==="mousemove"?(oc=e.screenX-zr.screenX,ic=e.screenY-zr.screenY):ic=oc=0,zr=e),oc)},movementY:function(e){return"movementY"in e?e.movementY:ic}}),fd=st(_s),ex=pe({},_s,{dataTransfer:0}),tx=st(ex),nx=pe({},Wo,{relatedTarget:0}),sc=st(nx),ax=pe({},Tr,{animationName:0,elapsedTime:0,pseudoElement:0}),rx=st(ax),ox=pe({},Tr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ix=st(ox),sx=pe({},Tr,{data:0}),pd=st(sx),cx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ux={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ux[e])?!!t[e]:!1}function Cu(){return hx}var dx=pe({},Wo,{key:function(e){if(e.key){var t=cx[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Si(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?lx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cu,charCode:function(e){return e.type==="keypress"?Si(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Si(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),fx=st(dx),px=pe({},_s,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),md=st(px),mx=pe({},Wo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cu}),gx=st(mx),yx=pe({},Tr,{propertyName:0,elapsedTime:0,pseudoElement:0}),vx=st(yx),wx=pe({},_s,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),bx=st(wx),xx=[9,13,27,32],Iu=cn&&"CompositionEvent"in window,eo=null;cn&&"documentMode"in document&&(eo=document.documentMode);var _x=cn&&"TextEvent"in window&&!eo,fm=cn&&(!Iu||eo&&8<eo&&11>=eo),gd=" ",yd=!1;function pm(e,t){switch(e){case"keyup":return xx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Aa=!1;function kx(e,t){switch(e){case"compositionend":return mm(t);case"keypress":return t.which!==32?null:(yd=!0,gd);case"textInput":return e=t.data,e===gd&&yd?null:e;default:return null}}function Sx(e,t){if(Aa)return e==="compositionend"||!Iu&&pm(e,t)?(e=dm(),ki=ku=On=null,Aa=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return fm&&t.locale!=="ko"?null:t.data;default:return null}}var Cx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Cx[e.type]:t==="textarea"}function gm(e,t,n,a){$p(a),t=Ui(t,"onChange"),0<t.length&&(n=new Su("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var to=null,yo=null;function Ix(e){Tm(e,0)}function ks(e){var t=Oa(e);if(Wp(t))return e}function Tx(e,t){if(e==="change")return t}var ym=!1;if(cn){var cc;if(cn){var lc="oninput"in document;if(!lc){var wd=document.createElement("div");wd.setAttribute("oninput","return;"),lc=typeof wd.oninput=="function"}cc=lc}else cc=!1;ym=cc&&(!document.documentMode||9<document.documentMode)}function bd(){to&&(to.detachEvent("onpropertychange",vm),yo=to=null)}function vm(e){if(e.propertyName==="value"&&ks(yo)){var t=[];gm(t,yo,e,vu(e)),Xp(Ix,t)}}function qx(e,t,n){e==="focusin"?(bd(),to=t,yo=n,to.attachEvent("onpropertychange",vm)):e==="focusout"&&bd()}function Ex(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ks(yo)}function Px(e,t){if(e==="click")return ks(t)}function jx(e,t){if(e==="input"||e==="change")return ks(t)}function Nx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qt=typeof Object.is=="function"?Object.is:Nx;function vo(e,t){if(qt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var r=n[a];if(!Yc.call(t,r)||!qt(e[r],t[r]))return!1}return!0}function xd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _d(e,t){var n=xd(e);e=0;for(var a;n;){if(n.nodeType===3){if(a=e+n.textContent.length,e<=t&&a>=t)return{node:n,offset:t-e};e=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=xd(n)}}function wm(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?wm(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function bm(){for(var e=window,t=zi();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=zi(e.document)}return t}function Tu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Rx(e){var t=bm(),n=e.focusedElem,a=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&wm(n.ownerDocument.documentElement,n)){if(a!==null&&Tu(n)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var r=n.textContent.length,o=Math.min(a.start,r);a=a.end===void 0?o:Math.min(a.end,r),!e.extend&&o>a&&(r=a,a=o,o=r),r=_d(n,o);var i=_d(n,a);r&&i&&(e.rangeCount!==1||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(r.node,r.offset),e.removeAllRanges(),o>a?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ax=cn&&"documentMode"in document&&11>=document.documentMode,La=null,sl=null,no=null,cl=!1;function kd(e,t,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;cl||La==null||La!==zi(a)||(a=La,"selectionStart"in a&&Tu(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),no&&vo(no,a)||(no=a,a=Ui(sl,"onSelect"),0<a.length&&(t=new Su("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=La)))}function ai(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ma={animationend:ai("Animation","AnimationEnd"),animationiteration:ai("Animation","AnimationIteration"),animationstart:ai("Animation","AnimationStart"),transitionend:ai("Transition","TransitionEnd")},uc={},xm={};cn&&(xm=document.createElement("div").style,"AnimationEvent"in window||(delete Ma.animationend.animation,delete Ma.animationiteration.animation,delete Ma.animationstart.animation),"TransitionEvent"in window||delete Ma.transitionend.transition);function Ss(e){if(uc[e])return uc[e];if(!Ma[e])return e;var t=Ma[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in xm)return uc[e]=t[n];return e}var _m=Ss("animationend"),km=Ss("animationiteration"),Sm=Ss("animationstart"),Cm=Ss("transitionend"),Im=new Map,Sd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zn(e,t){Im.set(e,t),Ia(t,[e])}for(var hc=0;hc<Sd.length;hc++){var dc=Sd[hc],Lx=dc.toLowerCase(),Mx=dc[0].toUpperCase()+dc.slice(1);Zn(Lx,"on"+Mx)}Zn(_m,"onAnimationEnd");Zn(km,"onAnimationIteration");Zn(Sm,"onAnimationStart");Zn("dblclick","onDoubleClick");Zn("focusin","onFocus");Zn("focusout","onBlur");Zn(Cm,"onTransitionEnd");pr("onMouseEnter",["mouseout","mouseover"]);pr("onMouseLeave",["mouseout","mouseover"]);pr("onPointerEnter",["pointerout","pointerover"]);pr("onPointerLeave",["pointerout","pointerover"]);Ia("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ia("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ia("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ia("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ia("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ia("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ox=new Set("cancel close invalid load scroll toggle".split(" ").concat(Kr));function Cd(e,t,n){var a=e.type||"unknown-event";e.currentTarget=n,Lb(a,t,void 0,e),e.currentTarget=null}function Tm(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var a=e[n],r=a.event;a=a.listeners;e:{var o=void 0;if(t)for(var i=a.length-1;0<=i;i--){var s=a[i],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&r.isPropagationStopped())break e;Cd(r,s,u),o=l}else for(i=0;i<a.length;i++){if(s=a[i],l=s.instance,u=s.currentTarget,s=s.listener,l!==o&&r.isPropagationStopped())break e;Cd(r,s,u),o=l}}}if(Fi)throw e=al,Fi=!1,al=null,e}function ie(e,t){var n=t[fl];n===void 0&&(n=t[fl]=new Set);var a=e+"__bubble";n.has(a)||(qm(t,e,2,!1),n.add(a))}function fc(e,t,n){var a=0;t&&(a|=4),qm(n,e,a,t)}var ri="_reactListening"+Math.random().toString(36).slice(2);function wo(e){if(!e[ri]){e[ri]=!0,Lp.forEach(function(n){n!=="selectionchange"&&(Ox.has(n)||fc(n,!1,e),fc(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ri]||(t[ri]=!0,fc("selectionchange",!1,t))}}function qm(e,t,n,a){switch(hm(t)){case 1:var r=Xb;break;case 4:r=Zb;break;default:r=_u}n=r.bind(null,t,n,e),r=void 0,!nl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),a?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function pc(e,t,n,a,r){var o=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var i=a.tag;if(i===3||i===4){var s=a.stateNode.containerInfo;if(s===r||s.nodeType===8&&s.parentNode===r)break;if(i===4)for(i=a.return;i!==null;){var l=i.tag;if((l===3||l===4)&&(l=i.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;i=i.return}for(;s!==null;){if(i=oa(s),i===null)return;if(l=i.tag,l===5||l===6){a=o=i;continue e}s=s.parentNode}}a=a.return}Xp(function(){var u=o,h=vu(n),d=[];e:{var f=Im.get(e);if(f!==void 0){var w=Su,x=e;switch(e){case"keypress":if(Si(n)===0)break e;case"keydown":case"keyup":w=fx;break;case"focusin":x="focus",w=sc;break;case"focusout":x="blur",w=sc;break;case"beforeblur":case"afterblur":w=sc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=fd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=tx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=gx;break;case _m:case km:case Sm:w=rx;break;case Cm:w=vx;break;case"scroll":w=Jb;break;case"wheel":w=bx;break;case"copy":case"cut":case"paste":w=ix;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=md}var m=(t&4)!==0,_=!m&&e==="scroll",g=m?f!==null?f+"Capture":null:f;m=[];for(var y=u,v;y!==null;){v=y;var k=v.stateNode;if(v.tag===5&&k!==null&&(v=k,g!==null&&(k=fo(y,g),k!=null&&m.push(bo(y,k,v)))),_)break;y=y.return}0<m.length&&(f=new w(f,x,null,n,h),d.push({event:f,listeners:m}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",f&&n!==el&&(x=n.relatedTarget||n.fromElement)&&(oa(x)||x[ln]))break e;if((w||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,w?(x=n.relatedTarget||n.toElement,w=u,x=x?oa(x):null,x!==null&&(_=Ta(x),x!==_||x.tag!==5&&x.tag!==6)&&(x=null)):(w=null,x=u),w!==x)){if(m=fd,k="onMouseLeave",g="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(m=md,k="onPointerLeave",g="onPointerEnter",y="pointer"),_=w==null?f:Oa(w),v=x==null?f:Oa(x),f=new m(k,y+"leave",w,n,h),f.target=_,f.relatedTarget=v,k=null,oa(h)===u&&(m=new m(g,y+"enter",x,n,h),m.target=v,m.relatedTarget=_,k=m),_=k,w&&x)t:{for(m=w,g=x,y=0,v=m;v;v=qa(v))y++;for(v=0,k=g;k;k=qa(k))v++;for(;0<y-v;)m=qa(m),y--;for(;0<v-y;)g=qa(g),v--;for(;y--;){if(m===g||g!==null&&m===g.alternate)break t;m=qa(m),g=qa(g)}m=null}else m=null;w!==null&&Id(d,f,w,m,!1),x!==null&&_!==null&&Id(d,_,x,m,!0)}}e:{if(f=u?Oa(u):window,w=f.nodeName&&f.nodeName.toLowerCase(),w==="select"||w==="input"&&f.type==="file")var S=Tx;else if(vd(f))if(ym)S=jx;else{S=Ex;var T=qx}else(w=f.nodeName)&&w.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=Px);if(S&&(S=S(e,u))){gm(d,S,n,h);break e}T&&T(e,f,u),e==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&Kc(f,"number",f.value)}switch(T=u?Oa(u):window,e){case"focusin":(vd(T)||T.contentEditable==="true")&&(La=T,sl=u,no=null);break;case"focusout":no=sl=La=null;break;case"mousedown":cl=!0;break;case"contextmenu":case"mouseup":case"dragend":cl=!1,kd(d,n,h);break;case"selectionchange":if(Ax)break;case"keydown":case"keyup":kd(d,n,h)}var I;if(Iu)e:{switch(e){case"compositionstart":var q="onCompositionStart";break e;case"compositionend":q="onCompositionEnd";break e;case"compositionupdate":q="onCompositionUpdate";break e}q=void 0}else Aa?pm(e,n)&&(q="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(q="onCompositionStart");q&&(fm&&n.locale!=="ko"&&(Aa||q!=="onCompositionStart"?q==="onCompositionEnd"&&Aa&&(I=dm()):(On=h,ku="value"in On?On.value:On.textContent,Aa=!0)),T=Ui(u,q),0<T.length&&(q=new pd(q,e,null,n,h),d.push({event:q,listeners:T}),I?q.data=I:(I=mm(n),I!==null&&(q.data=I)))),(I=_x?kx(e,n):Sx(e,n))&&(u=Ui(u,"onBeforeInput"),0<u.length&&(h=new pd("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:u}),h.data=I))}Tm(d,t)})}function bo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ui(e,t){for(var n=t+"Capture",a=[];e!==null;){var r=e,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=fo(e,n),o!=null&&a.unshift(bo(e,o,r)),o=fo(e,t),o!=null&&a.push(bo(e,o,r))),e=e.return}return a}function qa(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Id(e,t,n,a,r){for(var o=t._reactName,i=[];n!==null&&n!==a;){var s=n,l=s.alternate,u=s.stateNode;if(l!==null&&l===a)break;s.tag===5&&u!==null&&(s=u,r?(l=fo(n,o),l!=null&&i.unshift(bo(n,l,s))):r||(l=fo(n,o),l!=null&&i.push(bo(n,l,s)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var Dx=/\r\n?/g,zx=/\u0000|\uFFFD/g;function Td(e){return(typeof e=="string"?e:""+e).replace(Dx,`
`).replace(zx,"")}function oi(e,t,n){if(t=Td(t),Td(e)!==t&&n)throw Error(j(425))}function $i(){}var ll=null,ul=null;function hl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var dl=typeof setTimeout=="function"?setTimeout:void 0,Wx=typeof clearTimeout=="function"?clearTimeout:void 0,qd=typeof Promise=="function"?Promise:void 0,Fx=typeof queueMicrotask=="function"?queueMicrotask:typeof qd<"u"?function(e){return qd.resolve(null).then(e).catch(Yx)}:dl;function Yx(e){setTimeout(function(){throw e})}function mc(e,t){var n=t,a=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(a===0){e.removeChild(r),go(t);return}a--}else n!=="$"&&n!=="$?"&&n!=="$!"||a++;n=r}while(n);go(t)}function Yn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ed(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var qr=Math.random().toString(36).slice(2),Wt="__reactFiber$"+qr,xo="__reactProps$"+qr,ln="__reactContainer$"+qr,fl="__reactEvents$"+qr,Hx="__reactListeners$"+qr,Bx="__reactHandles$"+qr;function oa(e){var t=e[Wt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ln]||n[Wt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Ed(e);e!==null;){if(n=e[Wt])return n;e=Ed(e)}return t}e=n,n=e.parentNode}return null}function Fo(e){return e=e[Wt]||e[ln],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Oa(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(j(33))}function Cs(e){return e[xo]||null}var pl=[],Da=-1;function Jn(e){return{current:e}}function se(e){0>Da||(e.current=pl[Da],pl[Da]=null,Da--)}function re(e,t){Da++,pl[Da]=e.current,e.current=t}var Gn={},Oe=Jn(Gn),Ge=Jn(!1),ya=Gn;function mr(e,t){var n=e.type.contextTypes;if(!n)return Gn;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=t[o];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function Ke(e){return e=e.childContextTypes,e!=null}function Gi(){se(Ge),se(Oe)}function Pd(e,t,n){if(Oe.current!==Gn)throw Error(j(168));re(Oe,t),re(Ge,n)}function Em(e,t,n){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return n;a=a.getChildContext();for(var r in a)if(!(r in t))throw Error(j(108,qb(e)||"Unknown",r));return pe({},n,a)}function Ki(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Gn,ya=Oe.current,re(Oe,e),re(Ge,Ge.current),!0}function jd(e,t,n){var a=e.stateNode;if(!a)throw Error(j(169));n?(e=Em(e,t,ya),a.__reactInternalMemoizedMergedChildContext=e,se(Ge),se(Oe),re(Oe,e)):se(Ge),re(Ge,n)}var en=null,Is=!1,gc=!1;function Pm(e){en===null?en=[e]:en.push(e)}function Vx(e){Is=!0,Pm(e)}function ea(){if(!gc&&en!==null){gc=!0;var e=0,t=te;try{var n=en;for(te=1;e<n.length;e++){var a=n[e];do a=a(!0);while(a!==null)}en=null,Is=!1}catch(r){throw en!==null&&(en=en.slice(e+1)),tm(wu,ea),r}finally{te=t,gc=!1}}return null}var za=[],Wa=0,Qi=null,Xi=0,dt=[],ft=0,va=null,nn=1,an="";function aa(e,t){za[Wa++]=Xi,za[Wa++]=Qi,Qi=e,Xi=t}function jm(e,t,n){dt[ft++]=nn,dt[ft++]=an,dt[ft++]=va,va=e;var a=nn;e=an;var r=32-It(a)-1;a&=~(1<<r),n+=1;var o=32-It(t)+r;if(30<o){var i=r-r%5;o=(a&(1<<i)-1).toString(32),a>>=i,r-=i,nn=1<<32-It(t)+r|n<<r|a,an=o+e}else nn=1<<o|n<<r|a,an=e}function qu(e){e.return!==null&&(aa(e,1),jm(e,1,0))}function Eu(e){for(;e===Qi;)Qi=za[--Wa],za[Wa]=null,Xi=za[--Wa],za[Wa]=null;for(;e===va;)va=dt[--ft],dt[ft]=null,an=dt[--ft],dt[ft]=null,nn=dt[--ft],dt[ft]=null}var at=null,nt=null,le=!1,St=null;function Nm(e,t){var n=pt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Nd(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,at=e,nt=Yn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,at=e,nt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=va!==null?{id:nn,overflow:an}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=pt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,at=e,nt=null,!0):!1;default:return!1}}function ml(e){return(e.mode&1)!==0&&(e.flags&128)===0}function gl(e){if(le){var t=nt;if(t){var n=t;if(!Nd(e,t)){if(ml(e))throw Error(j(418));t=Yn(n.nextSibling);var a=at;t&&Nd(e,t)?Nm(a,n):(e.flags=e.flags&-4097|2,le=!1,at=e)}}else{if(ml(e))throw Error(j(418));e.flags=e.flags&-4097|2,le=!1,at=e}}}function Rd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;at=e}function ii(e){if(e!==at)return!1;if(!le)return Rd(e),le=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!hl(e.type,e.memoizedProps)),t&&(t=nt)){if(ml(e))throw Rm(),Error(j(418));for(;t;)Nm(e,t),t=Yn(t.nextSibling)}if(Rd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(j(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){nt=Yn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}nt=null}}else nt=at?Yn(e.stateNode.nextSibling):null;return!0}function Rm(){for(var e=nt;e;)e=Yn(e.nextSibling)}function gr(){nt=at=null,le=!1}function Pu(e){St===null?St=[e]:St.push(e)}var Ux=mn.ReactCurrentBatchConfig;function Wr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(j(309));var a=n.stateNode}if(!a)throw Error(j(147,e));var r=a,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var s=r.refs;i===null?delete s[o]:s[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(j(284));if(!n._owner)throw Error(j(290,e))}return e}function si(e,t){throw e=Object.prototype.toString.call(t),Error(j(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ad(e){var t=e._init;return t(e._payload)}function Am(e){function t(g,y){if(e){var v=g.deletions;v===null?(g.deletions=[y],g.flags|=16):v.push(y)}}function n(g,y){if(!e)return null;for(;y!==null;)t(g,y),y=y.sibling;return null}function a(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function r(g,y){return g=Un(g,y),g.index=0,g.sibling=null,g}function o(g,y,v){return g.index=v,e?(v=g.alternate,v!==null?(v=v.index,v<y?(g.flags|=2,y):v):(g.flags|=2,y)):(g.flags|=1048576,y)}function i(g){return e&&g.alternate===null&&(g.flags|=2),g}function s(g,y,v,k){return y===null||y.tag!==6?(y=kc(v,g.mode,k),y.return=g,y):(y=r(y,v),y.return=g,y)}function l(g,y,v,k){var S=v.type;return S===Ra?h(g,y,v.props.children,k,v.key):y!==null&&(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===kn&&Ad(S)===y.type)?(k=r(y,v.props),k.ref=Wr(g,y,v),k.return=g,k):(k=ji(v.type,v.key,v.props,null,g.mode,k),k.ref=Wr(g,y,v),k.return=g,k)}function u(g,y,v,k){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=Sc(v,g.mode,k),y.return=g,y):(y=r(y,v.children||[]),y.return=g,y)}function h(g,y,v,k,S){return y===null||y.tag!==7?(y=ga(v,g.mode,k,S),y.return=g,y):(y=r(y,v),y.return=g,y)}function d(g,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=kc(""+y,g.mode,v),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Qo:return v=ji(y.type,y.key,y.props,null,g.mode,v),v.ref=Wr(g,null,y),v.return=g,v;case Na:return y=Sc(y,g.mode,v),y.return=g,y;case kn:var k=y._init;return d(g,k(y._payload),v)}if($r(y)||Lr(y))return y=ga(y,g.mode,v,null),y.return=g,y;si(g,y)}return null}function f(g,y,v,k){var S=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return S!==null?null:s(g,y,""+v,k);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Qo:return v.key===S?l(g,y,v,k):null;case Na:return v.key===S?u(g,y,v,k):null;case kn:return S=v._init,f(g,y,S(v._payload),k)}if($r(v)||Lr(v))return S!==null?null:h(g,y,v,k,null);si(g,v)}return null}function w(g,y,v,k,S){if(typeof k=="string"&&k!==""||typeof k=="number")return g=g.get(v)||null,s(y,g,""+k,S);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Qo:return g=g.get(k.key===null?v:k.key)||null,l(y,g,k,S);case Na:return g=g.get(k.key===null?v:k.key)||null,u(y,g,k,S);case kn:var T=k._init;return w(g,y,v,T(k._payload),S)}if($r(k)||Lr(k))return g=g.get(v)||null,h(y,g,k,S,null);si(y,k)}return null}function x(g,y,v,k){for(var S=null,T=null,I=y,q=y=0,P=null;I!==null&&q<v.length;q++){I.index>q?(P=I,I=null):P=I.sibling;var N=f(g,I,v[q],k);if(N===null){I===null&&(I=P);break}e&&I&&N.alternate===null&&t(g,I),y=o(N,y,q),T===null?S=N:T.sibling=N,T=N,I=P}if(q===v.length)return n(g,I),le&&aa(g,q),S;if(I===null){for(;q<v.length;q++)I=d(g,v[q],k),I!==null&&(y=o(I,y,q),T===null?S=I:T.sibling=I,T=I);return le&&aa(g,q),S}for(I=a(g,I);q<v.length;q++)P=w(I,g,q,v[q],k),P!==null&&(e&&P.alternate!==null&&I.delete(P.key===null?q:P.key),y=o(P,y,q),T===null?S=P:T.sibling=P,T=P);return e&&I.forEach(function(D){return t(g,D)}),le&&aa(g,q),S}function m(g,y,v,k){var S=Lr(v);if(typeof S!="function")throw Error(j(150));if(v=S.call(v),v==null)throw Error(j(151));for(var T=S=null,I=y,q=y=0,P=null,N=v.next();I!==null&&!N.done;q++,N=v.next()){I.index>q?(P=I,I=null):P=I.sibling;var D=f(g,I,N.value,k);if(D===null){I===null&&(I=P);break}e&&I&&D.alternate===null&&t(g,I),y=o(D,y,q),T===null?S=D:T.sibling=D,T=D,I=P}if(N.done)return n(g,I),le&&aa(g,q),S;if(I===null){for(;!N.done;q++,N=v.next())N=d(g,N.value,k),N!==null&&(y=o(N,y,q),T===null?S=N:T.sibling=N,T=N);return le&&aa(g,q),S}for(I=a(g,I);!N.done;q++,N=v.next())N=w(I,g,q,N.value,k),N!==null&&(e&&N.alternate!==null&&I.delete(N.key===null?q:N.key),y=o(N,y,q),T===null?S=N:T.sibling=N,T=N);return e&&I.forEach(function(O){return t(g,O)}),le&&aa(g,q),S}function _(g,y,v,k){if(typeof v=="object"&&v!==null&&v.type===Ra&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Qo:e:{for(var S=v.key,T=y;T!==null;){if(T.key===S){if(S=v.type,S===Ra){if(T.tag===7){n(g,T.sibling),y=r(T,v.props.children),y.return=g,g=y;break e}}else if(T.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===kn&&Ad(S)===T.type){n(g,T.sibling),y=r(T,v.props),y.ref=Wr(g,T,v),y.return=g,g=y;break e}n(g,T);break}else t(g,T);T=T.sibling}v.type===Ra?(y=ga(v.props.children,g.mode,k,v.key),y.return=g,g=y):(k=ji(v.type,v.key,v.props,null,g.mode,k),k.ref=Wr(g,y,v),k.return=g,g=k)}return i(g);case Na:e:{for(T=v.key;y!==null;){if(y.key===T)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){n(g,y.sibling),y=r(y,v.children||[]),y.return=g,g=y;break e}else{n(g,y);break}else t(g,y);y=y.sibling}y=Sc(v,g.mode,k),y.return=g,g=y}return i(g);case kn:return T=v._init,_(g,y,T(v._payload),k)}if($r(v))return x(g,y,v,k);if(Lr(v))return m(g,y,v,k);si(g,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(n(g,y.sibling),y=r(y,v),y.return=g,g=y):(n(g,y),y=kc(v,g.mode,k),y.return=g,g=y),i(g)):n(g,y)}return _}var yr=Am(!0),Lm=Am(!1),Zi=Jn(null),Ji=null,Fa=null,ju=null;function Nu(){ju=Fa=Ji=null}function Ru(e){var t=Zi.current;se(Zi),e._currentValue=t}function yl(e,t,n){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function Ga(e,t){Ji=e,ju=Fa=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&($e=!0),e.firstContext=null)}function gt(e){var t=e._currentValue;if(ju!==e)if(e={context:e,memoizedValue:t,next:null},Fa===null){if(Ji===null)throw Error(j(308));Fa=e,Ji.dependencies={lanes:0,firstContext:e}}else Fa=Fa.next=e;return t}var ia=null;function Au(e){ia===null?ia=[e]:ia.push(e)}function Mm(e,t,n,a){var r=t.interleaved;return r===null?(n.next=n,Au(t)):(n.next=r.next,r.next=n),t.interleaved=n,un(e,a)}function un(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Sn=!1;function Lu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Om(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function on(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Hn(e,t,n){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,Q&2){var r=a.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),a.pending=t,un(e,n)}return r=a.interleaved,r===null?(t.next=t,Au(a)):(t.next=r.next,r.next=t),a.interleaved=t,un(e,n)}function Ci(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,bu(e,n)}}function Ld(e,t){var n=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=i:o=o.next=i,n=n.next}while(n!==null);o===null?r=o=t:o=o.next=t}else r=o=t;n={baseState:a.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:a.shared,effects:a.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function es(e,t,n,a){var r=e.updateQueue;Sn=!1;var o=r.firstBaseUpdate,i=r.lastBaseUpdate,s=r.shared.pending;if(s!==null){r.shared.pending=null;var l=s,u=l.next;l.next=null,i===null?o=u:i.next=u,i=l;var h=e.alternate;h!==null&&(h=h.updateQueue,s=h.lastBaseUpdate,s!==i&&(s===null?h.firstBaseUpdate=u:s.next=u,h.lastBaseUpdate=l))}if(o!==null){var d=r.baseState;i=0,h=u=l=null,s=o;do{var f=s.lane,w=s.eventTime;if((a&f)===f){h!==null&&(h=h.next={eventTime:w,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var x=e,m=s;switch(f=t,w=n,m.tag){case 1:if(x=m.payload,typeof x=="function"){d=x.call(w,d,f);break e}d=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=m.payload,f=typeof x=="function"?x.call(w,d,f):x,f==null)break e;d=pe({},d,f);break e;case 2:Sn=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,f=r.effects,f===null?r.effects=[s]:f.push(s))}else w={eventTime:w,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},h===null?(u=h=w,l=d):h=h.next=w,i|=f;if(s=s.next,s===null){if(s=r.shared.pending,s===null)break;f=s,s=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(h===null&&(l=d),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=h,t=r.shared.interleaved,t!==null){r=t;do i|=r.lane,r=r.next;while(r!==t)}else o===null&&(r.shared.lanes=0);ba|=i,e.lanes=i,e.memoizedState=d}}function Md(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],r=a.callback;if(r!==null){if(a.callback=null,a=n,typeof r!="function")throw Error(j(191,r));r.call(a)}}}var Yo={},Ht=Jn(Yo),_o=Jn(Yo),ko=Jn(Yo);function sa(e){if(e===Yo)throw Error(j(174));return e}function Mu(e,t){switch(re(ko,t),re(_o,e),re(Ht,Yo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Xc(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Xc(t,e)}se(Ht),re(Ht,t)}function vr(){se(Ht),se(_o),se(ko)}function Dm(e){sa(ko.current);var t=sa(Ht.current),n=Xc(t,e.type);t!==n&&(re(_o,e),re(Ht,n))}function Ou(e){_o.current===e&&(se(Ht),se(_o))}var he=Jn(0);function ts(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var yc=[];function Du(){for(var e=0;e<yc.length;e++)yc[e]._workInProgressVersionPrimary=null;yc.length=0}var Ii=mn.ReactCurrentDispatcher,vc=mn.ReactCurrentBatchConfig,wa=0,fe=null,xe=null,Se=null,ns=!1,ao=!1,So=0,$x=0;function Ne(){throw Error(j(321))}function zu(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!qt(e[n],t[n]))return!1;return!0}function Wu(e,t,n,a,r,o){if(wa=o,fe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ii.current=e===null||e.memoizedState===null?Xx:Zx,e=n(a,r),ao){o=0;do{if(ao=!1,So=0,25<=o)throw Error(j(301));o+=1,Se=xe=null,t.updateQueue=null,Ii.current=Jx,e=n(a,r)}while(ao)}if(Ii.current=as,t=xe!==null&&xe.next!==null,wa=0,Se=xe=fe=null,ns=!1,t)throw Error(j(300));return e}function Fu(){var e=So!==0;return So=0,e}function Lt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Se===null?fe.memoizedState=Se=e:Se=Se.next=e,Se}function yt(){if(xe===null){var e=fe.alternate;e=e!==null?e.memoizedState:null}else e=xe.next;var t=Se===null?fe.memoizedState:Se.next;if(t!==null)Se=t,xe=e;else{if(e===null)throw Error(j(310));xe=e,e={memoizedState:xe.memoizedState,baseState:xe.baseState,baseQueue:xe.baseQueue,queue:xe.queue,next:null},Se===null?fe.memoizedState=Se=e:Se=Se.next=e}return Se}function Co(e,t){return typeof t=="function"?t(e):t}function wc(e){var t=yt(),n=t.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=e;var a=xe,r=a.baseQueue,o=n.pending;if(o!==null){if(r!==null){var i=r.next;r.next=o.next,o.next=i}a.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,a=a.baseState;var s=i=null,l=null,u=o;do{var h=u.lane;if((wa&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),a=u.hasEagerState?u.eagerState:e(a,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=d,i=a):l=l.next=d,fe.lanes|=h,ba|=h}u=u.next}while(u!==null&&u!==o);l===null?i=a:l.next=s,qt(a,t.memoizedState)||($e=!0),t.memoizedState=a,t.baseState=i,t.baseQueue=l,n.lastRenderedState=a}if(e=n.interleaved,e!==null){r=e;do o=r.lane,fe.lanes|=o,ba|=o,r=r.next;while(r!==e)}else r===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function bc(e){var t=yt(),n=t.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=e;var a=n.dispatch,r=n.pending,o=t.memoizedState;if(r!==null){n.pending=null;var i=r=r.next;do o=e(o,i.action),i=i.next;while(i!==r);qt(o,t.memoizedState)||($e=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,a]}function zm(){}function Wm(e,t){var n=fe,a=yt(),r=t(),o=!qt(a.memoizedState,r);if(o&&(a.memoizedState=r,$e=!0),a=a.queue,Yu(Hm.bind(null,n,a,e),[e]),a.getSnapshot!==t||o||Se!==null&&Se.memoizedState.tag&1){if(n.flags|=2048,Io(9,Ym.bind(null,n,a,r,t),void 0,null),Te===null)throw Error(j(349));wa&30||Fm(n,t,r)}return r}function Fm(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=fe.updateQueue,t===null?(t={lastEffect:null,stores:null},fe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Ym(e,t,n,a){t.value=n,t.getSnapshot=a,Bm(t)&&Vm(e)}function Hm(e,t,n){return n(function(){Bm(t)&&Vm(e)})}function Bm(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!qt(e,n)}catch{return!0}}function Vm(e){var t=un(e,1);t!==null&&Tt(t,e,1,-1)}function Od(e){var t=Lt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=Qx.bind(null,fe,e),[t.memoizedState,e]}function Io(e,t,n,a){return e={tag:e,create:t,destroy:n,deps:a,next:null},t=fe.updateQueue,t===null?(t={lastEffect:null,stores:null},fe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e)),e}function Um(){return yt().memoizedState}function Ti(e,t,n,a){var r=Lt();fe.flags|=e,r.memoizedState=Io(1|t,n,void 0,a===void 0?null:a)}function Ts(e,t,n,a){var r=yt();a=a===void 0?null:a;var o=void 0;if(xe!==null){var i=xe.memoizedState;if(o=i.destroy,a!==null&&zu(a,i.deps)){r.memoizedState=Io(t,n,o,a);return}}fe.flags|=e,r.memoizedState=Io(1|t,n,o,a)}function Dd(e,t){return Ti(8390656,8,e,t)}function Yu(e,t){return Ts(2048,8,e,t)}function $m(e,t){return Ts(4,2,e,t)}function Gm(e,t){return Ts(4,4,e,t)}function Km(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Qm(e,t,n){return n=n!=null?n.concat([e]):null,Ts(4,4,Km.bind(null,t,e),n)}function Hu(){}function Xm(e,t){var n=yt();t=t===void 0?null:t;var a=n.memoizedState;return a!==null&&t!==null&&zu(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function Zm(e,t){var n=yt();t=t===void 0?null:t;var a=n.memoizedState;return a!==null&&t!==null&&zu(t,a[1])?a[0]:(e=e(),n.memoizedState=[e,t],e)}function Jm(e,t,n){return wa&21?(qt(n,t)||(n=rm(),fe.lanes|=n,ba|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,$e=!0),e.memoizedState=n)}function Gx(e,t){var n=te;te=n!==0&&4>n?n:4,e(!0);var a=vc.transition;vc.transition={};try{e(!1),t()}finally{te=n,vc.transition=a}}function eg(){return yt().memoizedState}function Kx(e,t,n){var a=Vn(e);if(n={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null},tg(e))ng(t,n);else if(n=Mm(e,t,n,a),n!==null){var r=Fe();Tt(n,e,a,r),ag(n,t,a)}}function Qx(e,t,n){var a=Vn(e),r={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null};if(tg(e))ng(t,r);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,s=o(i,n);if(r.hasEagerState=!0,r.eagerState=s,qt(s,i)){var l=t.interleaved;l===null?(r.next=r,Au(t)):(r.next=l.next,l.next=r),t.interleaved=r;return}}catch{}finally{}n=Mm(e,t,r,a),n!==null&&(r=Fe(),Tt(n,e,a,r),ag(n,t,a))}}function tg(e){var t=e.alternate;return e===fe||t!==null&&t===fe}function ng(e,t){ao=ns=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ag(e,t,n){if(n&4194240){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,bu(e,n)}}var as={readContext:gt,useCallback:Ne,useContext:Ne,useEffect:Ne,useImperativeHandle:Ne,useInsertionEffect:Ne,useLayoutEffect:Ne,useMemo:Ne,useReducer:Ne,useRef:Ne,useState:Ne,useDebugValue:Ne,useDeferredValue:Ne,useTransition:Ne,useMutableSource:Ne,useSyncExternalStore:Ne,useId:Ne,unstable_isNewReconciler:!1},Xx={readContext:gt,useCallback:function(e,t){return Lt().memoizedState=[e,t===void 0?null:t],e},useContext:gt,useEffect:Dd,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ti(4194308,4,Km.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ti(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ti(4,2,e,t)},useMemo:function(e,t){var n=Lt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var a=Lt();return t=n!==void 0?n(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=Kx.bind(null,fe,e),[a.memoizedState,e]},useRef:function(e){var t=Lt();return e={current:e},t.memoizedState=e},useState:Od,useDebugValue:Hu,useDeferredValue:function(e){return Lt().memoizedState=e},useTransition:function(){var e=Od(!1),t=e[0];return e=Gx.bind(null,e[1]),Lt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var a=fe,r=Lt();if(le){if(n===void 0)throw Error(j(407));n=n()}else{if(n=t(),Te===null)throw Error(j(349));wa&30||Fm(a,t,n)}r.memoizedState=n;var o={value:n,getSnapshot:t};return r.queue=o,Dd(Hm.bind(null,a,o,e),[e]),a.flags|=2048,Io(9,Ym.bind(null,a,o,n,t),void 0,null),n},useId:function(){var e=Lt(),t=Te.identifierPrefix;if(le){var n=an,a=nn;n=(a&~(1<<32-It(a)-1)).toString(32)+n,t=":"+t+"R"+n,n=So++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=$x++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zx={readContext:gt,useCallback:Xm,useContext:gt,useEffect:Yu,useImperativeHandle:Qm,useInsertionEffect:$m,useLayoutEffect:Gm,useMemo:Zm,useReducer:wc,useRef:Um,useState:function(){return wc(Co)},useDebugValue:Hu,useDeferredValue:function(e){var t=yt();return Jm(t,xe.memoizedState,e)},useTransition:function(){var e=wc(Co)[0],t=yt().memoizedState;return[e,t]},useMutableSource:zm,useSyncExternalStore:Wm,useId:eg,unstable_isNewReconciler:!1},Jx={readContext:gt,useCallback:Xm,useContext:gt,useEffect:Yu,useImperativeHandle:Qm,useInsertionEffect:$m,useLayoutEffect:Gm,useMemo:Zm,useReducer:bc,useRef:Um,useState:function(){return bc(Co)},useDebugValue:Hu,useDeferredValue:function(e){var t=yt();return xe===null?t.memoizedState=e:Jm(t,xe.memoizedState,e)},useTransition:function(){var e=bc(Co)[0],t=yt().memoizedState;return[e,t]},useMutableSource:zm,useSyncExternalStore:Wm,useId:eg,unstable_isNewReconciler:!1};function xt(e,t){if(e&&e.defaultProps){t=pe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function vl(e,t,n,a){t=e.memoizedState,n=n(a,t),n=n==null?t:pe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var qs={isMounted:function(e){return(e=e._reactInternals)?Ta(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var a=Fe(),r=Vn(e),o=on(a,r);o.payload=t,n!=null&&(o.callback=n),t=Hn(e,o,r),t!==null&&(Tt(t,e,r,a),Ci(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=Fe(),r=Vn(e),o=on(a,r);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Hn(e,o,r),t!==null&&(Tt(t,e,r,a),Ci(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Fe(),a=Vn(e),r=on(n,a);r.tag=2,t!=null&&(r.callback=t),t=Hn(e,r,a),t!==null&&(Tt(t,e,a,n),Ci(t,e,a))}};function zd(e,t,n,a,r,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,o,i):t.prototype&&t.prototype.isPureReactComponent?!vo(n,a)||!vo(r,o):!0}function rg(e,t,n){var a=!1,r=Gn,o=t.contextType;return typeof o=="object"&&o!==null?o=gt(o):(r=Ke(t)?ya:Oe.current,a=t.contextTypes,o=(a=a!=null)?mr(e,r):Gn),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=qs,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=o),t}function Wd(e,t,n,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&qs.enqueueReplaceState(t,t.state,null)}function wl(e,t,n,a){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},Lu(e);var o=t.contextType;typeof o=="object"&&o!==null?r.context=gt(o):(o=Ke(t)?ya:Oe.current,r.context=mr(e,o)),r.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(vl(e,t,o,n),r.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(t=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),t!==r.state&&qs.enqueueReplaceState(r,r.state,null),es(e,n,r,a),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308)}function wr(e,t){try{var n="",a=t;do n+=Tb(a),a=a.return;while(a);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:r,digest:null}}function xc(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function bl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var e_=typeof WeakMap=="function"?WeakMap:Map;function og(e,t,n){n=on(-1,n),n.tag=3,n.payload={element:null};var a=t.value;return n.callback=function(){os||(os=!0,Pl=a),bl(e,t)},n}function ig(e,t,n){n=on(-1,n),n.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var r=t.value;n.payload=function(){return a(r)},n.callback=function(){bl(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){bl(e,t),typeof a!="function"&&(Bn===null?Bn=new Set([this]):Bn.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function Fd(e,t,n){var a=e.pingCache;if(a===null){a=e.pingCache=new e_;var r=new Set;a.set(t,r)}else r=a.get(t),r===void 0&&(r=new Set,a.set(t,r));r.has(n)||(r.add(n),e=p_.bind(null,e,t,n),t.then(e,e))}function Yd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Hd(e,t,n,a,r){return e.mode&1?(e.flags|=65536,e.lanes=r,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=on(-1,1),t.tag=2,Hn(n,t,1))),n.lanes|=1),e)}var t_=mn.ReactCurrentOwner,$e=!1;function We(e,t,n,a){t.child=e===null?Lm(t,null,n,a):yr(t,e.child,n,a)}function Bd(e,t,n,a,r){n=n.render;var o=t.ref;return Ga(t,r),a=Wu(e,t,n,a,o,r),n=Fu(),e!==null&&!$e?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,hn(e,t,r)):(le&&n&&qu(t),t.flags|=1,We(e,t,a,r),t.child)}function Vd(e,t,n,a,r){if(e===null){var o=n.type;return typeof o=="function"&&!Xu(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,sg(e,t,o,a,r)):(e=ji(n.type,null,a,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&r)){var i=o.memoizedProps;if(n=n.compare,n=n!==null?n:vo,n(i,a)&&e.ref===t.ref)return hn(e,t,r)}return t.flags|=1,e=Un(o,a),e.ref=t.ref,e.return=t,t.child=e}function sg(e,t,n,a,r){if(e!==null){var o=e.memoizedProps;if(vo(o,a)&&e.ref===t.ref)if($e=!1,t.pendingProps=a=o,(e.lanes&r)!==0)e.flags&131072&&($e=!0);else return t.lanes=e.lanes,hn(e,t,r)}return xl(e,t,n,a,r)}function cg(e,t,n){var a=t.pendingProps,r=a.children,o=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},re(Ha,Ze),Ze|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,re(Ha,Ze),Ze|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=o!==null?o.baseLanes:n,re(Ha,Ze),Ze|=a}else o!==null?(a=o.baseLanes|n,t.memoizedState=null):a=n,re(Ha,Ze),Ze|=a;return We(e,t,r,n),t.child}function lg(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function xl(e,t,n,a,r){var o=Ke(n)?ya:Oe.current;return o=mr(t,o),Ga(t,r),n=Wu(e,t,n,a,o,r),a=Fu(),e!==null&&!$e?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,hn(e,t,r)):(le&&a&&qu(t),t.flags|=1,We(e,t,n,r),t.child)}function Ud(e,t,n,a,r){if(Ke(n)){var o=!0;Ki(t)}else o=!1;if(Ga(t,r),t.stateNode===null)qi(e,t),rg(t,n,a),wl(t,n,a,r),a=!0;else if(e===null){var i=t.stateNode,s=t.memoizedProps;i.props=s;var l=i.context,u=n.contextType;typeof u=="object"&&u!==null?u=gt(u):(u=Ke(n)?ya:Oe.current,u=mr(t,u));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function";d||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(s!==a||l!==u)&&Wd(t,i,a,u),Sn=!1;var f=t.memoizedState;i.state=f,es(t,a,i,r),l=t.memoizedState,s!==a||f!==l||Ge.current||Sn?(typeof h=="function"&&(vl(t,n,h,a),l=t.memoizedState),(s=Sn||zd(t,n,s,a,f,l,u))?(d||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=l),i.props=a,i.state=l,i.context=u,a=s):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{i=t.stateNode,Om(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:xt(t.type,s),i.props=u,d=t.pendingProps,f=i.context,l=n.contextType,typeof l=="object"&&l!==null?l=gt(l):(l=Ke(n)?ya:Oe.current,l=mr(t,l));var w=n.getDerivedStateFromProps;(h=typeof w=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(s!==d||f!==l)&&Wd(t,i,a,l),Sn=!1,f=t.memoizedState,i.state=f,es(t,a,i,r);var x=t.memoizedState;s!==d||f!==x||Ge.current||Sn?(typeof w=="function"&&(vl(t,n,w,a),x=t.memoizedState),(u=Sn||zd(t,n,u,a,f,x,l)||!1)?(h||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(a,x,l),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(a,x,l)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=x),i.props=a,i.state=x,i.context=l,a=u):(typeof i.componentDidUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),a=!1)}return _l(e,t,n,a,o,r)}function _l(e,t,n,a,r,o){lg(e,t);var i=(t.flags&128)!==0;if(!a&&!i)return r&&jd(t,n,!1),hn(e,t,o);a=t.stateNode,t_.current=t;var s=i&&typeof n.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&i?(t.child=yr(t,e.child,null,o),t.child=yr(t,null,s,o)):We(e,t,s,o),t.memoizedState=a.state,r&&jd(t,n,!0),t.child}function ug(e){var t=e.stateNode;t.pendingContext?Pd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Pd(e,t.context,!1),Mu(e,t.containerInfo)}function $d(e,t,n,a,r){return gr(),Pu(r),t.flags|=256,We(e,t,n,a),t.child}var kl={dehydrated:null,treeContext:null,retryLane:0};function Sl(e){return{baseLanes:e,cachePool:null,transitions:null}}function hg(e,t,n){var a=t.pendingProps,r=he.current,o=!1,i=(t.flags&128)!==0,s;if((s=i)||(s=e!==null&&e.memoizedState===null?!1:(r&2)!==0),s?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(r|=1),re(he,r&1),e===null)return gl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=a.children,e=a.fallback,o?(a=t.mode,o=t.child,i={mode:"hidden",children:i},!(a&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=js(i,a,0,null),e=ga(e,a,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Sl(n),t.memoizedState=kl,e):Bu(t,i));if(r=e.memoizedState,r!==null&&(s=r.dehydrated,s!==null))return n_(e,t,i,a,s,r,n);if(o){o=a.fallback,i=t.mode,r=e.child,s=r.sibling;var l={mode:"hidden",children:a.children};return!(i&1)&&t.child!==r?(a=t.child,a.childLanes=0,a.pendingProps=l,t.deletions=null):(a=Un(r,l),a.subtreeFlags=r.subtreeFlags&14680064),s!==null?o=Un(s,o):(o=ga(o,i,n,null),o.flags|=2),o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,i=e.child.memoizedState,i=i===null?Sl(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~n,t.memoizedState=kl,a}return o=e.child,e=o.sibling,a=Un(o,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=n),a.return=t,a.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Bu(e,t){return t=js({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ci(e,t,n,a){return a!==null&&Pu(a),yr(t,e.child,null,n),e=Bu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function n_(e,t,n,a,r,o,i){if(n)return t.flags&256?(t.flags&=-257,a=xc(Error(j(422))),ci(e,t,i,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=a.fallback,r=t.mode,a=js({mode:"visible",children:a.children},r,0,null),o=ga(o,r,i,null),o.flags|=2,a.return=t,o.return=t,a.sibling=o,t.child=a,t.mode&1&&yr(t,e.child,null,i),t.child.memoizedState=Sl(i),t.memoizedState=kl,o);if(!(t.mode&1))return ci(e,t,i,null);if(r.data==="$!"){if(a=r.nextSibling&&r.nextSibling.dataset,a)var s=a.dgst;return a=s,o=Error(j(419)),a=xc(o,a,void 0),ci(e,t,i,a)}if(s=(i&e.childLanes)!==0,$e||s){if(a=Te,a!==null){switch(i&-i){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(a.suspendedLanes|i)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,un(e,r),Tt(a,e,r,-1))}return Qu(),a=xc(Error(j(421))),ci(e,t,i,a)}return r.data==="$?"?(t.flags|=128,t.child=e.child,t=m_.bind(null,e),r._reactRetry=t,null):(e=o.treeContext,nt=Yn(r.nextSibling),at=t,le=!0,St=null,e!==null&&(dt[ft++]=nn,dt[ft++]=an,dt[ft++]=va,nn=e.id,an=e.overflow,va=t),t=Bu(t,a.children),t.flags|=4096,t)}function Gd(e,t,n){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),yl(e.return,t,n)}function _c(e,t,n,a,r){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:r}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=a,o.tail=n,o.tailMode=r)}function dg(e,t,n){var a=t.pendingProps,r=a.revealOrder,o=a.tail;if(We(e,t,a.children,n),a=he.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Gd(e,n,t);else if(e.tag===19)Gd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(re(he,a),!(t.mode&1))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&ts(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),_c(t,!1,r,n,o);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&ts(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}_c(t,!0,n,null,o);break;case"together":_c(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function hn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ba|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(j(153));if(t.child!==null){for(e=t.child,n=Un(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Un(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function a_(e,t,n){switch(t.tag){case 3:ug(t),gr();break;case 5:Dm(t);break;case 1:Ke(t.type)&&Ki(t);break;case 4:Mu(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,r=t.memoizedProps.value;re(Zi,a._currentValue),a._currentValue=r;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(re(he,he.current&1),t.flags|=128,null):n&t.child.childLanes?hg(e,t,n):(re(he,he.current&1),e=hn(e,t,n),e!==null?e.sibling:null);re(he,he.current&1);break;case 19:if(a=(n&t.childLanes)!==0,e.flags&128){if(a)return dg(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),re(he,he.current),a)break;return null;case 22:case 23:return t.lanes=0,cg(e,t,n)}return hn(e,t,n)}var fg,Cl,pg,mg;fg=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Cl=function(){};pg=function(e,t,n,a){var r=e.memoizedProps;if(r!==a){e=t.stateNode,sa(Ht.current);var o=null;switch(n){case"input":r=$c(e,r),a=$c(e,a),o=[];break;case"select":r=pe({},r,{value:void 0}),a=pe({},a,{value:void 0}),o=[];break;case"textarea":r=Qc(e,r),a=Qc(e,a),o=[];break;default:typeof r.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=$i)}Zc(n,a);var i;n=null;for(u in r)if(!a.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var s=r[u];for(i in s)s.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(uo.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in a){var l=a[u];if(s=r!=null?r[u]:void 0,a.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(i in s)!s.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&s[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(o||(o=[]),o.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(uo.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ie("scroll",e),o||s===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};mg=function(e,t,n,a){n!==a&&(t.flags|=4)};function Fr(e,t){if(!le)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Re(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,a=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,a|=r.subtreeFlags&14680064,a|=r.flags&14680064,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,a|=r.subtreeFlags,a|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function r_(e,t,n){var a=t.pendingProps;switch(Eu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Re(t),null;case 1:return Ke(t.type)&&Gi(),Re(t),null;case 3:return a=t.stateNode,vr(),se(Ge),se(Oe),Du(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(ii(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,St!==null&&(Rl(St),St=null))),Cl(e,t),Re(t),null;case 5:Ou(t);var r=sa(ko.current);if(n=t.type,e!==null&&t.stateNode!=null)pg(e,t,n,a,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(j(166));return Re(t),null}if(e=sa(Ht.current),ii(t)){a=t.stateNode,n=t.type;var o=t.memoizedProps;switch(a[Wt]=t,a[xo]=o,e=(t.mode&1)!==0,n){case"dialog":ie("cancel",a),ie("close",a);break;case"iframe":case"object":case"embed":ie("load",a);break;case"video":case"audio":for(r=0;r<Kr.length;r++)ie(Kr[r],a);break;case"source":ie("error",a);break;case"img":case"image":case"link":ie("error",a),ie("load",a);break;case"details":ie("toggle",a);break;case"input":ad(a,o),ie("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!o.multiple},ie("invalid",a);break;case"textarea":od(a,o),ie("invalid",a)}Zc(n,o),r=null;for(var i in o)if(o.hasOwnProperty(i)){var s=o[i];i==="children"?typeof s=="string"?a.textContent!==s&&(o.suppressHydrationWarning!==!0&&oi(a.textContent,s,e),r=["children",s]):typeof s=="number"&&a.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&oi(a.textContent,s,e),r=["children",""+s]):uo.hasOwnProperty(i)&&s!=null&&i==="onScroll"&&ie("scroll",a)}switch(n){case"input":Xo(a),rd(a,o,!0);break;case"textarea":Xo(a),id(a);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(a.onclick=$i)}a=r,t.updateQueue=a,a!==null&&(t.flags|=4)}else{i=r.nodeType===9?r:r.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Hp(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=i.createElement(n,{is:a.is}):(e=i.createElement(n),n==="select"&&(i=e,a.multiple?i.multiple=!0:a.size&&(i.size=a.size))):e=i.createElementNS(e,n),e[Wt]=t,e[xo]=a,fg(e,t,!1,!1),t.stateNode=e;e:{switch(i=Jc(n,a),n){case"dialog":ie("cancel",e),ie("close",e),r=a;break;case"iframe":case"object":case"embed":ie("load",e),r=a;break;case"video":case"audio":for(r=0;r<Kr.length;r++)ie(Kr[r],e);r=a;break;case"source":ie("error",e),r=a;break;case"img":case"image":case"link":ie("error",e),ie("load",e),r=a;break;case"details":ie("toggle",e),r=a;break;case"input":ad(e,a),r=$c(e,a),ie("invalid",e);break;case"option":r=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},r=pe({},a,{value:void 0}),ie("invalid",e);break;case"textarea":od(e,a),r=Qc(e,a),ie("invalid",e);break;default:r=a}Zc(n,r),s=r;for(o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="style"?Up(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Bp(e,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ho(e,l):typeof l=="number"&&ho(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(uo.hasOwnProperty(o)?l!=null&&o==="onScroll"&&ie("scroll",e):l!=null&&pu(e,o,l,i))}switch(n){case"input":Xo(e),rd(e,a,!1);break;case"textarea":Xo(e),id(e);break;case"option":a.value!=null&&e.setAttribute("value",""+$n(a.value));break;case"select":e.multiple=!!a.multiple,o=a.value,o!=null?Ba(e,!!a.multiple,o,!1):a.defaultValue!=null&&Ba(e,!!a.multiple,a.defaultValue,!0);break;default:typeof r.onClick=="function"&&(e.onclick=$i)}switch(n){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Re(t),null;case 6:if(e&&t.stateNode!=null)mg(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(j(166));if(n=sa(ko.current),sa(Ht.current),ii(t)){if(a=t.stateNode,n=t.memoizedProps,a[Wt]=t,(o=a.nodeValue!==n)&&(e=at,e!==null))switch(e.tag){case 3:oi(a.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&oi(a.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else a=(n.nodeType===9?n:n.ownerDocument).createTextNode(a),a[Wt]=t,t.stateNode=a}return Re(t),null;case 13:if(se(he),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(le&&nt!==null&&t.mode&1&&!(t.flags&128))Rm(),gr(),t.flags|=98560,o=!1;else if(o=ii(t),a!==null&&a.dehydrated!==null){if(e===null){if(!o)throw Error(j(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(j(317));o[Wt]=t}else gr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Re(t),o=!1}else St!==null&&(Rl(St),St=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||he.current&1?ke===0&&(ke=3):Qu())),t.updateQueue!==null&&(t.flags|=4),Re(t),null);case 4:return vr(),Cl(e,t),e===null&&wo(t.stateNode.containerInfo),Re(t),null;case 10:return Ru(t.type._context),Re(t),null;case 17:return Ke(t.type)&&Gi(),Re(t),null;case 19:if(se(he),o=t.memoizedState,o===null)return Re(t),null;if(a=(t.flags&128)!==0,i=o.rendering,i===null)if(a)Fr(o,!1);else{if(ke!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=ts(e),i!==null){for(t.flags|=128,Fr(o,!1),a=i.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=n,n=t.child;n!==null;)o=n,e=a,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return re(he,he.current&1|2),t.child}e=e.sibling}o.tail!==null&&ve()>br&&(t.flags|=128,a=!0,Fr(o,!1),t.lanes=4194304)}else{if(!a)if(e=ts(i),e!==null){if(t.flags|=128,a=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Fr(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!le)return Re(t),null}else 2*ve()-o.renderingStartTime>br&&n!==1073741824&&(t.flags|=128,a=!0,Fr(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(n=o.last,n!==null?n.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=ve(),t.sibling=null,n=he.current,re(he,a?n&1|2:n&1),t):(Re(t),null);case 22:case 23:return Ku(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?Ze&1073741824&&(Re(t),t.subtreeFlags&6&&(t.flags|=8192)):Re(t),null;case 24:return null;case 25:return null}throw Error(j(156,t.tag))}function o_(e,t){switch(Eu(t),t.tag){case 1:return Ke(t.type)&&Gi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return vr(),se(Ge),se(Oe),Du(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ou(t),null;case 13:if(se(he),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(j(340));gr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return se(he),null;case 4:return vr(),null;case 10:return Ru(t.type._context),null;case 22:case 23:return Ku(),null;case 24:return null;default:return null}}var li=!1,Le=!1,i_=typeof WeakSet=="function"?WeakSet:Set,M=null;function Ya(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(a){ge(e,t,a)}else n.current=null}function Il(e,t,n){try{n()}catch(a){ge(e,t,a)}}var Kd=!1;function s_(e,t){if(ll=Bi,e=bm(),Tu(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var r=a.anchorOffset,o=a.focusNode;a=a.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var i=0,s=-1,l=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var w;d!==n||r!==0&&d.nodeType!==3||(s=i+r),d!==o||a!==0&&d.nodeType!==3||(l=i+a),d.nodeType===3&&(i+=d.nodeValue.length),(w=d.firstChild)!==null;)f=d,d=w;for(;;){if(d===e)break t;if(f===n&&++u===r&&(s=i),f===o&&++h===a&&(l=i),(w=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=w}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ul={focusedElem:e,selectionRange:n},Bi=!1,M=t;M!==null;)if(t=M,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,M=e;else for(;M!==null;){t=M;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var m=x.memoizedProps,_=x.memoizedState,g=t.stateNode,y=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:xt(t.type,m),_);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(j(163))}}catch(k){ge(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,M=e;break}M=t.return}return x=Kd,Kd=!1,x}function ro(e,t,n){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var r=a=a.next;do{if((r.tag&e)===e){var o=r.destroy;r.destroy=void 0,o!==void 0&&Il(t,n,o)}r=r.next}while(r!==a)}}function Es(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var a=n.create;n.destroy=a()}n=n.next}while(n!==t)}}function Tl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function gg(e){var t=e.alternate;t!==null&&(e.alternate=null,gg(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Wt],delete t[xo],delete t[fl],delete t[Hx],delete t[Bx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function yg(e){return e.tag===5||e.tag===3||e.tag===4}function Qd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||yg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ql(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=$i));else if(a!==4&&(e=e.child,e!==null))for(ql(e,t,n),e=e.sibling;e!==null;)ql(e,t,n),e=e.sibling}function El(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(El(e,t,n),e=e.sibling;e!==null;)El(e,t,n),e=e.sibling}var qe=null,kt=!1;function yn(e,t,n){for(n=n.child;n!==null;)vg(e,t,n),n=n.sibling}function vg(e,t,n){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(xs,n)}catch{}switch(n.tag){case 5:Le||Ya(n,t);case 6:var a=qe,r=kt;qe=null,yn(e,t,n),qe=a,kt=r,qe!==null&&(kt?(e=qe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):qe.removeChild(n.stateNode));break;case 18:qe!==null&&(kt?(e=qe,n=n.stateNode,e.nodeType===8?mc(e.parentNode,n):e.nodeType===1&&mc(e,n),go(e)):mc(qe,n.stateNode));break;case 4:a=qe,r=kt,qe=n.stateNode.containerInfo,kt=!0,yn(e,t,n),qe=a,kt=r;break;case 0:case 11:case 14:case 15:if(!Le&&(a=n.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){r=a=a.next;do{var o=r,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&Il(n,t,i),r=r.next}while(r!==a)}yn(e,t,n);break;case 1:if(!Le&&(Ya(n,t),a=n.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=n.memoizedProps,a.state=n.memoizedState,a.componentWillUnmount()}catch(s){ge(n,t,s)}yn(e,t,n);break;case 21:yn(e,t,n);break;case 22:n.mode&1?(Le=(a=Le)||n.memoizedState!==null,yn(e,t,n),Le=a):yn(e,t,n);break;default:yn(e,t,n)}}function Xd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new i_),t.forEach(function(a){var r=g_.bind(null,e,a);n.has(a)||(n.add(a),a.then(r,r))})}}function bt(e,t){var n=t.deletions;if(n!==null)for(var a=0;a<n.length;a++){var r=n[a];try{var o=e,i=t,s=i;e:for(;s!==null;){switch(s.tag){case 5:qe=s.stateNode,kt=!1;break e;case 3:qe=s.stateNode.containerInfo,kt=!0;break e;case 4:qe=s.stateNode.containerInfo,kt=!0;break e}s=s.return}if(qe===null)throw Error(j(160));vg(o,i,r),qe=null,kt=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){ge(r,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)wg(t,e),t=t.sibling}function wg(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(bt(t,e),At(e),a&4){try{ro(3,e,e.return),Es(3,e)}catch(m){ge(e,e.return,m)}try{ro(5,e,e.return)}catch(m){ge(e,e.return,m)}}break;case 1:bt(t,e),At(e),a&512&&n!==null&&Ya(n,n.return);break;case 5:if(bt(t,e),At(e),a&512&&n!==null&&Ya(n,n.return),e.flags&32){var r=e.stateNode;try{ho(r,"")}catch(m){ge(e,e.return,m)}}if(a&4&&(r=e.stateNode,r!=null)){var o=e.memoizedProps,i=n!==null?n.memoizedProps:o,s=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&Fp(r,o),Jc(s,i);var u=Jc(s,o);for(i=0;i<l.length;i+=2){var h=l[i],d=l[i+1];h==="style"?Up(r,d):h==="dangerouslySetInnerHTML"?Bp(r,d):h==="children"?ho(r,d):pu(r,h,d,u)}switch(s){case"input":Gc(r,o);break;case"textarea":Yp(r,o);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var w=o.value;w!=null?Ba(r,!!o.multiple,w,!1):f!==!!o.multiple&&(o.defaultValue!=null?Ba(r,!!o.multiple,o.defaultValue,!0):Ba(r,!!o.multiple,o.multiple?[]:"",!1))}r[xo]=o}catch(m){ge(e,e.return,m)}}break;case 6:if(bt(t,e),At(e),a&4){if(e.stateNode===null)throw Error(j(162));r=e.stateNode,o=e.memoizedProps;try{r.nodeValue=o}catch(m){ge(e,e.return,m)}}break;case 3:if(bt(t,e),At(e),a&4&&n!==null&&n.memoizedState.isDehydrated)try{go(t.containerInfo)}catch(m){ge(e,e.return,m)}break;case 4:bt(t,e),At(e);break;case 13:bt(t,e),At(e),r=e.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||($u=ve())),a&4&&Xd(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(Le=(u=Le)||h,bt(t,e),Le=u):bt(t,e),At(e),a&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!h&&e.mode&1)for(M=e,h=e.child;h!==null;){for(d=M=h;M!==null;){switch(f=M,w=f.child,f.tag){case 0:case 11:case 14:case 15:ro(4,f,f.return);break;case 1:Ya(f,f.return);var x=f.stateNode;if(typeof x.componentWillUnmount=="function"){a=f,n=f.return;try{t=a,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(m){ge(a,n,m)}}break;case 5:Ya(f,f.return);break;case 22:if(f.memoizedState!==null){Jd(d);continue}}w!==null?(w.return=f,M=w):Jd(d)}h=h.sibling}e:for(h=null,d=e;;){if(d.tag===5){if(h===null){h=d;try{r=d.stateNode,u?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=d.stateNode,l=d.memoizedProps.style,i=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=Vp("display",i))}catch(m){ge(e,e.return,m)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){ge(e,e.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:bt(t,e),At(e),a&4&&Xd(e);break;case 21:break;default:bt(t,e),At(e)}}function At(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(yg(n)){var a=n;break e}n=n.return}throw Error(j(160))}switch(a.tag){case 5:var r=a.stateNode;a.flags&32&&(ho(r,""),a.flags&=-33);var o=Qd(e);El(e,o,r);break;case 3:case 4:var i=a.stateNode.containerInfo,s=Qd(e);ql(e,s,i);break;default:throw Error(j(161))}}catch(l){ge(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function c_(e,t,n){M=e,bg(e)}function bg(e,t,n){for(var a=(e.mode&1)!==0;M!==null;){var r=M,o=r.child;if(r.tag===22&&a){var i=r.memoizedState!==null||li;if(!i){var s=r.alternate,l=s!==null&&s.memoizedState!==null||Le;s=li;var u=Le;if(li=i,(Le=l)&&!u)for(M=r;M!==null;)i=M,l=i.child,i.tag===22&&i.memoizedState!==null?ef(r):l!==null?(l.return=i,M=l):ef(r);for(;o!==null;)M=o,bg(o),o=o.sibling;M=r,li=s,Le=u}Zd(e)}else r.subtreeFlags&8772&&o!==null?(o.return=r,M=o):Zd(e)}}function Zd(e){for(;M!==null;){var t=M;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Le||Es(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Le)if(n===null)a.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:xt(t.type,n.memoizedProps);a.componentDidUpdate(r,n.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Md(t,o,a);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Md(t,i,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&go(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(j(163))}Le||t.flags&512&&Tl(t)}catch(f){ge(t,t.return,f)}}if(t===e){M=null;break}if(n=t.sibling,n!==null){n.return=t.return,M=n;break}M=t.return}}function Jd(e){for(;M!==null;){var t=M;if(t===e){M=null;break}var n=t.sibling;if(n!==null){n.return=t.return,M=n;break}M=t.return}}function ef(e){for(;M!==null;){var t=M;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Es(4,t)}catch(l){ge(t,n,l)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var r=t.return;try{a.componentDidMount()}catch(l){ge(t,r,l)}}var o=t.return;try{Tl(t)}catch(l){ge(t,o,l)}break;case 5:var i=t.return;try{Tl(t)}catch(l){ge(t,i,l)}}}catch(l){ge(t,t.return,l)}if(t===e){M=null;break}var s=t.sibling;if(s!==null){s.return=t.return,M=s;break}M=t.return}}var l_=Math.ceil,rs=mn.ReactCurrentDispatcher,Vu=mn.ReactCurrentOwner,mt=mn.ReactCurrentBatchConfig,Q=0,Te=null,we=null,Pe=0,Ze=0,Ha=Jn(0),ke=0,To=null,ba=0,Ps=0,Uu=0,oo=null,Ue=null,$u=0,br=1/0,Zt=null,os=!1,Pl=null,Bn=null,ui=!1,Dn=null,is=0,io=0,jl=null,Ei=-1,Pi=0;function Fe(){return Q&6?ve():Ei!==-1?Ei:Ei=ve()}function Vn(e){return e.mode&1?Q&2&&Pe!==0?Pe&-Pe:Ux.transition!==null?(Pi===0&&(Pi=rm()),Pi):(e=te,e!==0||(e=window.event,e=e===void 0?16:hm(e.type)),e):1}function Tt(e,t,n,a){if(50<io)throw io=0,jl=null,Error(j(185));zo(e,n,a),(!(Q&2)||e!==Te)&&(e===Te&&(!(Q&2)&&(Ps|=n),ke===4&&In(e,Pe)),Qe(e,a),n===1&&Q===0&&!(t.mode&1)&&(br=ve()+500,Is&&ea()))}function Qe(e,t){var n=e.callbackNode;Ub(e,t);var a=Hi(e,e===Te?Pe:0);if(a===0)n!==null&&ld(n),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(n!=null&&ld(n),t===1)e.tag===0?Vx(tf.bind(null,e)):Pm(tf.bind(null,e)),Fx(function(){!(Q&6)&&ea()}),n=null;else{switch(om(a)){case 1:n=wu;break;case 4:n=nm;break;case 16:n=Yi;break;case 536870912:n=am;break;default:n=Yi}n=qg(n,xg.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function xg(e,t){if(Ei=-1,Pi=0,Q&6)throw Error(j(327));var n=e.callbackNode;if(Ka()&&e.callbackNode!==n)return null;var a=Hi(e,e===Te?Pe:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=ss(e,a);else{t=a;var r=Q;Q|=2;var o=kg();(Te!==e||Pe!==t)&&(Zt=null,br=ve()+500,ma(e,t));do try{d_();break}catch(s){_g(e,s)}while(!0);Nu(),rs.current=o,Q=r,we!==null?t=0:(Te=null,Pe=0,t=ke)}if(t!==0){if(t===2&&(r=rl(e),r!==0&&(a=r,t=Nl(e,r))),t===1)throw n=To,ma(e,0),In(e,a),Qe(e,ve()),n;if(t===6)In(e,a);else{if(r=e.current.alternate,!(a&30)&&!u_(r)&&(t=ss(e,a),t===2&&(o=rl(e),o!==0&&(a=o,t=Nl(e,o))),t===1))throw n=To,ma(e,0),In(e,a),Qe(e,ve()),n;switch(e.finishedWork=r,e.finishedLanes=a,t){case 0:case 1:throw Error(j(345));case 2:ra(e,Ue,Zt);break;case 3:if(In(e,a),(a&130023424)===a&&(t=$u+500-ve(),10<t)){if(Hi(e,0)!==0)break;if(r=e.suspendedLanes,(r&a)!==a){Fe(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=dl(ra.bind(null,e,Ue,Zt),t);break}ra(e,Ue,Zt);break;case 4:if(In(e,a),(a&4194240)===a)break;for(t=e.eventTimes,r=-1;0<a;){var i=31-It(a);o=1<<i,i=t[i],i>r&&(r=i),a&=~o}if(a=r,a=ve()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*l_(a/1960))-a,10<a){e.timeoutHandle=dl(ra.bind(null,e,Ue,Zt),a);break}ra(e,Ue,Zt);break;case 5:ra(e,Ue,Zt);break;default:throw Error(j(329))}}}return Qe(e,ve()),e.callbackNode===n?xg.bind(null,e):null}function Nl(e,t){var n=oo;return e.current.memoizedState.isDehydrated&&(ma(e,t).flags|=256),e=ss(e,t),e!==2&&(t=Ue,Ue=n,t!==null&&Rl(t)),e}function Rl(e){Ue===null?Ue=e:Ue.push.apply(Ue,e)}function u_(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var a=0;a<n.length;a++){var r=n[a],o=r.getSnapshot;r=r.value;try{if(!qt(o(),r))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function In(e,t){for(t&=~Uu,t&=~Ps,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-It(t),a=1<<n;e[n]=-1,t&=~a}}function tf(e){if(Q&6)throw Error(j(327));Ka();var t=Hi(e,0);if(!(t&1))return Qe(e,ve()),null;var n=ss(e,t);if(e.tag!==0&&n===2){var a=rl(e);a!==0&&(t=a,n=Nl(e,a))}if(n===1)throw n=To,ma(e,0),In(e,t),Qe(e,ve()),n;if(n===6)throw Error(j(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ra(e,Ue,Zt),Qe(e,ve()),null}function Gu(e,t){var n=Q;Q|=1;try{return e(t)}finally{Q=n,Q===0&&(br=ve()+500,Is&&ea())}}function xa(e){Dn!==null&&Dn.tag===0&&!(Q&6)&&Ka();var t=Q;Q|=1;var n=mt.transition,a=te;try{if(mt.transition=null,te=1,e)return e()}finally{te=a,mt.transition=n,Q=t,!(Q&6)&&ea()}}function Ku(){Ze=Ha.current,se(Ha)}function ma(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Wx(n)),we!==null)for(n=we.return;n!==null;){var a=n;switch(Eu(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Gi();break;case 3:vr(),se(Ge),se(Oe),Du();break;case 5:Ou(a);break;case 4:vr();break;case 13:se(he);break;case 19:se(he);break;case 10:Ru(a.type._context);break;case 22:case 23:Ku()}n=n.return}if(Te=e,we=e=Un(e.current,null),Pe=Ze=t,ke=0,To=null,Uu=Ps=ba=0,Ue=oo=null,ia!==null){for(t=0;t<ia.length;t++)if(n=ia[t],a=n.interleaved,a!==null){n.interleaved=null;var r=a.next,o=n.pending;if(o!==null){var i=o.next;o.next=r,a.next=i}n.pending=a}ia=null}return e}function _g(e,t){do{var n=we;try{if(Nu(),Ii.current=as,ns){for(var a=fe.memoizedState;a!==null;){var r=a.queue;r!==null&&(r.pending=null),a=a.next}ns=!1}if(wa=0,Se=xe=fe=null,ao=!1,So=0,Vu.current=null,n===null||n.return===null){ke=1,To=t,we=null;break}e:{var o=e,i=n.return,s=n,l=t;if(t=Pe,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=s,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var w=Yd(i);if(w!==null){w.flags&=-257,Hd(w,i,s,o,t),w.mode&1&&Fd(o,u,t),t=w,l=u;var x=t.updateQueue;if(x===null){var m=new Set;m.add(l),t.updateQueue=m}else x.add(l);break e}else{if(!(t&1)){Fd(o,u,t),Qu();break e}l=Error(j(426))}}else if(le&&s.mode&1){var _=Yd(i);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Hd(_,i,s,o,t),Pu(wr(l,s));break e}}o=l=wr(l,s),ke!==4&&(ke=2),oo===null?oo=[o]:oo.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var g=og(o,l,t);Ld(o,g);break e;case 1:s=l;var y=o.type,v=o.stateNode;if(!(o.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Bn===null||!Bn.has(v)))){o.flags|=65536,t&=-t,o.lanes|=t;var k=ig(o,s,t);Ld(o,k);break e}}o=o.return}while(o!==null)}Cg(n)}catch(S){t=S,we===n&&n!==null&&(we=n=n.return);continue}break}while(!0)}function kg(){var e=rs.current;return rs.current=as,e===null?as:e}function Qu(){(ke===0||ke===3||ke===2)&&(ke=4),Te===null||!(ba&268435455)&&!(Ps&268435455)||In(Te,Pe)}function ss(e,t){var n=Q;Q|=2;var a=kg();(Te!==e||Pe!==t)&&(Zt=null,ma(e,t));do try{h_();break}catch(r){_g(e,r)}while(!0);if(Nu(),Q=n,rs.current=a,we!==null)throw Error(j(261));return Te=null,Pe=0,ke}function h_(){for(;we!==null;)Sg(we)}function d_(){for(;we!==null&&!Ob();)Sg(we)}function Sg(e){var t=Tg(e.alternate,e,Ze);e.memoizedProps=e.pendingProps,t===null?Cg(e):we=t,Vu.current=null}function Cg(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=o_(n,t),n!==null){n.flags&=32767,we=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ke=6,we=null;return}}else if(n=r_(n,t,Ze),n!==null){we=n;return}if(t=t.sibling,t!==null){we=t;return}we=t=e}while(t!==null);ke===0&&(ke=5)}function ra(e,t,n){var a=te,r=mt.transition;try{mt.transition=null,te=1,f_(e,t,n,a)}finally{mt.transition=r,te=a}return null}function f_(e,t,n,a){do Ka();while(Dn!==null);if(Q&6)throw Error(j(327));n=e.finishedWork;var r=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(j(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if($b(e,o),e===Te&&(we=Te=null,Pe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ui||(ui=!0,qg(Yi,function(){return Ka(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=mt.transition,mt.transition=null;var i=te;te=1;var s=Q;Q|=4,Vu.current=null,s_(e,n),wg(n,e),Rx(ul),Bi=!!ll,ul=ll=null,e.current=n,c_(n),Db(),Q=s,te=i,mt.transition=o}else e.current=n;if(ui&&(ui=!1,Dn=e,is=r),o=e.pendingLanes,o===0&&(Bn=null),Fb(n.stateNode),Qe(e,ve()),t!==null)for(a=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],a(r.value,{componentStack:r.stack,digest:r.digest});if(os)throw os=!1,e=Pl,Pl=null,e;return is&1&&e.tag!==0&&Ka(),o=e.pendingLanes,o&1?e===jl?io++:(io=0,jl=e):io=0,ea(),null}function Ka(){if(Dn!==null){var e=om(is),t=mt.transition,n=te;try{if(mt.transition=null,te=16>e?16:e,Dn===null)var a=!1;else{if(e=Dn,Dn=null,is=0,Q&6)throw Error(j(331));var r=Q;for(Q|=4,M=e.current;M!==null;){var o=M,i=o.child;if(M.flags&16){var s=o.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(M=u;M!==null;){var h=M;switch(h.tag){case 0:case 11:case 15:ro(8,h,o)}var d=h.child;if(d!==null)d.return=h,M=d;else for(;M!==null;){h=M;var f=h.sibling,w=h.return;if(gg(h),h===u){M=null;break}if(f!==null){f.return=w,M=f;break}M=w}}}var x=o.alternate;if(x!==null){var m=x.child;if(m!==null){x.child=null;do{var _=m.sibling;m.sibling=null,m=_}while(m!==null)}}M=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,M=i;else e:for(;M!==null;){if(o=M,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ro(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,M=g;break e}M=o.return}}var y=e.current;for(M=y;M!==null;){i=M;var v=i.child;if(i.subtreeFlags&2064&&v!==null)v.return=i,M=v;else e:for(i=y;M!==null;){if(s=M,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:Es(9,s)}}catch(S){ge(s,s.return,S)}if(s===i){M=null;break e}var k=s.sibling;if(k!==null){k.return=s.return,M=k;break e}M=s.return}}if(Q=r,ea(),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(xs,e)}catch{}a=!0}return a}finally{te=n,mt.transition=t}}return!1}function nf(e,t,n){t=wr(n,t),t=og(e,t,1),e=Hn(e,t,1),t=Fe(),e!==null&&(zo(e,1,t),Qe(e,t))}function ge(e,t,n){if(e.tag===3)nf(e,e,n);else for(;t!==null;){if(t.tag===3){nf(t,e,n);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Bn===null||!Bn.has(a))){e=wr(n,e),e=ig(t,e,1),t=Hn(t,e,1),e=Fe(),t!==null&&(zo(t,1,e),Qe(t,e));break}}t=t.return}}function p_(e,t,n){var a=e.pingCache;a!==null&&a.delete(t),t=Fe(),e.pingedLanes|=e.suspendedLanes&n,Te===e&&(Pe&n)===n&&(ke===4||ke===3&&(Pe&130023424)===Pe&&500>ve()-$u?ma(e,0):Uu|=n),Qe(e,t)}function Ig(e,t){t===0&&(e.mode&1?(t=ei,ei<<=1,!(ei&130023424)&&(ei=4194304)):t=1);var n=Fe();e=un(e,t),e!==null&&(zo(e,t,n),Qe(e,n))}function m_(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Ig(e,n)}function g_(e,t){var n=0;switch(e.tag){case 13:var a=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(j(314))}a!==null&&a.delete(t),Ig(e,n)}var Tg;Tg=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ge.current)$e=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return $e=!1,a_(e,t,n);$e=!!(e.flags&131072)}else $e=!1,le&&t.flags&1048576&&jm(t,Xi,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;qi(e,t),e=t.pendingProps;var r=mr(t,Oe.current);Ga(t,n),r=Wu(null,t,a,e,r,n);var o=Fu();return t.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ke(a)?(o=!0,Ki(t)):o=!1,t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Lu(t),r.updater=qs,t.stateNode=r,r._reactInternals=t,wl(t,a,e,n),t=_l(null,t,a,!0,o,n)):(t.tag=0,le&&o&&qu(t),We(null,t,r,n),t=t.child),t;case 16:a=t.elementType;e:{switch(qi(e,t),e=t.pendingProps,r=a._init,a=r(a._payload),t.type=a,r=t.tag=v_(a),e=xt(a,e),r){case 0:t=xl(null,t,a,e,n);break e;case 1:t=Ud(null,t,a,e,n);break e;case 11:t=Bd(null,t,a,e,n);break e;case 14:t=Vd(null,t,a,xt(a.type,e),n);break e}throw Error(j(306,a,""))}return t;case 0:return a=t.type,r=t.pendingProps,r=t.elementType===a?r:xt(a,r),xl(e,t,a,r,n);case 1:return a=t.type,r=t.pendingProps,r=t.elementType===a?r:xt(a,r),Ud(e,t,a,r,n);case 3:e:{if(ug(t),e===null)throw Error(j(387));a=t.pendingProps,o=t.memoizedState,r=o.element,Om(e,t),es(t,a,null,n);var i=t.memoizedState;if(a=i.element,o.isDehydrated)if(o={element:a,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){r=wr(Error(j(423)),t),t=$d(e,t,a,n,r);break e}else if(a!==r){r=wr(Error(j(424)),t),t=$d(e,t,a,n,r);break e}else for(nt=Yn(t.stateNode.containerInfo.firstChild),at=t,le=!0,St=null,n=Lm(t,null,a,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(gr(),a===r){t=hn(e,t,n);break e}We(e,t,a,n)}t=t.child}return t;case 5:return Dm(t),e===null&&gl(t),a=t.type,r=t.pendingProps,o=e!==null?e.memoizedProps:null,i=r.children,hl(a,r)?i=null:o!==null&&hl(a,o)&&(t.flags|=32),lg(e,t),We(e,t,i,n),t.child;case 6:return e===null&&gl(t),null;case 13:return hg(e,t,n);case 4:return Mu(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=yr(t,null,a,n):We(e,t,a,n),t.child;case 11:return a=t.type,r=t.pendingProps,r=t.elementType===a?r:xt(a,r),Bd(e,t,a,r,n);case 7:return We(e,t,t.pendingProps,n),t.child;case 8:return We(e,t,t.pendingProps.children,n),t.child;case 12:return We(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(a=t.type._context,r=t.pendingProps,o=t.memoizedProps,i=r.value,re(Zi,a._currentValue),a._currentValue=i,o!==null)if(qt(o.value,i)){if(o.children===r.children&&!Ge.current){t=hn(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var s=o.dependencies;if(s!==null){i=o.child;for(var l=s.firstContext;l!==null;){if(l.context===a){if(o.tag===1){l=on(-1,n&-n),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),yl(o.return,n,t),s.lanes|=n;break}l=l.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(j(341));i.lanes|=n,s=i.alternate,s!==null&&(s.lanes|=n),yl(i,n,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}We(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,a=t.pendingProps.children,Ga(t,n),r=gt(r),a=a(r),t.flags|=1,We(e,t,a,n),t.child;case 14:return a=t.type,r=xt(a,t.pendingProps),r=xt(a.type,r),Vd(e,t,a,r,n);case 15:return sg(e,t,t.type,t.pendingProps,n);case 17:return a=t.type,r=t.pendingProps,r=t.elementType===a?r:xt(a,r),qi(e,t),t.tag=1,Ke(a)?(e=!0,Ki(t)):e=!1,Ga(t,n),rg(t,a,r),wl(t,a,r,n),_l(null,t,a,!0,e,n);case 19:return dg(e,t,n);case 22:return cg(e,t,n)}throw Error(j(156,t.tag))};function qg(e,t){return tm(e,t)}function y_(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pt(e,t,n,a){return new y_(e,t,n,a)}function Xu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function v_(e){if(typeof e=="function")return Xu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===gu)return 11;if(e===yu)return 14}return 2}function Un(e,t){var n=e.alternate;return n===null?(n=pt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ji(e,t,n,a,r,o){var i=2;if(a=e,typeof e=="function")Xu(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Ra:return ga(n.children,r,o,t);case mu:i=8,r|=8;break;case Hc:return e=pt(12,n,t,r|2),e.elementType=Hc,e.lanes=o,e;case Bc:return e=pt(13,n,t,r),e.elementType=Bc,e.lanes=o,e;case Vc:return e=pt(19,n,t,r),e.elementType=Vc,e.lanes=o,e;case Dp:return js(n,r,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Mp:i=10;break e;case Op:i=9;break e;case gu:i=11;break e;case yu:i=14;break e;case kn:i=16,a=null;break e}throw Error(j(130,e==null?e:typeof e,""))}return t=pt(i,n,t,r),t.elementType=e,t.type=a,t.lanes=o,t}function ga(e,t,n,a){return e=pt(7,e,a,t),e.lanes=n,e}function js(e,t,n,a){return e=pt(22,e,a,t),e.elementType=Dp,e.lanes=n,e.stateNode={isHidden:!1},e}function kc(e,t,n){return e=pt(6,e,null,t),e.lanes=n,e}function Sc(e,t,n){return t=pt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function w_(e,t,n,a,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rc(0),this.expirationTimes=rc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rc(0),this.identifierPrefix=a,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Zu(e,t,n,a,r,o,i,s,l){return e=new w_(e,t,n,s,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=pt(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:a,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lu(o),e}function b_(e,t,n){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Na,key:a==null?null:""+a,children:e,containerInfo:t,implementation:n}}function Eg(e){if(!e)return Gn;e=e._reactInternals;e:{if(Ta(e)!==e||e.tag!==1)throw Error(j(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ke(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(j(171))}if(e.tag===1){var n=e.type;if(Ke(n))return Em(e,n,t)}return t}function Pg(e,t,n,a,r,o,i,s,l){return e=Zu(n,a,!0,e,r,o,i,s,l),e.context=Eg(null),n=e.current,a=Fe(),r=Vn(n),o=on(a,r),o.callback=t??null,Hn(n,o,r),e.current.lanes=r,zo(e,r,a),Qe(e,a),e}function Ns(e,t,n,a){var r=t.current,o=Fe(),i=Vn(r);return n=Eg(n),t.context===null?t.context=n:t.pendingContext=n,t=on(o,i),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=Hn(r,t,i),e!==null&&(Tt(e,r,i,o),Ci(e,r,i)),i}function cs(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function af(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ju(e,t){af(e,t),(e=e.alternate)&&af(e,t)}function x_(){return null}var jg=typeof reportError=="function"?reportError:function(e){console.error(e)};function eh(e){this._internalRoot=e}Rs.prototype.render=eh.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(j(409));Ns(e,t,null,null)};Rs.prototype.unmount=eh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;xa(function(){Ns(null,e,null,null)}),t[ln]=null}};function Rs(e){this._internalRoot=e}Rs.prototype.unstable_scheduleHydration=function(e){if(e){var t=cm();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Cn.length&&t!==0&&t<Cn[n].priority;n++);Cn.splice(n,0,e),n===0&&um(e)}};function th(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function As(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function rf(){}function __(e,t,n,a,r){if(r){if(typeof a=="function"){var o=a;a=function(){var u=cs(i);o.call(u)}}var i=Pg(t,a,e,0,null,!1,!1,"",rf);return e._reactRootContainer=i,e[ln]=i.current,wo(e.nodeType===8?e.parentNode:e),xa(),i}for(;r=e.lastChild;)e.removeChild(r);if(typeof a=="function"){var s=a;a=function(){var u=cs(l);s.call(u)}}var l=Zu(e,0,!1,null,null,!1,!1,"",rf);return e._reactRootContainer=l,e[ln]=l.current,wo(e.nodeType===8?e.parentNode:e),xa(function(){Ns(t,l,n,a)}),l}function Ls(e,t,n,a,r){var o=n._reactRootContainer;if(o){var i=o;if(typeof r=="function"){var s=r;r=function(){var l=cs(i);s.call(l)}}Ns(t,i,e,r)}else i=__(n,t,e,r,a);return cs(i)}im=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Gr(t.pendingLanes);n!==0&&(bu(t,n|1),Qe(t,ve()),!(Q&6)&&(br=ve()+500,ea()))}break;case 13:xa(function(){var a=un(e,1);if(a!==null){var r=Fe();Tt(a,e,1,r)}}),Ju(e,1)}};xu=function(e){if(e.tag===13){var t=un(e,134217728);if(t!==null){var n=Fe();Tt(t,e,134217728,n)}Ju(e,134217728)}};sm=function(e){if(e.tag===13){var t=Vn(e),n=un(e,t);if(n!==null){var a=Fe();Tt(n,e,t,a)}Ju(e,t)}};cm=function(){return te};lm=function(e,t){var n=te;try{return te=e,t()}finally{te=n}};tl=function(e,t,n){switch(t){case"input":if(Gc(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var r=Cs(a);if(!r)throw Error(j(90));Wp(a),Gc(a,r)}}}break;case"textarea":Yp(e,n);break;case"select":t=n.value,t!=null&&Ba(e,!!n.multiple,t,!1)}};Kp=Gu;Qp=xa;var k_={usingClientEntryPoint:!1,Events:[Fo,Oa,Cs,$p,Gp,Gu]},Yr={findFiberByHostInstance:oa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},S_={bundleType:Yr.bundleType,version:Yr.version,rendererPackageName:Yr.rendererPackageName,rendererConfig:Yr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Jp(e),e===null?null:e.stateNode},findFiberByHostInstance:Yr.findFiberByHostInstance||x_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hi.isDisabled&&hi.supportsFiber)try{xs=hi.inject(S_),Yt=hi}catch{}}it.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k_;it.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!th(t))throw Error(j(200));return b_(e,t,null,n)};it.createRoot=function(e,t){if(!th(e))throw Error(j(299));var n=!1,a="",r=jg;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=Zu(e,1,!1,null,null,n,!1,a,r),e[ln]=t.current,wo(e.nodeType===8?e.parentNode:e),new eh(t)};it.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(j(188)):(e=Object.keys(e).join(","),Error(j(268,e)));return e=Jp(t),e=e===null?null:e.stateNode,e};it.flushSync=function(e){return xa(e)};it.hydrate=function(e,t,n){if(!As(t))throw Error(j(200));return Ls(null,e,t,!0,n)};it.hydrateRoot=function(e,t,n){if(!th(e))throw Error(j(405));var a=n!=null&&n.hydratedSources||null,r=!1,o="",i=jg;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=Pg(t,null,e,1,n??null,r,!1,o,i),e[ln]=t.current,wo(e),a)for(e=0;e<a.length;e++)n=a[e],r=n._getVersion,r=r(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Rs(t)};it.render=function(e,t,n){if(!As(t))throw Error(j(200));return Ls(null,e,t,!1,n)};it.unmountComponentAtNode=function(e){if(!As(e))throw Error(j(40));return e._reactRootContainer?(xa(function(){Ls(null,null,e,!1,function(){e._reactRootContainer=null,e[ln]=null})}),!0):!1};it.unstable_batchedUpdates=Gu;it.unstable_renderSubtreeIntoContainer=function(e,t,n,a){if(!As(n))throw Error(j(200));if(e==null||e._reactInternals===void 0)throw Error(j(38));return Ls(e,t,n,!1,a)};it.version="18.3.1-next-f1338f8080-20240426";function Ng(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ng)}catch(e){console.error(e)}}Ng(),Np.exports=it;var Ho=Np.exports;const C_=wp(Ho);var Rg,of=Ho;Rg=of.createRoot,of.hydrateRoot;function I_(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,a,r,o,i=[],s="",l=e.split("/");for(l[0]||l.shift();r=l.shift();)n=r[0],n==="*"?(i.push(n),s+=r[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(a=r.indexOf("?",1),o=r.indexOf(".",1),i.push(r.substring(1,~a?a:~o?o:r.length)),s+=~a&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(s+=(~a?"?":"")+"\\"+r.substring(o))):s+="/"+r;return{keys:i,pattern:new RegExp("^"+s+(t?"(?=$|/)":"/?$"),"i")}}var Ag={exports:{}},Lg={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xr=p;function T_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var q_=typeof Object.is=="function"?Object.is:T_,E_=xr.useState,P_=xr.useEffect,j_=xr.useLayoutEffect,N_=xr.useDebugValue;function R_(e,t){var n=t(),a=E_({inst:{value:n,getSnapshot:t}}),r=a[0].inst,o=a[1];return j_(function(){r.value=n,r.getSnapshot=t,Cc(r)&&o({inst:r})},[e,n,t]),P_(function(){return Cc(r)&&o({inst:r}),e(function(){Cc(r)&&o({inst:r})})},[e]),N_(n),n}function Cc(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!q_(e,n)}catch{return!0}}function A_(e,t){return t()}var L_=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?A_:R_;Lg.useSyncExternalStore=xr.useSyncExternalStore!==void 0?xr.useSyncExternalStore:L_;Ag.exports=Lg;var M_=Ag.exports;const O_=Pp.useInsertionEffect,D_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",z_=D_?p.useLayoutEffect:p.useEffect,W_=O_||z_,Mg=e=>{const t=p.useRef([e,(...n)=>t[0](...n)]).current;return W_(()=>{t[0]=e}),t[1]},F_="popstate",nh="pushState",ah="replaceState",Y_="hashchange",sf=[F_,nh,ah,Y_],H_=e=>{for(const t of sf)addEventListener(t,e);return()=>{for(const t of sf)removeEventListener(t,e)}},Og=(e,t)=>M_.useSyncExternalStore(H_,e,t),B_=()=>location.search,V_=({ssrSearch:e=""}={})=>Og(B_,()=>e),cf=()=>location.pathname,U_=({ssrPath:e}={})=>Og(cf,e?()=>e:cf),$_=(e,{replace:t=!1,state:n=null}={})=>history[t?ah:nh](n,"",e),G_=(e={})=>[U_(e),$_],lf=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[lf]>"u"){for(const e of[nh,ah]){const t=history[e];history[e]=function(){const n=t.apply(this,arguments),a=new Event(e);return a.arguments=arguments,dispatchEvent(a),n}}Object.defineProperty(window,lf,{value:!0})}const K_=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",Dg=(e="")=>e==="/"?"":e,Q_=(e,t)=>e[0]==="~"?e.slice(1):Dg(t)+e,X_=(e="",t)=>K_(uf(Dg(e)),uf(t)),uf=e=>{try{return decodeURI(e)}catch{return e}},zg={hook:G_,searchHook:V_,parser:I_,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:e=>e},Wg=p.createContext(zg),Bo=()=>p.useContext(Wg),Fg={},Yg=p.createContext(Fg),Z_=()=>p.useContext(Yg),Ms=e=>{const[t,n]=e.hook(e);return[X_(e.base,t),Mg((a,r)=>n(Q_(a,e.base),r))]},rh=()=>Ms(Bo()),Hg=(e,t,n,a)=>{const{pattern:r,keys:o}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",a),i=r.exec(n)||[],[s,...l]=i;return s!==void 0?[!0,(()=>{const u=o!==!1?Object.fromEntries(o.map((d,f)=>[d,l[f]])):i.groups;let h={...l};return u&&Object.assign(h,u),h})(),...a?[s]:[]]:[!1,null]},J_=({children:e,...t})=>{var h,d;const n=Bo(),a=t.hook?zg:n;let r=a;const[o,i]=((h=t.ssrPath)==null?void 0:h.split("?"))??[];i&&(t.ssrSearch=i,t.ssrPath=o),t.hrefs=t.hrefs??((d=t.hook)==null?void 0:d.hrefs);let s=p.useRef({}),l=s.current,u=l;for(let f in a){const w=f==="base"?a[f]+(t[f]||""):t[f]||a[f];l===u&&w!==u[f]&&(s.current=u={...u}),u[f]=w,w!==a[f]&&(r=u)}return p.createElement(Wg.Provider,{value:r,children:e})},hf=({children:e,component:t},n)=>t?p.createElement(t,{params:n}):typeof e=="function"?e(n):e,ek=e=>{let t=p.useRef(Fg),n=t.current;for(const a in e)e[a]!==n[a]&&(n=e);return Object.keys(e).length===0&&(n=e),t.current=n},Hr=({path:e,nest:t,match:n,...a})=>{const r=Bo(),[o]=Ms(r),[i,s,l]=n??Hg(r.parser,e,o,t),u=ek({...Z_(),...s});if(!i)return null;const h=l?p.createElement(J_,{base:l},hf(a,u)):hf(a,u);return p.createElement(Yg.Provider,{value:u,children:h})};p.forwardRef((e,t)=>{const n=Bo(),[a,r]=Ms(n),{to:o="",href:i=o,onClick:s,asChild:l,children:u,className:h,replace:d,state:f,...w}=e,x=Mg(_=>{_.ctrlKey||_.metaKey||_.altKey||_.shiftKey||_.button!==0||(s==null||s(_),_.defaultPrevented||(_.preventDefault(),r(i,e)))}),m=n.hrefs(i[0]==="~"?i.slice(1):n.base+i,n);return l&&p.isValidElement(u)?p.cloneElement(u,{onClick:x,href:m}):p.createElement("a",{...w,onClick:x,href:m,className:h!=null&&h.call?h(a===i):h,children:u,ref:t})});const Bg=e=>Array.isArray(e)?e.flatMap(t=>Bg(t&&t.type===p.Fragment?t.props.children:t)):[e],tk=({children:e,location:t})=>{const n=Bo(),[a]=Ms(n);for(const r of Bg(e)){let o=0;if(p.isValidElement(r)&&(o=Hg(n.parser,r.props.path,t||a,r.props.nest))[0])return p.cloneElement(r,{match:o})}return null};var Er=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},_a=typeof window>"u"||"Deno"in globalThis;function ht(){}function nk(e,t){return typeof e=="function"?e(t):e}function Al(e){return typeof e=="number"&&e>=0&&e!==1/0}function Vg(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Qa(e,t){return typeof e=="function"?e(t):e}function Ct(e,t){return typeof e=="function"?e(t):e}function df(e,t){const{type:n="all",exact:a,fetchStatus:r,predicate:o,queryKey:i,stale:s}=e;if(i){if(a){if(t.queryHash!==oh(i,t.options))return!1}else if(!qo(t.queryKey,i))return!1}if(n!=="all"){const l=t.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof s=="boolean"&&t.isStale()!==s||r&&r!==t.state.fetchStatus||o&&!o(t))}function ff(e,t){const{exact:n,status:a,predicate:r,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(n){if(ka(t.options.mutationKey)!==ka(o))return!1}else if(!qo(t.options.mutationKey,o))return!1}return!(a&&t.state.status!==a||r&&!r(t))}function oh(e,t){return((t==null?void 0:t.queryKeyHashFn)||ka)(e)}function ka(e){return JSON.stringify(e,(t,n)=>Ll(n)?Object.keys(n).sort().reduce((a,r)=>(a[r]=n[r],a),{}):n)}function qo(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!qo(e[n],t[n])):!1}function Ug(e,t){if(e===t)return e;const n=pf(e)&&pf(t);if(n||Ll(e)&&Ll(t)){const a=n?e:Object.keys(e),r=a.length,o=n?t:Object.keys(t),i=o.length,s=n?[]:{};let l=0;for(let u=0;u<i;u++){const h=n?u:o[u];(!n&&a.includes(h)||n)&&e[h]===void 0&&t[h]===void 0?(s[h]=void 0,l++):(s[h]=Ug(e[h],t[h]),s[h]===e[h]&&e[h]!==void 0&&l++)}return r===i&&l===r?e:s}return t}function ls(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function pf(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Ll(e){if(!mf(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!mf(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function mf(e){return Object.prototype.toString.call(e)==="[object Object]"}function ak(e){return new Promise(t=>{setTimeout(t,e)})}function Ml(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?Ug(e,t):t}function rk(e,t,n=0){const a=[...e,t];return n&&a.length>n?a.slice(1):a}function ok(e,t,n=0){const a=[t,...e];return n&&a.length>n?a.slice(0,-1):a}var ih=Symbol();function $g(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===ih?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var ca,qn,tr,lp,ik=(lp=class extends Er{constructor(){super();W(this,ca);W(this,qn);W(this,tr);A(this,tr,t=>{if(!_a&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){C(this,qn)||this.setEventListener(C(this,tr))}onUnsubscribe(){var t;this.hasListeners()||((t=C(this,qn))==null||t.call(this),A(this,qn,void 0))}setEventListener(t){var n;A(this,tr,t),(n=C(this,qn))==null||n.call(this),A(this,qn,t(a=>{typeof a=="boolean"?this.setFocused(a):this.onFocus()}))}setFocused(t){C(this,ca)!==t&&(A(this,ca,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof C(this,ca)=="boolean"?C(this,ca):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},ca=new WeakMap,qn=new WeakMap,tr=new WeakMap,lp),sh=new ik,nr,En,ar,up,sk=(up=class extends Er{constructor(){super();W(this,nr,!0);W(this,En);W(this,ar);A(this,ar,t=>{if(!_a&&window.addEventListener){const n=()=>t(!0),a=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",a)}}})}onSubscribe(){C(this,En)||this.setEventListener(C(this,ar))}onUnsubscribe(){var t;this.hasListeners()||((t=C(this,En))==null||t.call(this),A(this,En,void 0))}setEventListener(t){var n;A(this,ar,t),(n=C(this,En))==null||n.call(this),A(this,En,t(this.setOnline.bind(this)))}setOnline(t){C(this,nr)!==t&&(A(this,nr,t),this.listeners.forEach(a=>{a(t)}))}isOnline(){return C(this,nr)}},nr=new WeakMap,En=new WeakMap,ar=new WeakMap,up),us=new sk;function Ol(){let e,t;const n=new Promise((r,o)=>{e=r,t=o});n.status="pending",n.catch(()=>{});function a(r){Object.assign(n,r),delete n.resolve,delete n.reject}return n.resolve=r=>{a({status:"fulfilled",value:r}),e(r)},n.reject=r=>{a({status:"rejected",reason:r}),t(r)},n}function ck(e){return Math.min(1e3*2**e,3e4)}function Gg(e){return(e??"online")==="online"?us.isOnline():!0}var Kg=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Ic(e){return e instanceof Kg}function Qg(e){let t=!1,n=0,a=!1,r;const o=Ol(),i=m=>{var _;a||(f(new Kg(m)),(_=e.abort)==null||_.call(e))},s=()=>{t=!0},l=()=>{t=!1},u=()=>sh.isFocused()&&(e.networkMode==="always"||us.isOnline())&&e.canRun(),h=()=>Gg(e.networkMode)&&e.canRun(),d=m=>{var _;a||(a=!0,(_=e.onSuccess)==null||_.call(e,m),r==null||r(),o.resolve(m))},f=m=>{var _;a||(a=!0,(_=e.onError)==null||_.call(e,m),r==null||r(),o.reject(m))},w=()=>new Promise(m=>{var _;r=g=>{(a||u())&&m(g)},(_=e.onPause)==null||_.call(e)}).then(()=>{var m;r=void 0,a||(m=e.onContinue)==null||m.call(e)}),x=()=>{if(a)return;let m;const _=n===0?e.initialPromise:void 0;try{m=_??e.fn()}catch(g){m=Promise.reject(g)}Promise.resolve(m).then(d).catch(g=>{var T;if(a)return;const y=e.retry??(_a?0:3),v=e.retryDelay??ck,k=typeof v=="function"?v(n,g):v,S=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,g);if(t||!S){f(g);return}n++,(T=e.onFail)==null||T.call(e,n,g),ak(k).then(()=>u()?void 0:w()).then(()=>{t?f(g):x()})})};return{promise:o,cancel:i,continue:()=>(r==null||r(),o),cancelRetry:s,continueRetry:l,canStart:h,start:()=>(h()?x():w().then(x),o)}}function lk(){let e=[],t=0,n=s=>{s()},a=s=>{s()},r=s=>setTimeout(s,0);const o=s=>{t?e.push(s):r(()=>{n(s)})},i=()=>{const s=e;e=[],s.length&&r(()=>{a(()=>{s.forEach(l=>{n(l)})})})};return{batch:s=>{let l;t++;try{l=s()}finally{t--,t||i()}return l},batchCalls:s=>(...l)=>{o(()=>{s(...l)})},schedule:o,setNotifyFunction:s=>{n=s},setBatchNotifyFunction:s=>{a=s},setScheduler:s=>{r=s}}}var _e=lk(),la,hp,Xg=(hp=class{constructor(){W(this,la)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Al(this.gcTime)&&A(this,la,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(_a?1/0:5*60*1e3))}clearGcTimeout(){C(this,la)&&(clearTimeout(C(this,la)),A(this,la,void 0))}},la=new WeakMap,hp),rr,or,ut,Ae,Ao,ua,_t,Qt,dp,uk=(dp=class extends Xg{constructor(t){super();W(this,_t);W(this,rr);W(this,or);W(this,ut);W(this,Ae);W(this,Ao);W(this,ua);A(this,ua,!1),A(this,Ao,t.defaultOptions),this.setOptions(t.options),this.observers=[],A(this,ut,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,A(this,rr,hk(this.options)),this.state=t.state??C(this,rr),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=C(this,Ae))==null?void 0:t.promise}setOptions(t){this.options={...C(this,Ao),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&C(this,ut).remove(this)}setData(t,n){const a=Ml(this.state.data,t,this.options);return H(this,_t,Qt).call(this,{data:a,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),a}setState(t,n){H(this,_t,Qt).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var a,r;const n=(a=C(this,Ae))==null?void 0:a.promise;return(r=C(this,Ae))==null||r.cancel(t),n?n.then(ht).catch(ht):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(C(this,rr))}isActive(){return this.observers.some(t=>Ct(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ih||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!Vg(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(a=>a.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=C(this,Ae))==null||n.continue()}onOnline(){var n;const t=this.observers.find(a=>a.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=C(this,Ae))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),C(this,ut).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(C(this,Ae)&&(C(this,ua)?C(this,Ae).cancel({revert:!0}):C(this,Ae).cancelRetry()),this.scheduleGc()),C(this,ut).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||H(this,_t,Qt).call(this,{type:"invalidate"})}fetch(t,n){var l,u,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(C(this,Ae))return C(this,Ae).continueRetry(),C(this,Ae).promise}if(t&&this.setOptions(t),!this.options.queryFn){const d=this.observers.find(f=>f.options.queryFn);d&&this.setOptions(d.options)}const a=new AbortController,r=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(A(this,ua,!0),a.signal)})},o=()=>{const d=$g(this.options,n),f={queryKey:this.queryKey,meta:this.meta};return r(f),A(this,ua,!1),this.options.persister?this.options.persister(d,f,this):d(f)},i={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};r(i),(l=this.options.behavior)==null||l.onFetch(i,this),A(this,or,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=i.fetchOptions)==null?void 0:u.meta))&&H(this,_t,Qt).call(this,{type:"fetch",meta:(h=i.fetchOptions)==null?void 0:h.meta});const s=d=>{var f,w,x,m;Ic(d)&&d.silent||H(this,_t,Qt).call(this,{type:"error",error:d}),Ic(d)||((w=(f=C(this,ut).config).onError)==null||w.call(f,d,this),(m=(x=C(this,ut).config).onSettled)==null||m.call(x,this.state.data,d,this)),this.scheduleGc()};return A(this,Ae,Qg({initialPromise:n==null?void 0:n.initialPromise,fn:i.fetchFn,abort:a.abort.bind(a),onSuccess:d=>{var f,w,x,m;if(d===void 0){s(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(d)}catch(_){s(_);return}(w=(f=C(this,ut).config).onSuccess)==null||w.call(f,d,this),(m=(x=C(this,ut).config).onSettled)==null||m.call(x,d,this.state.error,this),this.scheduleGc()},onError:s,onFail:(d,f)=>{H(this,_t,Qt).call(this,{type:"failed",failureCount:d,error:f})},onPause:()=>{H(this,_t,Qt).call(this,{type:"pause"})},onContinue:()=>{H(this,_t,Qt).call(this,{type:"continue"})},retry:i.options.retry,retryDelay:i.options.retryDelay,networkMode:i.options.networkMode,canRun:()=>!0})),C(this,Ae).start()}},rr=new WeakMap,or=new WeakMap,ut=new WeakMap,Ae=new WeakMap,Ao=new WeakMap,ua=new WeakMap,_t=new WeakSet,Qt=function(t){const n=a=>{switch(t.type){case"failed":return{...a,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...Zg(a.data,this.options),fetchMeta:t.meta??null};case"success":return{...a,data:t.data,dataUpdateCount:a.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=t.error;return Ic(r)&&r.revert&&C(this,or)?{...C(this,or),fetchStatus:"idle"}:{...a,error:r,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...t.state}}};this.state=n(this.state),_e.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),C(this,ut).notify({query:this,type:"updated",action:t})})},dp);function Zg(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Gg(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function hk(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,a=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Mt,fp,dk=(fp=class extends Er{constructor(t={}){super();W(this,Mt);this.config=t,A(this,Mt,new Map)}build(t,n,a){const r=n.queryKey,o=n.queryHash??oh(r,n);let i=this.get(o);return i||(i=new uk({cache:this,queryKey:r,queryHash:o,options:t.defaultQueryOptions(n),state:a,defaultOptions:t.getQueryDefaults(r)}),this.add(i)),i}add(t){C(this,Mt).has(t.queryHash)||(C(this,Mt).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=C(this,Mt).get(t.queryHash);n&&(t.destroy(),n===t&&C(this,Mt).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){_e.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return C(this,Mt).get(t)}getAll(){return[...C(this,Mt).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(a=>df(n,a))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(a=>df(t,a)):n}notify(t){_e.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){_e.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){_e.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Mt=new WeakMap,fp),Ot,De,ha,Dt,bn,pp,fk=(pp=class extends Xg{constructor(t){super();W(this,Dt);W(this,Ot);W(this,De);W(this,ha);this.mutationId=t.mutationId,A(this,De,t.mutationCache),A(this,Ot,[]),this.state=t.state||Jg(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){C(this,Ot).includes(t)||(C(this,Ot).push(t),this.clearGcTimeout(),C(this,De).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){A(this,Ot,C(this,Ot).filter(n=>n!==t)),this.scheduleGc(),C(this,De).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){C(this,Ot).length||(this.state.status==="pending"?this.scheduleGc():C(this,De).remove(this))}continue(){var t;return((t=C(this,ha))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var r,o,i,s,l,u,h,d,f,w,x,m,_,g,y,v,k,S,T,I;A(this,ha,Qg({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(q,P)=>{H(this,Dt,bn).call(this,{type:"failed",failureCount:q,error:P})},onPause:()=>{H(this,Dt,bn).call(this,{type:"pause"})},onContinue:()=>{H(this,Dt,bn).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>C(this,De).canRun(this)}));const n=this.state.status==="pending",a=!C(this,ha).canStart();try{if(!n){H(this,Dt,bn).call(this,{type:"pending",variables:t,isPaused:a}),await((o=(r=C(this,De).config).onMutate)==null?void 0:o.call(r,t,this));const P=await((s=(i=this.options).onMutate)==null?void 0:s.call(i,t));P!==this.state.context&&H(this,Dt,bn).call(this,{type:"pending",context:P,variables:t,isPaused:a})}const q=await C(this,ha).start();return await((u=(l=C(this,De).config).onSuccess)==null?void 0:u.call(l,q,t,this.state.context,this)),await((d=(h=this.options).onSuccess)==null?void 0:d.call(h,q,t,this.state.context)),await((w=(f=C(this,De).config).onSettled)==null?void 0:w.call(f,q,null,this.state.variables,this.state.context,this)),await((m=(x=this.options).onSettled)==null?void 0:m.call(x,q,null,t,this.state.context)),H(this,Dt,bn).call(this,{type:"success",data:q}),q}catch(q){try{throw await((g=(_=C(this,De).config).onError)==null?void 0:g.call(_,q,t,this.state.context,this)),await((v=(y=this.options).onError)==null?void 0:v.call(y,q,t,this.state.context)),await((S=(k=C(this,De).config).onSettled)==null?void 0:S.call(k,void 0,q,this.state.variables,this.state.context,this)),await((I=(T=this.options).onSettled)==null?void 0:I.call(T,void 0,q,t,this.state.context)),q}finally{H(this,Dt,bn).call(this,{type:"error",error:q})}}finally{C(this,De).runNext(this)}}},Ot=new WeakMap,De=new WeakMap,ha=new WeakMap,Dt=new WeakSet,bn=function(t){const n=a=>{switch(t.type){case"failed":return{...a,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...a,isPaused:!0};case"continue":return{...a,isPaused:!1};case"pending":return{...a,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...a,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...a,data:void 0,error:t.error,failureCount:a.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),_e.batch(()=>{C(this,Ot).forEach(a=>{a.onMutationUpdate(t)}),C(this,De).notify({mutation:this,type:"updated",action:t})})},pp);function Jg(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Xe,Lo,mp,pk=(mp=class extends Er{constructor(t={}){super();W(this,Xe);W(this,Lo);this.config=t,A(this,Xe,new Map),A(this,Lo,Date.now())}build(t,n,a){const r=new fk({mutationCache:this,mutationId:++Go(this,Lo)._,options:t.defaultMutationOptions(n),state:a});return this.add(r),r}add(t){const n=di(t),a=C(this,Xe).get(n)??[];a.push(t),C(this,Xe).set(n,a),this.notify({type:"added",mutation:t})}remove(t){var a;const n=di(t);if(C(this,Xe).has(n)){const r=(a=C(this,Xe).get(n))==null?void 0:a.filter(o=>o!==t);r&&(r.length===0?C(this,Xe).delete(n):C(this,Xe).set(n,r))}this.notify({type:"removed",mutation:t})}canRun(t){var a;const n=(a=C(this,Xe).get(di(t)))==null?void 0:a.find(r=>r.state.status==="pending");return!n||n===t}runNext(t){var a;const n=(a=C(this,Xe).get(di(t)))==null?void 0:a.find(r=>r!==t&&r.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){_e.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...C(this,Xe).values()].flat()}find(t){const n={exact:!0,...t};return this.getAll().find(a=>ff(n,a))}findAll(t={}){return this.getAll().filter(n=>ff(t,n))}notify(t){_e.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return _e.batch(()=>Promise.all(t.map(n=>n.continue().catch(ht))))}},Xe=new WeakMap,Lo=new WeakMap,mp);function di(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function gf(e){return{onFetch:(t,n)=>{var h,d,f,w,x;const a=t.options,r=(f=(d=(h=t.fetchOptions)==null?void 0:h.meta)==null?void 0:d.fetchMore)==null?void 0:f.direction,o=((w=t.state.data)==null?void 0:w.pages)||[],i=((x=t.state.data)==null?void 0:x.pageParams)||[];let s={pages:[],pageParams:[]},l=0;const u=async()=>{let m=!1;const _=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(t.signal.aborted?m=!0:t.signal.addEventListener("abort",()=>{m=!0}),t.signal)})},g=$g(t.options,t.fetchOptions),y=async(v,k,S)=>{if(m)return Promise.reject();if(k==null&&v.pages.length)return Promise.resolve(v);const T={queryKey:t.queryKey,pageParam:k,direction:S?"backward":"forward",meta:t.options.meta};_(T);const I=await g(T),{maxPages:q}=t.options,P=S?ok:rk;return{pages:P(v.pages,I,q),pageParams:P(v.pageParams,k,q)}};if(r&&o.length){const v=r==="backward",k=v?mk:yf,S={pages:o,pageParams:i},T=k(a,S);s=await y(S,T,v)}else{const v=e??o.length;do{const k=l===0?i[0]??a.initialPageParam:yf(a,s);if(l>0&&k==null)break;s=await y(s,k),l++}while(l<v)}return s};t.options.persister?t.fetchFn=()=>{var m,_;return(_=(m=t.options).persister)==null?void 0:_.call(m,u,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function yf(e,{pages:t,pageParams:n}){const a=t.length-1;return t.length>0?e.getNextPageParam(t[a],t,n[a],n):void 0}function mk(e,{pages:t,pageParams:n}){var a;return t.length>0?(a=e.getPreviousPageParam)==null?void 0:a.call(e,t[0],t,n[0],n):void 0}var me,Pn,jn,ir,sr,Nn,cr,lr,gp,gk=(gp=class{constructor(e={}){W(this,me);W(this,Pn);W(this,jn);W(this,ir);W(this,sr);W(this,Nn);W(this,cr);W(this,lr);A(this,me,e.queryCache||new dk),A(this,Pn,e.mutationCache||new pk),A(this,jn,e.defaultOptions||{}),A(this,ir,new Map),A(this,sr,new Map),A(this,Nn,0)}mount(){Go(this,Nn)._++,C(this,Nn)===1&&(A(this,cr,sh.subscribe(async e=>{e&&(await this.resumePausedMutations(),C(this,me).onFocus())})),A(this,lr,us.subscribe(async e=>{e&&(await this.resumePausedMutations(),C(this,me).onOnline())})))}unmount(){var e,t;Go(this,Nn)._--,C(this,Nn)===0&&((e=C(this,cr))==null||e.call(this),A(this,cr,void 0),(t=C(this,lr))==null||t.call(this),A(this,lr,void 0))}isFetching(e){return C(this,me).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return C(this,Pn).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=C(this,me).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),a=C(this,me).build(this,n);return e.revalidateIfStale&&a.isStaleByTime(Qa(n.staleTime,a))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return C(this,me).findAll(e).map(({queryKey:t,state:n})=>{const a=n.data;return[t,a]})}setQueryData(e,t,n){const a=this.defaultQueryOptions({queryKey:e}),r=C(this,me).get(a.queryHash),o=r==null?void 0:r.state.data,i=nk(t,o);if(i!==void 0)return C(this,me).build(this,a).setData(i,{...n,manual:!0})}setQueriesData(e,t,n){return _e.batch(()=>C(this,me).findAll(e).map(({queryKey:a})=>[a,this.setQueryData(a,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=C(this,me).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=C(this,me);_e.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=C(this,me),a={type:"active",...e};return _e.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries(a,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},a=_e.batch(()=>C(this,me).findAll(e).map(r=>r.cancel(n)));return Promise.all(a).then(ht).catch(ht)}invalidateQueries(e={},t={}){return _e.batch(()=>{if(C(this,me).findAll(e).forEach(a=>{a.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},a=_e.batch(()=>C(this,me).findAll(e).filter(r=>!r.isDisabled()).map(r=>{let o=r.fetch(void 0,n);return n.throwOnError||(o=o.catch(ht)),r.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(a).then(ht)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=C(this,me).build(this,t);return n.isStaleByTime(Qa(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ht).catch(ht)}fetchInfiniteQuery(e){return e.behavior=gf(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ht).catch(ht)}ensureInfiniteQueryData(e){return e.behavior=gf(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return us.isOnline()?C(this,Pn).resumePausedMutations():Promise.resolve()}getQueryCache(){return C(this,me)}getMutationCache(){return C(this,Pn)}getDefaultOptions(){return C(this,jn)}setDefaultOptions(e){A(this,jn,e)}setQueryDefaults(e,t){C(this,ir).set(ka(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...C(this,ir).values()];let n={};return t.forEach(a=>{qo(e,a.queryKey)&&(n={...n,...a.defaultOptions})}),n}setMutationDefaults(e,t){C(this,sr).set(ka(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...C(this,sr).values()];let n={};return t.forEach(a=>{qo(e,a.mutationKey)&&(n={...n,...a.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...C(this,jn).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=oh(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===ih&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...C(this,jn).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){C(this,me).clear(),C(this,Pn).clear()}},me=new WeakMap,Pn=new WeakMap,jn=new WeakMap,ir=new WeakMap,sr=new WeakMap,Nn=new WeakMap,cr=new WeakMap,lr=new WeakMap,gp),Be,G,Mo,ze,da,ur,Rn,zt,Oo,hr,dr,fa,pa,An,fr,ee,Qr,Dl,zl,Wl,Fl,Yl,Hl,Bl,ey,yp,yk=(yp=class extends Er{constructor(t,n){super();W(this,ee);W(this,Be);W(this,G);W(this,Mo);W(this,ze);W(this,da);W(this,ur);W(this,Rn);W(this,zt);W(this,Oo);W(this,hr);W(this,dr);W(this,fa);W(this,pa);W(this,An);W(this,fr,new Set);this.options=n,A(this,Be,t),A(this,zt,null),A(this,Rn,Ol()),this.options.experimental_prefetchInRender||C(this,Rn).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(C(this,G).addObserver(this),vf(C(this,G),this.options)?H(this,ee,Qr).call(this):this.updateResult(),H(this,ee,Fl).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Vl(C(this,G),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Vl(C(this,G),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,H(this,ee,Yl).call(this),H(this,ee,Hl).call(this),C(this,G).removeObserver(this)}setOptions(t,n){const a=this.options,r=C(this,G);if(this.options=C(this,Be).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ct(this.options.enabled,C(this,G))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");H(this,ee,Bl).call(this),C(this,G).setOptions(this.options),a._defaulted&&!ls(this.options,a)&&C(this,Be).getQueryCache().notify({type:"observerOptionsUpdated",query:C(this,G),observer:this});const o=this.hasListeners();o&&wf(C(this,G),r,this.options,a)&&H(this,ee,Qr).call(this),this.updateResult(n),o&&(C(this,G)!==r||Ct(this.options.enabled,C(this,G))!==Ct(a.enabled,C(this,G))||Qa(this.options.staleTime,C(this,G))!==Qa(a.staleTime,C(this,G)))&&H(this,ee,Dl).call(this);const i=H(this,ee,zl).call(this);o&&(C(this,G)!==r||Ct(this.options.enabled,C(this,G))!==Ct(a.enabled,C(this,G))||i!==C(this,An))&&H(this,ee,Wl).call(this,i)}getOptimisticResult(t){const n=C(this,Be).getQueryCache().build(C(this,Be),t),a=this.createResult(n,t);return wk(this,a)&&(A(this,ze,a),A(this,ur,this.options),A(this,da,C(this,G).state)),a}getCurrentResult(){return C(this,ze)}trackResult(t,n){const a={};return Object.keys(t).forEach(r=>{Object.defineProperty(a,r,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(r),n==null||n(r),t[r])})}),a}trackProp(t){C(this,fr).add(t)}getCurrentQuery(){return C(this,G)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=C(this,Be).defaultQueryOptions(t),a=C(this,Be).getQueryCache().build(C(this,Be),n);return a.fetch().then(()=>this.createResult(a,n))}fetch(t){return H(this,ee,Qr).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),C(this,ze)))}createResult(t,n){var q;const a=C(this,G),r=this.options,o=C(this,ze),i=C(this,da),s=C(this,ur),u=t!==a?t.state:C(this,Mo),{state:h}=t;let d={...h},f=!1,w;if(n._optimisticResults){const P=this.hasListeners(),N=!P&&vf(t,n),D=P&&wf(t,a,n,r);(N||D)&&(d={...d,...Zg(h.data,t.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:x,errorUpdatedAt:m,status:_}=d;if(n.select&&d.data!==void 0)if(o&&d.data===(i==null?void 0:i.data)&&n.select===C(this,Oo))w=C(this,hr);else try{A(this,Oo,n.select),w=n.select(d.data),w=Ml(o==null?void 0:o.data,w,n),A(this,hr,w),A(this,zt,null)}catch(P){A(this,zt,P)}else w=d.data;if(n.placeholderData!==void 0&&w===void 0&&_==="pending"){let P;if(o!=null&&o.isPlaceholderData&&n.placeholderData===(s==null?void 0:s.placeholderData))P=o.data;else if(P=typeof n.placeholderData=="function"?n.placeholderData((q=C(this,dr))==null?void 0:q.state.data,C(this,dr)):n.placeholderData,n.select&&P!==void 0)try{P=n.select(P),A(this,zt,null)}catch(N){A(this,zt,N)}P!==void 0&&(_="success",w=Ml(o==null?void 0:o.data,P,n),f=!0)}C(this,zt)&&(x=C(this,zt),w=C(this,hr),m=Date.now(),_="error");const g=d.fetchStatus==="fetching",y=_==="pending",v=_==="error",k=y&&g,S=w!==void 0,I={status:_,fetchStatus:d.fetchStatus,isPending:y,isSuccess:_==="success",isError:v,isInitialLoading:k,isLoading:k,data:w,dataUpdatedAt:d.dataUpdatedAt,error:x,errorUpdatedAt:m,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>u.dataUpdateCount||d.errorUpdateCount>u.errorUpdateCount,isFetching:g,isRefetching:g&&!y,isLoadingError:v&&!S,isPaused:d.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:v&&S,isStale:ch(t,n),refetch:this.refetch,promise:C(this,Rn)};if(this.options.experimental_prefetchInRender){const P=O=>{I.status==="error"?O.reject(I.error):I.data!==void 0&&O.resolve(I.data)},N=()=>{const O=A(this,Rn,I.promise=Ol());P(O)},D=C(this,Rn);switch(D.status){case"pending":t.queryHash===a.queryHash&&P(D);break;case"fulfilled":(I.status==="error"||I.data!==D.value)&&N();break;case"rejected":(I.status!=="error"||I.error!==D.reason)&&N();break}}return I}updateResult(t){const n=C(this,ze),a=this.createResult(C(this,G),this.options);if(A(this,da,C(this,G).state),A(this,ur,this.options),C(this,da).data!==void 0&&A(this,dr,C(this,G)),ls(a,n))return;A(this,ze,a);const r={},o=()=>{if(!n)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!C(this,fr).size)return!0;const l=new Set(s??C(this,fr));return this.options.throwOnError&&l.add("error"),Object.keys(C(this,ze)).some(u=>{const h=u;return C(this,ze)[h]!==n[h]&&l.has(h)})};(t==null?void 0:t.listeners)!==!1&&o()&&(r.listeners=!0),H(this,ee,ey).call(this,{...r,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&H(this,ee,Fl).call(this)}},Be=new WeakMap,G=new WeakMap,Mo=new WeakMap,ze=new WeakMap,da=new WeakMap,ur=new WeakMap,Rn=new WeakMap,zt=new WeakMap,Oo=new WeakMap,hr=new WeakMap,dr=new WeakMap,fa=new WeakMap,pa=new WeakMap,An=new WeakMap,fr=new WeakMap,ee=new WeakSet,Qr=function(t){H(this,ee,Bl).call(this);let n=C(this,G).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(ht)),n},Dl=function(){H(this,ee,Yl).call(this);const t=Qa(this.options.staleTime,C(this,G));if(_a||C(this,ze).isStale||!Al(t))return;const a=Vg(C(this,ze).dataUpdatedAt,t)+1;A(this,fa,setTimeout(()=>{C(this,ze).isStale||this.updateResult()},a))},zl=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(C(this,G)):this.options.refetchInterval)??!1},Wl=function(t){H(this,ee,Hl).call(this),A(this,An,t),!(_a||Ct(this.options.enabled,C(this,G))===!1||!Al(C(this,An))||C(this,An)===0)&&A(this,pa,setInterval(()=>{(this.options.refetchIntervalInBackground||sh.isFocused())&&H(this,ee,Qr).call(this)},C(this,An)))},Fl=function(){H(this,ee,Dl).call(this),H(this,ee,Wl).call(this,H(this,ee,zl).call(this))},Yl=function(){C(this,fa)&&(clearTimeout(C(this,fa)),A(this,fa,void 0))},Hl=function(){C(this,pa)&&(clearInterval(C(this,pa)),A(this,pa,void 0))},Bl=function(){const t=C(this,Be).getQueryCache().build(C(this,Be),this.options);if(t===C(this,G))return;const n=C(this,G);A(this,G,t),A(this,Mo,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},ey=function(t){_e.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(C(this,ze))}),C(this,Be).getQueryCache().notify({query:C(this,G),type:"observerResultsUpdated"})})},yp);function vk(e,t){return Ct(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function vf(e,t){return vk(e,t)||e.state.data!==void 0&&Vl(e,t,t.refetchOnMount)}function Vl(e,t,n){if(Ct(t.enabled,e)!==!1){const a=typeof n=="function"?n(e):n;return a==="always"||a!==!1&&ch(e,t)}return!1}function wf(e,t,n,a){return(e!==t||Ct(a.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&ch(e,n)}function ch(e,t){return Ct(t.enabled,e)!==!1&&e.isStaleByTime(Qa(t.staleTime,e))}function wk(e,t){return!ls(e.getCurrentResult(),t)}var Ln,Mn,Ve,tn,sn,Ni,Ul,vp,bk=(vp=class extends Er{constructor(n,a){super();W(this,sn);W(this,Ln);W(this,Mn);W(this,Ve);W(this,tn);A(this,Ln,n),this.setOptions(a),this.bindMethods(),H(this,sn,Ni).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var r;const a=this.options;this.options=C(this,Ln).defaultMutationOptions(n),ls(this.options,a)||C(this,Ln).getMutationCache().notify({type:"observerOptionsUpdated",mutation:C(this,Ve),observer:this}),a!=null&&a.mutationKey&&this.options.mutationKey&&ka(a.mutationKey)!==ka(this.options.mutationKey)?this.reset():((r=C(this,Ve))==null?void 0:r.state.status)==="pending"&&C(this,Ve).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=C(this,Ve))==null||n.removeObserver(this)}onMutationUpdate(n){H(this,sn,Ni).call(this),H(this,sn,Ul).call(this,n)}getCurrentResult(){return C(this,Mn)}reset(){var n;(n=C(this,Ve))==null||n.removeObserver(this),A(this,Ve,void 0),H(this,sn,Ni).call(this),H(this,sn,Ul).call(this)}mutate(n,a){var r;return A(this,tn,a),(r=C(this,Ve))==null||r.removeObserver(this),A(this,Ve,C(this,Ln).getMutationCache().build(C(this,Ln),this.options)),C(this,Ve).addObserver(this),C(this,Ve).execute(n)}},Ln=new WeakMap,Mn=new WeakMap,Ve=new WeakMap,tn=new WeakMap,sn=new WeakSet,Ni=function(){var a;const n=((a=C(this,Ve))==null?void 0:a.state)??Jg();A(this,Mn,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Ul=function(n){_e.batch(()=>{var a,r,o,i,s,l,u,h;if(C(this,tn)&&this.hasListeners()){const d=C(this,Mn).variables,f=C(this,Mn).context;(n==null?void 0:n.type)==="success"?((r=(a=C(this,tn)).onSuccess)==null||r.call(a,n.data,d,f),(i=(o=C(this,tn)).onSettled)==null||i.call(o,n.data,null,d,f)):(n==null?void 0:n.type)==="error"&&((l=(s=C(this,tn)).onError)==null||l.call(s,n.error,d,f),(h=(u=C(this,tn)).onSettled)==null||h.call(u,void 0,n.error,d,f))}this.listeners.forEach(d=>{d(C(this,Mn))})})},vp),ty=p.createContext(void 0),lh=e=>{const t=p.useContext(ty);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},xk=({client:e,children:t})=>(p.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),c.jsx(ty.Provider,{value:e,children:t})),ny=p.createContext(!1),_k=()=>p.useContext(ny);ny.Provider;function kk(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Sk=p.createContext(kk()),Ck=()=>p.useContext(Sk);function ay(e,t){return typeof e=="function"?e(...t):!!e}function $l(){}var Ik=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Tk=e=>{p.useEffect(()=>{e.clearReset()},[e])},qk=({result:e,errorResetBoundary:t,throwOnError:n,query:a})=>e.isError&&!t.isReset()&&!e.isFetching&&a&&ay(n,[e.error,a]),Ek=e=>{e.suspense&&(e.staleTime===void 0&&(e.staleTime=1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},Pk=(e,t)=>e.isLoading&&e.isFetching&&!t,jk=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,bf=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function Nk(e,t,n){var h,d,f,w,x;const a=lh(),r=_k(),o=Ck(),i=a.defaultQueryOptions(e);(d=(h=a.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||d.call(h,i),i._optimisticResults=r?"isRestoring":"optimistic",Ek(i),Ik(i,o),Tk(o);const s=!a.getQueryCache().get(i.queryHash),[l]=p.useState(()=>new t(a,i)),u=l.getOptimisticResult(i);if(p.useSyncExternalStore(p.useCallback(m=>{const _=r?$l:l.subscribe(_e.batchCalls(m));return l.updateResult(),_},[l,r]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),p.useEffect(()=>{l.setOptions(i,{listeners:!1})},[i,l]),jk(i,u))throw bf(i,l,o);if(qk({result:u,errorResetBoundary:o,throwOnError:i.throwOnError,query:a.getQueryCache().get(i.queryHash)}))throw u.error;if((w=(f=a.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||w.call(f,i,u),i.experimental_prefetchInRender&&!_a&&Pk(u,r)){const m=s?bf(i,l,o):(x=a.getQueryCache().get(i.queryHash))==null?void 0:x.promise;m==null||m.catch($l).finally(()=>{l.updateResult()})}return i.notifyOnChangeProps?u:l.trackResult(u)}function Rk(e,t){return Nk(e,yk)}function xf(e,t){const n=lh(),[a]=p.useState(()=>new bk(n,e));p.useEffect(()=>{a.setOptions(e)},[a,e]);const r=p.useSyncExternalStore(p.useCallback(i=>a.subscribe(_e.batchCalls(i)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),o=p.useCallback((i,s)=>{a.mutate(i,s).catch($l)},[a]);if(r.error&&ay(a.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:o,mutateAsync:r.mutate}}async function ry(e){if(!e.ok){const t=await e.text()||e.statusText;throw new Error(`${e.status}: ${t}`)}}async function _f(e,t,n){const a=await fetch(t,{method:e,headers:n?{"Content-Type":"application/json"}:{},body:n?JSON.stringify(n):void 0,credentials:"include"});return await ry(a),a}const Ak=({on401:e})=>async({queryKey:t})=>{const n=await fetch(t[0],{credentials:"include"});return e==="returnNull"&&n.status===401?null:(await ry(n),await n.json())},Lk=new gk({defaultOptions:{queries:{queryFn:Ak({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),Mk=1,Ok=1e6;let Tc=0;function Dk(){return Tc=(Tc+1)%Number.MAX_SAFE_INTEGER,Tc.toString()}const qc=new Map,kf=e=>{if(qc.has(e))return;const t=setTimeout(()=>{qc.delete(e),so({type:"REMOVE_TOAST",toastId:e})},Ok);qc.set(e,t)},zk=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,Mk)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?kf(n):e.toasts.forEach(a=>{kf(a.id)}),{...e,toasts:e.toasts.map(a=>a.id===n||n===void 0?{...a,open:!1}:a)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},Ri=[];let Ai={toasts:[]};function so(e){Ai=zk(Ai,e),Ri.forEach(t=>{t(Ai)})}function Wk({...e}){const t=Dk(),n=r=>so({type:"UPDATE_TOAST",toast:{...r,id:t}}),a=()=>so({type:"DISMISS_TOAST",toastId:t});return so({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:r=>{r||a()}}}),{id:t,dismiss:a,update:n}}function oy(){const[e,t]=p.useState(Ai);return p.useEffect(()=>(Ri.push(t),()=>{const n=Ri.indexOf(t);n>-1&&Ri.splice(n,1)}),[e]),{...e,toast:Wk,dismiss:n=>so({type:"DISMISS_TOAST",toastId:n})}}function B(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(e==null||e(r),n===!1||!r.defaultPrevented)return t==null?void 0:t(r)}}function Sf(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function iy(...e){return t=>{let n=!1;const a=e.map(r=>{const o=Sf(r,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let r=0;r<a.length;r++){const o=a[r];typeof o=="function"?o():Sf(e[r],null)}}}}function ye(...e){return p.useCallback(iy(...e),e)}function Fk(e,t){const n=p.createContext(t),a=o=>{const{children:i,...s}=o,l=p.useMemo(()=>s,Object.values(s));return c.jsx(n.Provider,{value:l,children:i})};a.displayName=e+"Provider";function r(o){const i=p.useContext(n);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[a,r]}function gn(e,t=[]){let n=[];function a(o,i){const s=p.createContext(i),l=n.length;n=[...n,i];const u=d=>{var g;const{scope:f,children:w,...x}=d,m=((g=f==null?void 0:f[e])==null?void 0:g[l])||s,_=p.useMemo(()=>x,Object.values(x));return c.jsx(m.Provider,{value:_,children:w})};u.displayName=o+"Provider";function h(d,f){var m;const w=((m=f==null?void 0:f[e])==null?void 0:m[l])||s,x=p.useContext(w);if(x)return x;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${o}\``)}return[u,h]}const r=()=>{const o=n.map(i=>p.createContext(i));return function(s){const l=(s==null?void 0:s[e])||o;return p.useMemo(()=>({[`__scope${e}`]:{...s,[e]:l}}),[s,l])}};return r.scopeName=e,[a,Yk(r,...t)]}function Yk(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const a=e.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(o){const i=a.reduce((s,{useScope:l,scopeName:u})=>{const d=l(o)[`__scope${u}`];return{...s,...d}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}function Eo(e){const t=Bk(e),n=p.forwardRef((a,r)=>{const{children:o,...i}=a,s=p.Children.toArray(o),l=s.find(Uk);if(l){const u=l.props.children,h=s.map(d=>d===l?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:d);return c.jsx(t,{...i,ref:r,children:p.isValidElement(u)?p.cloneElement(u,void 0,h):null})}return c.jsx(t,{...i,ref:r,children:o})});return n.displayName=`${e}.Slot`,n}var Hk=Eo("Slot");function Bk(e){const t=p.forwardRef((n,a)=>{const{children:r,...o}=n;if(p.isValidElement(r)){const i=Gk(r),s=$k(o,r.props);return r.type!==p.Fragment&&(s.ref=a?iy(a,i):i),p.cloneElement(r,s)}return p.Children.count(r)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var sy=Symbol("radix.slottable");function Vk(e){const t=({children:n})=>c.jsx(c.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=sy,t}function Uk(e){return p.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===sy}function $k(e,t){const n={...t};for(const a in t){const r=e[a],o=t[a];/^on[A-Z]/.test(a)?r&&o?n[a]=(...s)=>{o(...s),r(...s)}:r&&(n[a]=r):a==="style"?n[a]={...r,...o}:a==="className"&&(n[a]=[r,o].filter(Boolean).join(" "))}return{...e,...n}}function Gk(e){var a,r;let t=(a=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function cy(e){const t=e+"CollectionProvider",[n,a]=gn(t),[r,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=m=>{const{scope:_,children:g}=m,y=Xt.useRef(null),v=Xt.useRef(new Map).current;return c.jsx(r,{scope:_,itemMap:v,collectionRef:y,children:g})};i.displayName=t;const s=e+"CollectionSlot",l=Eo(s),u=Xt.forwardRef((m,_)=>{const{scope:g,children:y}=m,v=o(s,g),k=ye(_,v.collectionRef);return c.jsx(l,{ref:k,children:y})});u.displayName=s;const h=e+"CollectionItemSlot",d="data-radix-collection-item",f=Eo(h),w=Xt.forwardRef((m,_)=>{const{scope:g,children:y,...v}=m,k=Xt.useRef(null),S=ye(_,k),T=o(h,g);return Xt.useEffect(()=>(T.itemMap.set(k,{ref:k,...v}),()=>void T.itemMap.delete(k))),c.jsx(f,{[d]:"",ref:S,children:y})});w.displayName=h;function x(m){const _=o(e+"CollectionConsumer",m);return Xt.useCallback(()=>{const y=_.collectionRef.current;if(!y)return[];const v=Array.from(y.querySelectorAll(`[${d}]`));return Array.from(_.itemMap.values()).sort((T,I)=>v.indexOf(T.ref.current)-v.indexOf(I.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:i,Slot:u,ItemSlot:w},x,a]}var Kk=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],K=Kk.reduce((e,t)=>{const n=Eo(`Primitive.${t}`),a=p.forwardRef((r,o)=>{const{asChild:i,...s}=r,l=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(l,{...s,ref:o})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{});function ly(e,t){e&&Ho.flushSync(()=>e.dispatchEvent(t))}function be(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...n)=>{var a;return(a=t.current)==null?void 0:a.call(t,...n)},[])}function Qk(e,t=globalThis==null?void 0:globalThis.document){const n=be(e);p.useEffect(()=>{const a=r=>{r.key==="Escape"&&n(r)};return t.addEventListener("keydown",a,{capture:!0}),()=>t.removeEventListener("keydown",a,{capture:!0})},[n,t])}var Xk="DismissableLayer",Gl="dismissableLayer.update",Zk="dismissableLayer.pointerDownOutside",Jk="dismissableLayer.focusOutside",Cf,uy=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Os=p.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:a,onPointerDownOutside:r,onFocusOutside:o,onInteractOutside:i,onDismiss:s,...l}=e,u=p.useContext(uy),[h,d]=p.useState(null),f=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,w]=p.useState({}),x=ye(t,I=>d(I)),m=Array.from(u.layers),[_]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),g=m.indexOf(_),y=h?m.indexOf(h):-1,v=u.layersWithOutsidePointerEventsDisabled.size>0,k=y>=g,S=tS(I=>{const q=I.target,P=[...u.branches].some(N=>N.contains(q));!k||P||(r==null||r(I),i==null||i(I),I.defaultPrevented||s==null||s())},f),T=nS(I=>{const q=I.target;[...u.branches].some(N=>N.contains(q))||(o==null||o(I),i==null||i(I),I.defaultPrevented||s==null||s())},f);return Qk(I=>{y===u.layers.size-1&&(a==null||a(I),!I.defaultPrevented&&s&&(I.preventDefault(),s()))},f),p.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Cf=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),If(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=Cf)}},[h,f,n,u]),p.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),If())},[h,u]),p.useEffect(()=>{const I=()=>w({});return document.addEventListener(Gl,I),()=>document.removeEventListener(Gl,I)},[]),c.jsx(K.div,{...l,ref:x,style:{pointerEvents:v?k?"auto":"none":void 0,...e.style},onFocusCapture:B(e.onFocusCapture,T.onFocusCapture),onBlurCapture:B(e.onBlurCapture,T.onBlurCapture),onPointerDownCapture:B(e.onPointerDownCapture,S.onPointerDownCapture)})});Os.displayName=Xk;var eS="DismissableLayerBranch",hy=p.forwardRef((e,t)=>{const n=p.useContext(uy),a=p.useRef(null),r=ye(t,a);return p.useEffect(()=>{const o=a.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),c.jsx(K.div,{...e,ref:r})});hy.displayName=eS;function tS(e,t=globalThis==null?void 0:globalThis.document){const n=be(e),a=p.useRef(!1),r=p.useRef(()=>{});return p.useEffect(()=>{const o=s=>{if(s.target&&!a.current){let l=function(){dy(Zk,n,u,{discrete:!0})};const u={originalEvent:s};s.pointerType==="touch"?(t.removeEventListener("click",r.current),r.current=l,t.addEventListener("click",r.current,{once:!0})):l()}else t.removeEventListener("click",r.current);a.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",o),t.removeEventListener("click",r.current)}},[t,n]),{onPointerDownCapture:()=>a.current=!0}}function nS(e,t=globalThis==null?void 0:globalThis.document){const n=be(e),a=p.useRef(!1);return p.useEffect(()=>{const r=o=>{o.target&&!a.current&&dy(Jk,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",r),()=>t.removeEventListener("focusin",r)},[t,n]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function If(){const e=new CustomEvent(Gl);document.dispatchEvent(e)}function dy(e,t,n,{discrete:a}){const r=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&r.addEventListener(e,t,{once:!0}),a?ly(r,o):r.dispatchEvent(o)}var aS=Os,rS=hy,dn=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},oS="Portal",uh=p.forwardRef((e,t)=>{var s;const{container:n,...a}=e,[r,o]=p.useState(!1);dn(()=>o(!0),[]);const i=n||r&&((s=globalThis==null?void 0:globalThis.document)==null?void 0:s.body);return i?C_.createPortal(c.jsx(K.div,{...a,ref:t}),i):null});uh.displayName=oS;function iS(e,t){return p.useReducer((n,a)=>t[n][a]??n,e)}var jt=e=>{const{present:t,children:n}=e,a=sS(t),r=typeof n=="function"?n({present:a.isPresent}):p.Children.only(n),o=ye(a.ref,cS(r));return typeof n=="function"||a.isPresent?p.cloneElement(r,{ref:o}):null};jt.displayName="Presence";function sS(e){const[t,n]=p.useState(),a=p.useRef({}),r=p.useRef(e),o=p.useRef("none"),i=e?"mounted":"unmounted",[s,l]=iS(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=fi(a.current);o.current=s==="mounted"?u:"none"},[s]),dn(()=>{const u=a.current,h=r.current;if(h!==e){const f=o.current,w=fi(u);e?l("MOUNT"):w==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(h&&f!==w?"ANIMATION_OUT":"UNMOUNT"),r.current=e}},[e,l]),dn(()=>{if(t){let u;const h=t.ownerDocument.defaultView??window,d=w=>{const m=fi(a.current).includes(w.animationName);if(w.target===t&&m&&(l("ANIMATION_END"),!r.current)){const _=t.style.animationFillMode;t.style.animationFillMode="forwards",u=h.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=_)})}},f=w=>{w.target===t&&(o.current=fi(a.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{h.clearTimeout(u),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:p.useCallback(u=>{u&&(a.current=getComputedStyle(u)),n(u)},[])}}function fi(e){return(e==null?void 0:e.animationName)||"none"}function cS(e){var a,r;let t=(a=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Ds({prop:e,defaultProp:t,onChange:n=()=>{}}){const[a,r]=lS({defaultProp:t,onChange:n}),o=e!==void 0,i=o?e:a,s=be(n),l=p.useCallback(u=>{if(o){const d=typeof u=="function"?u(e):u;d!==e&&s(d)}else r(u)},[o,e,r,s]);return[i,l]}function lS({defaultProp:e,onChange:t}){const n=p.useState(e),[a]=n,r=p.useRef(a),o=be(t);return p.useEffect(()=>{r.current!==a&&(o(a),r.current=a)},[a,r,o]),n}var uS="VisuallyHidden",zs=p.forwardRef((e,t)=>c.jsx(K.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));zs.displayName=uS;var hS=zs,hh="ToastProvider",[dh,dS,fS]=cy("Toast"),[fy,eq]=gn("Toast",[fS]),[pS,Ws]=fy(hh),py=e=>{const{__scopeToast:t,label:n="Notification",duration:a=5e3,swipeDirection:r="right",swipeThreshold:o=50,children:i}=e,[s,l]=p.useState(null),[u,h]=p.useState(0),d=p.useRef(!1),f=p.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${hh}\`. Expected non-empty \`string\`.`),c.jsx(dh.Provider,{scope:t,children:c.jsx(pS,{scope:t,label:n,duration:a,swipeDirection:r,swipeThreshold:o,toastCount:u,viewport:s,onViewportChange:l,onToastAdd:p.useCallback(()=>h(w=>w+1),[]),onToastRemove:p.useCallback(()=>h(w=>w-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f,children:i})})};py.displayName=hh;var my="ToastViewport",mS=["F8"],Kl="toast.viewportPause",Ql="toast.viewportResume",gy=p.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:a=mS,label:r="Notifications ({hotkey})",...o}=e,i=Ws(my,n),s=dS(n),l=p.useRef(null),u=p.useRef(null),h=p.useRef(null),d=p.useRef(null),f=ye(t,d,i.onViewportChange),w=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=i.toastCount>0;p.useEffect(()=>{const _=g=>{var v;a.length!==0&&a.every(k=>g[k]||g.code===k)&&((v=d.current)==null||v.focus())};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[a]),p.useEffect(()=>{const _=l.current,g=d.current;if(x&&_&&g){const y=()=>{if(!i.isClosePausedRef.current){const T=new CustomEvent(Kl);g.dispatchEvent(T),i.isClosePausedRef.current=!0}},v=()=>{if(i.isClosePausedRef.current){const T=new CustomEvent(Ql);g.dispatchEvent(T),i.isClosePausedRef.current=!1}},k=T=>{!_.contains(T.relatedTarget)&&v()},S=()=>{_.contains(document.activeElement)||v()};return _.addEventListener("focusin",y),_.addEventListener("focusout",k),_.addEventListener("pointermove",y),_.addEventListener("pointerleave",S),window.addEventListener("blur",y),window.addEventListener("focus",v),()=>{_.removeEventListener("focusin",y),_.removeEventListener("focusout",k),_.removeEventListener("pointermove",y),_.removeEventListener("pointerleave",S),window.removeEventListener("blur",y),window.removeEventListener("focus",v)}}},[x,i.isClosePausedRef]);const m=p.useCallback(({tabbingDirection:_})=>{const y=s().map(v=>{const k=v.ref.current,S=[k,...qS(k)];return _==="forwards"?S:S.reverse()});return(_==="forwards"?y.reverse():y).flat()},[s]);return p.useEffect(()=>{const _=d.current;if(_){const g=y=>{var S,T,I;const v=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!v){const q=document.activeElement,P=y.shiftKey;if(y.target===_&&P){(S=u.current)==null||S.focus();return}const O=m({tabbingDirection:P?"backwards":"forwards"}),$=O.findIndex(L=>L===q);Ec(O.slice($+1))?y.preventDefault():P?(T=u.current)==null||T.focus():(I=h.current)==null||I.focus()}};return _.addEventListener("keydown",g),()=>_.removeEventListener("keydown",g)}},[s,m]),c.jsxs(rS,{ref:l,role:"region","aria-label":r.replace("{hotkey}",w),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&c.jsx(Xl,{ref:u,onFocusFromOutsideViewport:()=>{const _=m({tabbingDirection:"forwards"});Ec(_)}}),c.jsx(dh.Slot,{scope:n,children:c.jsx(K.ol,{tabIndex:-1,...o,ref:f})}),x&&c.jsx(Xl,{ref:h,onFocusFromOutsideViewport:()=>{const _=m({tabbingDirection:"backwards"});Ec(_)}})]})});gy.displayName=my;var yy="ToastFocusProxy",Xl=p.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:a,...r}=e,o=Ws(yy,n);return c.jsx(zs,{"aria-hidden":!0,tabIndex:0,...r,ref:t,style:{position:"fixed"},onFocus:i=>{var u;const s=i.relatedTarget;!((u=o.viewport)!=null&&u.contains(s))&&a()}})});Xl.displayName=yy;var Fs="Toast",gS="toast.swipeStart",yS="toast.swipeMove",vS="toast.swipeCancel",wS="toast.swipeEnd",vy=p.forwardRef((e,t)=>{const{forceMount:n,open:a,defaultOpen:r,onOpenChange:o,...i}=e,[s=!0,l]=Ds({prop:a,defaultProp:r,onChange:o});return c.jsx(jt,{present:n||s,children:c.jsx(_S,{open:s,...i,ref:t,onClose:()=>l(!1),onPause:be(e.onPause),onResume:be(e.onResume),onSwipeStart:B(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:B(e.onSwipeMove,u=>{const{x:h,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:B(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:B(e.onSwipeEnd,u=>{const{x:h,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});vy.displayName=Fs;var[bS,xS]=fy(Fs,{onClose(){}}),_S=p.forwardRef((e,t)=>{const{__scopeToast:n,type:a="foreground",duration:r,open:o,onClose:i,onEscapeKeyDown:s,onPause:l,onResume:u,onSwipeStart:h,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:w,...x}=e,m=Ws(Fs,n),[_,g]=p.useState(null),y=ye(t,L=>g(L)),v=p.useRef(null),k=p.useRef(null),S=r||m.duration,T=p.useRef(0),I=p.useRef(S),q=p.useRef(0),{onToastAdd:P,onToastRemove:N}=m,D=be(()=>{var X;(_==null?void 0:_.contains(document.activeElement))&&((X=m.viewport)==null||X.focus()),i()}),O=p.useCallback(L=>{!L||L===1/0||(window.clearTimeout(q.current),T.current=new Date().getTime(),q.current=window.setTimeout(D,L))},[D]);p.useEffect(()=>{const L=m.viewport;if(L){const X=()=>{O(I.current),u==null||u()},F=()=>{const Z=new Date().getTime()-T.current;I.current=I.current-Z,window.clearTimeout(q.current),l==null||l()};return L.addEventListener(Kl,F),L.addEventListener(Ql,X),()=>{L.removeEventListener(Kl,F),L.removeEventListener(Ql,X)}}},[m.viewport,S,l,u,O]),p.useEffect(()=>{o&&!m.isClosePausedRef.current&&O(S)},[o,S,m.isClosePausedRef,O]),p.useEffect(()=>(P(),()=>N()),[P,N]);const $=p.useMemo(()=>_?Cy(_):null,[_]);return m.viewport?c.jsxs(c.Fragment,{children:[$&&c.jsx(kS,{__scopeToast:n,role:"status","aria-live":a==="foreground"?"assertive":"polite","aria-atomic":!0,children:$}),c.jsx(bS,{scope:n,onClose:D,children:Ho.createPortal(c.jsx(dh.ItemSlot,{scope:n,children:c.jsx(aS,{asChild:!0,onEscapeKeyDown:B(s,()=>{m.isFocusedToastEscapeKeyDownRef.current||D(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:c.jsx(K.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":m.swipeDirection,...x,ref:y,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:B(e.onKeyDown,L=>{L.key==="Escape"&&(s==null||s(L.nativeEvent),L.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,D()))}),onPointerDown:B(e.onPointerDown,L=>{L.button===0&&(v.current={x:L.clientX,y:L.clientY})}),onPointerMove:B(e.onPointerMove,L=>{if(!v.current)return;const X=L.clientX-v.current.x,F=L.clientY-v.current.y,Z=!!k.current,E=["left","right"].includes(m.swipeDirection),R=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,z=E?R(0,X):0,V=E?0:R(0,F),ce=L.pointerType==="touch"?10:2,wt={x:z,y:V},ct={originalEvent:L,delta:wt};Z?(k.current=wt,pi(yS,d,ct,{discrete:!1})):Tf(wt,m.swipeDirection,ce)?(k.current=wt,pi(gS,h,ct,{discrete:!1}),L.target.setPointerCapture(L.pointerId)):(Math.abs(X)>ce||Math.abs(F)>ce)&&(v.current=null)}),onPointerUp:B(e.onPointerUp,L=>{const X=k.current,F=L.target;if(F.hasPointerCapture(L.pointerId)&&F.releasePointerCapture(L.pointerId),k.current=null,v.current=null,X){const Z=L.currentTarget,E={originalEvent:L,delta:X};Tf(X,m.swipeDirection,m.swipeThreshold)?pi(wS,w,E,{discrete:!0}):pi(vS,f,E,{discrete:!0}),Z.addEventListener("click",R=>R.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),kS=e=>{const{__scopeToast:t,children:n,...a}=e,r=Ws(Fs,t),[o,i]=p.useState(!1),[s,l]=p.useState(!1);return IS(()=>i(!0)),p.useEffect(()=>{const u=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(u)},[]),s?null:c.jsx(uh,{asChild:!0,children:c.jsx(zs,{...a,children:o&&c.jsxs(c.Fragment,{children:[r.label," ",n]})})})},SS="ToastTitle",wy=p.forwardRef((e,t)=>{const{__scopeToast:n,...a}=e;return c.jsx(K.div,{...a,ref:t})});wy.displayName=SS;var CS="ToastDescription",by=p.forwardRef((e,t)=>{const{__scopeToast:n,...a}=e;return c.jsx(K.div,{...a,ref:t})});by.displayName=CS;var xy="ToastAction",_y=p.forwardRef((e,t)=>{const{altText:n,...a}=e;return n.trim()?c.jsx(Sy,{altText:n,asChild:!0,children:c.jsx(fh,{...a,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${xy}\`. Expected non-empty \`string\`.`),null)});_y.displayName=xy;var ky="ToastClose",fh=p.forwardRef((e,t)=>{const{__scopeToast:n,...a}=e,r=xS(ky,n);return c.jsx(Sy,{asChild:!0,children:c.jsx(K.button,{type:"button",...a,ref:t,onClick:B(e.onClick,r.onClose)})})});fh.displayName=ky;var Sy=p.forwardRef((e,t)=>{const{__scopeToast:n,altText:a,...r}=e;return c.jsx(K.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":a||void 0,...r,ref:t})});function Cy(e){const t=[];return Array.from(e.childNodes).forEach(a=>{if(a.nodeType===a.TEXT_NODE&&a.textContent&&t.push(a.textContent),TS(a)){const r=a.ariaHidden||a.hidden||a.style.display==="none",o=a.dataset.radixToastAnnounceExclude==="";if(!r)if(o){const i=a.dataset.radixToastAnnounceAlt;i&&t.push(i)}else t.push(...Cy(a))}}),t}function pi(e,t,n,{discrete:a}){const r=n.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&r.addEventListener(e,t,{once:!0}),a?ly(r,o):r.dispatchEvent(o)}var Tf=(e,t,n=0)=>{const a=Math.abs(e.x),r=Math.abs(e.y),o=a>r;return t==="left"||t==="right"?o&&a>n:!o&&r>n};function IS(e=()=>{}){const t=be(e);dn(()=>{let n=0,a=0;return n=window.requestAnimationFrame(()=>a=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(a)}},[t])}function TS(e){return e.nodeType===e.ELEMENT_NODE}function qS(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const r=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||r?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Ec(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var ES=py,Iy=gy,Ty=vy,qy=wy,Ey=by,Py=_y,jy=fh;function Ny(e){var t,n,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=Ny(e[t]))&&(a&&(a+=" "),a+=n)}else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}function Ry(){for(var e,t,n=0,a="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=Ny(e))&&(a&&(a+=" "),a+=t);return a}const qf=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Ef=Ry,ph=(e,t)=>n=>{var a;if((t==null?void 0:t.variants)==null)return Ef(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:r,defaultVariants:o}=t,i=Object.keys(r).map(u=>{const h=n==null?void 0:n[u],d=o==null?void 0:o[u];if(h===null)return null;const f=qf(h)||qf(d);return r[u][f]}),s=n&&Object.entries(n).reduce((u,h)=>{let[d,f]=h;return f===void 0||(u[d]=f),u},{}),l=t==null||(a=t.compoundVariants)===null||a===void 0?void 0:a.reduce((u,h)=>{let{class:d,className:f,...w}=h;return Object.entries(w).every(x=>{let[m,_]=x;return Array.isArray(_)?_.includes({...o,...s}[m]):{...o,...s}[m]===_})?[...u,d,f]:u},[]);return Ef(e,i,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ay=(...e)=>e.filter((t,n,a)=>!!t&&a.indexOf(t)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var jS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NS=p.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:r="",children:o,iconNode:i,...s},l)=>p.createElement("svg",{ref:l,...jS,width:t,height:t,stroke:e,strokeWidth:a?Number(n)*24/Number(t):n,className:Ay("lucide",r),...s},[...i.map(([u,h])=>p.createElement(u,h)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=(e,t)=>{const n=p.forwardRef(({className:a,...r},o)=>p.createElement(NS,{ref:o,iconNode:t,className:Ay(`lucide-${PS(e)}`,a),...r}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=ae("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=ae("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=ae("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pf=ae("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jf=ae("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AS=ae("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LS=ae("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=ae("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=ae("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MS=ae("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zl=ae("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OS=ae("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=ae("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DS=ae("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=ae("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=ae("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jl=ae("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nf=ae("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mh=ae("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=ae("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WS=ae("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=ae("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=ae("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=ae("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=ae("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=ae("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=ae("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),gh="-",HS=e=>{const t=VS(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:a}=e;return{getClassGroupId:i=>{const s=i.split(gh);return s[0]===""&&s.length!==1&&s.shift(),zy(s,t)||BS(i)},getConflictingClassGroupIds:(i,s)=>{const l=n[i]||[];return s&&a[i]?[...l,...a[i]]:l}}},zy=(e,t)=>{var i;if(e.length===0)return t.classGroupId;const n=e[0],a=t.nextPart.get(n),r=a?zy(e.slice(1),a):void 0;if(r)return r;if(t.validators.length===0)return;const o=e.join(gh);return(i=t.validators.find(({validator:s})=>s(o)))==null?void 0:i.classGroupId},Rf=/^\[(.+)\]$/,BS=e=>{if(Rf.test(e)){const t=Rf.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},VS=e=>{const{theme:t,prefix:n}=e,a={nextPart:new Map,validators:[]};return $S(Object.entries(e.classGroups),n).forEach(([o,i])=>{eu(i,a,o,t)}),a},eu=(e,t,n,a)=>{e.forEach(r=>{if(typeof r=="string"){const o=r===""?t:Af(t,r);o.classGroupId=n;return}if(typeof r=="function"){if(US(r)){eu(r(a),t,n,a);return}t.validators.push({validator:r,classGroupId:n});return}Object.entries(r).forEach(([o,i])=>{eu(i,Af(t,o),n,a)})})},Af=(e,t)=>{let n=e;return t.split(gh).forEach(a=>{n.nextPart.has(a)||n.nextPart.set(a,{nextPart:new Map,validators:[]}),n=n.nextPart.get(a)}),n},US=e=>e.isThemeGetter,$S=(e,t)=>t?e.map(([n,a])=>{const r=a.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([i,s])=>[t+i,s])):o);return[n,r]}):e,GS=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,a=new Map;const r=(o,i)=>{n.set(o,i),t++,t>e&&(t=0,a=n,n=new Map)};return{get(o){let i=n.get(o);if(i!==void 0)return i;if((i=a.get(o))!==void 0)return r(o,i),i},set(o,i){n.has(o)?n.set(o,i):r(o,i)}}},Wy="!",KS=e=>{const{separator:t,experimentalParseClassName:n}=e,a=t.length===1,r=t[0],o=t.length,i=s=>{const l=[];let u=0,h=0,d;for(let _=0;_<s.length;_++){let g=s[_];if(u===0){if(g===r&&(a||s.slice(_,_+o)===t)){l.push(s.slice(h,_)),h=_+o;continue}if(g==="/"){d=_;continue}}g==="["?u++:g==="]"&&u--}const f=l.length===0?s:s.substring(h),w=f.startsWith(Wy),x=w?f.substring(1):f,m=d&&d>h?d-h:void 0;return{modifiers:l,hasImportantModifier:w,baseClassName:x,maybePostfixModifierPosition:m}};return n?s=>n({className:s,parseClassName:i}):i},QS=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(a=>{a[0]==="["?(t.push(...n.sort(),a),n=[]):n.push(a)}),t.push(...n.sort()),t},XS=e=>({cache:GS(e.cacheSize),parseClassName:KS(e),...HS(e)}),ZS=/\s+/,JS=(e,t)=>{const{parseClassName:n,getClassGroupId:a,getConflictingClassGroupIds:r}=t,o=[],i=e.trim().split(ZS);let s="";for(let l=i.length-1;l>=0;l-=1){const u=i[l],{modifiers:h,hasImportantModifier:d,baseClassName:f,maybePostfixModifierPosition:w}=n(u);let x=!!w,m=a(x?f.substring(0,w):f);if(!m){if(!x){s=u+(s.length>0?" "+s:s);continue}if(m=a(f),!m){s=u+(s.length>0?" "+s:s);continue}x=!1}const _=QS(h).join(":"),g=d?_+Wy:_,y=g+m;if(o.includes(y))continue;o.push(y);const v=r(m,x);for(let k=0;k<v.length;++k){const S=v[k];o.push(g+S)}s=u+(s.length>0?" "+s:s)}return s};function eC(){let e=0,t,n,a="";for(;e<arguments.length;)(t=arguments[e++])&&(n=Fy(t))&&(a&&(a+=" "),a+=n);return a}const Fy=e=>{if(typeof e=="string")return e;let t,n="";for(let a=0;a<e.length;a++)e[a]&&(t=Fy(e[a]))&&(n&&(n+=" "),n+=t);return n};function tC(e,...t){let n,a,r,o=i;function i(l){const u=t.reduce((h,d)=>d(h),e());return n=XS(u),a=n.cache.get,r=n.cache.set,o=s,s(l)}function s(l){const u=a(l);if(u)return u;const h=JS(l,n);return r(l,h),h}return function(){return o(eC.apply(null,arguments))}}const oe=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},Yy=/^\[(?:([a-z-]+):)?(.+)\]$/i,nC=/^\d+\/\d+$/,aC=new Set(["px","full","screen"]),rC=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,oC=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,iC=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,sC=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,cC=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Kt=e=>Za(e)||aC.has(e)||nC.test(e),vn=e=>Pr(e,"length",gC),Za=e=>!!e&&!Number.isNaN(Number(e)),Pc=e=>Pr(e,"number",Za),Br=e=>!!e&&Number.isInteger(Number(e)),lC=e=>e.endsWith("%")&&Za(e.slice(0,-1)),Y=e=>Yy.test(e),wn=e=>rC.test(e),uC=new Set(["length","size","percentage"]),hC=e=>Pr(e,uC,Hy),dC=e=>Pr(e,"position",Hy),fC=new Set(["image","url"]),pC=e=>Pr(e,fC,vC),mC=e=>Pr(e,"",yC),Vr=()=>!0,Pr=(e,t,n)=>{const a=Yy.exec(e);return a?a[1]?typeof t=="string"?a[1]===t:t.has(a[1]):n(a[2]):!1},gC=e=>oC.test(e)&&!iC.test(e),Hy=()=>!1,yC=e=>sC.test(e),vC=e=>cC.test(e),wC=()=>{const e=oe("colors"),t=oe("spacing"),n=oe("blur"),a=oe("brightness"),r=oe("borderColor"),o=oe("borderRadius"),i=oe("borderSpacing"),s=oe("borderWidth"),l=oe("contrast"),u=oe("grayscale"),h=oe("hueRotate"),d=oe("invert"),f=oe("gap"),w=oe("gradientColorStops"),x=oe("gradientColorStopPositions"),m=oe("inset"),_=oe("margin"),g=oe("opacity"),y=oe("padding"),v=oe("saturate"),k=oe("scale"),S=oe("sepia"),T=oe("skew"),I=oe("space"),q=oe("translate"),P=()=>["auto","contain","none"],N=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto",Y,t],O=()=>[Y,t],$=()=>["",Kt,vn],L=()=>["auto",Za,Y],X=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],F=()=>["solid","dashed","dotted","double","none"],Z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],E=()=>["start","end","center","between","around","evenly","stretch"],R=()=>["","0",Y],z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],V=()=>[Za,Y];return{cacheSize:500,separator:":",theme:{colors:[Vr],spacing:[Kt,vn],blur:["none","",wn,Y],brightness:V(),borderColor:[e],borderRadius:["none","","full",wn,Y],borderSpacing:O(),borderWidth:$(),contrast:V(),grayscale:R(),hueRotate:V(),invert:R(),gap:O(),gradientColorStops:[e],gradientColorStopPositions:[lC,vn],inset:D(),margin:D(),opacity:V(),padding:O(),saturate:V(),scale:V(),sepia:R(),skew:V(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",Y]}],container:["container"],columns:[{columns:[wn]}],"break-after":[{"break-after":z()}],"break-before":[{"break-before":z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...X(),Y]}],overflow:[{overflow:N()}],"overflow-x":[{"overflow-x":N()}],"overflow-y":[{"overflow-y":N()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Br,Y]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Y]}],grow:[{grow:R()}],shrink:[{shrink:R()}],order:[{order:["first","last","none",Br,Y]}],"grid-cols":[{"grid-cols":[Vr]}],"col-start-end":[{col:["auto",{span:["full",Br,Y]},Y]}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":[Vr]}],"row-start-end":[{row:["auto",{span:[Br,Y]},Y]}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Y]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Y]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...E()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...E(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...E(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[I]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[I]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Y,t]}],"min-w":[{"min-w":[Y,t,"min","max","fit"]}],"max-w":[{"max-w":[Y,t,"none","full","min","max","fit","prose",{screen:[wn]},wn]}],h:[{h:[Y,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Y,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Y,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Y,t,"auto","min","max","fit"]}],"font-size":[{text:["base",wn,vn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Pc]}],"font-family":[{font:[Vr]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Y]}],"line-clamp":[{"line-clamp":["none",Za,Pc]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Kt,Y]}],"list-image":[{"list-image":["none",Y]}],"list-style-type":[{list:["none","disc","decimal",Y]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...F(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Kt,vn]}],"underline-offset":[{"underline-offset":["auto",Kt,Y]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Y]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Y]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...X(),dC]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",hC]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},pC]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[w]}],"gradient-via":[{via:[w]}],"gradient-to":[{to:[w]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-s":[{"border-s":[s]}],"border-w-e":[{"border-e":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...F(),"hidden"]}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:F()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-s":[{"border-s":[r]}],"border-color-e":[{"border-e":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:["",...F()]}],"outline-offset":[{"outline-offset":[Kt,Y]}],"outline-w":[{outline:[Kt,vn]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:$()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[Kt,vn]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",wn,mC]}],"shadow-color":[{shadow:[Vr]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...Z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Z()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[a]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",wn,Y]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[d]}],saturate:[{saturate:[v]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[a]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Y]}],duration:[{duration:V()}],ease:[{ease:["linear","in","out","in-out",Y]}],delay:[{delay:V()}],animate:[{animate:["none","spin","ping","pulse","bounce",Y]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[Br,Y]}],"translate-x":[{"translate-x":[q]}],"translate-y":[{"translate-y":[q]}],"skew-x":[{"skew-x":[T]}],"skew-y":[{"skew-y":[T]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Y]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Y]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Y]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Kt,vn,Pc]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},bC=tC(wC);function ne(...e){return bC(Ry(e))}const xC=ES,By=p.forwardRef(({className:e,...t},n)=>c.jsx(Iy,{ref:n,className:ne("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));By.displayName=Iy.displayName;const _C=ph("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Vy=p.forwardRef(({className:e,variant:t,...n},a)=>c.jsx(Ty,{ref:a,className:ne(_C({variant:t}),e),...n}));Vy.displayName=Ty.displayName;const kC=p.forwardRef(({className:e,...t},n)=>c.jsx(Py,{ref:n,className:ne("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));kC.displayName=Py.displayName;const Uy=p.forwardRef(({className:e,...t},n)=>c.jsx(jy,{ref:n,className:ne("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:c.jsx(Vo,{className:"h-4 w-4"})}));Uy.displayName=jy.displayName;const $y=p.forwardRef(({className:e,...t},n)=>c.jsx(qy,{ref:n,className:ne("text-sm font-semibold",e),...t}));$y.displayName=qy.displayName;const Gy=p.forwardRef(({className:e,...t},n)=>c.jsx(Ey,{ref:n,className:ne("text-sm opacity-90",e),...t}));Gy.displayName=Ey.displayName;function SC(){const{toasts:e}=oy();return c.jsxs(xC,{children:[e.map(function({id:t,title:n,description:a,action:r,...o}){return c.jsxs(Vy,{...o,children:[c.jsxs("div",{className:"grid gap-1",children:[n&&c.jsx($y,{children:n}),a&&c.jsx(Gy,{children:a})]}),r,c.jsx(Uy,{})]},t)}),c.jsx(By,{})]})}var CC=Pp[" useId ".trim().toString()]||(()=>{}),IC=0;function lo(e){const[t,n]=p.useState(CC());return dn(()=>{e||n(a=>a??String(IC++))},[e]),e||(t?`radix-${t}`:"")}const TC=["top","right","bottom","left"],Kn=Math.min,et=Math.max,hs=Math.round,mi=Math.floor,Bt=e=>({x:e,y:e}),qC={left:"right",right:"left",bottom:"top",top:"bottom"},EC={start:"end",end:"start"};function tu(e,t,n){return et(e,Kn(t,n))}function fn(e,t){return typeof e=="function"?e(t):e}function pn(e){return e.split("-")[0]}function jr(e){return e.split("-")[1]}function yh(e){return e==="x"?"y":"x"}function vh(e){return e==="y"?"height":"width"}function Qn(e){return["top","bottom"].includes(pn(e))?"y":"x"}function wh(e){return yh(Qn(e))}function PC(e,t,n){n===void 0&&(n=!1);const a=jr(e),r=wh(e),o=vh(r);let i=r==="x"?a===(n?"end":"start")?"right":"left":a==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=ds(i)),[i,ds(i)]}function jC(e){const t=ds(e);return[nu(e),t,nu(t)]}function nu(e){return e.replace(/start|end/g,t=>EC[t])}function NC(e,t,n){const a=["left","right"],r=["right","left"],o=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return n?t?r:a:t?a:r;case"left":case"right":return t?o:i;default:return[]}}function RC(e,t,n,a){const r=jr(e);let o=NC(pn(e),n==="start",a);return r&&(o=o.map(i=>i+"-"+r),t&&(o=o.concat(o.map(nu)))),o}function ds(e){return e.replace(/left|right|bottom|top/g,t=>qC[t])}function AC(e){return{top:0,right:0,bottom:0,left:0,...e}}function Ky(e){return typeof e!="number"?AC(e):{top:e,right:e,bottom:e,left:e}}function fs(e){const{x:t,y:n,width:a,height:r}=e;return{width:a,height:r,top:n,left:t,right:t+a,bottom:n+r,x:t,y:n}}function Lf(e,t,n){let{reference:a,floating:r}=e;const o=Qn(t),i=wh(t),s=vh(i),l=pn(t),u=o==="y",h=a.x+a.width/2-r.width/2,d=a.y+a.height/2-r.height/2,f=a[s]/2-r[s]/2;let w;switch(l){case"top":w={x:h,y:a.y-r.height};break;case"bottom":w={x:h,y:a.y+a.height};break;case"right":w={x:a.x+a.width,y:d};break;case"left":w={x:a.x-r.width,y:d};break;default:w={x:a.x,y:a.y}}switch(jr(t)){case"start":w[i]-=f*(n&&u?-1:1);break;case"end":w[i]+=f*(n&&u?-1:1);break}return w}const LC=async(e,t,n)=>{const{placement:a="bottom",strategy:r="absolute",middleware:o=[],platform:i}=n,s=o.filter(Boolean),l=await(i.isRTL==null?void 0:i.isRTL(t));let u=await i.getElementRects({reference:e,floating:t,strategy:r}),{x:h,y:d}=Lf(u,a,l),f=a,w={},x=0;for(let m=0;m<s.length;m++){const{name:_,fn:g}=s[m],{x:y,y:v,data:k,reset:S}=await g({x:h,y:d,initialPlacement:a,placement:f,strategy:r,middlewareData:w,rects:u,platform:i,elements:{reference:e,floating:t}});h=y??h,d=v??d,w={...w,[_]:{...w[_],...k}},S&&x<=50&&(x++,typeof S=="object"&&(S.placement&&(f=S.placement),S.rects&&(u=S.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:r}):S.rects),{x:h,y:d}=Lf(u,f,l)),m=-1)}return{x:h,y:d,placement:f,strategy:r,middlewareData:w}};async function No(e,t){var n;t===void 0&&(t={});const{x:a,y:r,platform:o,rects:i,elements:s,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:d="floating",altBoundary:f=!1,padding:w=0}=fn(t,e),x=Ky(w),_=s[f?d==="floating"?"reference":"floating":d],g=fs(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(_)))==null||n?_:_.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(s.floating)),boundary:u,rootBoundary:h,strategy:l})),y=d==="floating"?{x:a,y:r,width:i.floating.width,height:i.floating.height}:i.reference,v=await(o.getOffsetParent==null?void 0:o.getOffsetParent(s.floating)),k=await(o.isElement==null?void 0:o.isElement(v))?await(o.getScale==null?void 0:o.getScale(v))||{x:1,y:1}:{x:1,y:1},S=fs(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:y,offsetParent:v,strategy:l}):y);return{top:(g.top-S.top+x.top)/k.y,bottom:(S.bottom-g.bottom+x.bottom)/k.y,left:(g.left-S.left+x.left)/k.x,right:(S.right-g.right+x.right)/k.x}}const MC=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:a,placement:r,rects:o,platform:i,elements:s,middlewareData:l}=t,{element:u,padding:h=0}=fn(e,t)||{};if(u==null)return{};const d=Ky(h),f={x:n,y:a},w=wh(r),x=vh(w),m=await i.getDimensions(u),_=w==="y",g=_?"top":"left",y=_?"bottom":"right",v=_?"clientHeight":"clientWidth",k=o.reference[x]+o.reference[w]-f[w]-o.floating[x],S=f[w]-o.reference[w],T=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let I=T?T[v]:0;(!I||!await(i.isElement==null?void 0:i.isElement(T)))&&(I=s.floating[v]||o.floating[x]);const q=k/2-S/2,P=I/2-m[x]/2-1,N=Kn(d[g],P),D=Kn(d[y],P),O=N,$=I-m[x]-D,L=I/2-m[x]/2+q,X=tu(O,L,$),F=!l.arrow&&jr(r)!=null&&L!==X&&o.reference[x]/2-(L<O?N:D)-m[x]/2<0,Z=F?L<O?L-O:L-$:0;return{[w]:f[w]+Z,data:{[w]:X,centerOffset:L-X-Z,...F&&{alignmentOffset:Z}},reset:F}}}),OC=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,a;const{placement:r,middlewareData:o,rects:i,initialPlacement:s,platform:l,elements:u}=t,{mainAxis:h=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:m=!0,..._}=fn(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const g=pn(r),y=Qn(s),v=pn(s)===s,k=await(l.isRTL==null?void 0:l.isRTL(u.floating)),S=f||(v||!m?[ds(s)]:jC(s)),T=x!=="none";!f&&T&&S.push(...RC(s,m,x,k));const I=[s,...S],q=await No(t,_),P=[];let N=((a=o.flip)==null?void 0:a.overflows)||[];if(h&&P.push(q[g]),d){const L=PC(r,i,k);P.push(q[L[0]],q[L[1]])}if(N=[...N,{placement:r,overflows:P}],!P.every(L=>L<=0)){var D,O;const L=(((D=o.flip)==null?void 0:D.index)||0)+1,X=I[L];if(X)return{data:{index:L,overflows:N},reset:{placement:X}};let F=(O=N.filter(Z=>Z.overflows[0]<=0).sort((Z,E)=>Z.overflows[1]-E.overflows[1])[0])==null?void 0:O.placement;if(!F)switch(w){case"bestFit":{var $;const Z=($=N.filter(E=>{if(T){const R=Qn(E.placement);return R===y||R==="y"}return!0}).map(E=>[E.placement,E.overflows.filter(R=>R>0).reduce((R,z)=>R+z,0)]).sort((E,R)=>E[1]-R[1])[0])==null?void 0:$[0];Z&&(F=Z);break}case"initialPlacement":F=s;break}if(r!==F)return{reset:{placement:F}}}return{}}}};function Mf(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Of(e){return TC.some(t=>e[t]>=0)}const DC=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:a="referenceHidden",...r}=fn(e,t);switch(a){case"referenceHidden":{const o=await No(t,{...r,elementContext:"reference"}),i=Mf(o,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:Of(i)}}}case"escaped":{const o=await No(t,{...r,altBoundary:!0}),i=Mf(o,n.floating);return{data:{escapedOffsets:i,escaped:Of(i)}}}default:return{}}}}};async function zC(e,t){const{placement:n,platform:a,elements:r}=e,o=await(a.isRTL==null?void 0:a.isRTL(r.floating)),i=pn(n),s=jr(n),l=Qn(n)==="y",u=["left","top"].includes(i)?-1:1,h=o&&l?-1:1,d=fn(t,e);let{mainAxis:f,crossAxis:w,alignmentAxis:x}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return s&&typeof x=="number"&&(w=s==="end"?x*-1:x),l?{x:w*h,y:f*u}:{x:f*u,y:w*h}}const WC=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,a;const{x:r,y:o,placement:i,middlewareData:s}=t,l=await zC(t,e);return i===((n=s.offset)==null?void 0:n.placement)&&(a=s.arrow)!=null&&a.alignmentOffset?{}:{x:r+l.x,y:o+l.y,data:{...l,placement:i}}}}},FC=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:a,placement:r}=t,{mainAxis:o=!0,crossAxis:i=!1,limiter:s={fn:_=>{let{x:g,y}=_;return{x:g,y}}},...l}=fn(e,t),u={x:n,y:a},h=await No(t,l),d=Qn(pn(r)),f=yh(d);let w=u[f],x=u[d];if(o){const _=f==="y"?"top":"left",g=f==="y"?"bottom":"right",y=w+h[_],v=w-h[g];w=tu(y,w,v)}if(i){const _=d==="y"?"top":"left",g=d==="y"?"bottom":"right",y=x+h[_],v=x-h[g];x=tu(y,x,v)}const m=s.fn({...t,[f]:w,[d]:x});return{...m,data:{x:m.x-n,y:m.y-a,enabled:{[f]:o,[d]:i}}}}}},YC=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:a,placement:r,rects:o,middlewareData:i}=t,{offset:s=0,mainAxis:l=!0,crossAxis:u=!0}=fn(e,t),h={x:n,y:a},d=Qn(r),f=yh(d);let w=h[f],x=h[d];const m=fn(s,t),_=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const v=f==="y"?"height":"width",k=o.reference[f]-o.floating[v]+_.mainAxis,S=o.reference[f]+o.reference[v]-_.mainAxis;w<k?w=k:w>S&&(w=S)}if(u){var g,y;const v=f==="y"?"width":"height",k=["top","left"].includes(pn(r)),S=o.reference[d]-o.floating[v]+(k&&((g=i.offset)==null?void 0:g[d])||0)+(k?0:_.crossAxis),T=o.reference[d]+o.reference[v]+(k?0:((y=i.offset)==null?void 0:y[d])||0)-(k?_.crossAxis:0);x<S?x=S:x>T&&(x=T)}return{[f]:w,[d]:x}}}},HC=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,a;const{placement:r,rects:o,platform:i,elements:s}=t,{apply:l=()=>{},...u}=fn(e,t),h=await No(t,u),d=pn(r),f=jr(r),w=Qn(r)==="y",{width:x,height:m}=o.floating;let _,g;d==="top"||d==="bottom"?(_=d,g=f===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(g=d,_=f==="end"?"top":"bottom");const y=m-h.top-h.bottom,v=x-h.left-h.right,k=Kn(m-h[_],y),S=Kn(x-h[g],v),T=!t.middlewareData.shift;let I=k,q=S;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(q=v),(a=t.middlewareData.shift)!=null&&a.enabled.y&&(I=y),T&&!f){const N=et(h.left,0),D=et(h.right,0),O=et(h.top,0),$=et(h.bottom,0);w?q=x-2*(N!==0||D!==0?N+D:et(h.left,h.right)):I=m-2*(O!==0||$!==0?O+$:et(h.top,h.bottom))}await l({...t,availableWidth:q,availableHeight:I});const P=await i.getDimensions(s.floating);return x!==P.width||m!==P.height?{reset:{rects:!0}}:{}}}};function Ys(){return typeof window<"u"}function Nr(e){return Qy(e)?(e.nodeName||"").toLowerCase():"#document"}function rt(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ut(e){var t;return(t=(Qy(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Qy(e){return Ys()?e instanceof Node||e instanceof rt(e).Node:!1}function Et(e){return Ys()?e instanceof Element||e instanceof rt(e).Element:!1}function Vt(e){return Ys()?e instanceof HTMLElement||e instanceof rt(e).HTMLElement:!1}function Df(e){return!Ys()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof rt(e).ShadowRoot}function Uo(e){const{overflow:t,overflowX:n,overflowY:a,display:r}=Pt(e);return/auto|scroll|overlay|hidden|clip/.test(t+a+n)&&!["inline","contents"].includes(r)}function BC(e){return["table","td","th"].includes(Nr(e))}function Hs(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function bh(e){const t=xh(),n=Et(e)?Pt(e):e;return["transform","translate","scale","rotate","perspective"].some(a=>n[a]?n[a]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(a=>(n.willChange||"").includes(a))||["paint","layout","strict","content"].some(a=>(n.contain||"").includes(a))}function VC(e){let t=Xn(e);for(;Vt(t)&&!_r(t);){if(bh(t))return t;if(Hs(t))return null;t=Xn(t)}return null}function xh(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function _r(e){return["html","body","#document"].includes(Nr(e))}function Pt(e){return rt(e).getComputedStyle(e)}function Bs(e){return Et(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Xn(e){if(Nr(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Df(e)&&e.host||Ut(e);return Df(t)?t.host:t}function Xy(e){const t=Xn(e);return _r(t)?e.ownerDocument?e.ownerDocument.body:e.body:Vt(t)&&Uo(t)?t:Xy(t)}function Ro(e,t,n){var a;t===void 0&&(t=[]),n===void 0&&(n=!0);const r=Xy(e),o=r===((a=e.ownerDocument)==null?void 0:a.body),i=rt(r);if(o){const s=au(i);return t.concat(i,i.visualViewport||[],Uo(r)?r:[],s&&n?Ro(s):[])}return t.concat(r,Ro(r,[],n))}function au(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Zy(e){const t=Pt(e);let n=parseFloat(t.width)||0,a=parseFloat(t.height)||0;const r=Vt(e),o=r?e.offsetWidth:n,i=r?e.offsetHeight:a,s=hs(n)!==o||hs(a)!==i;return s&&(n=o,a=i),{width:n,height:a,$:s}}function _h(e){return Et(e)?e:e.contextElement}function Ja(e){const t=_h(e);if(!Vt(t))return Bt(1);const n=t.getBoundingClientRect(),{width:a,height:r,$:o}=Zy(t);let i=(o?hs(n.width):n.width)/a,s=(o?hs(n.height):n.height)/r;return(!i||!Number.isFinite(i))&&(i=1),(!s||!Number.isFinite(s))&&(s=1),{x:i,y:s}}const UC=Bt(0);function Jy(e){const t=rt(e);return!xh()||!t.visualViewport?UC:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function $C(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==rt(e)?!1:t}function Sa(e,t,n,a){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=e.getBoundingClientRect(),o=_h(e);let i=Bt(1);t&&(a?Et(a)&&(i=Ja(a)):i=Ja(e));const s=$C(o,n,a)?Jy(o):Bt(0);let l=(r.left+s.x)/i.x,u=(r.top+s.y)/i.y,h=r.width/i.x,d=r.height/i.y;if(o){const f=rt(o),w=a&&Et(a)?rt(a):a;let x=f,m=au(x);for(;m&&a&&w!==x;){const _=Ja(m),g=m.getBoundingClientRect(),y=Pt(m),v=g.left+(m.clientLeft+parseFloat(y.paddingLeft))*_.x,k=g.top+(m.clientTop+parseFloat(y.paddingTop))*_.y;l*=_.x,u*=_.y,h*=_.x,d*=_.y,l+=v,u+=k,x=rt(m),m=au(x)}}return fs({width:h,height:d,x:l,y:u})}function kh(e,t){const n=Bs(e).scrollLeft;return t?t.left+n:Sa(Ut(e)).left+n}function ev(e,t,n){n===void 0&&(n=!1);const a=e.getBoundingClientRect(),r=a.left+t.scrollLeft-(n?0:kh(e,a)),o=a.top+t.scrollTop;return{x:r,y:o}}function GC(e){let{elements:t,rect:n,offsetParent:a,strategy:r}=e;const o=r==="fixed",i=Ut(a),s=t?Hs(t.floating):!1;if(a===i||s&&o)return n;let l={scrollLeft:0,scrollTop:0},u=Bt(1);const h=Bt(0),d=Vt(a);if((d||!d&&!o)&&((Nr(a)!=="body"||Uo(i))&&(l=Bs(a)),Vt(a))){const w=Sa(a);u=Ja(a),h.x=w.x+a.clientLeft,h.y=w.y+a.clientTop}const f=i&&!d&&!o?ev(i,l,!0):Bt(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+h.x+f.x,y:n.y*u.y-l.scrollTop*u.y+h.y+f.y}}function KC(e){return Array.from(e.getClientRects())}function QC(e){const t=Ut(e),n=Bs(e),a=e.ownerDocument.body,r=et(t.scrollWidth,t.clientWidth,a.scrollWidth,a.clientWidth),o=et(t.scrollHeight,t.clientHeight,a.scrollHeight,a.clientHeight);let i=-n.scrollLeft+kh(e);const s=-n.scrollTop;return Pt(a).direction==="rtl"&&(i+=et(t.clientWidth,a.clientWidth)-r),{width:r,height:o,x:i,y:s}}function XC(e,t){const n=rt(e),a=Ut(e),r=n.visualViewport;let o=a.clientWidth,i=a.clientHeight,s=0,l=0;if(r){o=r.width,i=r.height;const u=xh();(!u||u&&t==="fixed")&&(s=r.offsetLeft,l=r.offsetTop)}return{width:o,height:i,x:s,y:l}}function ZC(e,t){const n=Sa(e,!0,t==="fixed"),a=n.top+e.clientTop,r=n.left+e.clientLeft,o=Vt(e)?Ja(e):Bt(1),i=e.clientWidth*o.x,s=e.clientHeight*o.y,l=r*o.x,u=a*o.y;return{width:i,height:s,x:l,y:u}}function zf(e,t,n){let a;if(t==="viewport")a=XC(e,n);else if(t==="document")a=QC(Ut(e));else if(Et(t))a=ZC(t,n);else{const r=Jy(e);a={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return fs(a)}function tv(e,t){const n=Xn(e);return n===t||!Et(n)||_r(n)?!1:Pt(n).position==="fixed"||tv(n,t)}function JC(e,t){const n=t.get(e);if(n)return n;let a=Ro(e,[],!1).filter(s=>Et(s)&&Nr(s)!=="body"),r=null;const o=Pt(e).position==="fixed";let i=o?Xn(e):e;for(;Et(i)&&!_r(i);){const s=Pt(i),l=bh(i);!l&&s.position==="fixed"&&(r=null),(o?!l&&!r:!l&&s.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||Uo(i)&&!l&&tv(e,i))?a=a.filter(h=>h!==i):r=s,i=Xn(i)}return t.set(e,a),a}function e0(e){let{element:t,boundary:n,rootBoundary:a,strategy:r}=e;const i=[...n==="clippingAncestors"?Hs(t)?[]:JC(t,this._c):[].concat(n),a],s=i[0],l=i.reduce((u,h)=>{const d=zf(t,h,r);return u.top=et(d.top,u.top),u.right=Kn(d.right,u.right),u.bottom=Kn(d.bottom,u.bottom),u.left=et(d.left,u.left),u},zf(t,s,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function t0(e){const{width:t,height:n}=Zy(e);return{width:t,height:n}}function n0(e,t,n){const a=Vt(t),r=Ut(t),o=n==="fixed",i=Sa(e,!0,o,t);let s={scrollLeft:0,scrollTop:0};const l=Bt(0);if(a||!a&&!o)if((Nr(t)!=="body"||Uo(r))&&(s=Bs(t)),a){const f=Sa(t,!0,o,t);l.x=f.x+t.clientLeft,l.y=f.y+t.clientTop}else r&&(l.x=kh(r));const u=r&&!a&&!o?ev(r,s):Bt(0),h=i.left+s.scrollLeft-l.x-u.x,d=i.top+s.scrollTop-l.y-u.y;return{x:h,y:d,width:i.width,height:i.height}}function jc(e){return Pt(e).position==="static"}function Wf(e,t){if(!Vt(e)||Pt(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Ut(e)===n&&(n=n.ownerDocument.body),n}function nv(e,t){const n=rt(e);if(Hs(e))return n;if(!Vt(e)){let r=Xn(e);for(;r&&!_r(r);){if(Et(r)&&!jc(r))return r;r=Xn(r)}return n}let a=Wf(e,t);for(;a&&BC(a)&&jc(a);)a=Wf(a,t);return a&&_r(a)&&jc(a)&&!bh(a)?n:a||VC(e)||n}const a0=async function(e){const t=this.getOffsetParent||nv,n=this.getDimensions,a=await n(e.floating);return{reference:n0(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}};function r0(e){return Pt(e).direction==="rtl"}const o0={convertOffsetParentRelativeRectToViewportRelativeRect:GC,getDocumentElement:Ut,getClippingRect:e0,getOffsetParent:nv,getElementRects:a0,getClientRects:KC,getDimensions:t0,getScale:Ja,isElement:Et,isRTL:r0};function av(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function i0(e,t){let n=null,a;const r=Ut(e);function o(){var s;clearTimeout(a),(s=n)==null||s.disconnect(),n=null}function i(s,l){s===void 0&&(s=!1),l===void 0&&(l=1),o();const u=e.getBoundingClientRect(),{left:h,top:d,width:f,height:w}=u;if(s||t(),!f||!w)return;const x=mi(d),m=mi(r.clientWidth-(h+f)),_=mi(r.clientHeight-(d+w)),g=mi(h),v={rootMargin:-x+"px "+-m+"px "+-_+"px "+-g+"px",threshold:et(0,Kn(1,l))||1};let k=!0;function S(T){const I=T[0].intersectionRatio;if(I!==l){if(!k)return i();I?i(!1,I):a=setTimeout(()=>{i(!1,1e-7)},1e3)}I===1&&!av(u,e.getBoundingClientRect())&&i(),k=!1}try{n=new IntersectionObserver(S,{...v,root:r.ownerDocument})}catch{n=new IntersectionObserver(S,v)}n.observe(e)}return i(!0),o}function s0(e,t,n,a){a===void 0&&(a={});const{ancestorScroll:r=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:l=!1}=a,u=_h(e),h=r||o?[...u?Ro(u):[],...Ro(t)]:[];h.forEach(g=>{r&&g.addEventListener("scroll",n,{passive:!0}),o&&g.addEventListener("resize",n)});const d=u&&s?i0(u,n):null;let f=-1,w=null;i&&(w=new ResizeObserver(g=>{let[y]=g;y&&y.target===u&&w&&(w.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var v;(v=w)==null||v.observe(t)})),n()}),u&&!l&&w.observe(u),w.observe(t));let x,m=l?Sa(e):null;l&&_();function _(){const g=Sa(e);m&&!av(m,g)&&n(),m=g,x=requestAnimationFrame(_)}return n(),()=>{var g;h.forEach(y=>{r&&y.removeEventListener("scroll",n),o&&y.removeEventListener("resize",n)}),d==null||d(),(g=w)==null||g.disconnect(),w=null,l&&cancelAnimationFrame(x)}}const c0=WC,l0=FC,u0=OC,h0=HC,d0=DC,Ff=MC,f0=YC,p0=(e,t,n)=>{const a=new Map,r={platform:o0,...n},o={...r.platform,_c:a};return LC(e,t,{...r,platform:o})};var Mi=typeof document<"u"?p.useLayoutEffect:p.useEffect;function ps(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,a,r;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(a=n;a--!==0;)if(!ps(e[a],t[a]))return!1;return!0}if(r=Object.keys(e),n=r.length,n!==Object.keys(t).length)return!1;for(a=n;a--!==0;)if(!{}.hasOwnProperty.call(t,r[a]))return!1;for(a=n;a--!==0;){const o=r[a];if(!(o==="_owner"&&e.$$typeof)&&!ps(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function rv(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Yf(e,t){const n=rv(e);return Math.round(t*n)/n}function Nc(e){const t=p.useRef(e);return Mi(()=>{t.current=e}),t}function m0(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:a=[],platform:r,elements:{reference:o,floating:i}={},transform:s=!0,whileElementsMounted:l,open:u}=e,[h,d]=p.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,w]=p.useState(a);ps(f,a)||w(a);const[x,m]=p.useState(null),[_,g]=p.useState(null),y=p.useCallback(E=>{E!==T.current&&(T.current=E,m(E))},[]),v=p.useCallback(E=>{E!==I.current&&(I.current=E,g(E))},[]),k=o||x,S=i||_,T=p.useRef(null),I=p.useRef(null),q=p.useRef(h),P=l!=null,N=Nc(l),D=Nc(r),O=Nc(u),$=p.useCallback(()=>{if(!T.current||!I.current)return;const E={placement:t,strategy:n,middleware:f};D.current&&(E.platform=D.current),p0(T.current,I.current,E).then(R=>{const z={...R,isPositioned:O.current!==!1};L.current&&!ps(q.current,z)&&(q.current=z,Ho.flushSync(()=>{d(z)}))})},[f,t,n,D,O]);Mi(()=>{u===!1&&q.current.isPositioned&&(q.current.isPositioned=!1,d(E=>({...E,isPositioned:!1})))},[u]);const L=p.useRef(!1);Mi(()=>(L.current=!0,()=>{L.current=!1}),[]),Mi(()=>{if(k&&(T.current=k),S&&(I.current=S),k&&S){if(N.current)return N.current(k,S,$);$()}},[k,S,$,N,P]);const X=p.useMemo(()=>({reference:T,floating:I,setReference:y,setFloating:v}),[y,v]),F=p.useMemo(()=>({reference:k,floating:S}),[k,S]),Z=p.useMemo(()=>{const E={position:n,left:0,top:0};if(!F.floating)return E;const R=Yf(F.floating,h.x),z=Yf(F.floating,h.y);return s?{...E,transform:"translate("+R+"px, "+z+"px)",...rv(F.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:R,top:z}},[n,s,F.floating,h.x,h.y]);return p.useMemo(()=>({...h,update:$,refs:X,elements:F,floatingStyles:Z}),[h,$,X,F,Z])}const g0=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:a,padding:r}=typeof e=="function"?e(n):e;return a&&t(a)?a.current!=null?Ff({element:a.current,padding:r}).fn(n):{}:a?Ff({element:a,padding:r}).fn(n):{}}}},y0=(e,t)=>({...c0(e),options:[e,t]}),v0=(e,t)=>({...l0(e),options:[e,t]}),w0=(e,t)=>({...f0(e),options:[e,t]}),b0=(e,t)=>({...u0(e),options:[e,t]}),x0=(e,t)=>({...h0(e),options:[e,t]}),_0=(e,t)=>({...d0(e),options:[e,t]}),k0=(e,t)=>({...g0(e),options:[e,t]});var S0="Arrow",ov=p.forwardRef((e,t)=>{const{children:n,width:a=10,height:r=5,...o}=e;return c.jsx(K.svg,{...o,ref:t,width:a,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:c.jsx("polygon",{points:"0,0 30,0 15,10"})})});ov.displayName=S0;var C0=ov;function I0(e){const[t,n]=p.useState(void 0);return dn(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const a=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const o=r[0];let i,s;if("borderBoxSize"in o){const l=o.borderBoxSize,u=Array.isArray(l)?l[0]:l;i=u.inlineSize,s=u.blockSize}else i=e.offsetWidth,s=e.offsetHeight;n({width:i,height:s})});return a.observe(e,{box:"border-box"}),()=>a.unobserve(e)}else n(void 0)},[e]),t}var iv="Popper",[sv,cv]=gn(iv),[tq,lv]=sv(iv),uv="PopperAnchor",hv=p.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:a,...r}=e,o=lv(uv,n),i=p.useRef(null),s=ye(t,i);return p.useEffect(()=>{o.onAnchorChange((a==null?void 0:a.current)||i.current)}),a?null:c.jsx(K.div,{...r,ref:s})});hv.displayName=uv;var Sh="PopperContent",[T0,q0]=sv(Sh),dv=p.forwardRef((e,t)=>{var ta,Bh,Vh,Uh,$h,Gh;const{__scopePopper:n,side:a="bottom",sideOffset:r=0,align:o="center",alignOffset:i=0,arrowPadding:s=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:w="optimized",onPlaced:x,...m}=e,_=lv(Sh,n),[g,y]=p.useState(null),v=ye(t,Ar=>y(Ar)),[k,S]=p.useState(null),T=I0(k),I=(T==null?void 0:T.width)??0,q=(T==null?void 0:T.height)??0,P=a+(o!=="center"?"-"+o:""),N=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},D=Array.isArray(u)?u:[u],O=D.length>0,$={padding:N,boundary:D.filter(P0),altBoundary:O},{refs:L,floatingStyles:X,placement:F,isPositioned:Z,middlewareData:E}=m0({strategy:"fixed",placement:P,whileElementsMounted:(...Ar)=>s0(...Ar,{animationFrame:w==="always"}),elements:{reference:_.anchor},middleware:[y0({mainAxis:r+q,alignmentAxis:i}),l&&v0({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?w0():void 0,...$}),l&&b0({...$}),x0({...$,apply:({elements:Ar,rects:Kh,availableWidth:Kw,availableHeight:Qw})=>{const{width:Xw,height:Zw}=Kh.reference,$o=Ar.floating.style;$o.setProperty("--radix-popper-available-width",`${Kw}px`),$o.setProperty("--radix-popper-available-height",`${Qw}px`),$o.setProperty("--radix-popper-anchor-width",`${Xw}px`),$o.setProperty("--radix-popper-anchor-height",`${Zw}px`)}}),k&&k0({element:k,padding:s}),j0({arrowWidth:I,arrowHeight:q}),f&&_0({strategy:"referenceHidden",...$})]}),[R,z]=mv(F),V=be(x);dn(()=>{Z&&(V==null||V())},[Z,V]);const ce=(ta=E.arrow)==null?void 0:ta.x,wt=(Bh=E.arrow)==null?void 0:Bh.y,ct=((Vh=E.arrow)==null?void 0:Vh.centerOffset)!==0,[Rr,Gt]=p.useState();return dn(()=>{g&&Gt(window.getComputedStyle(g).zIndex)},[g]),c.jsx("div",{ref:L.setFloating,"data-radix-popper-content-wrapper":"",style:{...X,transform:Z?X.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Rr,"--radix-popper-transform-origin":[(Uh=E.transformOrigin)==null?void 0:Uh.x,($h=E.transformOrigin)==null?void 0:$h.y].join(" "),...((Gh=E.hide)==null?void 0:Gh.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:c.jsx(T0,{scope:n,placedSide:R,onArrowChange:S,arrowX:ce,arrowY:wt,shouldHideArrow:ct,children:c.jsx(K.div,{"data-side":R,"data-align":z,...m,ref:v,style:{...m.style,animation:Z?void 0:"none"}})})})});dv.displayName=Sh;var fv="PopperArrow",E0={top:"bottom",right:"left",bottom:"top",left:"right"},pv=p.forwardRef(function(t,n){const{__scopePopper:a,...r}=t,o=q0(fv,a),i=E0[o.placedSide];return c.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:c.jsx(C0,{...r,ref:n,style:{...r.style,display:"block"}})})});pv.displayName=fv;function P0(e){return e!==null}var j0=e=>({name:"transformOrigin",options:e,fn(t){var _,g,y;const{placement:n,rects:a,middlewareData:r}=t,i=((_=r.arrow)==null?void 0:_.centerOffset)!==0,s=i?0:e.arrowWidth,l=i?0:e.arrowHeight,[u,h]=mv(n),d={start:"0%",center:"50%",end:"100%"}[h],f=(((g=r.arrow)==null?void 0:g.x)??0)+s/2,w=(((y=r.arrow)==null?void 0:y.y)??0)+l/2;let x="",m="";return u==="bottom"?(x=i?d:`${f}px`,m=`${-l}px`):u==="top"?(x=i?d:`${f}px`,m=`${a.floating.height+l}px`):u==="right"?(x=`${-l}px`,m=i?d:`${w}px`):u==="left"&&(x=`${a.floating.width+l}px`,m=i?d:`${w}px`),{data:{x,y:m}}}});function mv(e){const[t,n="center"]=e.split("-");return[t,n]}var N0=hv,R0=dv,A0=pv,[Vs,nq]=gn("Tooltip",[cv]),Ch=cv(),gv="TooltipProvider",L0=700,Hf="tooltip.open",[M0,yv]=Vs(gv),vv=e=>{const{__scopeTooltip:t,delayDuration:n=L0,skipDelayDuration:a=300,disableHoverableContent:r=!1,children:o}=e,i=p.useRef(!0),s=p.useRef(!1),l=p.useRef(0);return p.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),c.jsx(M0,{scope:t,isOpenDelayedRef:i,delayDuration:n,onOpen:p.useCallback(()=>{window.clearTimeout(l.current),i.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.current=!0,a)},[a]),isPointerInTransitRef:s,onPointerInTransitChange:p.useCallback(u=>{s.current=u},[]),disableHoverableContent:r,children:o})};vv.displayName=gv;var wv="Tooltip",[aq,Us]=Vs(wv),ru="TooltipTrigger",O0=p.forwardRef((e,t)=>{const{__scopeTooltip:n,...a}=e,r=Us(ru,n),o=yv(ru,n),i=Ch(n),s=p.useRef(null),l=ye(t,s,r.onTriggerChange),u=p.useRef(!1),h=p.useRef(!1),d=p.useCallback(()=>u.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),c.jsx(N0,{asChild:!0,...i,children:c.jsx(K.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...a,ref:l,onPointerMove:B(e.onPointerMove,f=>{f.pointerType!=="touch"&&!h.current&&!o.isPointerInTransitRef.current&&(r.onTriggerEnter(),h.current=!0)}),onPointerLeave:B(e.onPointerLeave,()=>{r.onTriggerLeave(),h.current=!1}),onPointerDown:B(e.onPointerDown,()=>{r.open&&r.onClose(),u.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:B(e.onFocus,()=>{u.current||r.onOpen()}),onBlur:B(e.onBlur,r.onClose),onClick:B(e.onClick,r.onClose)})})});O0.displayName=ru;var D0="TooltipPortal",[rq,z0]=Vs(D0,{forceMount:void 0}),kr="TooltipContent",bv=p.forwardRef((e,t)=>{const n=z0(kr,e.__scopeTooltip),{forceMount:a=n.forceMount,side:r="top",...o}=e,i=Us(kr,e.__scopeTooltip);return c.jsx(jt,{present:a||i.open,children:i.disableHoverableContent?c.jsx(xv,{side:r,...o,ref:t}):c.jsx(W0,{side:r,...o,ref:t})})}),W0=p.forwardRef((e,t)=>{const n=Us(kr,e.__scopeTooltip),a=yv(kr,e.__scopeTooltip),r=p.useRef(null),o=ye(t,r),[i,s]=p.useState(null),{trigger:l,onClose:u}=n,h=r.current,{onPointerInTransitChange:d}=a,f=p.useCallback(()=>{s(null),d(!1)},[d]),w=p.useCallback((x,m)=>{const _=x.currentTarget,g={x:x.clientX,y:x.clientY},y=V0(g,_.getBoundingClientRect()),v=U0(g,y),k=$0(m.getBoundingClientRect()),S=K0([...v,...k]);s(S),d(!0)},[d]);return p.useEffect(()=>()=>f(),[f]),p.useEffect(()=>{if(l&&h){const x=_=>w(_,h),m=_=>w(_,l);return l.addEventListener("pointerleave",x),h.addEventListener("pointerleave",m),()=>{l.removeEventListener("pointerleave",x),h.removeEventListener("pointerleave",m)}}},[l,h,w,f]),p.useEffect(()=>{if(i){const x=m=>{const _=m.target,g={x:m.clientX,y:m.clientY},y=(l==null?void 0:l.contains(_))||(h==null?void 0:h.contains(_)),v=!G0(g,i);y?f():v&&(f(),u())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[l,h,i,u,f]),c.jsx(xv,{...e,ref:o})}),[F0,Y0]=Vs(wv,{isInside:!1}),H0=Vk("TooltipContent"),xv=p.forwardRef((e,t)=>{const{__scopeTooltip:n,children:a,"aria-label":r,onEscapeKeyDown:o,onPointerDownOutside:i,...s}=e,l=Us(kr,n),u=Ch(n),{onClose:h}=l;return p.useEffect(()=>(document.addEventListener(Hf,h),()=>document.removeEventListener(Hf,h)),[h]),p.useEffect(()=>{if(l.trigger){const d=f=>{const w=f.target;w!=null&&w.contains(l.trigger)&&h()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,h]),c.jsx(Os,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:d=>d.preventDefault(),onDismiss:h,children:c.jsxs(R0,{"data-state":l.stateAttribute,...u,...s,ref:t,style:{...s.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[c.jsx(H0,{children:a}),c.jsx(F0,{scope:n,isInside:!0,children:c.jsx(hS,{id:l.contentId,role:"tooltip",children:r||a})})]})})});bv.displayName=kr;var _v="TooltipArrow",B0=p.forwardRef((e,t)=>{const{__scopeTooltip:n,...a}=e,r=Ch(n);return Y0(_v,n).isInside?null:c.jsx(A0,{...r,...a,ref:t})});B0.displayName=_v;function V0(e,t){const n=Math.abs(t.top-e.y),a=Math.abs(t.bottom-e.y),r=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(n,a,r,o)){case o:return"left";case r:return"right";case n:return"top";case a:return"bottom";default:throw new Error("unreachable")}}function U0(e,t,n=5){const a=[];switch(t){case"top":a.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":a.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":a.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":a.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return a}function $0(e){const{top:t,right:n,bottom:a,left:r}=e;return[{x:r,y:t},{x:n,y:t},{x:n,y:a},{x:r,y:a}]}function G0(e,t){const{x:n,y:a}=e;let r=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const s=t[o].x,l=t[o].y,u=t[i].x,h=t[i].y;l>a!=h>a&&n<(u-s)*(a-l)/(h-l)+s&&(r=!r)}return r}function K0(e){const t=e.slice();return t.sort((n,a)=>n.x<a.x?-1:n.x>a.x?1:n.y<a.y?-1:n.y>a.y?1:0),Q0(t)}function Q0(e){if(e.length<=1)return e.slice();const t=[];for(let a=0;a<e.length;a++){const r=e[a];for(;t.length>=2;){const o=t[t.length-1],i=t[t.length-2];if((o.x-i.x)*(r.y-i.y)>=(o.y-i.y)*(r.x-i.x))t.pop();else break}t.push(r)}t.pop();const n=[];for(let a=e.length-1;a>=0;a--){const r=e[a];for(;n.length>=2;){const o=n[n.length-1],i=n[n.length-2];if((o.x-i.x)*(r.y-i.y)>=(o.y-i.y)*(r.x-i.x))n.pop();else break}n.push(r)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var X0=vv,kv=bv;const Z0=X0,J0=p.forwardRef(({className:e,sideOffset:t=4,...n},a)=>c.jsx(kv,{ref:a,sideOffset:t,className:ne("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...n}));J0.displayName=kv.displayName;const eI=ph("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),J=p.forwardRef(({className:e,variant:t,size:n,asChild:a=!1,...r},o)=>{const i=a?Hk:"button";return c.jsx(i,{className:ne(eI({variant:t,size:n,className:e})),ref:o,...r})});J.displayName="Button";function tI(){const[,e]=rh(),t=()=>{e("/game")},n=()=>{e("/game?load=true")},a=()=>{e("/dev")};return c.jsxs("div",{className:"min-h-screen relative flex items-center justify-center overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('/backgrounds/title-screen.png')",filter:"brightness(0.7)"}}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/30 via-transparent to-black/50"}),c.jsxs("div",{className:"relative z-10 text-center space-y-8 px-8 max-w-2xl",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("h1",{className:"text-6xl md:text-7xl font-bold text-white drop-shadow-2xl",style:{fontFamily:"Great Vibes, cursive"},children:[c.jsx("span",{className:"text-red-400",children:"Eternal"})," ",c.jsx("span",{className:"text-purple-300",children:"Hearts"})]}),c.jsx("h2",{className:"text-2xl md:text-3xl font-semibold text-gray-200 drop-shadow-lg",style:{fontFamily:"Dancing Script, cursive"},children:"A Ravencroft Romance"}),c.jsx("p",{className:"text-lg text-gray-300 max-w-lg mx-auto leading-relaxed",style:{fontFamily:"Kaushan Script, cursive"},children:"Enter a world of immortal passion, ancient secrets, and choices that will determine your eternal fate"})]}),c.jsxs("div",{className:"space-y-4 pt-8 flex flex-col items-center",children:[c.jsx(J,{onClick:t,className:"w-full max-w-xs bg-red-700 hover:bg-red-600 text-white font-semibold py-4 text-lg border border-red-500 shadow-lg transition-all duration-300 hover:shadow-red-500/50 text-center justify-center",style:{fontFamily:"Dancing Script, cursive"},children:"Start New Game"}),c.jsx(J,{onClick:n,variant:"outline",className:"w-full max-w-xs bg-purple-900/50 hover:bg-purple-800/70 text-purple-200 border-purple-400 font-semibold py-4 text-lg shadow-lg transition-all duration-300 hover:shadow-purple-500/50 text-center justify-center",style:{fontFamily:"Dancing Script, cursive"},children:"Load Game"}),c.jsx(J,{onClick:a,className:"w-full max-w-xs bg-gray-800/50 hover:bg-gray-700/70 text-gray-300 hover:text-white border border-gray-600 font-medium py-3 text-base shadow-lg transition-all duration-300 hover:shadow-gray-500/50 text-center justify-center",style:{fontFamily:"Dancing Script, cursive"},children:"Developer Mode"})]}),c.jsx("div",{className:"pt-8 text-center",children:c.jsx("p",{className:"text-sm text-gray-500 italic",style:{fontFamily:"Alex Brush, cursive"},children:'"In the shadows of Ravencroft Manor, love transcends mortality..."'})})]})]})}const b={lilith:{id:"lilith",name:"Lilith Ravencroft",title:"Ancient Vampire  Coven Leader",description:"The enigmatic leader of the vampire coven, Lilith is both alluring and dangerous.",affection:0,trust:50,status:"Neutral",avatar:"vampire-fangs",color:"bg-blood-red"},morgana:{id:"morgana",name:"Morgana Blackthorne",title:"Shadow Mystic  Coven Elder",description:"A mysterious vampire with deep knowledge of dark magic and ancient secrets.",affection:0,trust:30,status:"Neutral",avatar:"moon",color:"bg-gothic-purple"},seraphina:{id:"seraphina",name:"Seraphina Vale",title:"Fallen Angel  Protector",description:"Once an angel, now caught between light and darkness, devoted to protecting you.",affection:0,trust:70,status:"Neutral",avatar:"star",color:"bg-moonlight"},valentina:{id:"valentina",name:"Valentina Reyes",title:"Passionate Revolutionary  Former Soldier",description:"A fiery Spanish vampire with crimson curls and fierce amber eyes. Once fought in mortal wars, now battles for vampire rights and equality within the coven.",affection:0,trust:45,status:"Challenging",avatar:"sword",color:"bg-sunset-orange"},celeste:{id:"celeste",name:"Celeste Dubois",title:"Scholar Keeper  Ancient Librarian",description:"A brilliant French vampire with steel-gray eyes behind wire-rimmed glasses. Keeper of the manor's vast supernatural library and forbidden knowledge.",affection:0,trust:40,status:"Analytical",avatar:"book",color:"bg-deep-indigo"},raven:{id:"raven",name:"Raven Bjornsdottir",title:"Wild Huntress  Guardian of Borders",description:"A fierce Nordic vampire with braided platinum hair and ice-blue eyes. Prefers wilderness to civilization, hunts supernatural threats to the coven.",affection:0,trust:35,status:"Wary",avatar:"wolf",color:"bg-frost-blue"},isadora:{id:"isadora",name:"Isadora Medici",title:"Enchanting Socialite  Political Strategist",description:"An Italian vampire with dark olive skin and emerald eyes. Master of social manipulation and political intrigue from her Renaissance court days.",affection:0,trust:25,status:"Calculating",avatar:"crown",color:"bg-emerald-green"},luna:{id:"luna",name:"Luna Nightwhisper",title:"Mystical Seer  Oracle of Futures",description:"A mysterious vampire with silver-white hair and violet eyes that see beyond the veil. Practices ancient divination and prophetic magic.",affection:0,trust:60,status:"Enigmatic",avatar:"crystal-ball",color:"bg-mystic-purple"},elena:{id:"elena",name:"Elena Volkov",title:"Tormented Artist  Eternal Muse",description:"A haunted Russian vampire with raven-black hair and pale gray eyes. Creates dark masterpieces while struggling with the weight of immortal memories.",affection:0,trust:55,status:"Melancholic",avatar:"paintbrush",color:"bg-shadow-gray"},umbra:{id:"umbra",name:"Umbra",title:"The Gentle Shadow  Ancient Guardian",description:"An ancient eldritch entity of living shadow and starlight who manifests as pools of darkness with glowing points of light. Despite their cosmic horror appearance, they are incredibly shy and deeply affectionate to those they trust.",affection:0,trust:20,status:"Timid",avatar:"void",color:"bg-void-purple"}},xn=[{id:"chapter1",title:"The Awakening",scenes:[{id:"arrival",title:"The Inheritance",text:["The letter from the law firm still crumples in your trembling hand as you stand before the imposing gates of Ravencroft Manor. Your great-aunt Cordelia - a woman you'd met only once as a child - has left you this sprawling estate in her will.","The iron gates seem to part of their own accord as you approach, creaking open with the weight of centuries. The cobblestone path winds through overgrown gardens where roses bloom impossibly red in the moonlight.",'According to the letter, the manor comes with... tenants. Long-term residents who have "historical agreements" with the property. The lawyer had been frustratingly vague about the details, mentioning only that they are "nocturnal by nature" and "require certain accommodations."',`As you reach the massive oak doors, you notice they bear intricate carvings - symbols that seem to shift and dance when you're not looking directly at them. Your great-aunt's final note echoes in your mind: "The women of Ravencroft will test you, child. Be true to yourself, and you may find more than you ever imagined possible."`],background:"/backgrounds/gothic-manor-entrance.png",choices:[{id:"knock_boldly",text:"Knock firmly on the door. This is your property now, after all.",consequence:"Confident approach  Shows ownership",effects:[],nextScene:"first_meeting_confident"},{id:"knock_politely",text:"Knock gently and wait respectfully. You are their guest as much as they are yours.",consequence:"Respectful approach  Shows diplomacy",effects:[],nextScene:"first_meeting_polite"},{id:"explore_grounds",text:"Walk around the manor first to get a sense of the place.",consequence:"Cautious approach  Gathers information",effects:[],nextScene:"manor_exploration"}]},{id:"lilith_greeting",title:"A Gracious Welcome",text:["Your respectful knock echoes through the grand entrance hall. After a moment, the heavy door swings open to reveal a woman of timeless elegance whose very presence commands attention.","She stands tall and regal, with silver-streaked raven hair swept back in an intricate chignon that frames her aristocratic features. Her skin is pale as moonlight, unblemished despite the wisdom etched in the fine lines around her piercing violet eyes - eyes that seem to hold centuries of secrets.",`"Welcome to Ravencroft Manor," she says, her voice carrying the musical cadence of old nobility. Her lips curve in a warm smile that doesn't quite reach those ancient eyes. "I am Lilith. Your great-aunt spoke of you often - though I suspect she left out some rather important details about her... houseguests."`,"She moves with fluid grace as she steps aside, her long burgundy velvet dress rustling softly. Every gesture speaks of power held in check, of someone accustomed to being obeyed without question.",'"Please, come in. We have much to discuss, and the night is still young. Your aunt was very dear to us, and we hope to understand what her legacy means to you."'],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"thank_for_welcome",text:`"Thank you for the warm welcome. I have to admit, I'm quite curious about those details Cordelia left out."`,consequence:"Polite curiosity  Shows good manners and healthy interest",effects:[{characterId:"lilith",affectionChange:12}],nextScene:"truth_revelation"},{id:"ask_about_houseguests",text:'"Houseguests? The lawyer mentioned long-term tenants, but was very vague about the specifics."',consequence:"Direct inquiry  Shows practical mindset",effects:[{characterId:"lilith",affectionChange:8}],nextScene:"tenant_explanation"},{id:"compliment_manor",text:'"This place is absolutely stunning. Cordelia had exquisite taste."',consequence:"Appreciative response  Shows aesthetic appreciation",effects:[{characterId:"lilith",affectionChange:10}],nextScene:"manor_appreciation"},{id:"probe_financial_arrangements",text:`"I'll need to review all financial arrangements and rental agreements. As the new owner, I have certain legal obligations."`,consequence:"Legal scrutiny  Threatens established privacy",effects:[{characterId:"lilith",affectionChange:-5,trustChange:-12}],dangerLevel:"medium",secretsProbed:["financial_secrecy"],nextScene:"financial_tension"},{id:"question_aunt_death",text:'"I find it strange that Cordelia died so suddenly. The doctor said it was her heart, but she was in perfect health when I last saw her."',consequence:"Suspicion about death  Implies foul play",effects:[{characterId:"lilith",affectionChange:-8,trustChange:-18}],dangerLevel:"high",secretsProbed:["cordelia_death"],nextScene:"death_suspicion"}]},{id:"assertive_entrance",title:"Bold Authority",text:["Your confident knock reverberates through the manor. The door opens almost immediately, revealing the same elegant woman, but her expression is more appraising than welcoming.",`"Confidence," she observes with a slight smile. "I am Lilith Ravencroft, and you must be Cordelia's great-niece. Your aunt warned me you had a strong spirit."`,`She doesn't immediately invite you in, instead studying you with those ancient violet eyes. "Before you enter, you should know that this house operates by certain... traditional courtesies. Respect is earned here, not inherited."`,`Despite the warning, there's approval in her gaze. "But I appreciate directness. It suggests you won't faint at the first revelation of what your inheritance truly entails."`],character:b.lilith,background:"/backgrounds/gothic-manor-entrance.png",choices:[{id:"acknowledge_test",text:`"I understand this is a test. I'm ready to prove myself worthy of Cordelia's trust."`,consequence:"Accepts challenge  Shows understanding of dynamics",effects:[{characterId:"lilith",affectionChange:15}],nextScene:"worthiness_test"},{id:"ask_about_revelations",text:'"What kind of revelations should I be prepared for?"',consequence:"Direct questioning  Shows fearless curiosity",effects:[{characterId:"lilith",affectionChange:12}],nextScene:"revelation_preparation"},{id:"show_respect",text:`"I apologize if I seemed presumptuous. May I please come in and learn about my aunt's legacy properly?"`,consequence:"Diplomatic adjustment  Shows adaptability",effects:[{characterId:"lilith",affectionChange:18}],nextScene:"respectful_entry"}]},{id:"unlocked_discovery",title:"The Open Door",text:["The ornate handle turns easily under your hand - the door wasn't locked. As you push it open, you're greeted by the sight of a grand entrance hall lit by candles and the soft glow of a fireplace.",`A woman's voice, cultured and amused, drifts from the shadows: "How practical. Though most would consider it polite to wait for an invitation."`,'She emerges from the sitting room - elegant, with violet eyes that seem far older than her apparent age. "I am Lilith. And you, I presume, are our new... lady of the manor."',`There's no hostility in her tone, only mild amusement at your pragmatic approach. "Your great-aunt had a similar directness. She also tested boundaries when she first arrived."`],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"apologize_for_presumption",text:`"I'm sorry, I should have waited. I was just... eager to understand what I've inherited."`,consequence:"Polite apology  Shows good manners despite boldness",effects:[{characterId:"lilith",affectionChange:14}],nextScene:"gracious_apology_accepted"},{id:"defend_practicality",text:'"If someone wants to keep people out, they should lock their doors. An unlocked door is an invitation."',consequence:"Logical justification  Shows practical mindset",effects:[{characterId:"lilith",affectionChange:8}],nextScene:"practical_philosophy"},{id:"ask_about_cordelia",text:`"You knew Cordelia well? I'd love to hear about her time here."`,consequence:"Personal interest  Shows family connection values",effects:[{characterId:"lilith",affectionChange:16}],nextScene:"cordelia_memories"}]},{id:"first_meeting_confident",title:"An Unexpected Welcome",text:["Your firm knock echoes through what sounds like a vast interior. After a moment, the door swings open to reveal a woman of breathtaking beauty, her crimson dress seeming to flow like liquid silk in the candlelight.",`"You must be Cordelia's great-niece," she says, her voice like velvet over steel. "I am Lilith Ravencroft. Welcome to your inheritance." There's something in the way she says "inheritance" that suggests it encompasses more than just property.`,'Her dark eyes appraise you with interest. "Bold of you to announce yourself so... assertively. Cordelia had mentioned you might have her spirit." She steps aside, gesturing for you to enter. "Please, come in. We have much to discuss."',"As you cross the threshold, you feel a strange tingling sensation, as if you've passed through some invisible barrier. The air inside carries scents of old roses, aged wine, and something indefinably ancient."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_about_cordelia",text:'"You knew my great-aunt well? She never mentioned any of you in her letters."',consequence:"Seeks family connection  Shows curiosity",effects:[{characterId:"lilith",affectionChange:8}],nextScene:"cordelia_story"},{id:"ask_about_arrangements",text:`"The lawyer mentioned 'historical arrangements.' What exactly does that mean?"`,consequence:"Business-focused  Direct approach",effects:[{characterId:"lilith",affectionChange:5}],nextScene:"arrangement_explanation"},{id:"comment_on_manor",text:'"This place is incredible. It feels... alive somehow."',consequence:"Appreciates atmosphere  Shows sensitivity",effects:[{characterId:"lilith",affectionChange:12}],nextScene:"manor_secrets"}]},{id:"first_meeting_polite",title:"A Gracious Introduction",text:["Your gentle knock carries a respectful rhythm. After a few moments, the door opens to reveal a woman whose beauty seems to belong to another era entirely. Her deep red dress flows like shadows, and her dark eyes hold depths that seem to span centuries.",`"How refreshing," she says with genuine pleasure, "a visitor who understands the value of courtesy." Her smile is warm, though there's something otherworldly about the way the candlelight plays across her features. "I am Lilith Ravencroft, and you must be dear Cordelia's great-niece."`,`She steps back gracefully, extending her hand in invitation. "Your respectful approach speaks well of your character. Cordelia always said you were raised with proper manners." There's approval in her voice, and something else - perhaps relief.`,"As you cross the threshold, you feel a subtle shift in the air, as if you've entered a space where different rules apply. The interior is lit by candles and firelight, casting dancing shadows that seem almost alive."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"thank_for_welcome",text:`"Thank you for the warm welcome. I wasn't sure what to expect when I arrived."`,consequence:"Grateful and honest  Shows vulnerability",effects:[{characterId:"lilith",affectionChange:12}],nextScene:"honest_uncertainty"},{id:"ask_about_cordelia_relationship",text:'"You speak of my great-aunt with such fondness. Were you close friends?"',consequence:"Personal interest  Shows care for family connections",effects:[{characterId:"lilith",affectionChange:10}],nextScene:"cordelia_friendship"},{id:"comment_on_atmosphere",text:'"This place has an extraordinary atmosphere. It feels like stepping into another world."',consequence:"Observant appreciation  Shows sensitivity to supernatural",effects:[{characterId:"lilith",affectionChange:15}],nextScene:"atmospheric_awareness"},{id:"inquire_about_arrangements",text:`"The lawyer mentioned certain arrangements with the property. I hope my arrival won't disrupt your life here."`,consequence:"Considerate approach  Shows respect for existing residents",effects:[{characterId:"lilith",affectionChange:18}],nextScene:"considerate_inquiry"},{id:"notice_other_presences",text:`"I sense I'm not the only guest here tonight. May I meet the others?"`,consequence:"Perceptive awareness  Shows interest in meeting everyone",effects:[{characterId:"lilith",affectionChange:12}],nextScene:"early_introductions"}]},{id:"early_introductions",title:"Meeting the Residents",text:[`Lilith's eyes brighten with approval at your perceptiveness. "Very observant. Yes, you're quite right - we are a community here."`,"She leads you into the grand hall where several figures emerge from the shadows and adjoining rooms, each moving with an otherworldly grace.",'A elegant woman in deep purple approaches first. "I am Isadora," she says with practiced diplomacy. "Welcome to Ravencroft Manor."','Behind her, a woman with silver-streaked hair and knowing eyes steps forward. "Celeste," she introduces herself simply. "I manage our... research collections."',"The introductions create an immediate sense of the diverse personalities within this mysterious household."],character:b.isadora,background:"/backgrounds/grand-hall.png",choices:[{id:"greet_each_respectfully",text:"Take time to greet each person individually and learn their names properly.",consequence:"Respectful approach  Shows genuine interest in everyone",effects:[{characterId:"isadora",affectionChange:15},{characterId:"celeste",affectionChange:12},{characterId:"lilith",affectionChange:8}],nextScene:"respectful_introductions"},{id:"ask_about_community",text:'"How long have you all lived here together? This seems like a close-knit community."',consequence:"Community interest  Shows appreciation for their bonds",effects:[{characterId:"isadora",affectionChange:12},{characterId:"lilith",affectionChange:10}],nextScene:"community_history"},{id:"express_gratitude",text:'"Thank you all for welcoming me. I hope I can contribute positively to your community."',consequence:"Grateful newcomer  Shows desire to contribute",effects:[{characterId:"isadora",affectionChange:18},{characterId:"celeste",affectionChange:15}],nextScene:"integration_discussion"}]},{id:"respectful_introductions",title:"Personal Connections",text:["You take genuine time with each introduction, making eye contact and asking thoughtful questions about their roles in the household.",'Isadora responds warmly to your diplomatic approach. "How refreshing to meet someone who values proper introductions."','Celeste nods approvingly. "Attention to individual worth is a valuable trait. I sense you understand that each person brings unique contributions."',"Your respectful approach creates immediate positive impressions and sets the foundation for meaningful relationships."],character:b.celeste,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_about_individual_interests",text:"Ask each person about their personal interests and passions.",consequence:"Personal interest  Shows genuine curiosity about individuals",effects:[{characterId:"celeste",affectionChange:20},{characterId:"isadora",affectionChange:15}],nextScene:"individual_passions_revealed"},{id:"express_eagerness_to_learn",text:`"I'd love to learn more about everyone's role in making this community work."`,consequence:"Learning eagerness  Shows appreciation for community structure",effects:[{characterId:"isadora",affectionChange:18},{characterId:"lilith",affectionChange:12}],nextScene:"community_roles_explained"},{id:"offer_own_introduction",text:"Share something meaningful about yourself to reciprocate their openness.",consequence:"Reciprocal sharing  Shows willingness to be vulnerable",effects:[{characterId:"celeste",affectionChange:22},{characterId:"isadora",affectionChange:20}],nextScene:"mutual_introduction"}]},{id:"community_history",title:"Bonds of Time",text:['Isadora and Lilith exchange a meaningful glance before Isadora speaks. "Some of us have been here for decades, others are more recent additions."',`"What makes this community special," Lilith adds, "is not the length of time we've known each other, but the depth of trust we've built."`,`Celeste interjects thoughtfully: "We've learned that true family is chosen, not born. Your great-aunt understood this when she welcomed us."`,"You sense layers of history and connection that run deeper than mere cohabitation."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"appreciate_chosen_family",text:`"I love the idea of chosen family. Blood doesn't always mean belonging."`,consequence:"Family philosophy  Shows understanding of chosen bonds",effects:[{characterId:"lilith",affectionChange:25},{characterId:"isadora",affectionChange:18}],nextScene:"chosen_family_bonds"},{id:"ask_about_cordelia_integration",text:'"How did Cordelia become part of your family? What made her special?"',consequence:"Legacy interest  Shows desire to understand aunt's role",effects:[{characterId:"lilith",affectionChange:20},{characterId:"celeste",affectionChange:15}],nextScene:"cordelia_legacy_story"},{id:"express_honor",text:`"I'm honored to be welcomed into such a close community. I hope to earn my place here."`,consequence:"Humble gratitude  Shows respect for existing bonds",effects:[{characterId:"isadora",affectionChange:22},{characterId:"lilith",affectionChange:18}],nextScene:"earning_place_discussion"}]},{id:"integration_discussion",title:"Finding Your Place",text:["Your thoughtful words create a warm atmosphere of acceptance. Isadora steps forward with a diplomatic smile.",'"Contribution is exactly what makes a community thrive. Each of us brings something unique to our shared life here."',`Celeste adds: "The question isn't whether you can contribute, but how your particular strengths will enhance what we've built together."`,"You feel the beginning of belonging, a sense that there might truly be a place for you in this extraordinary household."],character:b.isadora,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_about_needs",text:'"What does the community need most? Where could I make the biggest difference?"',consequence:"Service orientation  Shows desire to help where needed most",effects:[{characterId:"isadora",affectionChange:25},{characterId:"celeste",affectionChange:20}],nextScene:"community_needs_assessment"},{id:"share_skills",text:"Mention specific skills you have that might benefit the community.",consequence:"Skill sharing  Shows practical readiness to contribute",effects:[{characterId:"celeste",affectionChange:22},{characterId:"isadora",affectionChange:18}],nextScene:"skill_integration_planning"},{id:"emphasize_learning",text:`"I'm eager to learn from all of you. Everyone here clearly has wisdom to share."`,consequence:"Learning humility  Shows respect for others' knowledge",effects:[{characterId:"celeste",affectionChange:24},{characterId:"lilith",affectionChange:15}],nextScene:"wisdom_sharing_culture"}]},{id:"honest_uncertainty",title:"Shared Vulnerability",text:[`Lilith's expression grows warmer at your honesty. "Uncertainty is natural when stepping into the unknown. Your great-aunt felt the same way when she first arrived here decades ago."`,'She guides you toward a sitting room where a fire crackles in an ornate fireplace. "Cordelia left detailed instructions about how to... introduce you to our world. She wanted you to feel welcomed, not overwhelmed."','"We are not ordinary tenants," Lilith continues carefully, watching your reaction. "This manor has served as a sanctuary for beings like myself for over three centuries. Cordelia understood our nature and chose to protect us."','Her dark eyes search your face. "The question now is whether you, like her, can accept what lies beyond the boundaries of what most consider normal."'],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"express_openness",text:`"I've always believed there was more to the world than what we see on the surface. I'm willing to learn."`,consequence:"Open-minded  Shows readiness to accept supernatural",effects:[{characterId:"lilith",affectionChange:20}],nextScene:"supernatural_revelation"},{id:"ask_about_protection",text:'"What kind of protection? Are you in danger from something?"',consequence:"Protective instinct  Shows concern for others",effects:[{characterId:"lilith",affectionChange:15}],nextScene:"protection_discussion"},{id:"request_gradual_explanation",text:'"I want to understand, but could you help me learn gradually? This is all quite overwhelming."',consequence:"Honest about limits  Shows wisdom in pacing",effects:[{characterId:"lilith",affectionChange:12}],nextScene:"gradual_revelation"}]},{id:"cordelia_story",title:"Family Secrets",text:[`Lilith's expression softens with something that might be genuine fondness. "Cordelia was... unique among mortals. She understood our nature and chose to protect us rather than fear us."`,'She leads you through a grand hallway lined with portraits of women spanning different eras. "Your great-aunt inherited this manor in 1962, much as you have now. But she chose to stay, to learn, to become part of something larger than herself."','"We are vampires," Lilith says simply, watching your reaction carefully. "Ancient creatures who have found sanctuary here for over three centuries. Cordelia became our protector, our friend... and in some ways, our family."','She pauses before a portrait of a woman who bears a striking resemblance to you. "She hoped you might choose to continue her legacy. But the choice, as it was for her, is entirely yours."'],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"accept_easily",text:'"Vampires? That... actually explains a lot about Aunt Cordelia. She always seemed to know secrets."',consequence:"Takes revelation well  Shows adaptability",effects:[{characterId:"lilith",affectionChange:15}],nextScene:"acceptance_path"},{id:"need_proof",text:`"Vampires aren't real. If you're trying to scare me away from my inheritance..."`,consequence:"Skeptical  Requires evidence",effects:[{characterId:"lilith",affectionChange:3}],nextScene:"proof_demanded"},{id:"ask_about_choice",text:'"What kind of choice did Cordelia make? What are you asking of me?"',consequence:"Practical questions  Shows wisdom",effects:[{characterId:"lilith",affectionChange:10}],nextScene:"choice_explanation"}]},{id:"library",title:"The Library of Secrets",text:["Lilith leads you to a magnificent library, its towering shelves disappearing into shadow. Dust motes dance in the pale moonlight filtering through stained glass windows, each beam illuminating leather-bound tomes that seem to whisper secrets of centuries past.",`"This was Cordelia's favorite room," Lilith says softly. "She spent countless hours here, learning our history, our struggles, our hopes." She runs her finger along an ancient spine. "Knowledge is power, but it's also burden."`,'"These books contain the true history of our kind - not the myths and legends humans tell, but our real stories. Stories of love that transcends mortality, of sacrifice, of the price of immortality."','She turns to face you, her dark eyes holding depths of centuries. "Your great-aunt believed you had the strength to bear such knowledge. The question is... do you want to learn who we truly are?"'],character:b.lilith,background:"/backgrounds/library.png",choices:[{id:"eager_to_learn",text:'"Yes, I want to understand. Cordelia left me this place for a reason."',consequence:"Shows commitment to legacy  Opens knowledge path",effects:[{characterId:"lilith",affectionChange:12}],nextScene:"knowledge_path"},{id:"cautious_interest",text:`"I'll listen, but I need to know what I'm getting into."`,consequence:"Cautious but open  Shows wisdom",effects:[{characterId:"lilith",affectionChange:8}],nextScene:"gradual_revelation"},{id:"focus_on_inheritance",text:'"First, I need to understand the practical aspects of living here."',consequence:"Practical focus  Establishes boundaries",effects:[{characterId:"lilith",affectionChange:5}],nextScene:"practical_arrangements"}]},{id:"knowledge_path",title:"The Weight of Truth",text:['Lilith nods with approval. "Cordelia chose well. You have her courage." She moves to one of the ancient tomes, running her fingers along its spine with reverence.','"Our history is not one of monsters and victims, as human stories would have you believe. We are beings of passion, of deep connection, of love that transcends the mortal understanding of time."','She pulls a leather-bound journal from the shelf. "This belonged to your great-aunt. Her observations, her journey of understanding our nature. She documented everything - our struggles, our joys, our eternal search for meaning."',`Opening the journal, you see Cordelia's familiar handwriting: "Day 127 - I begin to understand that immortality is not a curse, but a responsibility. To love deeply, to protect fiercely, to never forget what it means to be human while becoming something more."`],character:b.lilith,background:"/backgrounds/library.png",choices:[{id:"read_more",text:'"May I read more of her journal? I want to understand her journey."',consequence:"Shows deep interest  Builds trust",effects:[{characterId:"lilith",affectionChange:15}],nextScene:"cordelia_journey"},{id:"ask_about_love",text:'"Love that transcends mortality? What does that mean exactly?"',consequence:"Focuses on emotional aspects  Romantic path",effects:[{characterId:"lilith",affectionChange:18}],nextScene:"love_explanation"},{id:"ask_about_others",text:'"You mentioned others live here. May I meet them?"',consequence:"Shows interest in community  Opens social paths",effects:[{characterId:"morgana",affectionChange:8},{characterId:"seraphina",affectionChange:8}],nextScene:"meet_the_coven"}]},{id:"first_kiss",title:"Crimson Embrace",text:[`Lilith's eyes widen with surprise and something deeper - a hunger that goes beyond the physical. "Few have seen me so clearly," she whispers, her voice thick with emotion.`,'She steps even closer, her hand finally making contact with your cheek. Her skin is marble-cold but somehow comforting. "You are either very brave or very foolish, little mortal. Perhaps both."',"Time seems to stop as she leans in, her lips brushing against yours in a kiss that tastes of wine and secrets. When she pulls away, her eyes are bright with an inner fire.",'"Welcome to my world," she breathes against your lips. "There will be no going back now."'],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"embrace_darkness",text:`"I don't want to go back. Show me everything."`,consequence:"Fully commits  Major story progression",effects:[{characterId:"lilith",affectionChange:25}],nextScene:"transformation_begin"},{id:"need_time",text:'"This is all happening so fast. I need time to understand what this means."',consequence:"Measured response  Preserves agency",effects:[{characterId:"lilith",affectionChange:5}],nextScene:"manor_tour"}]},{id:"manor_tour",title:"Halls of Shadows",text:['Lilith nods with understanding, though you catch a flicker of disappointment in her eyes. "Of course. This is... overwhelming, I imagine." She steps back, giving you space to breathe.',`She gestures toward the towering doors of the library. "Perhaps a tour of the manor would help you understand what you've stumbled into. There are others here you should meet."`,'As you walk through corridors lined with ancient portraits whose eyes seem to follow your movement, Lilith speaks softly. "Ravencroft Manor has been home to our coven for over three centuries. We are... selective about our guests."',"You pass by a grand staircase when you hear the soft sound of piano music drifting from somewhere above. The melody is hauntingly beautiful, tinged with melancholy that seems to seep into your very soul."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_about_music",text:`"That music... it's beautiful. Who's playing?"`,consequence:"Shows interest in other residents",effects:[{characterId:"morgana",affectionChange:5}],nextScene:"meet_morgana"},{id:"ask_about_coven",text:'"A coven? How many of you live here?"',consequence:"Practical questions  Shows caution",effects:[{characterId:"lilith",affectionChange:8}],nextScene:"coven_explanation"},{id:"express_fear",text:`"I'm scared. This all feels like a dream... or a nightmare."`,consequence:"Vulnerable honesty  May attract protection",effects:[{characterId:"seraphina",affectionChange:10}],nextScene:"seraphina_appears"}]},{id:"meet_morgana",title:"The Shadow Mystic",text:[`Lilith's lips curve into a knowing smile. "Ah, you have a good ear. That would be Morgana. She's... complicated." There's an edge to her voice that suggests a complex history.`,"She leads you up the grand staircase, the music growing louder with each step. The melody weaves through minor keys like silk through shadows, speaking of loss and longing.","You reach a set of ornate double doors, slightly ajar. Through the gap, you can see a figure seated at an antique grand piano, her dark hair cascading like a waterfall as she plays.",'Lilith pushes the door open softly. "Morgana, we have a guest." The music stops abruptly, and the woman at the piano turns.',"Morgana is breathtakingly beautiful in an otherworldly way - her long midnight-black hair falls in loose waves past her shoulders, contrasting sharply with her porcelain skin that seems to glow in the moonlight. Her silver eyes are large and expressive, holding depths of artistic melancholy and centuries of creative passion.","She wears a flowing black dress that seems to shimmer with its own inner darkness, and her slender fingers - still poised above the piano keys - are adorned with antique silver rings. When she moves, there's a fluid grace that speaks of someone who sees the world as an endless canvas of possibility."],character:b.morgana,background:"/backgrounds/music-room.png",choices:[{id:"compliment_music",text:'"Your playing is extraordinary. That melody... it felt like it was speaking to my soul."',consequence:"Artistic appreciation  Appeals to her nature",effects:[{characterId:"morgana",affectionChange:15}],nextScene:"morgana_interest"},{id:"ask_about_song",text:`"What was that piece? I've never heard anything like it."`,consequence:"Shows genuine curiosity",effects:[{characterId:"morgana",affectionChange:10}],nextScene:"morgana_composition"},{id:"stay_silent",text:"Remain silent and wait for her to speak first.",consequence:"Respectful approach  Shows wisdom",effects:[{characterId:"morgana",affectionChange:8}],nextScene:"morgana_observation"}]},{id:"seraphina_appears",title:"Guardian Angel",text:['Before Lilith can respond to your admission of fear, a gentle voice speaks from behind you both. "Fear is wisdom in the face of the unknown."',"You turn to see a woman descending the staircase like moonlight made manifest. Seraphina is ethereally beautiful, with platinum blonde hair that falls in soft waves to her waist, seeming to glow with its own inner light. Her skin is luminous and flawless, with an otherworldly radiance that speaks of divine origins.","Her eyes are the most striking feature - pale blue like winter sky, filled with ancient wisdom and infinite compassion. She wears a flowing white dress that moves like silk in a gentle breeze, and when she moves, you catch glimpses of something shimmering behind her - translucent wings that fold against her back like captured starlight.","There's an aura of peace and protection around her that makes you feel instantly safe. Her very presence seems to calm the shadows and brighten the room, as if she carries a piece of heaven within her.",`Lilith's expression grows complex. "Seraphina. I didn't expect you to..." She pauses, then continues more formally. "This is our guest. She's just learning about our world."`,`Seraphina approaches with fluid grace, her melodious voice carrying the weight of centuries of kindness. "You're safe here," she says softly, and somehow you believe her completely. "I won't let any harm come to you."`],character:b.seraphina,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_about_wings",text:'"I thought I saw... are you an angel?"',consequence:"Direct question  Shows supernatural awareness",effects:[{characterId:"seraphina",affectionChange:12}],nextScene:"seraphina_truth"},{id:"thank_for_protection",text:'"Thank you. I... I feel like I can trust you."',consequence:"Grateful response  Builds trust",effects:[{characterId:"seraphina",affectionChange:15}],nextScene:"seraphina_promise"},{id:"question_safety",text:'"Safe from what exactly? What kind of danger am I in?"',consequence:"Practical concerns  Shows intelligence",effects:[{characterId:"lilith",affectionChange:-3},{characterId:"seraphina",affectionChange:8}],nextScene:"danger_revealed"}]},{id:"love_explanation",title:"The Nature of Eternal Love",text:[`Lilith's eyes soften, and for a moment, the ancient creature before you seems almost vulnerable. "Love among our kind is... intense beyond mortal comprehension. When we love, it is with the weight of centuries, the promise of eternity."`,'She moves closer, her voice dropping to barely above a whisper. "Your great-aunt understood this. She loved deeply, completely, but chose to remain mortal. It was a choice we respected, even as it meant watching her age while we remained unchanged."','"But you..." Her hand hovers near your cheek, not quite touching. "There is something about you that calls to the eternal part of my nature. A recognition that goes beyond mere attraction."',"The weight of her words settles between you. This is no casual flirtation, but something far deeper and more significant than you had imagined possible."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"reciprocate_feeling",text:`"I feel it too. This connection... it's unlike anything I've ever experienced."`,consequence:"Deepens bond  Major romance progression",effects:[{characterId:"lilith",affectionChange:25}],nextScene:"deepening_bond"},{id:"need_understanding",text:'"I want to understand more before I can respond to such feelings."',consequence:"Thoughtful approach  Builds respect",effects:[{characterId:"lilith",affectionChange:12}],nextScene:"patient_courtship"},{id:"ask_about_cordelia",text:'"Did Cordelia ever regret staying mortal when she loved someone eternal?"',consequence:"Seeks wisdom from past  Shows depth",effects:[{characterId:"lilith",affectionChange:15}],nextScene:"cordelia_choice_story"}]},{id:"meet_the_coven",title:"The Gathering",text:["Lilith guides you through the manor's elegant corridors to a warmly lit sitting room where two other women await. The atmosphere is welcoming yet charged with an otherworldly energy.",`The first woman sits at a grand piano, her fingers dancing across the keys in a melancholy melody. Her dark hair frames a face of ethereal beauty, and when she looks up, her silver eyes seem to see into your very soul. "This must be Cordelia's heir," she says, her voice like distant thunder.`,`The second woman rises gracefully from a velvet armchair, her platinum hair catching the candlelight like spun moonbeams. There's something luminous about her presence, almost angelic. "Welcome," she says warmly. "I am Seraphina, and this is Morgana."`,'Lilith settles beside you. "These are my... sisters, in a sense. We have shared this sanctuary for many decades, each bringing our own gifts and stories to this place your great-aunt protected."'],choices:[{id:"greet_formally",text:`"It's an honor to meet you both. Cordelia spoke of having special tenants, but she never mentioned how extraordinary you are."`,consequence:"Formal approach  Shows respect for all",effects:[{characterId:"morgana",affectionChange:8},{characterId:"seraphina",affectionChange:10}],nextScene:"formal_introductions"},{id:"focus_on_morgana",text:`Turn to Morgana. "That melody... it's hauntingly beautiful. Did you compose it?"`,consequence:"Shows artistic interest  Appeals to Morgana",effects:[{characterId:"morgana",affectionChange:15},{characterId:"seraphina",affectionChange:2}],nextScene:"morgana_focus"},{id:"focus_on_seraphina",text:`Address Seraphina. "There's something different about you... something that feels like peace."`,consequence:"Recognizes divine nature  Appeals to Seraphina",effects:[{characterId:"seraphina",affectionChange:15},{characterId:"morgana",affectionChange:2}],nextScene:"seraphina_focus"},{id:"ask_about_sanctuary",text:'"Lilith mentioned this place is a sanctuary. What does that mean for beings like yourselves?"',consequence:"Practical question  Shows understanding",effects:[{characterId:"lilith",affectionChange:8},{characterId:"morgana",affectionChange:5},{characterId:"seraphina",affectionChange:8}],nextScene:"sanctuary_explanation"}]},{id:"morgana_focus",title:"The Composer's Heart",text:["Morgana's fingers pause on the keys, and for the first time since you entered, she truly looks at you. Her silver eyes hold depths of ancient sorrow and flickering hope.",`"I did compose it," she says softly, her voice carrying the weight of centuries. "It's called 'Elegy for the Dawn' - a piece about longing for something you can never have again." Her gaze grows distant. "I was a musician in life, before... this."`,'She plays a few more notes, each one pure and crystalline. "Music is the only thing that remains unchanged by immortality. It speaks to the soul in ways that transcend the physical form."',"Seraphina watches the exchange with interest, while Lilith's expression is unreadable. You sense that Morgana rarely opens up to strangers, making this moment significant."],character:b.morgana,background:"/backgrounds/music-room.png",choices:[{id:"ask_about_past",text:'"What was your life like before? When you were mortal?"',consequence:"Personal question  May deepen connection or cause pain",effects:[{characterId:"morgana",affectionChange:12}],nextScene:"morgana_past"},{id:"request_performance",text:`"Would you play more? I'd love to hear another piece."`,consequence:"Shows appreciation  Encourages artistic expression",effects:[{characterId:"morgana",affectionChange:18}],nextScene:"morgana_performance"},{id:"philosophical_response",text:'"Music as the language of the soul... I think Cordelia would have understood that sentiment."',consequence:"Thoughtful response  Shows depth",effects:[{characterId:"morgana",affectionChange:15},{characterId:"lilith",affectionChange:8}],nextScene:"philosophical_discussion"}]},{id:"seraphina_focus",title:"Touched by Grace",text:[`Seraphina's smile brightens the entire room, and you feel a warmth that has nothing to do with the fireplace. "You have good instincts," she says, moving closer with fluid grace. "Most mortals sense something different but can't name what it is."`,"As she approaches, you catch glimpses of something shimmering behind her - not quite visible, but definitely there. Wings, perhaps, folded against her back like captured starlight.",'"I was an angel once," she says simply, as if discussing the weather. "A guardian assigned to protect humanity from supernatural threats. But I... chose a different path." Her eyes find yours. "Love has a way of changing even the most absolute of beings."',"The revelation hangs in the air. Morgana's playing has stopped entirely, and even Lilith seems to pay closer attention to this conversation."],character:b.seraphina,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_about_fall",text:'"You fell from grace? What could make an angel abandon heaven?"',consequence:"Direct question  May reveal painful truth",effects:[{characterId:"seraphina",affectionChange:10}],nextScene:"seraphina_fall_story"},{id:"offer_acceptance",text:`"Whatever path you chose, you seem to have found peace here. That's what matters."`,consequence:"Non-judgmental  Shows acceptance",effects:[{characterId:"seraphina",affectionChange:20}],nextScene:"seraphina_gratitude"},{id:"ask_about_protection",text:`"As a former guardian, do you still protect people? Is that why you're here?"`,consequence:"Focuses on purpose  Shows practical thinking",effects:[{characterId:"seraphina",affectionChange:15},{characterId:"lilith",affectionChange:5}],nextScene:"protection_discussion"}]},{id:"deepening_bond",title:"Acknowledgment of Souls",text:[`Lilith's hand finally touches your cheek, cool but electric. "I have existed for over four centuries," she whispers, "and never have I felt such immediate recognition of a kindred spirit."`,'The library around you seems to fade as she steps closer. "This is not mere attraction, though you are undeniably beautiful. This is something deeper - a calling of soul to soul across the divide between mortal and eternal."','Her thumb traces your lower lip gently. "But I must warn you... to love one such as me is to accept a love that will outlast your mortal span unless..." She pauses, the unspoken possibility hanging between you.',"You feel the weight of this moment. This is more than romance - it's a declaration that could reshape your entire existence."],character:b.lilith,background:"/backgrounds/library.png",choices:[{id:"accept_love_mortal",text:`"I don't need forever to love completely. Let me love you as I am, for as long as I have."`,consequence:"Chooses mortal love  Romantic but bittersweet path",effects:[{characterId:"lilith",affectionChange:30}],nextScene:"mortal_love_path"},{id:"ask_about_forever",text:'"Unless what? Is there a way... could we truly be together forever?"',consequence:"Seeks eternity  Opens transformation discussion",effects:[{characterId:"lilith",affectionChange:25}],nextScene:"eternity_discussion"},{id:"need_time_to_process",text:'"This is overwhelming. I feel it too, but I need time to understand what this means."',consequence:"Thoughtful pause  Preserves choice while acknowledging feelings",effects:[{characterId:"lilith",affectionChange:15}],nextScene:"contemplation_time"}]},{id:"eternity_discussion",title:"The Price of Forever",text:[`Lilith's eyes grow serious, ancient wisdom replacing the softness of moments before. "There is a way... but it is not a decision to be made lightly, nor quickly. The transformation into our kind requires perfect willingness, deep love, and extraordinary circumstances."`,'She takes your hands in hers. "Your great-aunt had the opportunity, multiple times over her decades here. She chose to remain mortal, to love us as herself rather than become like us. It was a choice we honored, even as we watched time take its inevitable toll."',`"The transformation is not just physical death and rebirth. It is the fundamental changing of your very essence, your relationship with time, with mortality, with the human world you've always known."`,'Her grip tightens slightly. "And it can only be given by one who loves you completely, at the moment when your love is absolute and your choice is made with full knowledge of what you sacrifice and what you gain."'],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"want_to_learn_more",text:'"Tell me everything. I want to understand completely before making any choice."',consequence:"Seeks full knowledge  Wise approach",effects:[{characterId:"lilith",affectionChange:20}],nextScene:"transformation_education"},{id:"focus_on_present",text:`"Let's focus on now. I want to know you, love you, understand you before thinking of forever."`,consequence:"Present-focused  Builds relationship foundation",effects:[{characterId:"lilith",affectionChange:25}],nextScene:"present_focus_romance"},{id:"ask_about_cordelia_choice",text:'"Why did Cordelia choose to stay mortal? Did she ever regret it?"',consequence:"Learns from past  Seeks wisdom",effects:[{characterId:"lilith",affectionChange:18}],nextScene:"cordelia_wisdom"}]},{id:"morgana_performance",title:"Songs of the Eternal Night",text:[`Morgana's eyes light up with genuine pleasure - the first time you've seen her smile. "It has been... too long since someone asked to hear my music simply for the joy of it."`,"Her fingers return to the keys, and she begins a new piece. This one is different - not melancholy, but complex and layered, building from whispered notes to soaring crescendos that seem to paint pictures in the air.",`"This is 'Midnight's Embrace,'" she says as she plays. "I composed it during my first century as a vampire, when I was learning that darkness could be beautiful rather than merely feared."`,"The music fills the room with an otherworldly presence. Lilith and Seraphina listen with rapt attention, but their eyes are on you, watching your reaction to Morgana's most personal expression."],character:b.morgana,background:"/backgrounds/music-room.png",choices:[{id:"moved_to_tears",text:`Let the tears flow freely. "That was... transcendent. I've never felt music like that before."`,consequence:"Emotional vulnerability  Deeply touches Morgana",effects:[{characterId:"morgana",affectionChange:25}],nextScene:"morgana_emotional_connection"},{id:"artistic_appreciation",text:`"The way you layered the harmonies... it's like you're painting with sound. You're not just a musician, you're an artist."`,consequence:"Technical appreciation  Shows understanding of craft",effects:[{characterId:"morgana",affectionChange:20}],nextScene:"morgana_artistic_bond"},{id:"ask_to_learn",text:`"Could you... would you teach me? I'd love to learn from someone with your skill."`,consequence:"Requests mentorship  Creates ongoing connection",effects:[{characterId:"morgana",affectionChange:22}],nextScene:"morgana_teaching_path"}]},{id:"seraphina_gratitude",title:"The Light of Acceptance",text:[`Seraphina's expression transforms with such profound gratitude that you feel blessed just witnessing it. "You have no idea how rare it is to meet someone who offers acceptance without judgment or fear."`,'She sits beside you, and her presence is like being wrapped in warm sunlight. "Most mortals, when they learn what I am, either worship me or reject me. You simply... see me as I am."','"I fell because I loved too deeply," she continues softly. "I was assigned to guard a village, and I fell in love with their joy, their struggles, their humanity. When Heaven commanded me to let them face their trials alone, I refused."',`Her wings become visible for a moment - magnificent, white-gold feathers that seem to hold their own light. "I chose love over duty, and I've never regretted it, even when it cost me everything I thought I knew about myself."`],character:b.seraphina,background:"/backgrounds/grand-hall.png",choices:[{id:"admire_her_choice",text:`"That wasn't falling - that was rising to something higher. Love over duty is the most divine choice of all."`,consequence:"Philosophical validation  Deeply meaningful to Seraphina",effects:[{characterId:"seraphina",affectionChange:30}],nextScene:"seraphina_philosophical_bond"},{id:"ask_about_love",text:`"The love you felt for that village... is that the same kind of love you're capable of feeling for an individual?"`,consequence:"Personal question  Opens romantic possibility",effects:[{characterId:"seraphina",affectionChange:25}],nextScene:"seraphina_love_capacity"},{id:"offer_understanding",text:`"I think I understand why you're here now. You're still protecting people, just in a different way."`,consequence:"Shows insight  Recognizes her continued purpose",effects:[{characterId:"seraphina",affectionChange:20}],nextScene:"seraphina_purpose_recognition"}]},{id:"transformation_education",title:"The Ritual of Becoming",text:[`Lilith leads you to a section of the library filled with ancient texts bound in materials you don't recognize. "These contain the true knowledge of our transformation - not the crude myths of being bitten or attacked, but the sacred ritual it truly is."`,'She opens a tome written in multiple languages, some of which seem to shift and change as you look at them. "Vampiric transformation is a covenant between souls. It requires three elements: perfect trust, absolute love, and willing sacrifice from both parties."',`"The one who transforms must willingly give up their mortal life, their human connections, their place in the world they've known. The one who grants the transformation must share their very essence, weakening themselves to strengthen another."`,'Her finger traces ancient symbols. "It is not immortality given lightly. Many who attempt it fail because they lack the depth of connection required. The bond must be strong enough to anchor the soul through death and rebirth."'],character:b.lilith,background:"/backgrounds/library.png",choices:[{id:"understand_sacrifice",text:`"I begin to understand why Cordelia chose mortality. The sacrifice required... it's not just about dying, is it?"`,consequence:"Grasps deeper meaning  Shows wisdom",effects:[{characterId:"lilith",affectionChange:22}],nextScene:"sacrifice_understanding"},{id:"ask_about_bond_strength",text:'"How do you know when the bond is strong enough? What does that feel like?"',consequence:"Practical question  Seeks measurable understanding",effects:[{characterId:"lilith",affectionChange:18}],nextScene:"bond_strength_explanation"},{id:"express_interest",text:'"This is... intense. But I want to understand more. Would you help me learn what this kind of love feels like?"',consequence:"Shows commitment to learning  Romantic progression",effects:[{characterId:"lilith",affectionChange:28}],nextScene:"love_development_path"}]},{id:"present_focus_romance",title:"Building Something Beautiful",text:[`Lilith's smile is radiant, transforming her ancient features with pure joy. "Yes," she breathes. "Yes, that is exactly what I hoped you would say. Too many mortals become fixated on the destination rather than cherishing the journey."`,'She takes your hand, intertwining your fingers with hers. "Let me show you my world, one day at a time. Let me learn your thoughts, your dreams, your fears. Let us build something beautiful together, whether it lasts decades or centuries."','"There is magic in the present moment," she continues, leading you toward a window that overlooks moonlit gardens. "In the way you look at me, in the questions you ask, in the courage you show by being here at all."',"The moon illuminates her profile, and you realize this is what happiness looks like on someone who has lived for centuries - rare, precious, and transformative in its purity."],character:b.lilith,background:"/backgrounds/garden-courtyard.png",choices:[{id:"romantic_declaration",text:'"I want to know everything about you. Your history, your dreams, what makes you laugh... I want to love all of it."',consequence:"Romantic commitment  Deepens relationship",effects:[{characterId:"lilith",affectionChange:30}],nextScene:"romance_deepening"},{id:"ask_about_her_dreams",text:`"You've had centuries to dream. What do you dream about now?"`,consequence:"Personal question  Shows deep interest",effects:[{characterId:"lilith",affectionChange:25}],nextScene:"lilith_dreams_revealed"},{id:"share_your_feelings",text:`"I've never felt this way before. Like I've been waiting my whole life for this moment, this person."`,consequence:"Vulnerable honesty  Mutual emotional connection",effects:[{characterId:"lilith",affectionChange:28}],nextScene:"mutual_recognition"}]},{id:"sanctuary_explanation",title:"Haven from the Storm",text:['The three women exchange glances, a silent communication passing between them before Lilith speaks. "The world is not kind to those who exist outside its understanding," she begins.',`Seraphina continues, "Angels who fall, vampires who choose love over hunger, beings who don't fit the neat categories humans create - we all need somewhere to belong."`,`Morgana's voice is soft but clear. "Ravencroft Manor exists between worlds. Protected by old magic, sanctified by genuine love, and maintained by those who understand that monsters are often just people who've been hurt too deeply."`,`Lilith concludes, "Your great-aunt didn't just give us shelter - she gave us family. The question now is whether you'll choose to continue that legacy or forge your own path."`],choices:[{id:"commit_to_legacy",text:`"I want to continue what Cordelia started. This place, this sanctuary - it's important work."`,consequence:"Commits to sanctuary  Gains respect from all",effects:[{characterId:"lilith",affectionChange:15},{characterId:"morgana",affectionChange:12},{characterId:"seraphina",affectionChange:18}],nextScene:"sanctuary_commitment"},{id:"need_to_understand_more",text:'"I need to understand more about what that means. What would be expected of me?"',consequence:"Practical approach  Shows responsibility",effects:[{characterId:"lilith",affectionChange:10},{characterId:"morgana",affectionChange:8},{characterId:"seraphina",affectionChange:12}],nextScene:"sanctuary_responsibilities"},{id:"focus_on_relationships",text:`"Right now, I'm more interested in getting to know each of you as individuals than making big decisions about the future."`,consequence:"Personal focus  Opens individual relationship paths",effects:[{characterId:"lilith",affectionChange:12},{characterId:"morgana",affectionChange:10},{characterId:"seraphina",affectionChange:8}],nextScene:"individual_connections"}]},{id:"morgana_interest",title:"The Artist's Recognition",text:[`Morgana's silver eyes widen slightly, and she stands from the piano bench with fluid grace. "You understand," she says simply, but there's wonder in her voice. "Most hear only notes and melody. You hear the soul speaking."`,`She approaches you slowly, her dark hair cascading like liquid shadow. "That piece was born from a night when I realized that immortality meant watching every beautiful thing I'd ever known fade away. Yet you heard not just the sorrow, but the beauty within it."`,'Lilith watches this exchange with interest, while the air between you and Morgana seems charged with artistic understanding. "Few have ever truly comprehended my music on first hearing," Morgana continues. "Perhaps you are more than you appear."'],character:b.morgana,background:"/backgrounds/music-room.png",choices:[{id:"share_artistic_soul",text:`"I've always felt that art is the language of experiences too deep for words. Your music speaks to something in me I didn't know existed."`,consequence:"Deep artistic connection  Profound bond",effects:[{characterId:"morgana",affectionChange:25}],nextScene:"artistic_souls_unite"},{id:"ask_about_inspiration",text:'"What inspires you to create? How do you find beauty in eternal existence?"',consequence:"Philosophical question  Shows depth",effects:[{characterId:"morgana",affectionChange:18}],nextScene:"morgana_philosophy"},{id:"request_collaboration",text:`"I'd love to understand your creative process. Could we... create something together?"`,consequence:"Collaboration offer  Builds creative partnership",effects:[{characterId:"morgana",affectionChange:22}],nextScene:"creative_partnership"}]},{id:"morgana_composition",title:"Original Composition",text:[`Morgana's expression becomes contemplative. "It's an original piece - 'Echoes of What Was.' I composed it fifty years ago when I was struggling with the weight of memory."`,`She runs her fingers along the piano's edge. "When you live for centuries, you accumulate so many memories of people you've loved and lost, places that no longer exist, moments of beauty that only live in your mind."`,'"This piece attempts to capture that feeling - not quite nostalgia, not quite grief, but something uniquely vampiric. The longing for temporal connection when you yourself exist outside of time."',"Her words carry the weight of genuine vulnerability, and you sense she rarely shares such personal insights about her work."],character:b.morgana,background:"/backgrounds/music-room.png",choices:[{id:"understand_loneliness",text:'"That sounds profoundly lonely. How do you bear the weight of so much memory?"',consequence:"Empathetic response  Shows emotional intelligence",effects:[{characterId:"morgana",affectionChange:20}],nextScene:"morgana_loneliness"},{id:"appreciate_beauty",text:'"But those memories are also treasures. Your music makes them live again, shares them with others."',consequence:"Positive perspective  Helps her see beauty in pain",effects:[{characterId:"morgana",affectionChange:25}],nextScene:"morgana_hope"},{id:"ask_for_more_music",text:`"Would you play it again? I'd like to listen more carefully, to really understand what you're expressing."`,consequence:"Shows deep interest  Validates her art",effects:[{characterId:"morgana",affectionChange:18}],nextScene:"morgana_second_performance"}]},{id:"morgana_observation",title:"The Silent Understanding",text:["You remain quiet, sensing that Morgana is someone who values thoughtful silence over hasty words. She observes you for a long moment, her silver eyes seeming to read something in your demeanor.",'"Wisdom," she says finally, with what might be approval. "Too many people feel compelled to fill silence with meaningless chatter. You understand that some moments require contemplation."','She returns to the piano, playing a few soft, experimental notes. "Lilith, your guest has an interesting quality. She listens not just with her ears, but with her entire being."','Lilith smiles knowingly. "I thought you might appreciate that about her. She sees beyond the surface of things."'],character:b.morgana,background:"/backgrounds/music-room.png",choices:[{id:"acknowledge_compliment",text:`"Thank you. I've learned that the most profound communications often happen in the spaces between words."`,consequence:"Philosophical response  Shows depth",effects:[{characterId:"morgana",affectionChange:22}],nextScene:"philosophical_connection"},{id:"ask_about_silence",text:'"Do you find that immortality makes silence more precious? With eternity stretching ahead, perhaps quiet moments become more valuable."',consequence:"Thoughtful question  Shows understanding of immortal perspective",effects:[{characterId:"morgana",affectionChange:25}],nextScene:"silence_discussion"},{id:"express_gratitude",text:`"I'm honored that you would share your music with a stranger. Art is such a personal gift."`,consequence:"Grateful response  Shows appreciation for art",effects:[{characterId:"morgana",affectionChange:18}],nextScene:"artistic_gratitude"}]},{id:"seraphina_truth",title:"Angelic Revelation",text:[`Seraphina's smile is both sad and beautiful. "I was, once upon a time. A guardian angel, assigned to protect humanity from supernatural threats that would otherwise overwhelm them."`,'As she speaks, the shimmer behind her becomes more visible - magnificent wings that seem to be made of condensed starlight and divine grace. "But I fell in love with the very beings I was meant to protect from a distance."','"When Heaven commanded me to remain detached, to let humans face their trials without direct intervention, I... rebelled. Love, I discovered, is stronger than duty, more divine than obedience."','Her wings fold closer to her body, but remain visible. "I chose to fall rather than abandon those I had grown to love. And in falling, I found my true purpose."'],character:b.seraphina,background:"/backgrounds/grand-hall.png",choices:[{id:"admire_sacrifice",text:`"You gave up paradise for love? That's not falling - that's the most divine act imaginable."`,consequence:"Validates her choice  Profound emotional impact",effects:[{characterId:"seraphina",affectionChange:30}],nextScene:"divine_validation"},{id:"ask_about_consequences",text:'"What were the consequences of your choice? Do you ever regret it?"',consequence:"Thoughtful question  Shows understanding of sacrifice",effects:[{characterId:"seraphina",affectionChange:18}],nextScene:"consequences_discussion"},{id:"touch_her_wing",text:`Gently reach out toward her wing. "May I? They're beautiful."`,consequence:"Intimate gesture  Shows acceptance and wonder",effects:[{characterId:"seraphina",affectionChange:25}],nextScene:"wing_touch_scene"}]},{id:"seraphina_promise",title:"Guardian's Vow",text:[`Seraphina's expression grows solemn and deeply moved. "Your trust is a gift I will treasure," she says, her voice carrying the weight of divine promise. "I swear to you, by all that I am and all that I was, no harm will come to you while I draw breath."`,'She extends her hand, and when you take it, you feel a warmth that seems to flow directly into your soul. "I have watched over mortals for millennia, but never has anyone placed their faith in me so completely, so immediately."','"You remind me why I chose love over duty," she continues, her pale blue eyes shining. "Why I believed that connection and compassion were more sacred than celestial hierarchy."',"Around you, the very air seems to shimmer with protective energy, and you feel safer than you have in your entire life."],character:b.seraphina,background:"/backgrounds/grand-hall.png",choices:[{id:"reciprocate_protection",text:'"And I promise to trust you completely. You have something pure about you that calls to my soul."',consequence:"Mutual bond  Deep emotional connection",effects:[{characterId:"seraphina",affectionChange:28}],nextScene:"mutual_protection_bond"},{id:"ask_about_purpose",text:'"You said you found your true purpose in falling. What is that purpose now?"',consequence:"Philosophical question  Shows interest in her journey",effects:[{characterId:"seraphina",affectionChange:20}],nextScene:"purpose_revelation"},{id:"express_wonder",text:`"I can feel the protection around me. It's like being wrapped in pure love and safety."`,consequence:"Acknowledges her power  Shows spiritual sensitivity",effects:[{characterId:"seraphina",affectionChange:25}],nextScene:"spiritual_connection"}]},{id:"danger_revealed",title:"The Shadows Beyond",text:['Seraphina and Lilith exchange a meaningful look before Seraphina speaks. "There are... others of our kind who do not share our philosophy about coexistence with mortals."','"Ravencroft Manor exists as a sanctuary because your great-aunt established it with powerful protections," Lilith adds. "But those protections only extend so far, and there are those who would see our peaceful existence here as a threat to the old ways."',`Seraphina's expression grows grave. "Some vampires believe mortals are only good for feeding. Some angels see my choice to fall as an abomination that must be corrected. And there are darker things than either that hunt in the spaces between worlds."`,`"Your inheritance of this place makes you a target," Lilith says quietly. "Not because of who you are, but because of what you represent - the continuation of Cordelia's legacy of protection and peace."`],choices:[{id:"accept_danger",text:'"I understand the risks. If Cordelia could face these dangers, so can I."',consequence:"Brave acceptance  Shows courage and determination",effects:[{characterId:"lilith",affectionChange:20},{characterId:"seraphina",affectionChange:25}],nextScene:"courage_acknowledged"},{id:"ask_for_training",text:'"Then teach me. Help me understand how to protect myself and this place."',consequence:"Practical approach  Shows willingness to learn",effects:[{characterId:"lilith",affectionChange:18},{characterId:"seraphina",affectionChange:22}],nextScene:"training_begins"},{id:"fear_but_determined",text:`"I'm terrified, but I won't run. This place meant something to Cordelia, and now it means something to me."`,consequence:"Honest vulnerability  Shows emotional strength",effects:[{characterId:"seraphina",affectionChange:28},{characterId:"morgana",affectionChange:15}],nextScene:"determined_despite_fear"}]},{id:"coven_explanation",title:"The Ancient Bond",text:['Lilith pauses thoughtfully. "Three of us call this place home permanently. Myself, Morgana, and Seraphina. We are... an unusual coven, bound not by blood or maker, but by choice and circumstance."','"Morgana was turned during the Renaissance - a brilliant composer whose music was too pure for mortal understanding. Seraphina... she chose to fall from grace rather than abandon those she had grown to love."','"And I am the eldest, turned during the dark ages when survival meant learning to find beauty in shadow. We came together here because we shared a vision - that our eternal existence could be used for preservation rather than destruction."','Her voice grows warmer. "Your great-aunt understood this. She helped us create something unprecedented - a sanctuary where supernatural beings could exist peacefully, contributing rather than consuming."'],character:b.lilith,background:"/backgrounds/music-room.png",choices:[{id:"ask_about_cordelia_role",text:`"What exactly was Cordelia's role in all this? How did a mortal woman become so important to immortal beings?"`,consequence:"Seeks understanding  Shows wisdom",effects:[{characterId:"lilith",affectionChange:15}],nextScene:"cordelia_legacy_revealed"},{id:"express_honor",text:`"I'm honored to inherit such a meaningful legacy. I want to understand how I can continue what she started."`,consequence:"Accepts responsibility  Shows commitment",effects:[{characterId:"lilith",affectionChange:20},{characterId:"morgana",affectionChange:10},{characterId:"seraphina",affectionChange:15}],nextScene:"legacy_continuation"},{id:"ask_about_others",text:'"Are there other places like this? Other covens trying to coexist peacefully?"',consequence:"Broader perspective  Shows strategic thinking",effects:[{characterId:"lilith",affectionChange:12}],nextScene:"wider_world_discussion"}]},{id:"formal_introductions",title:"Proper Greetings",text:['Your formal approach seems to please all three women. Morgana inclines her head gracefully. "Cordelia spoke of you often in her letters. She was very proud of your accomplishments in the mortal world."','Seraphina moves closer, her presence radiating warmth and protection. "She also mentioned your open mind and kind heart. Qualities that are rare and precious in any world."',`Lilith watches the interaction with approval. "Your great-aunt chose well when she named you as her heir. This place requires someone who can respect the delicate balance we've created here."`,"The room feels charged with possibility, as if this moment is the beginning of something significant. You sense that your response here will set the tone for all future relationships."],choices:[{id:"ask_about_letters",text:'"Cordelia wrote about me? What did she tell you?"',consequence:"Personal curiosity  Shows interest in connection",effects:[{characterId:"lilith",affectionChange:8},{characterId:"morgana",affectionChange:10},{characterId:"seraphina",affectionChange:12}],nextScene:"cordelia_letters"},{id:"express_uncertainty",text:'"I hope I can live up to her example. This is all so new and overwhelming."',consequence:"Honest vulnerability  Invites guidance",effects:[{characterId:"seraphina",affectionChange:18},{characterId:"morgana",affectionChange:8}],nextScene:"reassurance_offered"},{id:"ask_about_balance",text:'"What kind of balance? I want to understand what maintaining this sanctuary truly means."',consequence:"Practical focus  Shows responsibility",effects:[{characterId:"lilith",affectionChange:15},{characterId:"seraphina",affectionChange:10}],nextScene:"sanctuary_responsibilities"}]},{id:"sanctuary_explanation",title:"Haven of the Supernatural",text:[`The three women exchange meaningful glances before Lilith speaks. "A sanctuary, in our world, is more than just a safe place. It's a location where supernatural beings can exist without the constant threat of hunters, hostile covens, or celestial judgment."`,'Seraphina adds, "The protections here are both mystical and practical. Cordelia worked with us to establish wards that hide our presence from those who would do us harm, while also preventing us from causing harm to innocents."',`Morgana's voice is soft but clear. "It means we can pursue beauty, creation, and connection rather than mere survival. We can grow and learn rather than simply endure."`,'Lilith concludes, "But such places are rare and precious. They require constant maintenance, both magical and mundane. And they require a mortal anchor - someone who bridges our world and yours."'],choices:[{id:"accept_anchor_role",text:`"And now I'm meant to be that anchor? I accept that responsibility."`,consequence:"Accepts destiny  Major story commitment",effects:[{characterId:"lilith",affectionChange:25},{characterId:"morgana",affectionChange:20},{characterId:"seraphina",affectionChange:30}],nextScene:"anchor_accepted"},{id:"ask_about_dangers",text:'"What happens if the sanctuary fails? What are we protected from exactly?"',consequence:"Seeks understanding of stakes  Shows wisdom",effects:[{characterId:"lilith",affectionChange:15}],nextScene:"protection_details"},{id:"ask_about_magic",text:'"How do the wards work? Is there magic I need to learn or maintain?"',consequence:"Practical questions  Shows readiness to learn",effects:[{characterId:"morgana",affectionChange:18},{characterId:"seraphina",affectionChange:15}],nextScene:"magical_education"}]},{id:"transformation_begin",title:"The Path to Eternity",text:[`Lilith's eyes blaze with an intensity that takes your breath away. "You would truly choose this path? Even knowing that there is no return, no reversal?"`,'She takes your hands, her grip firm and cool. "The transformation is not something that can be rushed or taken lightly. It requires perfect trust, absolute love, and complete understanding of what you sacrifice and what you gain."','"Your mortality, your human connections, your relationship with time itself - all of this will change forever. But you will gain strength, immortality, and a depth of experience beyond mortal comprehension."','Her voice drops to a whisper. "Most importantly, you will gain the ability to love with the intensity of centuries, to protect what matters with supernatural power, and to create beauty that outlasts civilizations."'],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"reaffirm_choice",text:'"I understand the cost and I accept it willingly. I want to share eternity with you."',consequence:"Complete commitment  Begins transformation arc",effects:[{characterId:"lilith",affectionChange:35}],nextScene:"transformation_ritual_begins"},{id:"need_more_time",text:`"I want this, but I need more time to fully understand what I'm choosing. Can we wait until I'm completely certain?"`,consequence:"Thoughtful caution  Delays but doesn't reject",effects:[{characterId:"lilith",affectionChange:20}],nextScene:"transformation_delayed"},{id:"ask_about_process",text:'"Tell me everything about the transformation process. I want to understand every detail before I commit."',consequence:"Seeks complete knowledge  Shows wisdom",effects:[{characterId:"lilith",affectionChange:25}],nextScene:"transformation_education_detailed"}]},{id:"artistic_souls_unite",title:"Kindred Spirits",text:[`Morgana's eyes light up with a joy you sense she rarely experiences. "Finally," she breathes, "someone who understands that creation is the closest thing to divine communion available to our kind."`,'She moves to stand beside you, and you feel an electric connection of shared artistic passion. "I have composed for centuries, but always in isolation. The idea of sharing that creative fire with another soul..."','Her hand hovers near yours. "Would you truly wish to explore that path with me? To dive deep into the wells of inspiration and see what we might create together?"',"The offer carries weight beyond mere collaboration - this is an invitation into the most sacred part of her immortal existence."],character:b.morgana,background:"/backgrounds/grand-hall.png",choices:[{id:"accept_creative_bond",text:'"Yes, absolutely. I want to explore every facet of creativity with you."',consequence:"Deep artistic partnership  Major relationship progression",effects:[{characterId:"morgana",affectionChange:35}],nextScene:"creative_communion"},{id:"express_honor",text:`"I'm honored you would trust me with something so personal and sacred to you."`,consequence:"Respectful appreciation  Builds trust",effects:[{characterId:"morgana",affectionChange:25}],nextScene:"honored_trust"},{id:"ask_about_process",text:'"How do we begin? What does collaborative creation look like for an immortal artist?"',consequence:"Practical interest  Shows commitment to learning",effects:[{characterId:"morgana",affectionChange:20}],nextScene:"creative_process_explanation"}]},{id:"divine_validation",title:"The Highest Love",text:[`Seraphina's entire being seems to radiate pure light as tears of joy stream down her face. "Never... in all my millennia of existence... has anyone seen my choice as divine rather than damning."`,'She takes your hands, and you feel the warmth of starlight flowing between you. "Heaven taught me that love should be conditional, measured, controlled. But when I saw mortals love fiercely, completely, without reservation... I knew they understood something divine that angels had forgotten."','"You see it too," she whispers in wonder. "That love without limits, compassion without judgment, protection without dominion - these are the truly sacred acts."',"Her wings spread wide, magnificent and glowing, as if your words have restored something fundamental to her nature."],character:b.seraphina,background:"/backgrounds/grand-hall.png",choices:[{id:"embrace_her_truth",text:`"Your love is the most divine thing I've ever witnessed. Thank you for choosing to fall."`,consequence:"Complete validation  Profound spiritual connection",effects:[{characterId:"seraphina",affectionChange:40}],nextScene:"spiritual_awakening"},{id:"ask_about_heaven",text:'"What was Heaven like before you understood the true nature of love?"',consequence:"Deep philosophical question  Shows interest in her journey",effects:[{characterId:"seraphina",affectionChange:25}],nextScene:"heaven_memories"},{id:"offer_comfort",text:`Gently wipe her tears. "You don't have to carry that pain alone anymore."`,consequence:"Tender gesture  Offers emotional support",effects:[{characterId:"seraphina",affectionChange:30}],nextScene:"comfort_accepted"}]},{id:"courage_acknowledged",title:"Worthy Heir",text:['Both Lilith and Seraphina regard you with new respect. "Cordelia would be proud," Lilith says quietly. "She faced these same dangers with exactly that kind of determined courage."',`Seraphina nods approvingly. "True bravery isn't the absence of fear - it's choosing to stand firm despite that fear. You have the heart of a protector."`,'Morgana, who has been quietly observing, speaks up. "Courage, yes. But also wisdom. You understand that some things are worth fighting for, worth risking everything to preserve."',`The three exchange meaningful looks. "Very well," Lilith decides. "If you truly wish to continue Cordelia's legacy, then we will teach you what you need to know."`],choices:[{id:"eager_to_learn",text:`"I'm ready to learn everything. Where do we start?"`,consequence:"Enthusiastic commitment  Opens training paths",effects:[{characterId:"lilith",affectionChange:15},{characterId:"seraphina",affectionChange:18},{characterId:"morgana",affectionChange:12}],nextScene:"training_begins"},{id:"ask_about_cordelia_struggles",text:`"What challenges did Cordelia face? I want to understand what I'm truly inheriting."`,consequence:"Seeks wisdom from history  Shows thoughtfulness",effects:[{characterId:"lilith",affectionChange:20},{characterId:"morgana",affectionChange:15}],nextScene:"cordelia_challenges"},{id:"express_gratitude",text:`"Thank you for trusting me with this responsibility. I won't let you down."`,consequence:"Grateful acceptance  Builds trust",effects:[{characterId:"seraphina",affectionChange:20},{characterId:"lilith",affectionChange:12}],nextScene:"trust_established"}]},{id:"anchor_accepted",title:"The Sacred Covenant",text:['The three women exchange glances filled with relief and hope. "Then it is decided," Lilith says with formal gravity. "You accept the role of Anchor to Ravencroft Sanctuary."','Seraphina steps forward, her wings becoming visible and spreading wide. "By my divine nature, I witness this covenant."','Morgana rises from the piano, her silver eyes bright. "By my artistic soul, I witness this covenant."','Lilith places her hand over her heart. "By my ancient blood, I witness this covenant. You are now bound to this place and to us, as we are bound to you."',"You feel something fundamental shift in the air around you - a sense of belonging, of purpose, of destiny fulfilled."],choices:[{id:"embrace_destiny",text:`"I feel it - the connection, the responsibility. I'm exactly where I'm meant to be."`,consequence:"Complete acceptance  Unlocks full sanctuary powers",effects:[{characterId:"lilith",affectionChange:30},{characterId:"morgana",affectionChange:25},{characterId:"seraphina",affectionChange:35}],nextScene:"sanctuary_awakening"},{id:"ask_about_powers",text:'"What does this mean for me? What abilities or responsibilities do I now have?"',consequence:"Practical questions  Shows readiness to learn",effects:[{characterId:"lilith",affectionChange:20},{characterId:"seraphina",affectionChange:18}],nextScene:"anchor_powers_explained"},{id:"solemn_vow",text:'"I swear to protect this sanctuary and everyone in it with my life."',consequence:"Sacred oath  Deep commitment",effects:[{characterId:"seraphina",affectionChange:30},{characterId:"lilith",affectionChange:25},{characterId:"morgana",affectionChange:20}],nextScene:"sacred_vow_sealed"}]},{id:"training_begins",title:"The First Lessons",text:["Over the following days, your education in the supernatural world begins in earnest. Lilith teaches you about vampire politics and the delicate balance of power between different supernatural factions.","Seraphina instructs you in protective wards and divine energy manipulation, showing you how to channel your mortal life force in ways that can shield both yourself and others.","Morgana shares the deeper mysteries - how music and art can bind spirits, how creativity itself can be a form of magic, how beauty can be a weapon against darkness.","You discover that being the Anchor gives you unique abilities: you can sense supernatural presences, strengthen the manor's protections, and even provide energy to your immortal companions when they need it most."],choices:[{id:"focus_on_protection",text:"Concentrate on learning protective magic and defensive strategies.",consequence:"Guardian path  Builds defensive abilities",effects:[{characterId:"seraphina",affectionChange:25},{characterId:"lilith",affectionChange:15}],nextScene:"guardian_training"},{id:"focus_on_diplomacy",text:"Study supernatural politics and inter-faction relations.",consequence:"Diplomat path  Builds knowledge and connections",effects:[{characterId:"lilith",affectionChange:25},{characterId:"morgana",affectionChange:10}],nextScene:"diplomatic_training"},{id:"focus_on_creativity",text:"Dive deep into the mystical aspects of art and creation.",consequence:"Artist path  Builds creative magical abilities",effects:[{characterId:"morgana",affectionChange:25},{characterId:"seraphina",affectionChange:15}],nextScene:"creative_magic_training"}]},{id:"morgana_philosophy",title:"The Eternal Creative Soul",text:['Morgana settles beside the piano, her fingers absently playing soft, contemplative notes. "Inspiration... it changes when you have eternity to pursue it. At first, I thought immortality would mean endless creativity, infinite time to perfect my craft."','"But I discovered something unexpected," she continues, her voice carrying centuries of experience. "Beauty becomes more precious when you understand how fleeting it truly is. Each perfect moment, each sublime melody, each connection with another soul - these become sacred because they exist in defiance of an indifferent universe."','Her playing grows more complex, weaving melodies that seem to capture the very essence of longing. "I find inspiration in mortality itself - in the courage of mortals who create knowing their time is limited, in the intensity of love that burns bright precisely because it cannot last forever."','She looks at you directly. "You inspire me because you represent both the beauty and the brevity that gives meaning to art."'],character:b.morgana,background:"/backgrounds/music-room.png",choices:[{id:"philosophical_depth",text:`"So immortality taught you to value mortal perspective? That's beautifully paradoxical."`,consequence:"Deep understanding  Appreciates the irony",effects:[{characterId:"morgana",affectionChange:30}],nextScene:"paradox_appreciation"},{id:"offer_collaboration",text:'"Then let me share my mortal perspective with your immortal artistry. What could we create together?"',consequence:"Collaboration offer  Bridges mortal/immortal divide",effects:[{characterId:"morgana",affectionChange:35}],nextScene:"creative_partnership"},{id:"express_honor",text:'"Being your inspiration is the highest compliment I could receive from an artist of your caliber."',consequence:"Gracious response  Shows humility",effects:[{characterId:"morgana",affectionChange:25}],nextScene:"artistic_appreciation"}]},{id:"wing_touch_scene",title:"Sacred Contact",text:[`Seraphina nods, extending one magnificent wing toward you. "Few mortals have ever touched an angel's wing. Even fewer have done so with such reverence."`,"Your fingers make contact with the soft, luminous feathers, and immediately you feel a surge of warmth and peace unlike anything you've ever experienced. The wing is simultaneously substantial and ethereal, like touching solidified starlight.","Through the contact, you sense glimpses of her memories - soaring through celestial realms, standing guard over sleeping mortals, the moment she chose love over duty and felt her connection to Heaven strain and finally break.",`"You feel it, don't you?" she whispers. "The weight of divine purpose transformed into something more personal, more real." Her wing curves slightly, as if embracing your touch. "This is what love truly is - choosing connection over perfection."`],character:b.seraphina,background:"/backgrounds/grand-hall.png",choices:[{id:"understand_sacrifice",text:'"I can feel the magnitude of what you gave up, and the beauty of what you gained instead."',consequence:"Deep empathy  Understands divine sacrifice",effects:[{characterId:"seraphina",affectionChange:35}],nextScene:"divine_understanding"},{id:"marvel_at_beauty",text:`"Your wings are the most beautiful thing I've ever seen. Thank you for trusting me with this."`,consequence:"Appreciation  Shows wonder and gratitude",effects:[{characterId:"seraphina",affectionChange:28}],nextScene:"beauty_acknowledged"},{id:"ask_about_flight",text:'"Do you still fly? Do you miss the celestial realms?"',consequence:"Curious question  Shows interest in her nature",effects:[{characterId:"seraphina",affectionChange:20}],nextScene:"flight_memories"}]},{id:"morgana_loneliness",title:"The Weight of Memory",text:[`Morgana's expression grows distant and melancholy. "The loneliness... it's not what mortals imagine. It's not about being alone - it's about being the sole keeper of countless precious memories."`,`"I remember the sound of rain on cobblestones in Prague, 1894. The laughter of a child I taught piano to in Vienna, 1847. The way candlelight looked in my lover's eyes in Rome, 1623." Her voice grows softer. "All of those people, all of those moments... they live only in my memory now."`,'She plays a few haunting notes. "Sometimes I feel like a living museum, preserving beauty that would otherwise be lost forever. But museums are cold, solitary places."','Her silver eyes find yours. "Until tonight, I had resigned myself to being the sole guardian of all that beautiful loss. But perhaps... perhaps some memories are meant to be shared."'],character:b.morgana,background:"/backgrounds/music-room.png",choices:[{id:"offer_to_share_burden",text:'"Let me help you carry that weight. Share those memories with me - let them live in two hearts instead of one."',consequence:"Generous offer  Willingness to share emotional burden",effects:[{characterId:"morgana",affectionChange:40}],nextScene:"memory_sharing"},{id:"create_new_memories",text:`"Then let's create new memories together. Beautiful moments that we can both treasure."`,consequence:"Forward-looking  Focus on creating rather than preserving",effects:[{characterId:"morgana",affectionChange:35}],nextScene:"new_memory_creation"},{id:"appreciate_preservation",text:`"You're not just a museum - you're a living testament to the power of beauty to transcend time."`,consequence:"Reframes perspective  Shows deep appreciation",effects:[{characterId:"morgana",affectionChange:30}],nextScene:"living_testament"}]},{id:"consequences_discussion",title:"The Price of Love",text:[`Seraphina's expression grows thoughtful, tinged with both sadness and resolve. "The consequences were... severe. When an angel chooses to fall, it's not simply a matter of relocation. It's a fundamental transformation of your very essence."`,'"I lost my direct connection to the Divine Source, my ability to exist in multiple planes simultaneously, my perfect certainty about the nature of good and evil." She touches her wings gently. "These wings, once instruments of celestial power, became symbols of my exile."','"But more than that," she continues, her voice growing stronger, "I lost the community of my fellow angels, the perfect harmony of celestial existence, the comfort of absolute purpose and unquestioning faith."','Her pale blue eyes meet yours. "And yet... I have never regretted it. Every loss pales beside what I gained - the ability to truly love, to choose compassion over duty, to be more than what I was created to be."'],character:b.seraphina,background:"/backgrounds/grand-hall.png",choices:[{id:"admire_growth",text:`"You didn't lose yourself - you found yourself. You became more than heaven intended."`,consequence:"Celebrates personal growth  Validates transformation",effects:[{characterId:"seraphina",affectionChange:35}],nextScene:"transformation_celebration"},{id:"offer_community",text:'"You lost one community but gained another. Here, with Lilith and Morgana... and now with me."',consequence:"Offers belonging  Creates new connections",effects:[{characterId:"seraphina",affectionChange:30}],nextScene:"new_community"},{id:"acknowledge_sacrifice",text:`"Such a profound sacrifice, made out of pure love. I'm in awe of your courage."`,consequence:"Respectful acknowledgment  Shows understanding",effects:[{characterId:"seraphina",affectionChange:25}],nextScene:"courage_recognition"}]},{id:"cordelia_legacy_revealed",title:"The Guardian's Tale",text:[`Lilith's expression becomes reverent as she speaks of your great-aunt. "Cordelia was extraordinary, even by the standards of remarkable mortals. She inherited this manor when she was barely twenty-five, much as you have now."`,`"But unlike most mortals who discover the supernatural world, she didn't flee or try to destroy what she found. Instead, she saw possibility where others saw only danger." Lilith moves to an old portrait on the wall. "She proposed something unprecedented - a sanctuary where supernatural beings could exist peacefully, contributing to the world rather than merely surviving in it."`,'"For sixty years, she served as our anchor to the mortal world, helping us navigate human society while protecting us from those who would hunt us. She facilitated peace treaties between hostile factions, provided safe passage for refugees from supernatural conflicts, and maintained the delicate balance that keeps this place hidden."','Her voice grows warm with affection. "But more than that, she loved us - not as exotic curiosities or dangerous creatures to be managed, but as individuals deserving of friendship and respect. She was the first mortal to see us as more than our supernatural natures."'],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"honor_legacy",text:'"I want to continue her work, to be worthy of the trust she built and the love she shared."',consequence:"Accepts legacy  Major commitment to sanctuary",effects:[{characterId:"lilith",affectionChange:30},{characterId:"morgana",affectionChange:20},{characterId:"seraphina",affectionChange:25}],nextScene:"legacy_acceptance"},{id:"ask_about_love",text:'"Did she ever fall in love with any of you? How did she handle those feelings?"',consequence:"Personal question  Seeks guidance on mortal/immortal love",effects:[{characterId:"lilith",affectionChange:20}],nextScene:"cordelia_love_story"},{id:"understand_challenges",text:'"What were the greatest challenges she faced? What almost broke the sanctuary?"',consequence:"Strategic thinking  Prepares for future challenges",effects:[{characterId:"lilith",affectionChange:25}],nextScene:"sanctuary_challenges"}]},{id:"cordelia_friendship",title:"A Bond Beyond Time",text:[`Lilith's eyes grow distant with memory, and for a moment, you see vulnerability beneath her composed exterior. "Close friends... yes, though that term hardly captures what Cordelia meant to us." She moves toward a portrait of your great-aunt.`,`"When she first arrived at this manor, we expected her to flee in terror or attempt to have us destroyed. Instead, she brought us tea and asked if we needed anything." Lilith's voice carries amazement even after all these years.`,'"Over six decades, she became our anchor to humanity, our protector, and in many ways, our family. She loved us not despite what we are, but because of who we chose to be with that nature."','Her gaze returns to you. "The bond we shared transcended the typical boundaries between mortal and immortal. She saw past our supernatural nature to the individuals beneath, and we loved her fierce, kind heart in return."'],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"understand_bond",text:'"That sounds like a beautiful friendship. I can see why you miss her."',consequence:"Empathetic response  Shows emotional intelligence",effects:[{characterId:"lilith",affectionChange:15}],nextScene:"shared_grief"},{id:"ask_about_others",text:`"You said 'us' - are there others here I should meet?"`,consequence:"Practical interest  Shows readiness to meet the coven",effects:[{characterId:"lilith",affectionChange:10}],nextScene:"meet_the_coven"},{id:"express_hope",text:`"I hope I can honor that bond she created. I'd like to understand what made your friendship so special."`,consequence:"Respectful aspiration  Shows desire to continue legacy",effects:[{characterId:"lilith",affectionChange:20}],nextScene:"legacy_continuation"}]},{id:"atmospheric_awareness",title:"Sensitivity to the Unseen",text:['Lilith pauses, studying you with new interest. "Most mortals feel nothing when they enter our domain, or if they do, they dismiss it as imagination. You, however, have a rare sensitivity."','She gestures to the candlelit interior where shadows seem to dance with purpose. "This manor exists partially outside normal reality. The barriers between worlds are thin here, maintained by ancient wards and newer protections."','"Your ability to sense the atmospheric shift suggests you have the potential to understand our world far more easily than most." Her voice carries approval and something that might be excitement.',`"Cordelia had the same gift. It's part of what made her such an effective guardian and mediator between our realm and the mortal world."`],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_about_gift",text:'"Is this sensitivity something I inherited? Can it be developed further?"',consequence:"Seeks understanding  Shows interest in supernatural abilities",effects:[{characterId:"lilith",affectionChange:18}],nextScene:"supernatural_potential"},{id:"ask_about_wards",text:'"You mentioned wards and protections. What are you protecting this place from?"',consequence:"Security-focused  Shows strategic thinking",effects:[{characterId:"lilith",affectionChange:12}],nextScene:"protection_details"},{id:"express_fascination",text:`"This is incredible. I've always felt like there was more to the world than what most people see."`,consequence:"Wonder and openness  Shows natural acceptance",effects:[{characterId:"lilith",affectionChange:22}],nextScene:"natural_acceptance"}]},{id:"considerate_inquiry",title:"Gracious Concern",text:[`Lilith's expression brightens with genuine pleasure at your consideration. "How remarkably thoughtful. Cordelia raised you well, even from a distance." She seems almost moved by your courtesy.`,`"Your arrival changes nothing we wish to preserve and everything we hope to restore," she says warmly. "We have lived here peacefully for decades under Cordelia's protection, but we have missed having a mortal anchor to help us navigate the changing world."`,'She guides you into a beautifully appointed sitting room. "The arrangements your great-aunt established were mutually beneficial. We provided her with protection, knowledge, and companionship, while she offered us legitimacy, understanding, and connection to humanity."','"What we hope is that you might choose to continue that partnership. But unlike legal contracts, this arrangement must be built on genuine care and willing participation from all parties."'],character:b.lilith,background:"/backgrounds/gothic-manor-entrance.png",choices:[{id:"express_interest",text:`"I'm very interested in learning more about this partnership. What would it involve?"`,consequence:"Genuine curiosity  Shows openness to commitment",effects:[{characterId:"lilith",affectionChange:25}],nextScene:"partnership_explanation"},{id:"ask_about_protection",text:'"You mentioned providing protection. What kind of dangers exist that I should be aware of?"',consequence:"Practical concerns  Shows responsibility",effects:[{characterId:"lilith",affectionChange:15}],nextScene:"danger_discussion"},{id:"offer_provisional_agreement",text:`"I can't make any permanent commitments yet, but I'd like to try continuing Cordelia's work, at least initially."`,consequence:"Cautious but willing  Shows thoughtful approach",effects:[{characterId:"lilith",affectionChange:20}],nextScene:"provisional_agreement"}]},{id:"supernatural_revelation",title:"The Truth Unveiled",text:[`Relief washes over Lilith's features at your open-minded response. "Your willingness to accept the unknown is a gift, one your great-aunt shared." She settles gracefully across from you.`,'"We are vampires," she says simply, watching for your reaction. "Ancient beings who have found sanctuary in this place for over three centuries. Not the monsters of human folklore, but individuals who have learned to exist peacefully alongside mortality."','"Cordelia discovered our nature within days of inheriting this manor, but instead of fleeing or seeking to destroy us, she chose to understand us. She became our protector, our friend, and the bridge between our world and yours."','Her dark eyes hold yours steadily. "We hope you might choose a similar path, but we will not pressure or coerce you. The choice must be yours alone, made with full knowledge and genuine willingness."'],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"accept_with_wonder",text:`"Vampires... that explains so much about this place. I'm amazed rather than afraid."`,consequence:"Wonder over fear  Shows supernatural acceptance",effects:[{characterId:"lilith",affectionChange:30}],nextScene:"amazed_acceptance"},{id:"ask_practical_questions",text:'"What does this mean for day-to-day life? How does coexistence actually work?"',consequence:"Practical focus  Shows adaptability",effects:[{characterId:"lilith",affectionChange:20}],nextScene:"practical_coexistence"},{id:"express_honor",text:`"I'm honored that you're trusting me with this truth. I want to be worthy of that trust."`,consequence:"Grateful response  Shows respect for confidence",effects:[{characterId:"lilith",affectionChange:25}],nextScene:"trust_acknowledged"}]},{id:"gradual_revelation",title:"Gentle Understanding",text:[`Lilith nods approvingly. "Wisdom often lies in recognizing one's limits. Cordelia took nearly a month to fully accept and understand our nature. There is no shame in proceeding carefully."`,'She settles into a chair across from you, her movements graceful and deliberately non-threatening. "Perhaps we should begin with the basics. This manor has been my home for over four centuries. I am... not entirely human, though I was once."','"The others who live here share similar natures. We are beings who exist somewhat outside the normal flow of mortal time and society, but we have chosen to live peacefully, contributing to the world rather than taking from it."','Her voice is patient, giving you time to process. "Your great-aunt helped us maintain that peaceful existence by serving as our connection to the human world. She was our anchor, our protector, and our dear friend."'],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_about_nature",text:`"When you say 'not entirely human,' what do you mean exactly?"`,consequence:"Seeks clarification  Shows readiness for more truth",effects:[{characterId:"lilith",affectionChange:15}],nextScene:"nature_explanation"},{id:"focus_on_cordelia",text:`"Tell me more about Cordelia's role. What made her such a good protector and friend?"`,consequence:"Family focus  Shows interest in legacy",effects:[{characterId:"lilith",affectionChange:18}],nextScene:"cordelia_role_detailed"},{id:"express_gratitude",text:'"Thank you for being so patient with me. This is all quite extraordinary."',consequence:"Appreciative response  Shows good manners",effects:[{characterId:"lilith",affectionChange:12}],nextScene:"patient_guidance"}]},{id:"athletic_demonstration",title:"Physical Confidence",text:["Moving with the fluid grace of someone comfortable in their body, you demonstrate your athletic nature. Perhaps it's the way you carry yourself, balanced and alert, or how you navigate the manor's corridors with confident steps.",`Lilith notices immediately. "You move like someone who takes care of their body. That's wise, especially in our world where physical capability can mean the difference between life and death."`,'She gestures toward a portrait of a woman in riding attire. "Your great-aunt was also athletic in her youth. She believed that a strong body housed a strong spirit, and both were necessary for the challenges she faced here."',`There's approval in her gaze as she continues. "Physical prowess will serve you well. There may come times when you need to run, fight, or simply endure more than most mortals could manage."`],choices:[{id:"ask_about_challenges",text:'"What kind of physical challenges might I face here?"',consequence:"Practical preparation  Shows readiness for danger",effects:[{characterId:"lilith",affectionChange:15}],nextScene:"physical_challenges_explained"},{id:"offer_protection",text:`"I can handle myself, and I'd be willing to help protect others if needed."`,consequence:"Protective offer  Shows courage and strength",effects:[{characterId:"lilith",affectionChange:20}],nextScene:"protection_offered"},{id:"connect_with_cordelia",text:`"I'd like to hear more about Cordelia's experiences. We seem to share similar strengths."`,consequence:"Family connection  Shows interest in legacy",effects:[{characterId:"lilith",affectionChange:18}],nextScene:"cordelia_physical_stories"}]},{id:"creative_insight",title:"The Artist's Perspective",text:["Your creative nature allows you to see beyond the surface of things, to perceive the artistic composition of the moment - the way candlelight creates dramatic shadows, how Lilith's pose echoes classical portraiture, the musical quality of her voice.",`"This place is like a living artwork," you observe. "Every detail seems deliberately chosen to create atmosphere and meaning. The architecture, the lighting, even the way you speak - it's all composed like a symphony."`,`Lilith's eyes light up with genuine pleasure. "How perceptive. Yes, we have cultivated this place as more than mere shelter. It is our canvas, our stage, our sanctuary given form through centuries of artistic vision."`,`She moves toward a ornate music box on a side table. "Your artistic soul recognizes what we've created here. That suggests you might understand what we are in ways that purely practical minds cannot."`],choices:[{id:"appreciate_composition",text:`"I can see the love and care that went into every artistic choice. This isn't just a home - it's a masterpiece."`,consequence:"Artistic appreciation  Deep understanding of their vision",effects:[{characterId:"lilith",affectionChange:20},{characterId:"morgana",affectionChange:15}],nextScene:"artistic_appreciation"},{id:"offer_contribution",text:`"I'd love to contribute to this artistic vision. What role could creativity play in your community?"`,consequence:"Creative collaboration  Shows desire to contribute",effects:[{characterId:"morgana",affectionChange:25}],nextScene:"creative_contribution"},{id:"ask_about_morgana",text:`"I sense there's another artist here. Someone who works with music, perhaps?"`,consequence:"Artistic intuition  Shows sensitivity to creative energy",effects:[{characterId:"morgana",affectionChange:20}],nextScene:"morgana_creative_connection"}]},{id:"hemophobia_triggered",title:"Blood and Fear",text:["As the conversation turns to the supernatural nature of your hosts, the implications become clear - these are vampires, beings who sustain themselves on blood. The thought makes your stomach lurch with familiar dread.","Your hemophobia has always been a challenge, but here, surrounded by creatures who embody everything your phobia represents, it becomes almost overwhelming. You struggle to maintain composure.",`Lilith notices your distress immediately. "You're pale," she observes with concern. "Are you feeling unwell? Perhaps this revelation is more shocking than I anticipated."`,"The irony isn't lost on you - inheriting a manor full of vampires when the sight of blood makes you weak. But there's kindness in Lilith's voice, genuine concern rather than predatory interest."],choices:[{id:"admit_hemophobia",text:'"I have hemophobia - the sight of blood terrifies me. I know it might seem strange, given the circumstances."',consequence:"Honest vulnerability  May gain protection but shows weakness",effects:[{characterId:"seraphina",affectionChange:15},{characterId:"lilith",affectionChange:10}],nextScene:"hemophobia_accommodation"},{id:"push_through_fear",text:"Try to overcome your fear through sheer willpower.",consequence:"Shows determination  Difficult but demonstrates courage",effects:[{characterId:"lilith",affectionChange:12}],nextScene:"willpower_struggle"},{id:"deflect_concern",text:`"I'm fine, just processing a lot of new information."`,consequence:"Avoids showing weakness  Maintains composure but hides truth",effects:[{characterId:"lilith",affectionChange:5}],nextScene:"hidden_struggle"}]},{id:"curiosity_compulsion",title:"The Dangerous Question",text:[`Your dangerously curious nature gets the better of you. Despite every instinct warning you to proceed carefully, you find yourself asking the question you know you shouldn't: "What do you actually do for blood? How does feeding work for vampires like you?"`,"The words are out before you can stop them, hanging in the air like a challenge. Lilith's expression grows complex - part amusement, part concern, part something darker.",`"Your curiosity could be either your greatest asset or your ultimate downfall," she says slowly. "That question... most mortals wouldn't dare ask it so directly, especially not upon first meeting."`,"But there's respect in her voice too, acknowledgment of your boldness even as she recognizes its potential danger."],choices:[{id:"apologize_for_boldness",text:`"I'm sorry, that was too forward. My curiosity sometimes gets ahead of my common sense."`,consequence:"Shows self-awareness  Acknowledges mistake while maintaining curiosity",effects:[{characterId:"lilith",affectionChange:8}],nextScene:"curiosity_acknowledged"},{id:"defend_curiosity",text:`"If I'm going to live here, I need to understand the reality of your existence."`,consequence:"Logical justification  Shows practical thinking behind curiosity",effects:[{characterId:"lilith",affectionChange:15}],nextScene:"practical_curiosity"},{id:"double_down",text:`"I can handle the truth, whatever it is. I'd rather know than wonder."`,consequence:"Fearless pursuit of knowledge  Very bold but potentially dangerous",effects:[{characterId:"lilith",affectionChange:20}],nextScene:"fearless_inquiry"}]},{id:"psychic_acknowledged",title:"Recognized Abilities",text:[`"I can sense supernatural presences," you admit to Lilith. "You're ancient and powerful, but there are others here too - someone who creates beauty from pain, and another who carries divine light touched by loss."`,`Lilith's eyes widen with genuine surprise and respect. "Remarkable. Your psychic sensitivity is quite refined - most humans with such gifts can only sense general supernatural presence, not specific emotional signatures."`,'She leans forward with interest. "Your great-aunt Cordelia possessed similar abilities, though hers manifested differently. It seems supernatural sensitivity runs in your bloodline."',"There's a new quality to her attention now - not just curiosity about your inheritance, but recognition of your potential value to their community."],choices:[{id:"ask_about_cordelia_abilities",text:`"How did Cordelia's psychic abilities manifest? What could she do?"`,consequence:"Family legacy interest  Shows desire to understand heritage",effects:[{characterId:"lilith",affectionChange:15}],nextScene:"cordelia_psychic_legacy"},{id:"offer_psychic_services",text:`"My abilities could be useful for protection or investigation. I'd be happy to help."`,consequence:"Practical offer  Shows willingness to contribute unique skills",effects:[{characterId:"lilith",affectionChange:20}],nextScene:"psychic_services_accepted"},{id:"request_training",text:'"Could you teach me to develop these abilities further?"',consequence:"Growth mindset  Shows desire for supernatural development",effects:[{characterId:"lilith",affectionChange:18}],nextScene:"psychic_training_offered"}]},{id:"bond_recognition",title:"Deeper Understanding",text:['"The connections between you three are beautiful," you say, your blood sight still revealing the intricate web of loyalty and affection. "Like a family forged by choice rather than blood."',"For the first time since you arrived, Lilith's composed mask slips entirely. Her expression becomes vulnerable, touched by something deeper than surprise - perhaps gratitude for being truly seen.",`"Yes," she says softly. "We are... kindred spirits in the truest sense. Bound not by sire lines or clan obligations, but by choice, trust, and genuine care for one another's wellbeing."`,"Your blood sight shows you the truth of her words - these bonds pulse with warmth, strengthened by centuries of shared experiences, mutual protection, and chosen family love."],choices:[{id:"express_admiration",text:`"That's incredibly rare and precious. You've built something beautiful together."`,consequence:"Validates their relationships  Shows deep appreciation",effects:[{characterId:"lilith",affectionChange:25},{characterId:"morgana",affectionChange:10},{characterId:"seraphina",affectionChange:10}],nextScene:"family_appreciation"},{id:"ask_about_joining",text:`"Is there room in your family for someone new? Someone who could understand and value what you've created?"`,consequence:"Direct interest in belonging  Bold but heartfelt request",effects:[{characterId:"lilith",affectionChange:30}],nextScene:"family_consideration"},{id:"promise_protection",text:`"I would never do anything to threaten the bonds between you. They're too precious."`,consequence:"Protective promise  Shows understanding of their value",effects:[{characterId:"lilith",affectionChange:20}],nextScene:"bond_protection_vow"}]},{id:"creative_contribution",title:"Artistic Collaboration",text:[`"I'd love to contribute to this artistic vision," you say, your creative soul already spinning with possibilities. "What role could creativity play in your community?"`,"Before Lilith can answer, a new voice drifts down from the upper floor - hauntingly beautiful, like silver bells touched with melancholy. Someone is playing piano, the melody complex and emotionally rich.",`"That," Lilith says with a warm smile, "would be Morgana. She's been waiting to meet you, actually. Your great-aunt spoke often of your artistic nature, and Morgana was quite excited about the possibility of a kindred creative spirit joining us."`,"The music shifts, becoming more welcoming, as if the pianist has sensed the conversation below and is offering an invitation through melody."],background:"/backgrounds/grand-hall.png",choices:[{id:"follow_the_music",text:'"Could I meet her? That music is incredibly beautiful."',consequence:"Immediate artistic connection  Shows appreciation for Morgana's art",effects:[{characterId:"morgana",affectionChange:25}],nextScene:"morgana_introduction"},{id:"discuss_collaboration",text:`"I have ideas for artistic projects that could enhance the manor's atmosphere. Would she be interested in collaborating?"`,consequence:"Proactive creativity  Shows initiative and respect for her work",effects:[{characterId:"morgana",affectionChange:20},{characterId:"lilith",affectionChange:10}],nextScene:"artistic_collaboration_planned"},{id:"ask_about_cordelia_art",text:`"What kind of artistic contributions did Cordelia make? I'd like to honor her legacy."`,consequence:"Legacy respect  Shows desire to continue family tradition",effects:[{characterId:"lilith",affectionChange:15},{characterId:"morgana",affectionChange:15}],nextScene:"cordelia_artistic_legacy"}]},{id:"protection_offered",title:"Strength Recognized",text:[`"I can handle myself, and I'd be willing to help protect others if needed," you state with quiet confidence, your athletic bearing lending weight to the words.`,`Lilith studies you with new interest. "Protection is... actually something we may need. While this manor is well-warded, there are always those who would threaten what we've built here."`,'She moves to the window, gazing out at the darkening grounds. "Your great-aunt served as both anchor and guardian. She had a talent for spotting threats and the physical capability to deal with them when necessary."',`"The question is whether you truly understand what protecting us might entail. It's not just about physical confrontation - it's about standing between those you care for and forces that would destroy them."`],choices:[{id:"accept_guardian_role",text:`"I understand the responsibility. I'm ready to be both anchor and guardian, like Cordelia was."`,consequence:"Full commitment  Accepts complete responsibility for their safety",effects:[{characterId:"lilith",affectionChange:30},{characterId:"seraphina",affectionChange:15}],nextScene:"guardian_oath"},{id:"ask_about_threats",text:`"What kind of threats do you face? I need to understand what I'd be protecting against."`,consequence:"Strategic thinking  Shows tactical preparation mindset",effects:[{characterId:"lilith",affectionChange:18}],nextScene:"threat_assessment"},{id:"gradual_commitment",text:`"I want to help, but I'd like to learn more about your world before making such a significant commitment."`,consequence:"Cautious wisdom  Shows thoughtful approach to responsibility",effects:[{characterId:"lilith",affectionChange:15}],nextScene:"gradual_integration"}]},{id:"hemophobia_accommodation",title:"Understanding and Adaptation",text:[`"I have hemophobia," you admit, fighting against the shame you've always felt about this limitation. "The sight of blood terrifies me. I know it might seem strange, given the circumstances."`,`Rather than disappointment or amusement, Lilith's expression fills with understanding compassion. "Not strange at all. Fear is often our body's way of protecting us from trauma. And there are ways to work with such challenges."`,'From the upper floor, you hear footsteps approaching - light, purposeful. "Seraphina," Lilith calls softly. "Your expertise may be needed."',"A figure appears at the top of the stairs - tall, graceful, with an aura of gentle strength that your supernatural senses recognize as divine, though tempered by earthly experience."],choices:[{id:"meet_seraphina",text:"Allow Seraphina to approach and introduce herself.",consequence:"Openness to help  Shows willingness to accept support",effects:[{characterId:"seraphina",affectionChange:20}],nextScene:"seraphina_healer_introduction"},{id:"ask_about_accommodation",text:'"Are there ways to manage my phobia while still being useful here?"',consequence:"Practical adaptation  Shows desire to contribute despite limitations",effects:[{characterId:"seraphina",affectionChange:15},{characterId:"lilith",affectionChange:12}],nextScene:"phobia_management_discussion"},{id:"express_determination",text:`"I don't want my fear to limit what I can do for this community."`,consequence:"Determined growth  Shows commitment to overcoming challenges",effects:[{characterId:"seraphina",affectionChange:18},{characterId:"lilith",affectionChange:15}],nextScene:"fear_overcoming_support"}]},{id:"coven_gathering",title:"Meeting the Coven",text:[`The next evening, Lilith leads you to the manor's grand ballroom where elegant figures move like shadows through candlelight. "Tonight, you meet the others," she says with both warmth and warning in her voice.`,"The room falls silent as you enter. Seven pairs of eyes turn toward you - each gaze carrying centuries of experience, secrets, and distinct personalities that immediately set them apart.","Morgana stands near an antique piano, her midnight-black hair cascading in waves and silver eyes holding artistic depths. Beside her, Seraphina glows with ethereal beauty - platinum hair seeming to carry its own light, pale blue eyes radiating divine compassion.","Valentina's fierce amber eyes burn with revolutionary passion, her wild crimson curls and battle-scarred olive skin marking her as the coven's warrior-activist. Raven towers nearby with Nordic features carved from marble, ice-blue eyes and platinum braids speaking of ancient Viking strength.","Celeste adjusts her wire-rimmed glasses, honey-blonde hair pulled back practically as her intelligent hazel eyes process every detail. Luna emerges from the shadows like living starlight - silver-white hair shimmering, deep violet eyes holding cosmic knowledge.","Elena hovers at the periphery, ash-blonde hair framing a heart-shaped face filled with centuries of artistic melancholy, while Isadora commands attention from the center - auburn hair in perfect chignon, emerald eyes calculating, wearing luxury that speaks of power and wealth.",'"Sisters," Lilith announces, "meet our new anchor. She has proven herself worthy of consideration, but the choice of full acceptance lies with all of us."',"You sense the complex web of relationships here - alliances forged through shared struggles, rivalries born of conflicting philosophies, and deeper bonds that transcend simple friendship."],background:"/backgrounds/ballroom.png",choices:[{id:"confident_introduction",text:"Introduce yourself with confidence, meeting each vampire's gaze directly.",consequence:"Bold approach  Impresses some, challenges others",effects:[{characterId:"valentina",affectionChange:15},{characterId:"raven",affectionChange:12},{characterId:"isadora",affectionChange:-5}],nextScene:"confident_first_impressions"},{id:"respectful_approach",text:"Approach respectfully, acknowledging their age and experience.",consequence:"Diplomatic respect  Shows wisdom and humility",effects:[{characterId:"celeste",affectionChange:18},{characterId:"luna",affectionChange:15},{characterId:"elena",affectionChange:10}],nextScene:"respectful_introduction"},{id:"observe_dynamics",text:"Stay quiet and observe the relationships between the vampires first.",consequence:"Strategic observation  Learns valuable information",effects:[{characterId:"celeste",affectionChange:20},{characterId:"isadora",affectionChange:12}],nextScene:"coven_dynamics_revealed"}]},{id:"confident_first_impressions",title:"Bold Introductions",text:[`You step forward with confident grace, meeting each vampire's gaze directly. "I'm honored to meet you all. I may be new to your world, but I'm not afraid of it."`,'A vampire with fierce amber eyes and wild crimson curls steps forward first, her olive skin bearing faint battle scars and her leather clothing speaking of someone who chooses action over elegance. "Valentina Reyes," she says with a Spanish accent thick as honey. "I appreciate directness. Too many mortals cower or grovel."',"From near the window, a tall, powerfully built woman with platinum braids nods approvingly. Raven is intimidatingly beautiful - Nordic features carved from marble, ice-blue eyes that could freeze fire, and the bearing of someone who has faced death and laughed. Her practical clothing and visible weapons mark her as the coven's protector.",'However, an elegant woman in emerald silk raises an eyebrow with calculated interest. Isadora is the picture of refined luxury - auburn hair in a perfect chignon, emerald eyes that miss nothing, and expensive clothing that costs more than most cars. "Confidence is... interesting in one so young. We shall see if it is wisdom or foolishness." Her tone carries subtle challenge.'],choices:[{id:"engage_valentina",text:"Focus on Valentina, drawn to her passionate energy.",consequence:"Revolutionary alliance  May conflict with traditionalists",effects:[{characterId:"valentina",affectionChange:25}],nextScene:"valentina_connection"},{id:"respect_raven",text:"Turn to Raven, showing interest in her warrior nature.",consequence:"Warrior respect  Appeals to strength-based values",effects:[{characterId:"raven",affectionChange:20}],nextScene:"raven_acknowledgment"},{id:"challenge_isadora",text:"Meet Isadora's challenge with diplomatic steel.",consequence:"Political gameplay  Dangerous but potentially rewarding",effects:[{characterId:"isadora",affectionChange:15}],nextScene:"isadora_political_dance"}]},{id:"respectful_introduction",title:"Wisdom in Humility",text:[`"I'm deeply honored to be here," you say with genuine respect. "I know I have much to learn about your world, and I'm grateful for the opportunity to do so among such experienced and wise individuals."`,'A vampire with steel-gray eyes behind wire-rimmed glasses nods with approval. "Celeste Dubois," she introduces herself in a cultured French accent. "Wisdom begins with acknowledging what one does not know. Your great-aunt possessed this quality."','Near a crystal ball that seems to swirl with its own inner mist, a figure with silver-white hair speaks softly: "Luna Nightwhisper. The future paths around you shimmer with possibility. Humility will serve you well in navigating them."','From a corner where shadows seem deeper, a pale woman with haunted gray eyes offers a melancholic smile. "Elena Volkov. Your respect for our experience... it reminds me of better times." Her Russian accent carries old pain.'],choices:[{id:"seek_celeste_wisdom",text:"Ask Celeste about the knowledge contained in the manor.",consequence:"Scholarly pursuit  Opens paths to forbidden knowledge",effects:[{characterId:"celeste",affectionChange:25}],nextScene:"celeste_library_offer"},{id:"luna_future_inquiry",text:"Inquire about Luna's prophetic abilities.",consequence:"Mystical interest  May reveal dangerous futures",effects:[{characterId:"luna",affectionChange:20}],nextScene:"luna_prophecy_glimpse"},{id:"elena_empathy",text:"Show empathy for Elena's obvious pain.",consequence:"Emotional connection  May unlock tragic secrets",effects:[{characterId:"elena",affectionChange:30}],nextScene:"elena_tragic_bond"}]},{id:"coven_dynamics_revealed",title:"The Web of Relationships",text:["You observe carefully, noting the subtle interactions between the vampires. The social dynamics are complex, layered with centuries of shared history.","Valentina's fierce amber eyes and battle-scarred hands speak with Raven's ice-blue Nordic gaze and towering presence - their body language suggesting a friendship built on mutual respect for strength. They exchange a meaningful glance when Isadora speaks.","Celeste adjusts her wire-rimmed glasses as she whispers with Luna, whose silver-white hair shimmers in the candlelight - their scholarly connection evident in how they orbit each other discussing mystical matters.","Elena's ash-blonde hair catches the light as she hovers on the periphery, her artistic melancholy keeping her isolated despite her ethereal beauty.","Isadora's perfectly coiffed auburn hair and emerald silk dress command attention from the center, but you notice the slight tension when her calculating emerald eyes look toward Valentina's revolutionary passion - old philosophical differences, perhaps political rivalries about the coven's direction."],choices:[{id:"ask_about_alliances",text:"Diplomatically inquire about the different perspectives within the coven.",consequence:"Political awareness  Shows understanding of complexity",effects:[{characterId:"isadora",affectionChange:20},{characterId:"celeste",affectionChange:15}],nextScene:"political_factions_explained"},{id:"reach_out_to_elena",text:"Approach Elena, sensing her isolation.",consequence:"Compassionate outreach  May bridge social gaps",effects:[{characterId:"elena",affectionChange:25},{characterId:"seraphina",affectionChange:10}],nextScene:"elena_isolation_bridge"},{id:"study_power_structure",text:"Focus on understanding the power hierarchy.",consequence:"Strategic analysis  Useful for future navigation",effects:[{characterId:"celeste",affectionChange:18}],nextScene:"coven_hierarchy_revealed"}]},{id:"valentina_connection",title:"The Revolutionary's Fire",text:['"Your directness is refreshing," Valentina says, stepping closer with predatory grace. "Most newcomers either fear us or try to manipulate us. You do neither."',`Her amber eyes burn with passionate intensity. "I fought in three mortal wars before my turning, and I've been fighting for vampire equality ever since. This coven... sometimes I think we've grown too comfortable in our isolation."`,'She glances meaningfully at Isadora. "Some believe in maintaining old hierarchies, working within existing power structures. I believe in tearing down systems that oppress us and building something better."',"You sense this is more than casual conversation - Valentina is gauging whether you might be an ally in whatever changes she's planning for the coven."],choices:[{id:"support_revolution",text:'"Change often requires people willing to challenge the status quo. What needs to change here?"',consequence:"Revolutionary alliance  May create enemies among traditionalists",effects:[{characterId:"valentina",affectionChange:35},{characterId:"isadora",affectionChange:-15},{characterId:"lilith",affectionChange:-5}],nextScene:"revolutionary_recruitment"},{id:"diplomatic_balance",text:`"Both tradition and change have their place. Perhaps there's a way to honor the past while building a better future?"`,consequence:"Diplomatic wisdom  Respects all perspectives",effects:[{characterId:"valentina",affectionChange:15},{characterId:"isadora",affectionChange:10},{characterId:"lilith",affectionChange:20}],nextScene:"diplomatic_bridge_building"},{id:"ask_about_wars",text:'"You fought in mortal wars? What was that like for a vampire?"',consequence:"Personal interest  Learns Valentina's tragic history",effects:[{characterId:"valentina",affectionChange:25}],nextScene:"valentina_war_stories"}]},{id:"celeste_library_offer",title:"The Keeper of Knowledge",text:[`Celeste's eyes light up behind her wire-rimmed glasses. "Ah, a seeker of knowledge. How delightful. The Ravencroft library contains texts that most supernatural scholars would kill to access."`,'She leads you toward massive oak doors carved with protective symbols. "Ancient grimoires, historical accounts of vampire society, prophecies that predate written language. Your great-aunt was particularly interested in the intersection of supernatural politics and mortal world events."','Her voice drops to a conspiratorial whisper. "There are also... forbidden texts. Knowledge that some believe should remain buried. But I believe information should be available to those wise enough to handle it responsibly."',"You sense Celeste is offering more than just library access - she's potentially offering you entrance into dangerous secrets that could reshape your understanding of everything."],choices:[{id:"request_forbidden_knowledge",text:`"I'm interested in the forbidden texts. I believe knowledge itself isn't dangerous - only ignorance is."`,consequence:"Dangerous knowledge sought  Sanity cost for forbidden secrets",effects:[{characterId:"celeste",affectionChange:30},{characterId:"luna",affectionChange:-10},{characterId:"seraphina",affectionChange:-15}],playerStatEffects:{sanityChange:-15},nextScene:"forbidden_knowledge_access"},{id:"cordelia_research_focus",text:`"I'd like to understand what Cordelia was researching. It might help me understand my role here."`,consequence:"Legacy investigation  Safe but potentially revealing",effects:[{characterId:"celeste",affectionChange:20},{characterId:"lilith",affectionChange:15}],nextScene:"cordelia_research_revealed"},{id:"gradual_learning",text:`"I'd appreciate starting with the basics and working my way up to more advanced knowledge."`,consequence:"Careful progression  Shows wisdom and patience",effects:[{characterId:"celeste",affectionChange:18},{characterId:"seraphina",affectionChange:12}],nextScene:"structured_education"}]},{id:"elena_tragic_bond",title:"The Artist's Sorrow",text:["Elena stands like a living portrait of melancholy - ash-blonde hair falling in soft waves around a heart-shaped face, pale gray eyes that hold centuries of sorrow, and porcelain skin so translucent you can almost see the pain beneath. She wears a simple black dress that emphasizes her ethereal fragility.","Her movements are graceful yet hesitant, like someone who has learned to make herself small to avoid further hurt. Paint stains on her delicate fingers speak of endless hours spent trying to capture emotions too complex for words.",`Her pale gray eyes widen slightly at your empathy, as if she's forgotten what genuine compassion feels like. "You... see the pain. Most prefer to look away."`,'She moves like a wraith toward a painting covered by a dark cloth. "I create to remember, and I create to forget. Both are equally futile when you have eternity stretching before you."','With trembling hands, she reveals the painting - a masterpiece depicting a snowy Russian landscape with a burning manor in the distance. "My mortal family. Lost to revolutionaries while I was away, studying art in Paris. I returned to find... nothing."','Her voice breaks slightly. "The others try to help, but how do you heal a wound that has had two centuries to fester? How do you find purpose when everyone you loved is dust?"'],choices:[{id:"offer_comfort",text:"Gently place a comforting hand on her shoulder.",consequence:"Physical comfort  Shows brave compassion despite supernatural nature",effects:[{characterId:"elena",affectionChange:40},{characterId:"seraphina",affectionChange:15}],nextScene:"elena_comfort_accepted"},{id:"artistic_understanding",text:'"Art can be a bridge between past and future. Your pain creates beauty that helps others feel less alone."',consequence:"Artistic empathy  Connects through creative understanding",effects:[{characterId:"elena",affectionChange:35},{characterId:"morgana",affectionChange:20}],nextScene:"artistic_soul_connection"},{id:"purpose_perspective",text:`"Perhaps purpose isn't about replacing what's lost, but about honoring it by helping others avoid similar pain."`,consequence:"Philosophical insight  Offers new perspective on immortal existence",effects:[{characterId:"elena",affectionChange:30},{characterId:"valentina",affectionChange:15}],nextScene:"elena_purpose_reframing"}]},{id:"political_factions_explained",title:"The Coven's Divisions",text:[`Isadora steps forward with practiced grace, clearly comfortable being the center of attention. "You've observed well. Yes, we have... philosophical differences about the coven's future direction."`,'She gestures elegantly toward Valentina. "Some believe in dramatic change, revolution, tearing down established order. They see oppression where I see opportunity for careful advancement."',`Valentina's eyes flash with contained fire. "And some mistake complacency for strategy. How long do we wait for gradual change while younger vampires suffer under old restrictions?"`,`Celeste adjusts her glasses thoughtfully. "There's wisdom in both approaches. Perhaps our new anchor can offer a fresh perspective on this ancient debate."`],choices:[{id:"side_with_progression",text:'"Both of you want progress, just at different speeds. What if we found ways to implement careful changes that build toward larger transformation?"',consequence:"Moderate position  May unite factions or satisfy none",effects:[{characterId:"isadora",affectionChange:15},{characterId:"valentina",affectionChange:10},{characterId:"celeste",affectionChange:25}],nextScene:"moderate_coalition_building"},{id:"question_restrictions",text:'"What specific restrictions are causing problems? Understanding the root issues might help find solutions."',consequence:"Analytical approach  Focuses on problems rather than personalities",effects:[{characterId:"celeste",affectionChange:20},{characterId:"luna",affectionChange:15}],nextScene:"restriction_analysis"},{id:"suggest_trial_period",text:'"What if we tested small changes first? Trial periods could prove concepts without major risk."',consequence:"Practical compromise  Shows business-minded thinking",effects:[{characterId:"isadora",affectionChange:20},{characterId:"celeste",affectionChange:18}],nextScene:"pragmatic_testing_approach"}]},{id:"truth_revelation",title:"The Nature of Things",text:["Lilith leads you into an elegant sitting room where a fire crackles in an ornate fireplace. She gestures to a comfortable chair before settling gracefully across from you.",'"The details Cordelia omitted," she begins with a slight smile, "concern the nature of her houseguests. We are not entirely... human, though we were once. We are what your modern world calls vampires."','She pauses, watching your reaction carefully. "Before you flee or reach for a cross, know that we chose this life of peaceful coexistence. We sustain ourselves without harm to mortals, and we have protected this place for centuries."','"Your great-aunt discovered our secret within days but chose understanding over fear. She became our anchor to the mortal world, our protector, and our dear friend."'],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"accept_with_wonder",text:`"Vampires... that explains so much about this place. I'm amazed rather than afraid."`,consequence:"Wonder over fear  Shows supernatural acceptance",effects:[{characterId:"lilith",affectionChange:25}],nextScene:"amazed_acceptance"},{id:"ask_practical_questions",text:'"What does this mean for day-to-day life? How does coexistence actually work?"',consequence:"Practical focus  Shows adaptability",effects:[{characterId:"lilith",affectionChange:18}],nextScene:"practical_coexistence"},{id:"express_gratitude_for_trust",text:'"Thank you for trusting me with this truth. I want to be worthy of that trust, like Cordelia was."',consequence:"Grateful response  Shows respect for confidence",effects:[{characterId:"lilith",affectionChange:22}],nextScene:"trust_acknowledged"}]},{id:"tenant_explanation",title:"The Long-Term Arrangement",text:[`Lilith's expression becomes more serious as she leads you to the sitting room. "The legal documents call us tenants, but the reality is more complex than property law can encompass."`,'"We have lived here for centuries, long before your family owned this land. When the Ravencroft name first came to this manor, an arrangement was made - protection and secrecy in exchange for peaceful coexistence."','She settles into a chair, her ancient eyes reflecting the firelight. "Your great-aunt honored that arrangement admirably. The question now is whether you will choose to do the same, or if new terms must be negotiated."',"There's no threat in her voice, but you sense the weight of centuries behind her words."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"honor_arrangement",text:`"If Cordelia found this arrangement acceptable, then I'm willing to honor it as well."`,consequence:"Accepts legacy  Shows respect for family tradition",effects:[{characterId:"lilith",affectionChange:20}],nextScene:"arrangement_honored"},{id:"need_more_details",text:'"Before I commit to anything, I need to understand exactly what this arrangement entails."',consequence:"Cautious inquiry  Shows responsible decision-making",effects:[{characterId:"lilith",affectionChange:15}],nextScene:"arrangement_details"},{id:"suggest_new_terms",text:'"Perhaps we could discuss what arrangement might work best for all of us going forward."',consequence:"Diplomatic negotiation  Shows collaborative spirit",effects:[{characterId:"lilith",affectionChange:18}],nextScene:"negotiation_begins"}]},{id:"manor_appreciation",title:"A Tour of Beauty",text:[`Lilith's expression warms at your compliment. "Cordelia did indeed have exquisite taste, though she built upon what we had already cultivated over the centuries."`,'She gestures around the grand entrance hall. "This manor has been lovingly maintained by those who appreciate beauty in all its forms. Each room tells a story, each piece of art has meaning."',`"Would you like a tour? Understanding the physical space often helps one understand the emotional landscape as well." Her offer seems genuine, a chance to appreciate the manor's history.`,"You sense this could be an opportunity to learn more about both the house and its mysterious inhabitants."],character:b.lilith,background:"/backgrounds/gothic-manor-entrance.png",choices:[{id:"accept_tour_eagerly",text:'"I would love a tour. I want to understand everything about this place."',consequence:"Enthusiastic interest  Shows deep appreciation",effects:[{characterId:"lilith",affectionChange:18}],nextScene:"manor_tour_begins"},{id:"ask_about_history",text:`"I'd be fascinated to learn about the history behind the art and architecture."`,consequence:"Historical curiosity  Shows intellectual interest",effects:[{characterId:"lilith",affectionChange:16}],nextScene:"historical_tour"},{id:"focus_on_residents",text:`"Perhaps later. Right now I'm more curious about the people who live here."`,consequence:"People-focused  Shows interest in relationships",effects:[{characterId:"lilith",affectionChange:14}],nextScene:"resident_introductions"}]},{id:"psychic_door_insight",title:"Supernatural Perception",text:["You close your eyes and extend your psychic senses, feeling the supernatural currents that flow around the manor like invisible rivers of power.","Immediately, you sense multiple presences within - ancient, powerful, and decidedly non-human. At least three distinct auras pulse with different energies: one dark and commanding, another touched by melancholy and creativity, and a third that feels like starlight dimmed by earthly experience.","The manor itself radiates protective energy, wards woven into the very stones. This place is a fortress against supernatural threats, but also a sanctuary for those within.","Armed with this knowledge, you approach the massive oak doors with greater understanding of what awaits you."],choices:[{id:"knock_respectfully",text:"Knock respectfully on the door.",consequence:"Polite approach  Shows respect for the inhabitants",effects:[{characterId:"lilith",affectionChange:8}],nextScene:"lilith_greeting"},{id:"knock_boldly",text:"Knock with confident authority.",consequence:"Bold entrance  Demonstrates self-assurance",effects:[{characterId:"lilith",affectionChange:5}],nextScene:"assertive_entrance"},{id:"try_door_handle",text:"Try the door handle to see if it's unlocked.",consequence:"Practical approach  Tests boundaries",effects:[{characterId:"lilith",affectionChange:3}],nextScene:"unlocked_discovery"}]},{id:"blood_sight_door_analysis",title:"The True Nature Revealed",text:["You focus your blood sight, a rare gift that allows you to perceive the supernatural nature of beings by observing their life force.","Through the walls, you glimpse multiple supernatural signatures. The strongest burns with ancient crimson power - a vampire of immense age and authority. Another flickers with silver fire touched by artistic melancholy. A third glows with divine light, though dimmed as if something has fallen from grace.","Most remarkably, you see threads of connection between them all - bonds forged not by blood but by choice, loyalty, and something deeper than simple alliance.","With this supernatural intelligence gathered, you now understand the nature of those you're about to meet."],choices:[{id:"knock_respectfully",text:"Knock respectfully on the door.",consequence:"Polite approach  Shows respect for the inhabitants",effects:[{characterId:"lilith",affectionChange:8}],nextScene:"lilith_greeting"},{id:"knock_boldly",text:"Knock with confident authority.",consequence:"Bold entrance  Demonstrates self-assurance",effects:[{characterId:"lilith",affectionChange:5}],nextScene:"assertive_entrance"},{id:"try_door_handle",text:"Try the door handle to see if it's unlocked.",consequence:"Practical approach  Tests boundaries",effects:[{characterId:"lilith",affectionChange:3}],nextScene:"unlocked_discovery"}]},{id:"umbra_first_encounter",title:"Something in the Shadows",text:["As you explore the manor, you notice shadows that seem to move independently of their sources. In the corner of your vision, darkness pools and swirls with an almost sentient quality.","At first, you think it might be a trick of the candlelight, but then you see tiny points of starlight glimmering within the shadows - like distant galaxies viewed through a telescope. The entity appears to be composed of living darkness interwoven with constellation patterns, creating a form that's both beautiful and otherworldly.","When the shadows shift, you catch glimpses of what might be a vaguely humanoid shape - tall and graceful, but made entirely of cosmic void punctuated by stars. The being seems to exist partially in this dimension and partially elsewhere, their form flickering between solid shadow and translucent starlight.","The darkness recoils when you look directly at it, as if embarrassed to be noticed. Yet you sense no malevolence, only a profound shyness and... curiosity about you.",`Lilith notices your distraction. "Ah," she says with gentle amusement, "it seems Umbra has taken an interest in you. They're quite harmless, despite appearances."`],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"approach_umbra_gently",text:`Speak softly to the shadows: "Hello there. I'm not going to hurt you."`,consequence:"Gentle approach  Shows kindness to unusual beings",effects:[{characterId:"umbra",affectionChange:15},{characterId:"lilith",affectionChange:8}],nextScene:"umbra_shy_response"},{id:"ask_lilith_about_umbra",text:'Ask Lilith: "What exactly is Umbra? How long have they lived here?"',consequence:"Seeks understanding  Shows respectful curiosity",effects:[{characterId:"lilith",affectionChange:10},{characterId:"umbra",affectionChange:5}],nextScene:"umbra_explanation"},{id:"ignore_and_continue",text:"Pretend you didn't notice anything unusual and continue the conversation.",consequence:"Polite disregard  Avoids potential awkwardness",effects:[{characterId:"lilith",affectionChange:5}],nextScene:"conversation_continues"}]},{id:"umbra_shy_response",title:"The Shadow's First Words",text:['The shadows pause in their retreat, and you hear the faintest whisper - like wind through distant stars: "You... you are not afraid?"',"The voice seems to come from everywhere and nowhere at once, carrying notes of ancient loneliness and tentative hope. The starlight points within the darkness pulse gently, like a nervous heartbeat.",`Lilith smiles warmly. "Umbra rarely speaks to newcomers. You've made quite an impression."`,'The shadows edge slightly closer, still maintaining a respectful distance. "The others... they accepted me, but you are the first to speak gently from the beginning."'],character:b.umbra,background:"/backgrounds/grand-hall.png",choices:[{id:"reassure_umbra",text:'"I could never be afraid of someone who seems so gentle. Your voice is beautiful."',consequence:"Heartfelt reassurance  Shows genuine acceptance",effects:[{characterId:"umbra",affectionChange:25},{characterId:"lilith",affectionChange:12}],nextScene:"umbra_touched_by_kindness"},{id:"express_curiosity",text:`"I'm curious about you, not afraid. Would you like to tell me about yourself?"`,consequence:"Interested inquiry  Shows desire to understand",effects:[{characterId:"umbra",affectionChange:20},{characterId:"lilith",affectionChange:8}],nextScene:"umbra_shares_story"},{id:"offer_friendship",text:`"Everyone deserves kindness. I'd like to be your friend, if you'd like that."`,consequence:"Friendship offer  Shows welcoming nature",effects:[{characterId:"umbra",affectionChange:30},{characterId:"lilith",affectionChange:15}],nextScene:"umbra_friendship_begins"}]},{id:"umbra_explanation",title:"An Ancient Presence",text:[`Lilith's expression grows thoughtful. "Umbra is older than any of us - perhaps older than this realm itself. They are what mortals might call an eldritch entity, though that term hardly does justice to their gentle nature."`,'"They arrived here centuries ago, drawn by the sanctuary we created. Unlike the cosmic horrors of legend, Umbra seeks only peace and companionship. They are incredibly shy but deeply loving to those who show them kindness."','The shadows seem to curl in on themselves, as if embarrassed by the attention. A soft whisper drifts from the darkness: "I did not mean to disturb..."','Lilith shakes her head. "You disturb nothing, dear one. You are as much a part of this family as any of us."'],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"welcome_umbra",text:`Address the shadows directly: "You're not disturbing anything. I'm honored to meet you."`,consequence:"Direct welcome  Shows immediate acceptance",effects:[{characterId:"umbra",affectionChange:20},{characterId:"lilith",affectionChange:12}],nextScene:"umbra_grateful_response"},{id:"ask_about_eldritch_nature",text:'"What does it mean to be an eldritch entity? I want to understand."',consequence:"Seeks deeper understanding  Shows intellectual curiosity",effects:[{characterId:"umbra",affectionChange:15},{characterId:"lilith",affectionChange:10}],nextScene:"eldritch_nature_explained"},{id:"focus_on_family_aspect",text:`"I love that you've created a family here that includes everyone, regardless of their nature."`,consequence:"Appreciates inclusivity  Shows value alignment",effects:[{characterId:"lilith",affectionChange:18},{characterId:"umbra",affectionChange:12}],nextScene:"family_values_discussion"}]},{id:"umbra_touched_by_kindness",title:"A Heart of Starlight",text:['The shadows seem to shimmer with emotion, and the starlight points pulse brighter. "No one has ever... called my voice beautiful before."',`Slowly, carefully, the darkness begins to form a more defined shape - still shadow, but vaguely humanoid, with those points of light creating constellation patterns throughout their form. You can now see they're tall and graceful, their "body" composed of flowing darkness that moves like liquid night, punctuated by stars that form intricate celestial maps across their form.`,'Their "face" is the most remarkable part - a void where features should be, but filled with swirling galaxies and nebulae that create expressions of cosmic emotion. When they speak, the stars pulse in rhythm with their words.',`"I have been alone in the void between stars for eons. When I found this place, these people... it was the first time I understood what mortals call 'home.'"`,"There's such genuine warmth in their cosmic voice that you feel your heart ache for their ancient loneliness."],character:b.umbra,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_about_loneliness",text:`"That sounds incredibly lonely. I'm so glad you found a home here."`,consequence:"Empathetic response  Shows emotional understanding",effects:[{characterId:"umbra",affectionChange:25}],nextScene:"umbra_shares_deeper_feelings"},{id:"offer_companionship",text:`"You never have to be alone again. I'd love to spend time with you."`,consequence:"Companionship offer  Shows commitment to connection",effects:[{characterId:"umbra",affectionChange:30}],nextScene:"umbra_companionship_accepted"},{id:"admire_their_form",text:`"Your constellation form is absolutely beautiful. You're like living art."`,consequence:"Aesthetic appreciation  Shows wonder at their nature",effects:[{characterId:"umbra",affectionChange:20}],nextScene:"umbra_form_appreciation"}]},{id:"umbra_shares_deeper_feelings",title:"Ancient Solitude",text:[`The starlight within Umbra's form pulses with a rhythm like a heartbeat. "Loneliness... yes, that is the correct word. For eons I drifted between realms, observing but never connecting."`,'"I watched civilizations rise and fall, saw love bloom and fade, but I was always... outside. Too different, too frightening. Until I found this sanctuary."','Their form shifts closer, still respectfully distant but clearly wanting connection. "You speak of gladness, but do you truly understand what you offer? Friendship with one such as I?"',"There's vulnerability in their cosmic voice, a trembling hope that they barely dare to express."],character:b.umbra,background:"/backgrounds/grand-hall.png",choices:[{id:"affirm_friendship_completely",text:`"I understand exactly what I'm offering. True friendship, without conditions or fear."`,consequence:"Unconditional acceptance  Strongest possible bond",effects:[{characterId:"umbra",affectionChange:40}],nextScene:"umbra_overwhelming_gratitude"},{id:"want_to_learn_more",text:'"I want to understand you completely. Will you teach me about your world, your experiences?"',consequence:"Deep curiosity  Shows commitment to understanding",effects:[{characterId:"umbra",affectionChange:35}],nextScene:"umbra_shares_cosmic_stories"},{id:"promise_patience",text:'"I promise to be patient as we learn about each other. Friendship takes time to grow."',consequence:"Thoughtful approach  Shows wisdom about relationships",effects:[{characterId:"umbra",affectionChange:30}],nextScene:"umbra_appreciates_patience"}]},{id:"umbra_companionship_accepted",title:"A Bond Across Realms",text:[`The constellation patterns within Umbra's form suddenly brighten, creating what can only be described as the cosmic equivalent of a smile. "You would... truly wish to spend time with me?"`,'"I must warn you - my nature is not always... comfortable for mortals. Sometimes I forget myself and the shadows grow too deep, or the starlight becomes too bright."','They seem to gather courage from your acceptance. "But if you are willing, I would treasure every moment of companionship. I have so much to show you, so many wonders from beyond the veil."',"You sense this is a turning point - Umbra is offering to share their cosmic nature with you completely."],character:b.umbra,background:"/backgrounds/grand-hall.png",choices:[{id:"eager_for_wonders",text:`"I'm excited to see these wonders. Show me everything you're comfortable sharing."`,consequence:"Enthusiastic acceptance  Moderate sanity cost for cosmic exposure",effects:[{characterId:"umbra",affectionChange:35}],playerStatEffects:{sanityChange:-8},nextScene:"umbra_shares_cosmic_wonders"},{id:"comfort_with_nature",text:`"I'm not afraid of your true nature. Be yourself around me, always."`,consequence:"Complete acceptance  Encourages authenticity",effects:[{characterId:"umbra",affectionChange:40}],nextScene:"umbra_reveals_true_self"},{id:"mutual_sharing",text:`"I'll share my world with you too. We can learn from each other."`,consequence:"Reciprocal offer  Creates balanced relationship",effects:[{characterId:"umbra",affectionChange:32}],nextScene:"umbra_mutual_discovery"}]},{id:"umbra_form_appreciation",title:"Beauty in the Void",text:[`Umbra's constellation form shimmers and shifts, the starlight points creating new patterns like a living galaxy. "You... you see beauty in this form? Others have called it terrible, alien, wrong."`,'"I chose this manifestation because it felt most true to what I am - darkness touched by distant light, void given gentle purpose. But I worried it would frighten you."',"The patterns in their form become more intricate, more beautiful, as if your acceptance has given them permission to truly be themselves.",'"If you find beauty in what I am, perhaps... perhaps I need not hide so much of myself."'],character:b.umbra,background:"/backgrounds/grand-hall.png",choices:[{id:"encourage_authenticity",text:`"Please don't hide yourself. You're magnificent exactly as you are."`,consequence:"Encourages self-acceptance  Builds confidence",effects:[{characterId:"umbra",affectionChange:38}],nextScene:"umbra_gains_confidence"},{id:"ask_about_other_forms",text:`"Can you take other forms? I'd love to see all the ways you can exist."`,consequence:"Curious about abilities  Shows interest in their nature",effects:[{characterId:"umbra",affectionChange:25}],nextScene:"umbra_demonstrates_forms"},{id:"focus_on_essence",text:`"Your form is beautiful, but it's your gentle spirit that truly amazes me."`,consequence:"Values inner nature  Deepest appreciation",effects:[{characterId:"umbra",affectionChange:42}],nextScene:"umbra_touched_by_understanding"}]}]},{id:"chapter2",title:"The Contentious Proposal",scenes:[{id:"coven_gathering",title:"The Evening Council",text:["The great hall of Ravencroft Manor transforms as evening falls. Ancient tapestries catch the flickering candlelight, and the assembled vampires create an atmosphere of power and tension.",`You sit at the ornate table, still adjusting to your role as the new "Anchor" - the mortal link that legitimizes the coven's sanctuary. The weight of their expectations settles on your shoulders.`,'Lilith calls the meeting to order with quiet authority. "We have matters of significance to discuss tonight. The world beyond our walls continues to change, and we must decide how to respond."',"Valentina leans forward, her revolutionary fervor barely contained. Across the table, Isadora's calculating gaze suggests she anticipates conflict. The air practically crackles with unspoken disagreement."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"observe_carefully",text:"Watch the dynamics carefully before speaking.",consequence:"Analytical approach  Gathers information about coven politics",effects:[{characterId:"celeste",affectionChange:8},{characterId:"lilith",affectionChange:5}],nextScene:"valentina_proposal"},{id:"ask_about_anchor_role",text:`"What exactly does being an Anchor mean for tonight's discussion?"`,consequence:"Direct inquiry  Shows engagement with responsibilities",effects:[{characterId:"lilith",affectionChange:10},{characterId:"isadora",affectionChange:8}],nextScene:"anchor_role_explained"},{id:"address_tension",text:`"I can feel the tension in the room. Perhaps we should address what's really at stake here."`,consequence:"Confronts underlying conflict  Shows perceptiveness",effects:[{characterId:"valentina",affectionChange:12},{characterId:"raven",affectionChange:8}],nextScene:"tension_acknowledged"}]},{id:"valentina_proposal",title:"The Revolutionary Vision",text:["Valentina stands abruptly, her chair scraping against ancient stone. She's strikingly beautiful with fierce amber eyes that burn with revolutionary passion, and wild crimson curls that seem to move with their own energy. Her olive skin bears faint scars - souvenirs of countless battles fought for the marginalized.","She wears practical black leather and dark denim, clothes chosen for action rather than elegance. Her hands are calloused from real work, and when she moves, there's a coiled intensity that speaks of someone who has seen too much suffering to remain still.",`She pulls out a worn leather journal, pages filled with detailed notes and desperate sketches. "Last month, I found Maria in an alley in Barcelona. Seventeen years old, turned and abandoned. She was feeding on rats, fighting for scraps of humanity." Valentina's voice cracks slightly.`,'She spreads photographs across the table with trembling hands - surveillance shots of isolated figures in cities worldwide. "Dimitri in Prague, surviving in the sewers. Akira in Tokyo, going mad from loneliness."',`Her fierce amber eyes meet each person's gaze with burning conviction. "We sit here in luxury while our siblings die in despair. I cannot - I will not - remain comfortable while they suffer."`],character:b.valentina,background:"/backgrounds/grand-hall.png",choices:[{id:"emotional_connection",text:'"These faces... these stories... How can we sleep soundly knowing they suffer alone?"',consequence:"Emotional resonance  Connects deeply with humanitarian crisis",effects:[{characterId:"valentina",affectionChange:30},{characterId:"seraphina",affectionChange:20},{characterId:"elena",affectionChange:15},{characterId:"isadora",affectionChange:-10}],nextScene:"isadora_opposition"},{id:"analytical_approach",text:`"You've documented this thoroughly. What protocols would ensure both their safety and ours?"`,consequence:"Strategic thinking  Engages with evidence while seeking safeguards",effects:[{characterId:"valentina",affectionChange:20},{characterId:"celeste",affectionChange:18},{characterId:"raven",affectionChange:12}],nextScene:"practical_concerns"},{id:"personal_focus",text:'"Valentina, this clearly means everything to you. Tell me about your first rescue - Maria."',consequence:"Personal interest  Shows care for Valentina's individual experience",effects:[{characterId:"valentina",affectionChange:25},{characterId:"elena",affectionChange:12}],nextScene:"valentina_personal_story"},{id:"diplomatic_process",text:`"This deserves careful consideration from all perspectives. Perhaps we should hear everyone's thoughts?"`,consequence:"Diplomatic leadership  Facilitates inclusive discussion",effects:[{characterId:"lilith",affectionChange:18},{characterId:"isadora",affectionChange:15},{characterId:"celeste",affectionChange:10}],nextScene:"isadora_opposition"}]},{id:"isadora_opposition",title:"The Voice of Caution",text:["Isadora rises with the practiced grace of someone who has commanded boardrooms and salons for centuries. She's impeccably elegant - auburn hair swept into a perfect chignon, emerald eyes that miss nothing, and porcelain skin that speaks of centuries spent in luxury.","She wears a tailored ivory silk blouse and charcoal pencil skirt that cost more than most people's cars, with diamond earrings that catch the light as she tilts her head, considering her words with surgical precision. Every gesture speaks of power, wealth, and absolute control.",`"How beautifully passionate you are, Valentina," she begins, her tone warm honey over steel. "Such fire, such... conviction." The pause suggests these aren't entirely compliments.`,'She smooths an invisible wrinkle from her silk blouse with manicured fingers. "But I wonder if we might consider the more... delicate... aspects of such an endeavor?" Her smile never wavers as she delivers what amounts to a political dissection.',`Her calculating emerald gaze settles on you with practiced concern. "Our newest member has inherited such tremendous responsibility. Perhaps we shouldn't burden her with... additional complexities... quite so soon?"`],character:b.isadora,background:"/backgrounds/grand-hall.png",choices:[{id:"challenge_with_respect",text:`"I appreciate your concern for my wellbeing, but shouldn't I have a voice in decisions that affect my role here?"`,consequence:"Assertive autonomy  Claims agency while remaining respectful",effects:[{characterId:"valentina",affectionChange:25},{characterId:"lilith",affectionChange:20},{characterId:"isadora",affectionChange:-5}],nextScene:"political_divide_deepens"},{id:"acknowledge_wisdom",text:`"Your experience has clearly served this community well. I'd value learning more about what has kept everyone safe."`,consequence:"Strategic deference  Appeals to Isadora's expertise and pride",effects:[{characterId:"isadora",affectionChange:25},{characterId:"valentina",affectionChange:-8},{characterId:"celeste",affectionChange:12}],nextScene:"traditionalist_support"},{id:"propose_consultation",text:'"Perhaps we could arrange private consultations with key stakeholders before making any major decisions?"',consequence:"Political sophistication  Suggests process Isadora would approve",effects:[{characterId:"isadora",affectionChange:18},{characterId:"lilith",affectionChange:15},{characterId:"celeste",affectionChange:20}],nextScene:"private_consultations"},{id:"request_time_to_consider",text:'"This is clearly a complex issue with important implications. Could I have time to consider all perspectives?"',consequence:"Thoughtful deliberation  Shows wisdom in not rushing decisions",effects:[{characterId:"luna",affectionChange:20},{characterId:"seraphina",affectionChange:15},{characterId:"celeste",affectionChange:18}],nextScene:"strategic_patience"}]},{id:"seek_lilith_counsel",title:"Ancient Wisdom",text:["You find Lilith in her private study after the heated council session. Ancient books line the walls, and moonlight streams through tall windows as she pours two glasses of deep red wine.",`"You handled yourself well in there," she says, offering you a glass. "Though I suspect you're feeling the weight of what it means to be caught between opposing forces."`,`"I've seen this pattern before - the eternal tension between progress and preservation. Both Valentina and Isadora speak from experience, from pain. The question is: what does your heart tell you is right?"`,'She settles into a chair across from you. "As Anchor, your opinion carries more weight than you might realize. The coven will follow where you lead, for better or worse."'],character:b.lilith,background:"/backgrounds/bedroom.png",choices:[{id:"ask_lilith_preference",text:`"What would you do if you were in my position? You've led this coven for centuries."`,consequence:"Seeks experienced guidance  Shows respect for leadership",effects:[{characterId:"lilith",affectionChange:20}],nextScene:"lilith_guidance"},{id:"discuss_anchor_burden",text:`"I didn't realize how much responsibility would come with this role. How do I make decisions that affect everyone?"`,consequence:"Vulnerable admission  Shows weight of leadership",effects:[{characterId:"lilith",affectionChange:18}],nextScene:"leadership_wisdom"},{id:"ask_about_past_conflicts",text:'"Have there been similar disputes before? How did the coven resolve them?"',consequence:"Historical perspective  Learns from precedent",effects:[{characterId:"lilith",affectionChange:15}],nextScene:"historical_conflicts"}]},{id:"celeste_analysis",title:"The Scholar's Perspective",text:["You find Celeste in the library, surrounded by open books and historical documents. Maps of vampire populations and government surveillance reports cover her desk.","Celeste is strikingly intellectual - honey-blonde hair pulled back in a practical ponytail, wire-rimmed glasses perched on her nose, and intelligent hazel eyes that seem to process information faster than most people can speak. She wears a comfortable cashmere sweater and dark jeans, prioritizing function over fashion.","Her desk is meticulously organized despite the volume of research materials, and her fingers are ink-stained from hours of note-taking. Everything about her speaks of someone who finds patterns in chaos and answers in data.",`"I've been researching both sides of this debate," she says without looking up. "The data is... complex. There are 127 documented cases of newly turned vampires who disappeared in the last decade alone."`,`She finally meets your eyes with laser focus. "Valentina's compassion is admirable, but Isadora's caution is statistically justified. Every exposure event in the past century has resulted in at least a dozen vampire deaths."`,`"However," she continues, "our current isolation strategy has a 23% mortality rate among new vampires who never find guidance. We're essentially practicing selective survival - helping only those lucky enough to find us."`],character:b.celeste,background:"/backgrounds/library.png",choices:[{id:"ask_for_recommendation",text:`"Based on your research, what would you recommend? What's the optimal path forward?"`,consequence:"Values data-driven decisions  Seeks analytical guidance",effects:[{characterId:"celeste",affectionChange:25}],nextScene:"celeste_recommendation"},{id:"question_statistics",text:'"Those numbers are sobering, but can we really base life-and-death decisions purely on statistics?"',consequence:"Challenges pure logic  Values emotional/moral considerations",effects:[{characterId:"celeste",affectionChange:8},{characterId:"morgana",affectionChange:12}],nextScene:"beyond_statistics"},{id:"ask_about_alternatives",text:`"Are there other options we haven't considered? Something between isolation and active recruitment?"`,consequence:"Seeks creative solutions  Shows innovative thinking",effects:[{characterId:"celeste",affectionChange:20},{characterId:"lilith",affectionChange:10}],nextScene:"alternative_strategies"}]},{id:"final_decision_moment",title:"The Anchor's Choice",text:["The coven reassembles for your decision. The great hall feels heavier now, charged with anticipation and competing hopes. Every vampire present understands that this moment will define the future direction of their sanctuary.","Valentina sits forward, her revolutionary passion barely contained. Isadora maintains her composure, but you can see the steel in her gaze. Lilith watches you with ancient patience, while the others wait to see which direction their new Anchor will guide them.","The weight of centuries of tradition clashes with the urgency of change. Lives hang in the balance - both those within these walls and those struggling alone in the darkness beyond.","This is your moment. The coven awaits your judgment."],background:"/backgrounds/grand-hall.png",character:b.lilith,choices:[{id:"support_valentina_fully",text:`"I support Valentina's proposal. We have a moral obligation to help our kind, even if it means taking risks."`,consequence:"Revolutionary alliance  Prioritizes helping others over safety",effects:[{characterId:"valentina",affectionChange:35},{characterId:"raven",affectionChange:25},{characterId:"morgana",affectionChange:15},{characterId:"isadora",affectionChange:-25},{characterId:"luna",affectionChange:-10}],nextScene:"valentina_alliance_formed"},{id:"support_isadora_fully",text:`"Isadora is right. Our first responsibility is to protect what we've built here. We cannot risk exposure."`,consequence:"Traditionalist alliance  Prioritizes security over expansion",effects:[{characterId:"isadora",affectionChange:35},{characterId:"luna",affectionChange:25},{characterId:"elena",affectionChange:15},{characterId:"valentina",affectionChange:-25},{characterId:"raven",affectionChange:-15}],nextScene:"isadora_strategy_upheld"},{id:"propose_compromise",text:'"I propose we start small - establish one secure safe house as a trial, with strict protocols and careful screening."',consequence:"Diplomatic compromise  Balances progress with caution",effects:[{characterId:"lilith",affectionChange:25},{characterId:"celeste",affectionChange:30},{characterId:"valentina",affectionChange:15},{characterId:"isadora",affectionChange:10},{characterId:"umbra",affectionChange:20}],nextScene:"uneasy_truce"},{id:"remain_neutral",text:`"This decision is too important for me to make alone. The coven should vote, and I'll support whatever the majority decides."`,consequence:"Neutral stance  Defers to collective wisdom",effects:[{characterId:"lilith",affectionChange:-5},{characterId:"valentina",affectionChange:-10},{characterId:"isadora",affectionChange:-10},{characterId:"celeste",affectionChange:5}],nextScene:"anchor_marginalized"}]},{id:"anchor_role_explained",title:"The Weight of the Anchor",text:['Lilith turns to address you directly, her ancient eyes reflecting both warmth and gravity. "The Anchor is more than a symbolic position. You are our connection to the mortal world, our legitimacy."','"When Cordelia held this role, her judgment often swayed crucial decisions. Vampires, despite our age, can become trapped in old patterns. The Anchor provides... perspective."',`Valentina nods eagerly. "Exactly why we need fresh thinking on this proposal." Isadora's expression suggests she disagrees about what constitutes "fresh thinking."`,'Lilith continues, "Your voice carries weight precisely because you see us without centuries of baggage. But with that influence comes responsibility."'],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"accept_responsibility",text:`"I understand the weight of this role. I'm ready to help guide the coven forward."`,consequence:"Embraces leadership  Shows confidence in responsibility",effects:[{characterId:"lilith",affectionChange:15},{characterId:"valentina",affectionChange:10},{characterId:"isadora",affectionChange:8}],nextScene:"valentina_proposal"},{id:"express_uncertainty",text:`"That's a lot of pressure. I want to make the right choice, but I'm still learning about your world."`,consequence:"Honest vulnerability  Shows desire to learn",effects:[{characterId:"lilith",affectionChange:12},{characterId:"celeste",affectionChange:10}],nextScene:"gentle_guidance"},{id:"ask_for_time",text:'"Could I speak with some of you individually before the formal decision? I want to understand all perspectives."',consequence:"Thoughtful approach  Seeks comprehensive understanding",effects:[{characterId:"lilith",affectionChange:18},{characterId:"celeste",affectionChange:15}],nextScene:"private_consultations"}]},{id:"lilith_guidance",title:"The Leader's Dilemma",text:[`Lilith swirls the wine in her glass thoughtfully. "Leadership is rarely about having the right answer. It's about understanding the consequences of your choices and owning them completely."`,'"If I were making this decision..." she pauses, "I would ask myself: what kind of world do I want to leave behind? One where we survived by hiding, or one where we thrived by taking calculated risks?"','"Both Valentina and Isadora have lost people to the choices they now advocate for or against. Valentina lost her maker to isolation and despair. Isadora lost her human family to vampire hunters."',`"The question isn't what's safe or what's right - it's what you can live with, and what the coven can survive."`],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"choose_growth_over_safety",text:`"I'd rather risk everything trying to build something better than slowly die from isolation."`,consequence:"Growth mindset  Prioritizes progress over security",effects:[{characterId:"lilith",affectionChange:20},{characterId:"valentina",affectionChange:15}],nextScene:"final_decision_moment"},{id:"choose_preservation",text:'"Sometimes survival means knowing when not to act. Preservation has its own value."',consequence:"Preservation mindset  Values established stability",effects:[{characterId:"lilith",affectionChange:15},{characterId:"isadora",affectionChange:12}],nextScene:"final_decision_moment"},{id:"seek_synthesis",text:`"Maybe the answer isn't choosing between their perspectives, but finding a way to honor both."`,consequence:"Synthesis approach  Seeks to bridge divides",effects:[{characterId:"lilith",affectionChange:25},{characterId:"umbra",affectionChange:15}],nextScene:"final_decision_moment"}]},{id:"celeste_recommendation",title:"The Data-Driven Path",text:['Celeste pulls up a detailed chart on her tablet. "Based on my analysis, I recommend a phased approach. Start with digital outreach - encrypted networks, secure communication channels."',`"We could establish virtual safe spaces first, provide guidance remotely. Lower risk, high impact. If a newly turned vampire can't find physical sanctuary, at least they can find information and support."`,`"Phase two would be physical safe houses, but only after we've refined our security protocols and established proper screening procedures."`,`"The data suggests this approach has a 67% success rate with only 12% exposure risk. It's the optimal balance between Valentina's compassion and Isadora's caution."`],character:b.celeste,background:"/backgrounds/grand-hall.png",choices:[{id:"embrace_phased_approach",text:`"That's brilliant. A measured, intelligent approach that addresses both concerns."`,consequence:"Evidence-based decision  Values systematic progress",effects:[{characterId:"celeste",affectionChange:30},{characterId:"lilith",affectionChange:15}],nextScene:"final_decision_moment"},{id:"worry_about_delay",text:`"But how many vampires will die while we're implementing phases? Sometimes urgency matters more than optimization."`,consequence:"Urgency focus  Prioritizes immediate action over planning",effects:[{characterId:"valentina",affectionChange:18},{characterId:"celeste",affectionChange:5}],nextScene:"final_decision_moment"},{id:"appreciate_methodology",text:'"I appreciate the thorough analysis. This gives me a much clearer framework for making the decision."',consequence:"Values preparation  Shows respect for research",effects:[{characterId:"celeste",affectionChange:20},{characterId:"lilith",affectionChange:10}],nextScene:"final_decision_moment"}]},{id:"valentina_alliance_formed",title:"The Revolutionary Path",text:["The hall erupts in a mixture of cheers and concerned murmurs as you announce your support for Valentina's proposal. The revolutionary vampire rises, her eyes shining with vindicated passion.",`"Thank you," Valentina says, her voice thick with emotion. "You've just saved countless lives. Together, we'll build a network that ensures no vampire faces the darkness alone."`,`Isadora stands stiffly, her face a mask of controlled disappointment. "I hope you understand the magnitude of what you've just committed us to," she says before leaving the hall.`,`Lilith nods slowly. "The path is chosen. Now we must walk it carefully." You sense that your decision has fundamentally altered the coven's dynamics and your place within it.`],character:b.valentina,background:"/backgrounds/grand-hall.png",choices:[{id:"plan_immediate_action",text:`"Let's start planning immediately. What are our first steps?"`,consequence:"Action-oriented leadership  Shows commitment to implementation",effects:[{characterId:"valentina",affectionChange:20},{characterId:"raven",affectionChange:15}],nextScene:"revolutionary_planning"},{id:"address_opposition",text:`"I need to speak with Isadora. We can't move forward with the coven divided."`,consequence:"Diplomatic approach  Seeks to heal division",effects:[{characterId:"lilith",affectionChange:18},{characterId:"isadora",affectionChange:10}],nextScene:"bridging_divisions"},{id:"establish_safeguards",text:'"Before we begin, I want to establish clear protocols to minimize the risks Isadora mentioned."',consequence:"Cautious implementation  Balances progress with security",effects:[{characterId:"celeste",affectionChange:20},{characterId:"valentina",affectionChange:10}],nextScene:"careful_revolution"}]},{id:"isadora_strategy_upheld",title:"The Traditionalist Victory",text:["A wave of relief washes over the traditionalist faction as you announce your support for Isadora's cautious approach. The socialite vampire nods approvingly, vindicated in her warnings.",'"Wisdom," Isadora says with satisfaction. "True leadership recognizes that preservation of what we have is worth more than the promise of what might be."',`Valentina's face falls, her revolutionary fervor dampened but not extinguished. "I understand your caution, but I hope you can live with the consequences of inaction."`,"The coven settles into an uneasy quiet. You've chosen safety, but you can't shake the feeling that some opportunities, once missed, may never return."],character:b.isadora,background:"/backgrounds/grand-hall.png",choices:[{id:"strengthen_defenses",text:`"Let's focus on making our sanctuary even more secure and self-sufficient."`,consequence:"Security focus  Commits to fortress mentality",effects:[{characterId:"isadora",affectionChange:25},{characterId:"luna",affectionChange:15}],nextScene:"fortress_ravencroft"},{id:"console_valentina",text:`"Valentina, I hope you understand this doesn't mean we don't care about other vampires."`,consequence:"Compassionate explanation  Attempts to soften rejection",effects:[{characterId:"valentina",affectionChange:8},{characterId:"morgana",affectionChange:12}],nextScene:"gentle_traditionalism"},{id:"future_reconsideration",text:'"This is our decision for now, but we can revisit it as circumstances change."',consequence:"Flexible stance  Leaves door open for future change",effects:[{characterId:"lilith",affectionChange:15},{characterId:"celeste",affectionChange:12}],nextScene:"strategic_patience"}]},{id:"uneasy_truce",title:"The Middle Path",text:["Your compromise proposal creates a thoughtful silence in the hall. Both Valentina and Isadora consider your words, weighing the merits of a measured approach.",'"A trial period," Lilith muses. "Limited scope, careful observation. It has precedent in our history." She looks between the two factions. "This could work."',`Valentina nods slowly. "It's not everything I hoped for, but it's progress. We could save lives while proving our approach can work safely."`,'Isadora remains skeptical but concedes. "If we proceed with extreme caution and maintain strict oversight, perhaps the risks can be managed."'],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"establish_oversight_committee",text:'"I propose we form an oversight committee with representatives from both perspectives."',consequence:"Structured compromise  Creates balanced governance",effects:[{characterId:"lilith",affectionChange:20},{characterId:"celeste",affectionChange:18},{characterId:"valentina",affectionChange:12},{characterId:"isadora",affectionChange:12}],nextScene:"collaborative_governance"},{id:"volunteer_personal_oversight",text:`"I'll personally oversee the trial program to ensure it meets everyone's standards."`,consequence:"Personal responsibility  Shows hands-on leadership",effects:[{characterId:"lilith",affectionChange:25},{characterId:"valentina",affectionChange:15},{characterId:"isadora",affectionChange:10}],nextScene:"anchor_oversight"},{id:"set_clear_metrics",text:`"Let's establish clear success metrics and timeline for evaluation. Data should guide our next steps."`,consequence:"Analytical approach  Values measurable outcomes",effects:[{characterId:"celeste",affectionChange:25},{characterId:"lilith",affectionChange:15}],nextScene:"measured_progress"}]},{id:"anchor_marginalized",title:"The Neutral Ground",text:["Your decision to remain neutral creates an uncomfortable silence in the hall. The assembled vampires exchange glances, uncertain how to proceed without clear guidance from their Anchor.",`Lilith clears her throat diplomatically. "Very well. We'll proceed to a formal vote among the coven members."`,"However, you notice the subtle shift in how others regard you. By refusing to use your influence, you've inadvertently diminished it. Future discussions may proceed without as much deference to your opinion.","The vote is close but ultimately favors maintaining the status quo, leaving Valentina's proposal tabled indefinitely."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"accept_diminished_role",text:`"I understand. Perhaps it's better if the coven makes these decisions collectively."`,consequence:"Accepts reduced influence  Embraces democratic approach",effects:[{characterId:"celeste",affectionChange:8}],nextScene:"democratic_coven"},{id:"regret_neutrality",text:'"I should have taken a stand. Leadership requires making difficult choices."',consequence:"Learns from mistake  Shows growth potential",effects:[{characterId:"lilith",affectionChange:10},{characterId:"valentina",affectionChange:5}],nextScene:"leadership_lesson"},{id:"defend_neutrality",text:'"Sometimes the most important thing a leader can do is ensure all voices are heard equally."',consequence:"Defends democratic values  Maintains neutral stance",effects:[{characterId:"celeste",affectionChange:12},{characterId:"umbra",affectionChange:10}],nextScene:"principled_neutrality"}]},{id:"manor_exploration",title:"Exploring the Manor",text:["The corridors of Ravencroft Manor stretch before you, filled with centuries of history. Paintings of stern ancestors line the walls, their eyes seeming to follow your movement.","Each room tells a story - the library with its ancient tomes, the conservatory where moonlight streams through stained glass, the drawing room where shadows seem to dance.","You sense this exploration is more than curiosity. The manor itself seems to be evaluating you, determining if you're worthy of the secrets it holds."],choices:[{id:"examine_paintings",text:"Study the ancestral portraits more closely.",consequence:"Investigative approach  Shows interest in family history",effects:[{characterId:"lilith",affectionChange:10}],nextScene:"cordelia_memories"},{id:"explore_library",text:"Head to the library to examine the ancient books.",consequence:"Scholarly approach  Shows intellectual curiosity",effects:[{characterId:"celeste",affectionChange:12}],nextScene:"forbidden_knowledge_access"},{id:"visit_conservatory",text:"Enter the moonlit conservatory.",consequence:"Aesthetic appreciation  Shows sensitivity to beauty",effects:[{characterId:"elena",affectionChange:10}],nextScene:"manor_secrets"}]},{id:"worthiness_test",title:"The Test of Worth",text:["Lilith observes you carefully as the other vampires watch with varying degrees of interest and skepticism.",'"Every Anchor must prove themselves worthy of the trust we place in them," she explains. "Cordelia earned our respect through her courage, wisdom, and unwavering loyalty."','"The question is: what qualities do you possess that make you suitable to follow in her footsteps?"',"The weight of their collective gaze settles upon you. This moment will define how the coven sees you going forward."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"demonstrate_courage",text:`"I may not know everything about your world, but I'm not afraid to learn and face whatever comes."`,consequence:"Shows bravery  Willing to face unknown dangers",effects:[{characterId:"raven",affectionChange:15},{characterId:"valentina",affectionChange:12}],nextScene:"courage_recognition"},{id:"show_compassion",text:'"I believe every being deserves understanding and protection, regardless of what they are."',consequence:"Shows empathy  Values all forms of life",effects:[{characterId:"seraphina",affectionChange:18},{characterId:"morgana",affectionChange:12}],nextScene:"natural_acceptance"},{id:"offer_practical_skills",text:'"I bring fresh perspective and practical skills that could benefit everyone here."',consequence:"Pragmatic approach  Focuses on useful contributions",effects:[{characterId:"celeste",affectionChange:15},{characterId:"isadora",affectionChange:10}],nextScene:"practical_arrangements"}]},{id:"revelation_preparation",title:"Preparing for Truth",text:["The atmosphere in the room shifts as Lilith prepares to reveal the fundamental truth of what you've inherited.",`"What I'm about to tell you will change everything you thought you knew about Cordelia, about this manor, and about the world itself."`,'She pauses, studying your face. "Some mortals cannot handle the reality of our existence. Others embrace it with surprising grace."','"Tell me - are you prepared to learn truths that most humans spend their entire lives never knowing?"'],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"ready_for_truth",text:'"I need to know the truth, whatever it is. I can handle it."',consequence:"Direct acceptance  Shows mental fortitude",effects:[{characterId:"lilith",affectionChange:15}],nextScene:"arrangement_explanation"},{id:"express_nervousness",text:`"I'm nervous, but I need to understand what Cordelia was involved in."`,consequence:"Honest vulnerability  Shows courage despite fear",effects:[{characterId:"lilith",affectionChange:12},{characterId:"seraphina",affectionChange:8}],nextScene:"patient_guidance"},{id:"ask_for_support",text:'"This feels overwhelming. Will you help me understand?"',consequence:"Seeks guidance  Shows wisdom in asking for help",effects:[{characterId:"lilith",affectionChange:18},{characterId:"morgana",affectionChange:10}],nextScene:"gentle_guidance"}]},{id:"respectful_entry",title:"A Respectful Introduction",text:["You take a deep breath and step forward with careful composure, showing respect for what is clearly a significant moment.",`"I'm honored to meet you all. Cordelia spoke of her dear friends often, though I'm beginning to understand there was much she didn't tell me."`,"Your respectful approach seems to ease some of the tension in the room. Several of the assembled figures nod approvingly.",`Lilith's expression softens slightly. "Respect and humility. Cordelia chose her successor well, it seems."`],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_about_cordelia_role",text:'"Could you help me understand what role Cordelia played here?"',consequence:"Seeks understanding  Shows desire to honor legacy",effects:[{characterId:"lilith",affectionChange:15}],nextScene:"cordelia_role_detailed"},{id:"express_gratitude",text:'"Thank you for welcoming me. I hope I can live up to whatever trust you placed in her."',consequence:"Shows appreciation  Acknowledges responsibility",effects:[{characterId:"lilith",affectionChange:12},{characterId:"isadora",affectionChange:8}],nextScene:"legacy_acceptance"},{id:"observe_carefully",text:"Continue to observe and listen, letting them guide the conversation.",consequence:"Patient observation  Shows wisdom in restraint",effects:[{characterId:"celeste",affectionChange:10},{characterId:"luna",affectionChange:8}],nextScene:"coven_hierarchy_revealed"}]},{id:"gracious_apology_accepted",title:"Grace in Acceptance",text:["The tension in the room dissolves as your sincere apology is met with understanding nods.",'"No harm done," Lilith says warmly. "Your reaction was entirely natural. We forget sometimes how overwhelming our world can be to mortals."','Morgana steps forward with a gentle smile. "I remember my first encounter with the supernatural. I was terrified and fascinated in equal measure."',"Your gracious handling of an awkward moment seems to have earned you some respect among the assembled vampires."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"express_curiosity",text:`"I'm still fascinated, honestly. There's so much I want to understand."`,consequence:"Shows intellectual curiosity  Open to learning",effects:[{characterId:"celeste",affectionChange:15},{characterId:"morgana",affectionChange:10}],nextScene:"structured_education"},{id:"ask_about_morgana",text:'"Morgana, what was your first supernatural encounter like?"',consequence:"Personal interest  Builds connections through stories",effects:[{characterId:"morgana",affectionChange:18}],nextScene:"morgana_past"},{id:"show_appreciation",text:'"Thank you all for being so understanding. I promise to do better."',consequence:"Shows humility  Commits to improvement",effects:[{characterId:"lilith",affectionChange:12},{characterId:"seraphina",affectionChange:10}],nextScene:"trust_established"}]},{id:"practical_philosophy",title:"Philosophy in Practice",text:["Your practical approach to the supernatural revelation intrigues several of the vampires.",`"Interesting," Celeste observes. "Most humans either flee in terror or become obsessed with the mystical aspects. You're looking for practical applications."`,`Isadora nods approvingly. "Pragmatism is valuable. Cordelia had that same quality - she always asked 'what does this mean for daily life?' rather than getting lost in romantic notions."`,"Your grounded approach seems to resonate with the more practical-minded members of the coven."],character:b.celeste,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_about_daily_life",text:'"Exactly. How does this arrangement actually work day-to-day?"',consequence:"Practical focus  Wants concrete understanding",effects:[{characterId:"celeste",affectionChange:20},{characterId:"isadora",affectionChange:15}],nextScene:"arrangement_details"},{id:"inquire_about_cordelia",text:'"What practical challenges did Cordelia face in this role?"',consequence:"Learning from precedent  Values experience",effects:[{characterId:"lilith",affectionChange:15}],nextScene:"cordelia_challenges"},{id:"discuss_expectations",text:'"What practical expectations do you have for me as the new Anchor?"',consequence:"Direct communication  Seeks clarity on responsibilities",effects:[{characterId:"lilith",affectionChange:18},{characterId:"isadora",affectionChange:12}],nextScene:"anchor_powers_explained"}]},{id:"cordelia_memories",title:"Echoes of Cordelia",text:["As you study the ancestral portraits, one face draws your attention - a woman who bears a striking resemblance to Cordelia, painted centuries ago.",`"That's Cordelia's ancestor, Evangeline," Lilith explains, appearing beside you. "The bloodline has always had a connection to our kind."`,'"Cordelia used to stand here just as you are now, trying to understand her place in a story much larger than herself."',"The weight of inheritance feels heavier as you realize this connection spans generations."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_about_bloodline",text:`"Is there something special about Cordelia's family line?"`,consequence:"Investigates heritage  Seeks deeper understanding",effects:[{characterId:"lilith",affectionChange:15}],nextScene:"cordelia_psychic_legacy"},{id:"express_connection",text:`"I feel like I'm following in footsteps I don't fully understand yet."`,consequence:"Vulnerable admission  Shows weight of responsibility",effects:[{characterId:"lilith",affectionChange:18},{characterId:"seraphina",affectionChange:10}],nextScene:"legacy_continuation"},{id:"ask_about_cordelia_feelings",text:'"How did Cordelia handle this overwhelming sense of destiny?"',consequence:"Seeks emotional guidance  Values personal experience",effects:[{characterId:"lilith",affectionChange:20}],nextScene:"cordelia_journey"}]},{id:"arrangement_explanation",title:"The Ancient Compact",text:["Lilith settles into a chair, her ancient eyes reflecting the weight of centuries.",'"The arrangement is simple in concept, complex in practice. We are vampires - immortal, powerful, but bound by certain... limitations."','"We cannot simply exist in the modern world without legitimate connections to humanity. Cordelia provided that legitimacy."','"As our Anchor, you become the bridge between our world and yours. In return, you receive our protection, our knowledge, and our friendship."'],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_about_limitations",text:'"What kind of limitations do you face?"',consequence:"Seeks specific information  Understanding constraints",effects:[{characterId:"lilith",affectionChange:12},{characterId:"celeste",affectionChange:8}],nextScene:"protection_discussion"},{id:"inquire_about_benefits",text:'"What does this protection and knowledge actually mean?"',consequence:"Practical inquiry  Wants concrete understanding",effects:[{characterId:"lilith",affectionChange:15},{characterId:"isadora",affectionChange:10}],nextScene:"magical_education"},{id:"accept_arrangement",text:`"I understand. I'm willing to honor Cordelia's commitment."`,consequence:"Direct acceptance  Shows commitment to legacy",effects:[{characterId:"lilith",affectionChange:25},{characterId:"valentina",affectionChange:15}],nextScene:"arrangement_honored"}]},{id:"manor_secrets",title:"Hidden Depths",text:["The conservatory is breathtaking in the moonlight, but as you explore, you notice subtle details that speak of deeper mysteries.","Certain plants seem to shimmer with an otherworldly glow. Some of the architectural details don't match any historical period you recognize.","Elena appears silently beside you like a melancholy spirit. Her ash-blonde hair catches the moonlight, and her pale gray eyes hold centuries of artistic vision. Paint stains on her delicate fingers and the ethereal fragility of her movements mark her as someone who pours her immortal soul into her art.",`Her artistic eye notes your observation. "Beautiful, isn't it? And far older than it appears." She wears a simple black dress that emphasizes her translucent porcelain skin.`,'"This manor has been... modified over the centuries to serve needs beyond those of ordinary humans."'],character:b.elena,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_about_modifications",text:'"What kind of modifications? This is fascinating."',consequence:"Shows interest in supernatural architecture  Academic curiosity",effects:[{characterId:"elena",affectionChange:15},{characterId:"celeste",affectionChange:10}],nextScene:"historical_tour"},{id:"appreciate_beauty",text:`"It's incredible how beauty and mystery can coexist like this."`,consequence:"Aesthetic appreciation  Shows artistic sensitivity",effects:[{characterId:"elena",affectionChange:20},{characterId:"morgana",affectionChange:12}],nextScene:"artistic_appreciation"},{id:"express_wonder",text:'"I feel like Alice stepping through the looking glass."',consequence:"Literary reference  Shows wonder at transformation",effects:[{characterId:"elena",affectionChange:18},{characterId:"seraphina",affectionChange:10}],nextScene:"sanctuary_awakening"}]},{id:"protection_discussion",title:"Understanding Protection",text:["Lilith explains the nature of vampire limitations with careful detail.",'"We cannot easily navigate modern bureaucracy - no birth certificates, no official identities that withstand scrutiny. Cordelia provided legal legitimacy."','"More than that, she offered protection from those who would hunt us. A mortal advocate, someone who could speak for us in the human world."','"In return, we offered her knowledge of the supernatural world, protection from its dangers, and friendship that spans centuries."'],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_about_hunters",text:'"Are there really people who hunt vampires?"',consequence:"Investigates threats  Shows awareness of danger",effects:[{characterId:"raven",affectionChange:15},{characterId:"lilith",affectionChange:10}],nextScene:"danger_discussion"},{id:"understand_legitimacy",text:'"I see. You need someone who exists in official records to vouch for you."',consequence:"Grasps practical needs  Shows understanding",effects:[{characterId:"celeste",affectionChange:18},{characterId:"isadora",affectionChange:12}],nextScene:"practical_coexistence"},{id:"accept_role",text:`"I understand the responsibility. I'm willing to take it on."`,consequence:"Accepts commitment  Shows dedication",effects:[{characterId:"lilith",affectionChange:25},{characterId:"valentina",affectionChange:15}],nextScene:"acceptance_path"}]},{id:"acceptance_path",title:"The Path Forward",text:["Your acceptance creates a wave of relief and approval throughout the room.",'"Welcome, then, to our sanctuary," Lilith says formally. "You are now under our protection, and we under yours."',`Morgana steps forward with a gentle smile. "It's been too long since we've had an Anchor. The manor feels more complete already."`,"You sense this is more than just acceptance - it's the beginning of a profound transformation in your life."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_next_steps",text:'"What happens now? How do I learn what I need to know?"',consequence:"Practical focus  Ready to begin",effects:[{characterId:"celeste",affectionChange:15},{characterId:"lilith",affectionChange:12}],nextScene:"structured_education"},{id:"express_gratitude",text:`"Thank you for welcoming me. I won't let you down."`,consequence:"Shows appreciation  Commits to excellence",effects:[{characterId:"lilith",affectionChange:18},{characterId:"seraphina",affectionChange:12}],nextScene:"trust_established"},{id:"ask_about_residents",text:`"I'd love to get to know everyone better. Could you introduce me properly?"`,consequence:"Social approach  Builds relationships",effects:[{characterId:"morgana",affectionChange:15},{characterId:"elena",affectionChange:12}],nextScene:"resident_introductions"}]},{id:"proof_demanded",title:"Skeptical Inquiry",text:["Your demand for proof creates a tense moment in the room. Several vampires exchange glances.",'Raven steps forward, her predatory grace unmistakable. "Proof? How much proof do you need?"',"Her canines extend visibly, her eyes flash with an inhuman light, and shadows seem to bend around her.","The demonstration is brief but undeniable. The supernatural is real, and you're standing in a room full of it."],character:b.raven,background:"/backgrounds/grand-hall.png",choices:[{id:"accept_proof",text:`"That's... that's definitely proof. I believe you."`,consequence:"Accepts evidence  Shows adaptability",effects:[{characterId:"raven",affectionChange:12},{characterId:"lilith",affectionChange:8}],nextScene:"amazed_acceptance"},{id:"ask_for_explanation",text:'"Incredible. How is any of this possible?"',consequence:"Scientific curiosity  Seeks understanding",effects:[{characterId:"celeste",affectionChange:20},{characterId:"raven",affectionChange:8}],nextScene:"nature_explanation"},{id:"step_back_respectfully",text:`"I'm sorry I doubted you. This is just... a lot to process."`,consequence:"Apologetic response  Shows respect",effects:[{characterId:"lilith",affectionChange:15},{characterId:"seraphina",affectionChange:10}],nextScene:"patient_guidance"}]},{id:"choice_explanation",title:"Understanding Choice",text:["Lilith's expression becomes more serious as she addresses your hesitation.",'"I understand your uncertainty. This is not a decision to be made lightly, and we respect that."','"But understand this - once you know what we are, you cannot simply return to your old life unchanged. The supernatural world has revealed itself to you."','"You can choose to be part of it as our Anchor, or... we will need to discuss alternatives."'],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_about_alternatives",text:'"What alternatives are you talking about?"',consequence:"Seeks clarification  Wants full understanding",effects:[{characterId:"lilith",affectionChange:10},{characterId:"celeste",affectionChange:8}],nextScene:"provisional_agreement"},{id:"accept_responsibility",text:`"I understand. I'll honor Cordelia's commitment."`,consequence:"Accepts duty  Shows maturity",effects:[{characterId:"lilith",affectionChange:20},{characterId:"isadora",affectionChange:15}],nextScene:"arrangement_honored"},{id:"ask_for_time",text:`"Could I have some time to think about this? It's overwhelming."`,consequence:"Requests consideration  Shows thoughtfulness",effects:[{characterId:"lilith",affectionChange:15},{characterId:"luna",affectionChange:10}],nextScene:"contemplation_time"}]},{id:"practical_arrangements",title:"The Practical Reality",text:["Your offer of practical skills intrigues several of the more pragmatically minded vampires.",'Celeste nods approvingly. "Practical skills are invaluable. The modern world requires constant adaptation."',`Isadora leans forward with interest. "What specific skills do you bring? We've found that fresh perspectives on contemporary life are often our greatest asset."`,"Your practical approach seems to resonate with those who value concrete contributions over romantic notions."],character:b.celeste,background:"/backgrounds/grand-hall.png",choices:[{id:"offer_modern_knowledge",text:'"I understand modern technology, social media, contemporary culture - things that might be challenging for immortals."',consequence:"Offers modern expertise  Practical value",effects:[{characterId:"celeste",affectionChange:25},{characterId:"isadora",affectionChange:18}],nextScene:"partnership_explanation"},{id:"mention_professional_skills",text:'"I have professional experience that could help with legal and administrative needs."',consequence:"Professional competence  Addresses specific needs",effects:[{characterId:"isadora",affectionChange:22},{characterId:"lilith",affectionChange:15}],nextScene:"arrangement_details"},{id:"offer_research_abilities",text:`"I'm good at research and analysis. I could help with information gathering and problem-solving."`,consequence:"Analytical skills  Intellectual contribution",effects:[{characterId:"celeste",affectionChange:30},{characterId:"luna",affectionChange:15}],nextScene:"structured_education"}]},{id:"cordelia_journey",title:"Cordelia's Path",text:["Lilith's eyes grow distant as she recalls Cordelia's early days.",'"She struggled at first, as anyone would. The weight of responsibility, the fear of making mistakes that could endanger everyone."','"But she found her strength in connection - she learned each of our stories, understood our individual needs and fears."',`"By the end, she wasn't just our Anchor. She was family. That's what made her loss so... difficult."`],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"offer_similar_commitment",text:'"I want to follow her example. I want to be family too."',consequence:"Deep commitment  Shows desire for genuine connection",effects:[{characterId:"lilith",affectionChange:25},{characterId:"morgana",affectionChange:15}],nextScene:"family_appreciation"},{id:"ask_about_stories",text:`"Could you help me learn everyone's stories, the way she did?"`,consequence:"Follows precedent  Shows interest in individuals",effects:[{characterId:"lilith",affectionChange:20},{characterId:"seraphina",affectionChange:12}],nextScene:"individual_connections"},{id:"express_sympathy",text:`"I'm sorry for your loss. She must have meant a great deal to all of you."`,consequence:"Shows empathy  Acknowledges grief",effects:[{characterId:"lilith",affectionChange:18},{characterId:"luna",affectionChange:15}],nextScene:"shared_grief"}]},{id:"patient_courtship",title:"The Gentle Approach",text:["Morgana steps forward with a understanding smile, her artistic nature appreciating the delicate situation.",`"There's no rush," she says gently. "The most beautiful connections develop slowly, like a painting taking shape."`,`"We've waited this long for a new Anchor. We can wait a little longer for you to feel comfortable with us."`,"Her patience seems to ease some of the pressure you've been feeling."],character:b.morgana,background:"/backgrounds/grand-hall.png",choices:[{id:"appreciate_patience",text:'"Thank you. That means more than you know."',consequence:"Shows gratitude  Builds trust through patience",effects:[{characterId:"morgana",affectionChange:20},{characterId:"seraphina",affectionChange:12}],nextScene:"trust_established"},{id:"ask_about_art",text:'"You mentioned painting. Are you an artist?"',consequence:"Personal interest  Builds individual connection",effects:[{characterId:"morgana",affectionChange:25}],nextScene:"morgana_artistic_bond"},{id:"express_readiness",text:`"Actually, I think I'm ready now. Your kindness helps."`,consequence:"Overcomes hesitation  Shows positive response to care",effects:[{characterId:"morgana",affectionChange:18},{characterId:"lilith",affectionChange:12}],nextScene:"arrangement_honored"}]},{id:"morgana_past",title:"Shadows of the Past",text:["Morgana's expression becomes thoughtful, tinged with ancient sadness.",'"I was a young woman in Renaissance Italy when I encountered my first vampire. I thought I was going mad - seeing shadows move, hearing whispers in empty rooms."','"When I finally met him, he was kind but tragic. He taught me that the world held wonders and terrors beyond human imagination."','"Eventually, he offered me a choice - remain human and forget, or join him in immortality. I chose... differently than most expect."'],character:b.morgana,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_about_choice",text:'"What choice did you make? Why was it different?"',consequence:"Shows deep interest  Wants to understand her journey",effects:[{characterId:"morgana",affectionChange:22}],nextScene:"morgana_emotional_connection"},{id:"relate_to_experience",text:'"I can relate to that feeling of thinking you might be going mad."',consequence:"Shares vulnerability  Creates emotional bond",effects:[{characterId:"morgana",affectionChange:25},{characterId:"seraphina",affectionChange:10}],nextScene:"mutual_understanding"},{id:"appreciate_story",text:'"Thank you for sharing that with me. It helps me understand."',consequence:"Shows gratitude  Values personal revelation",effects:[{characterId:"morgana",affectionChange:18}],nextScene:"philosophical_discussion"}]},{id:"philosophical_discussion",title:"Questions of Existence",text:["Seraphina moves closer, her fallen angel nature drawn to deeper questions.",'"These encounters force us to confront fundamental questions about existence, purpose, the nature of good and evil."','"What does it mean to be human when you discover beings who transcend human limitations? What does it mean to be moral when the world operates by different rules?"',"Her questions hang in the air, challenging you to think beyond simple acceptance or rejection."],character:b.seraphina,background:"/backgrounds/grand-hall.png",choices:[{id:"engage_philosophically",text:`"Those are profound questions. I think morality transcends species - it's about how we treat others."`,consequence:"Philosophical depth  Shows ethical thinking",effects:[{characterId:"seraphina",affectionChange:25},{characterId:"celeste",affectionChange:15}],nextScene:"seraphina_philosophical_bond"},{id:"admit_confusion",text:`"I don't know. These questions are overwhelming, but important."`,consequence:"Honest uncertainty  Shows intellectual humility",effects:[{characterId:"seraphina",affectionChange:18},{characterId:"lilith",affectionChange:10}],nextScene:"contemplation_time"},{id:"focus_on_practical",text:'"Those are important questions, but right now I need to focus on the practical reality."',consequence:"Pragmatic approach  Prioritizes immediate needs",effects:[{characterId:"celeste",affectionChange:15},{characterId:"isadora",affectionChange:12}],nextScene:"practical_arrangements"}]},{id:"umbra_first_encounter",title:"A Shy Introduction",text:["In a corner of the room, you notice a figure that seems to be made of living shadow, with points of starlight twinkling within the darkness.","The entity notices your gaze and seems to shrink back, clearly shy and uncertain.",`"That's Umbra," Lilith explains gently. "They're... unique, even among us. An eldritch being who found sanctuary here."`,"Umbra waves tentatively, their form shifting like liquid night sky, clearly wanting to be friendly but unsure how."],character:b.umbra,background:"/backgrounds/grand-hall.png",choices:[{id:"wave_back_gently",text:"Wave back with a warm smile.",consequence:"Gentle acceptance  Shows kindness to the shy",effects:[{characterId:"umbra",affectionChange:18}],nextScene:"umbra_grateful_response"},{id:"approach_carefully",text:`Take a step closer and speak softly. "Hello, Umbra. I'm pleased to meet you."`,consequence:"Direct but gentle approach  Shows courage and kindness",effects:[{characterId:"umbra",affectionChange:25}],nextScene:"umbra_friendship_begins"},{id:"ask_lilith_quietly",text:'Whisper to Lilith: "Should I try to talk to them, or would that be overwhelming?"',consequence:"Considerate approach  Shows sensitivity to comfort levels",effects:[{characterId:"umbra",affectionChange:15},{characterId:"lilith",affectionChange:10}],nextScene:"umbra_shares_story"}]},{id:"gentle_guidance",title:"Patient Understanding",text:["Lilith's expression softens with maternal warmth as she recognizes your need for support.",`"Of course we'll help you understand. This is precisely what Cordelia meant when she said you had the right temperament for this role."`,`"Wisdom isn't about having all the answers immediately. It's about knowing when to ask for guidance and being willing to learn."`,"Her reassurance helps calm the overwhelming nature of everything you've discovered."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_about_cordelia_temperament",text:'"What did Cordelia mean about my temperament? How did she know?"',consequence:"Seeks deeper understanding  Wants to know Cordelia's reasoning",effects:[{characterId:"lilith",affectionChange:20}],nextScene:"cordelia_choice_story"},{id:"request_structured_learning",text:'"Could we approach this systematically? I learn better with structure."',consequence:"Organized approach  Shows good learning strategy",effects:[{characterId:"celeste",affectionChange:20},{characterId:"lilith",affectionChange:15}],nextScene:"structured_education"},{id:"express_gratitude_trust",text:`"Thank you for being patient with me. I want to earn the trust you're showing."`,consequence:"Shows appreciation  Commits to earning confidence",effects:[{characterId:"lilith",affectionChange:22},{characterId:"seraphina",affectionChange:12}],nextScene:"trust_established"}]},{id:"seraphina_fall_story",title:"The Fall from Grace",text:["Seraphina's expression becomes distant, touched with ancient sorrow.",'"I was once something... different. Pure, you might say. But purity without understanding is merely ignorance."','"I chose to fall, to experience the full spectrum of existence - love, loss, passion, pain. Only through understanding darkness can one truly appreciate light."',`"Now I exist between realms, neither fully divine nor wholly earthbound. It's a lonely existence, but one I chose freely."`],character:b.seraphina,background:"/backgrounds/grand-hall.png",choices:[{id:"express_admiration",text:'"That took incredible courage. You chose experience over certainty."',consequence:"Admires her choice  Shows respect for difficult decisions",effects:[{characterId:"seraphina",affectionChange:25}],nextScene:"seraphina_love_capacity"},{id:"offer_understanding",text:`"You don't have to be lonely anymore. You have family here."`,consequence:"Offers companionship  Shows empathy for isolation",effects:[{characterId:"seraphina",affectionChange:30},{characterId:"morgana",affectionChange:12}],nextScene:"spiritual_connection"},{id:"ask_about_regrets",text:'"Do you ever regret your choice?"',consequence:"Deep personal question  Shows interest in her inner life",effects:[{characterId:"seraphina",affectionChange:20}],nextScene:"seraphina_purpose_recognition"}]},{id:"mortal_love_path",title:"The Beauty of Mortality",text:["The conversation shifts to deeper themes as several vampires consider your unique perspective.",`"There's something precious about mortal love," Morgana muses. "It's intense because it's fleeting. Every moment matters because there are only so many."`,'Seraphina nods thoughtfully. "Immortal love develops differently - slowly, with the luxury of eternity. But mortal love... it burns bright and beautiful."',"Their words make you consider what you might be offering these ancient beings - not just legitimacy, but the gift of mortal perspective on love and connection."],character:b.morgana,background:"/backgrounds/grand-hall.png",choices:[{id:"embrace_mortal_perspective",text:`"Maybe that's what I can offer - a reminder of what it means to love with urgency and passion."`,consequence:"Philosophical insight  Offers unique value",effects:[{characterId:"morgana",affectionChange:25},{characterId:"seraphina",affectionChange:20}],nextScene:"love_development_path"},{id:"ask_about_immortal_love",text:'"What is immortal love like? How does it feel different?"',consequence:"Curious about their experience  Shows interest in understanding",effects:[{characterId:"seraphina",affectionChange:18},{characterId:"lilith",affectionChange:12}],nextScene:"bond_strength_explanation"},{id:"suggest_balance",text:'"Maybe we can learn from each other - the passion of mortality and the depth of immortality."',consequence:"Seeks mutual understanding  Proposes exchange of perspectives",effects:[{characterId:"morgana",affectionChange:22},{characterId:"seraphina",affectionChange:18}],nextScene:"mutual_recognition"}]},{id:"contemplation_time",title:"Time to Reflect",text:['Lilith nods with understanding. "Of course. This is not a decision to be rushed."',`"Take all the time you need. Walk the grounds, explore the manor, speak with whoever you'd like. When you're ready, we'll be here."`,"The pressure lifts from your shoulders. Having time to process everything makes the overwhelming situation feel more manageable.","You sense this patience is itself a gift - showing you the kind of consideration you could expect as part of this unusual family."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"explore_manor_alone",text:`"I'd like to explore the manor and get a feel for this place."`,consequence:"Independent exploration  Shows desire to understand environment",effects:[{characterId:"lilith",affectionChange:12}],nextScene:"manor_tour_begins"},{id:"ask_for_company",text:`"Could someone show me around? I'd like to learn more about everyone."`,consequence:"Social approach  Shows interest in building relationships",effects:[{characterId:"morgana",affectionChange:15},{characterId:"elena",affectionChange:12}],nextScene:"guided_tour"},{id:"request_quiet_conversation",text:'"Actually, could I speak with you privately, Lilith? I have some questions."',consequence:"Seeks guidance  Values leadership perspective",effects:[{characterId:"lilith",affectionChange:20}],nextScene:"private_consultations"}]},{id:"cordelia_wisdom",title:"Lessons from the Past",text:["Lilith shares more of Cordelia's wisdom as you seek to understand your role.",`"Cordelia once told me that being an Anchor wasn't about being perfect - it was about being present. Being genuinely interested in each person's story."`,`"She said the hardest part wasn't learning our supernatural natures, but remembering that underneath it all, we're still individuals with hopes, fears, and dreams."`,`"'Love them as they are,' she said, 'not as what they represent.' That's what made her special."`],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"commit_to_individual_focus",text:'"I want to know each of you as individuals. Will you help me learn your stories?"',consequence:"Personal commitment  Shows desire for genuine connection",effects:[{characterId:"lilith",affectionChange:25},{characterId:"morgana",affectionChange:15}],nextScene:"individual_connections"},{id:"ask_about_hopes_dreams",text:`"What hopes and dreams do immortals have? I'd love to understand."`,consequence:"Deep curiosity  Shows interest in their humanity",effects:[{characterId:"seraphina",affectionChange:20},{characterId:"elena",affectionChange:15}],nextScene:"philosophical_connection"},{id:"express_determination",text:`"I want to honor her memory by following her example. I'll try to love you all as you are."`,consequence:"Emotional commitment  Shows dedication to Cordelia's legacy",effects:[{characterId:"lilith",affectionChange:30},{characterId:"umbra",affectionChange:18}],nextScene:"family_appreciation"}]},{id:"trust_established",title:"Foundations of Trust",text:["Your sincere approach and willingness to learn has created a foundation of trust with the coven.",`"Trust is earned slowly and lost quickly," Lilith observes. "But you've made an excellent beginning."`,"Around the room, you see nods of approval and genuine smiles. The initial tension has transformed into cautious optimism.","You sense that while there's still much to learn and prove, you've successfully taken the first crucial steps toward acceptance."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_about_next_steps",text:'"What should I focus on learning first?"',consequence:"Practical approach  Ready to begin education",effects:[{characterId:"celeste",affectionChange:15},{characterId:"lilith",affectionChange:12}],nextScene:"structured_education"},{id:"offer_reciprocal_trust",text:'"I trust you all too. Thank you for being patient with me."',consequence:"Mutual trust  Shows appreciation for their consideration",effects:[{characterId:"lilith",affectionChange:18},{characterId:"seraphina",affectionChange:15}],nextScene:"sanctuary_commitment"},{id:"express_excitement",text:`"I'm excited to learn about all of your individual stories and interests."`,consequence:"Enthusiastic engagement  Shows genuine interest",effects:[{characterId:"morgana",affectionChange:18},{characterId:"elena",affectionChange:15}],nextScene:"individual_connections"}]},{id:"structured_education",title:"A Systematic Approach",text:["Celeste steps forward with obvious enthusiasm for organizing your education.",`"Excellent approach. I've actually prepared a comprehensive curriculum covering supernatural history, coven dynamics, and practical safety measures."`,`"We'll start with the basics - understanding different supernatural species, their strengths and limitations, and how our community functions."`,"Her systematic approach makes the overwhelming task of learning about the supernatural world feel manageable and exciting."],character:b.celeste,background:"/backgrounds/grand-hall.png",choices:[{id:"express_enthusiasm",text:`"That sounds perfect. I'm ready to be a good student."`,consequence:"Eager to learn  Shows academic enthusiasm",effects:[{characterId:"celeste",affectionChange:25}],nextScene:"magical_education"},{id:"ask_about_practical_skills",text:'"Will this include learning how to help with day-to-day challenges you face?"',consequence:"Practical focus  Shows desire to be useful",effects:[{characterId:"celeste",affectionChange:20},{characterId:"isadora",affectionChange:15}],nextScene:"practical_coexistence"},{id:"inquire_about_safety",text:'"Safety measures sound important. What kinds of dangers should I be aware of?"',consequence:"Safety conscious  Shows understanding of risks",effects:[{characterId:"celeste",affectionChange:18},{characterId:"raven",affectionChange:12}],nextScene:"danger_discussion"}]},{id:"cordelia_choice_story",title:"How Cordelia Chose You",text:["Lilith's eyes soften as she recalls Cordelia's final conversations.",`"She spoke of you often in her last months. 'There's something special about her,' she would say. 'A strength that doesn't boast, a kindness that doesn't judge.'"`,`"Cordelia had what she called 'the Sight' - not supernatural, but an ability to see people's true nature. She saw in you someone who could love us as we are."`,`"'She won't try to change us or save us,' Cordelia said. 'She'll simply accept us and help us be better versions of ourselves.'"`],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"feel_honored",text:`"I'm honored she saw that in me. I hope I can live up to her faith."`,consequence:"Humble acceptance  Shows appreciation for trust",effects:[{characterId:"lilith",affectionChange:25},{characterId:"seraphina",affectionChange:15}],nextScene:"legacy_acceptance"},{id:"ask_about_sight",text:`"Tell me more about this 'Sight' she had. Was it supernatural?"`,consequence:"Curious about abilities  Shows interest in understanding",effects:[{characterId:"lilith",affectionChange:18},{characterId:"celeste",affectionChange:12}],nextScene:"cordelia_psychic_legacy"},{id:"express_determination",text:'"I want to be the person she believed I could be. Will you help me?"',consequence:"Seeks growth  Shows commitment to becoming worthy",effects:[{characterId:"lilith",affectionChange:30},{characterId:"morgana",affectionChange:15}],nextScene:"family_appreciation"}]},{id:"morgana_emotional_connection",title:"Understanding the Choice",text:["Morgana's expression becomes deeply introspective as she continues her story.",'"I chose to remain human, but with knowledge. He offered to erase my memories, to let me return to ignorance, but I refused."','"I wanted to remember the wonder, the terror, the beauty of that otherworld. I chose to live as a bridge between realms - mortal, but aware."','"When I eventually died naturally, centuries later, I was offered vampirism as a reward for my service. By then, I understood the weight of the choice."'],character:b.morgana,background:"/backgrounds/grand-hall.png",choices:[{id:"admire_her_courage",text:'"That took incredible courage - choosing knowledge over comfortable ignorance."',consequence:"Respects difficult choices  Values truth over comfort",effects:[{characterId:"morgana",affectionChange:28},{characterId:"seraphina",affectionChange:15}],nextScene:"philosophical_connection"},{id:"relate_to_bridge_role",text:`"I think I understand that bridge feeling. That's what I'm becoming here, isn't it?"`,consequence:"Personal insight  Recognizes parallel experience",effects:[{characterId:"morgana",affectionChange:32},{characterId:"lilith",affectionChange:15}],nextScene:"mutual_understanding"},{id:"ask_about_service",text:'"What kind of service did you provide during those centuries?"',consequence:"Interested in details  Wants to understand her journey",effects:[{characterId:"morgana",affectionChange:25}],nextScene:"morgana_teaching_path"}]},{id:"morgana_artistic_bond",title:"The Artist's Soul",text:["Morgana's face lights up with genuine enthusiasm.",`"Yes, I am. Painting has been my constant companion through the centuries. It's how I process emotion, how I capture beauty, how I make sense of existence."`,`"I've painted the same sunset for five hundred years, and each time I discover something new about light, about color, about the way beauty touches the soul."`,`"Would you... would you like to see my studio? I rarely show my work to others, but something tells me you'd understand."`],character:b.morgana,background:"/backgrounds/grand-hall.png",choices:[{id:"eagerly_accept",text:'"I would love to see your work. Art that spans centuries must be extraordinary."',consequence:"Enthusiastic interest  Shows appreciation for artistic dedication",effects:[{characterId:"morgana",affectionChange:35}],nextScene:"artistic_appreciation"},{id:"ask_about_evolution",text:'"How has your art evolved over the centuries? What changes with immortal perspective?"',consequence:"Deep artistic question  Shows understanding of craft",effects:[{characterId:"morgana",affectionChange:30},{characterId:"elena",affectionChange:15}],nextScene:"creative_process_explanation"},{id:"share_art_appreciation",text:`"I've always believed art is how we touch something eternal. It must mean even more to you."`,consequence:"Philosophical art appreciation  Connects art to immortality",effects:[{characterId:"morgana",affectionChange:38},{characterId:"seraphina",affectionChange:18}],nextScene:"spiritual_connection"}]},{id:"morgana_teaching_path",title:"Guardian of Knowledge",text:["Morgana's expression becomes serious as she reflects on her mortal years.",'"I became a teacher, a guide for others who encountered the supernatural. I helped people understand that not all otherworldly beings were threats."','"I prevented witch hunts, protected innocent vampires, mediated between human and supernatural communities. It was dangerous work, but necessary."','"I learned that knowledge without wisdom is useless, but wisdom without courage is meaningless. You need all three to truly help others."'],character:b.morgana,background:"/backgrounds/grand-hall.png",choices:[{id:"express_admiration",text:`"You were protecting both sides. That's exactly what an Anchor should do."`,consequence:"Understands role parallel  Shows insight into purpose",effects:[{characterId:"morgana",affectionChange:30},{characterId:"lilith",affectionChange:20}],nextScene:"legacy_continuation"},{id:"ask_about_wisdom",text:'"How do you develop the wisdom to know when to act and when to wait?"',consequence:"Seeks practical wisdom  Values experience",effects:[{characterId:"morgana",affectionChange:25},{characterId:"celeste",affectionChange:15}],nextScene:"patience_training"},{id:"inquire_about_courage",text:'"What gave you the courage to take such risks for others?"',consequence:"Moral curiosity  Interested in motivation",effects:[{characterId:"morgana",affectionChange:28},{characterId:"valentina",affectionChange:12}],nextScene:"courage_recognition"}]},{id:"seraphina_philosophical_bond",title:"Ethics Across Realms",text:["Seraphina's eyes brighten with intellectual engagement.",`"Exactly! Morality isn't bound by species or realm. Good and evil are choices, not conditions of birth or transformation."`,`"I've seen humans commit atrocities that would shame demons, and I've known vampires whose compassion rivals angels. What matters is how we choose to use our power."`,`"The question isn't what you are, but what you do with what you are. That's why your perspective is so valuable to us."`],character:b.seraphina,background:"/backgrounds/grand-hall.png",choices:[{id:"discuss_power_responsibility",text:'"With great power comes great responsibility - that applies to everyone here."',consequence:"Ethical insight  Shows understanding of moral obligation",effects:[{characterId:"seraphina",affectionChange:32},{characterId:"lilith",affectionChange:18}],nextScene:"guardian_oath"},{id:"ask_about_fallen_perspective",text:'"What unique perspective does falling from grace give you on morality?"',consequence:"Deep philosophical question  Shows interest in her journey",effects:[{characterId:"seraphina",affectionChange:35}],nextScene:"divine_understanding"},{id:"relate_human_experience",text:'"Humans face the same struggle - we all have the capacity for good and evil."',consequence:"Common ground  Shows shared moral experience",effects:[{characterId:"seraphina",affectionChange:30},{characterId:"morgana",affectionChange:15}],nextScene:"mutual_understanding"}]},{id:"seraphina_love_capacity",title:"The Courage of Love",text:["Seraphina's expression softens with deep emotion.",'"Thank you. That choice led me to understand something profound - love requires the possibility of loss to have meaning."','"Angels love perfectly but safely, without risk. Mortals love imperfectly but courageously, despite inevitable loss. I chose to love like a mortal."','"Now I understand both kinds of love - the eternal and the ephemeral. It makes every connection precious beyond measure."'],character:b.seraphina,background:"/backgrounds/grand-hall.png",choices:[{id:"appreciate_sacrifice",text:'"You gave up perfection to gain something more beautiful - the ability to love with your whole heart."',consequence:"Deep appreciation  Understands the value of her sacrifice",effects:[{characterId:"seraphina",affectionChange:40},{characterId:"morgana",affectionChange:20}],nextScene:"spiritual_connection"},{id:"ask_about_connection",text:'"Does that mean every connection you make now carries extra weight?"',consequence:"Thoughtful question  Shows understanding of implications",effects:[{characterId:"seraphina",affectionChange:35}],nextScene:"bond_strength_explanation"},{id:"offer_mortal_love",text:'"Then maybe I can offer you something unique - the intensity of mortal love freely given."',consequence:"Romantic possibility  Offers unique gift",effects:[{characterId:"seraphina",affectionChange:45}],nextScene:"love_development_path"}]},{id:"seraphina_purpose_recognition",title:"Finding Purpose in Choice",text:["Seraphina considers your question with the gravity it deserves.",'"Regret? Sometimes. But then I remember what I gained - the ability to truly empathize with suffering, to understand the weight of moral choices."',`"I can help mortals and immortals alike because I've walked in both worlds. My fall gave me purpose: to bridge the gap between divine perfection and mortal struggle."`,'"Every choice has consequences, but some consequences become gifts if you have the wisdom to use them well."'],character:b.seraphina,background:"/backgrounds/grand-hall.png",choices:[{id:"appreciate_wisdom",text:`"That's beautiful - turning loss into purpose, pain into wisdom."`,consequence:"Philosophical appreciation  Shows understanding of growth",effects:[{characterId:"seraphina",affectionChange:35}],nextScene:"spiritual_connection"},{id:"ask_about_helping",text:'"How do you help bridge that gap? What does that look like in practice?"',consequence:"Practical interest  Wants to understand her work",effects:[{characterId:"seraphina",affectionChange:30},{characterId:"celeste",affectionChange:10}],nextScene:"seraphina_healer_introduction"},{id:"relate_to_purpose",text:`"I think that's what I'm meant to do too - bridge different worlds."`,consequence:"Personal insight  Recognizes shared mission",effects:[{characterId:"seraphina",affectionChange:40},{characterId:"lilith",affectionChange:15}],nextScene:"mutual_recognition"}]},{id:"bond_strength_explanation",title:"The Weight of Immortal Bonds",text:["Seraphina nods thoughtfully, her expression becoming more intimate.",'"Yes, exactly. When you know you have eternity, every moment of connection becomes both more precious and more carefully considered."','"Immortal relationships develop layers of depth that mortals rarely experience - centuries of shared growth, of seeing each other through countless changes."','"But they also carry the weight of permanence. When you bond with someone for eternity, every choice echoes through endless time."'],character:b.seraphina,background:"/backgrounds/bedroom.png",choices:[{id:"express_fascination",text:'"That sounds both beautiful and terrifying. The depth must be incredible."',consequence:"Appreciates complexity  Shows understanding of immortal love",effects:[{characterId:"seraphina",affectionChange:30},{characterId:"morgana",affectionChange:15}],nextScene:"love_development_path"},{id:"ask_about_mortality_advantage",text:'"What do mortal connections offer that immortal ones might lack?"',consequence:"Curious about mortality  Values mortal perspective",effects:[{characterId:"seraphina",affectionChange:28},{characterId:"lilith",affectionChange:12}],nextScene:"mortal_love_path"},{id:"wonder_about_choice",text:'"How do you choose who to bond with when the stakes are so high?"',consequence:"Deep personal question  Shows interest in her heart",effects:[{characterId:"seraphina",affectionChange:35}],nextScene:"sacrifice_understanding"}]},{id:"love_development_path",title:"The Growth of Affection",text:["The conversation has shifted to something deeper, more personal. You sense that connections are forming that go beyond simple acceptance.",`Morgana speaks softly: "There's something beautiful about watching love grow naturally, without force or expectation."`,'Seraphina adds: "The best relationships - mortal or immortal - develop when two souls recognize something in each other that complements their own journey."',"You feel the weight of possibility in the air, the sense that choices made here will echo through time."],character:b.morgana,background:"/backgrounds/grand-hall.png",choices:[{id:"embrace_possibility",text:`"I feel something growing here too. Something I didn't expect but welcome."`,consequence:"Opens to romance  Shows emotional courage",effects:[{characterId:"morgana",affectionChange:25},{characterId:"seraphina",affectionChange:25}],nextScene:"romance_deepening"},{id:"appreciate_patience",text:`"I'm grateful for the patience to let things develop naturally."`,consequence:"Values organic development  Shows emotional wisdom",effects:[{characterId:"morgana",affectionChange:20},{characterId:"seraphina",affectionChange:20}],nextScene:"mutual_recognition"},{id:"focus_on_friendship",text:`"Right now, I'm most interested in building strong friendships with everyone."`,consequence:"Friendship focus  Values platonic bonds",effects:[{characterId:"morgana",affectionChange:15},{characterId:"seraphina",affectionChange:15},{characterId:"lilith",affectionChange:10}],nextScene:"individual_connections"}]},{id:"mutual_understanding",title:"Recognition Between Souls",text:["A moment of profound understanding passes between you and the assembled vampires.",`Morgana smiles warmly: "Yes, you understand. You're becoming a bridge, just as I once was."`,'Lilith nods approvingly: "Cordelia chose well. You have the heart for this work."',"You sense that you've passed some invisible test, proven yourself worthy not through grand gestures but through genuine empathy and understanding."],character:b.morgana,background:"/backgrounds/grand-hall.png",choices:[{id:"commit_to_bridge_role",text:'"I want to be the best bridge I can be - connecting your world with mine."',consequence:"Role commitment  Shows dedication to purpose",effects:[{characterId:"morgana",affectionChange:25},{characterId:"lilith",affectionChange:20}],nextScene:"sanctuary_commitment"},{id:"ask_about_learning",text:'"Will you teach me? I want to learn how to do this right."',consequence:"Seeks guidance  Shows humility and eagerness",effects:[{characterId:"morgana",affectionChange:30},{characterId:"celeste",affectionChange:15}],nextScene:"structured_education"},{id:"express_gratitude",text:`"Thank you for seeing the potential in me. I won't let you down."`,consequence:"Shows appreciation  Commits to excellence",effects:[{characterId:"lilith",affectionChange:25},{characterId:"morgana",affectionChange:20}],nextScene:"trust_established"}]},{id:"sanctuary_commitment",title:"The Sacred Promise",text:["The atmosphere becomes more formal as Lilith steps forward.",'"Then let us make this official. You accept the role of Anchor, with all its responsibilities and privileges?"','"You swear to protect our secrets, advocate for our needs, and serve as our voice in the mortal world?"',"The weight of centuries seems to press down on this moment. You understand that your next words will bind you to something larger than yourself."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"make_solemn_vow",text:'"I swear it. I will be your Anchor, your advocate, your voice. You have my solemn promise."',consequence:"Sacred commitment  Makes binding oath",effects:[{characterId:"lilith",affectionChange:35},{characterId:"valentina",affectionChange:20},{characterId:"isadora",affectionChange:20}],nextScene:"sacred_vow_sealed"},{id:"add_personal_touch",text:`"I swear it, and more - you're not just my charges, you're my family now."`,consequence:"Emotional commitment  Promises familial bond",effects:[{characterId:"lilith",affectionChange:40},{characterId:"morgana",affectionChange:25},{characterId:"umbra",affectionChange:20}],nextScene:"family_appreciation"},{id:"acknowledge_weight",text:`"I understand the gravity of this promise. I swear to honor Cordelia's legacy and earn your trust."`,consequence:"Solemn understanding  Shows respect for tradition",effects:[{characterId:"lilith",affectionChange:30},{characterId:"isadora",affectionChange:25}],nextScene:"legacy_continuation"}]},{id:"individual_connections",title:"Getting to Know Each Soul",text:["Over the following hours, you have the opportunity to speak with each member of the coven individually.","Each conversation reveals new depths - Elena's struggle with isolation, Raven's protective instincts, Luna's prophetic burdens, Valentina's revolutionary passion.","You begin to understand that each vampire has their own story, their own pain, their own dreams for the future.","Cordelia was right - the key isn't seeing them as vampires, but as individuals who happen to be vampires."],choices:[{id:"focus_on_elena",text:"Spend more time with Elena, who seems to need connection most.",consequence:"Compassionate focus  Helps the isolated",effects:[{characterId:"elena",affectionChange:30}],nextScene:"elena_isolation_bridge"},{id:"engage_with_valentina",text:"Discuss Valentina's revolutionary ideas in depth.",consequence:"Political engagement  Shows interest in change",effects:[{characterId:"valentina",affectionChange:25}],nextScene:"valentina_war_stories"},{id:"learn_from_all",text:"Try to spend equal time getting to know everyone.",consequence:"Balanced approach  Values all equally",effects:[{characterId:"elena",affectionChange:15},{characterId:"valentina",affectionChange:15},{characterId:"raven",affectionChange:15},{characterId:"luna",affectionChange:15}],nextScene:"coven_hierarchy_revealed"}]},{id:"umbra_grateful_response",title:"A Shy Acknowledgment",text:["Umbra's form brightens noticeably as you wave back, the starlight within their shadowy form twinkling more brightly.","They seem to gain a little confidence from your friendly gesture, their form becoming slightly more solid and defined.",`Lilith smiles at the interaction. "Umbra has been with us for only a few decades. They're still learning how to interact with others."`,"Umbra makes a soft sound like distant wind chimes, which you somehow understand as a expression of gratitude."],character:b.umbra,background:"/backgrounds/grand-hall.png",choices:[{id:"encourage_further",text:"Make another encouraging gesture, perhaps a thumbs up.",consequence:"Continued encouragement  Builds confidence in the shy",effects:[{characterId:"umbra",affectionChange:20}],nextScene:"umbra_gains_confidence"},{id:"ask_about_communication",text:'Ask Lilith: "How does Umbra usually communicate?"',consequence:"Practical interest  Wants to understand communication",effects:[{characterId:"umbra",affectionChange:15},{characterId:"lilith",affectionChange:8}],nextScene:"eldritch_nature_explained"},{id:"give_space",text:"Give Umbra space but continue to include them with warm glances.",consequence:"Respectful distance  Shows understanding of shyness",effects:[{characterId:"umbra",affectionChange:18}],nextScene:"umbra_appreciates_patience"}]},{id:"sacrifice_understanding",title:"The Cost of Eternal Choice",text:["Seraphina's expression becomes deeply contemplative.",`"You choose carefully, with full knowledge of what you're committing to. Every immortal bond requires sacrifice - of independence, of the possibility of other paths."`,'"But when you find someone whose soul resonates with yours across centuries, the sacrifice becomes a gift. You give up infinite possibility for infinite depth."',`"The question isn't whether the sacrifice is worth it, but whether you're brave enough to make it."`],character:b.seraphina,background:"/backgrounds/grand-hall.png",choices:[{id:"express_courage",text:'"I think I could be that brave, for the right person."',consequence:"Shows romantic courage  Open to deep commitment",effects:[{characterId:"seraphina",affectionChange:35}],nextScene:"romance_deepening"},{id:"appreciate_depth",text:`"The idea of infinite depth with someone... that's beautiful."`,consequence:"Values deep connection  Appreciates immortal love",effects:[{characterId:"seraphina",affectionChange:30},{characterId:"morgana",affectionChange:15}],nextScene:"spiritual_connection"},{id:"ask_about_recognition",text:`"How do you know when you've found that soul resonance?"`,consequence:"Seeks understanding  Wants to recognize true connection",effects:[{characterId:"seraphina",affectionChange:32}],nextScene:"mutual_recognition"}]},{id:"romance_deepening",title:"The Dawn of Something More",text:["The air between you and certain members of the coven has shifted into something charged with possibility.",`Morgana's eyes hold yours with newfound intensity. "I feel it too - something growing between us that goes beyond friendship."`,'Seraphina steps closer, her presence both comforting and electric. "The heart knows what it knows, regardless of mortality or immortality."',"You sense you're at a crossroads where choices will determine not just alliances, but the shape of love itself."],character:b.morgana,background:"/backgrounds/grand-hall.png",choices:[{id:"embrace_morgana_connection",text:"Focus your romantic attention on Morgana.",consequence:"Romantic choice  Commits to artistic soul connection",effects:[{characterId:"morgana",affectionChange:40},{characterId:"seraphina",affectionChange:-5}],nextScene:"morgana_hope"},{id:"embrace_seraphina_connection",text:"Focus your romantic attention on Seraphina.",consequence:"Romantic choice  Commits to fallen angel connection",effects:[{characterId:"seraphina",affectionChange:40},{characterId:"morgana",affectionChange:-5}],nextScene:"heaven_memories"},{id:"explore_both_connections",text:`"I'm drawn to both of you. Is it possible to explore these feelings without choosing immediately?"`,consequence:"Polyamorous possibility  Keeps options open",effects:[{characterId:"morgana",affectionChange:25},{characterId:"seraphina",affectionChange:25}],nextScene:"creative_partnership"},{id:"step_back_for_now",text:'"These feelings are intense. I need time to understand them before making any commitments."',consequence:"Cautious approach  Values careful consideration",effects:[{characterId:"morgana",affectionChange:15},{characterId:"seraphina",affectionChange:15}],nextScene:"contemplation_time"}]},{id:"spiritual_connection",title:"Souls in Harmony",text:["A profound sense of spiritual connection washes over you. In this moment, mortal and immortal souls seem to touch something eternal.",`Seraphina's presence feels both grounding and transcendent. "This is what I hoped for when I chose to fall - genuine connection that honors both earthly and divine aspects of existence."`,"You feel as though you're experiencing a glimpse of what love might look like when freed from the constraints of single lifetimes.","The connection feels both deeply personal and somehow universal - love as a force that transcends individual existence."],character:b.seraphina,background:"/backgrounds/grand-hall.png",choices:[{id:"embrace_transcendence",text:'"This feels like touching something sacred - love as a universal force."',consequence:"Spiritual insight  Recognizes love's transcendent nature",effects:[{characterId:"seraphina",affectionChange:45},{characterId:"umbra",affectionChange:20}],nextScene:"divine_understanding"},{id:"appreciate_balance",text:`"You've found the perfect balance between divine and earthly love."`,consequence:"Appreciates her journey  Understands her achievement",effects:[{characterId:"seraphina",affectionChange:38}],nextScene:"purpose_revelation"},{id:"offer_grounding",text:'"Let me be your anchor to the earthly side of love."',consequence:"Romantic offer  Proposes complementary partnership",effects:[{characterId:"seraphina",affectionChange:42}],nextScene:"mutual_protection_bond"}]},{id:"legacy_continuation",title:"Carrying Forward Cordelia's Work",text:["Lilith's expression fills with deep satisfaction as she sees you embracing Cordelia's legacy.",'"Yes, this is exactly what she hoped for. Not just someone to replace her, but someone to carry her work forward and make it your own."','"Cordelia believed that each Anchor should bring their own gifts to the role. She was curious about what unique perspective you would offer."','"Now I see it - you have her compassion but with your own strength, her wisdom but with fresh insight."'],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"commit_to_growth",text:'"I want to honor her foundation while building something new together."',consequence:"Balanced approach  Respects past while embracing future",effects:[{characterId:"lilith",affectionChange:35},{characterId:"celeste",affectionChange:20}],nextScene:"sanctuary_responsibilities"},{id:"ask_about_unique_gifts",text:'"What unique gifts do you think I bring to this role?"',consequence:"Self-reflection  Seeks understanding of personal value",effects:[{characterId:"lilith",affectionChange:30}],nextScene:"courage_recognition"},{id:"express_determination",text:`"I'm determined to be worthy of the trust both you and Cordelia placed in me."`,consequence:"Strong commitment  Shows dedication to excellence",effects:[{characterId:"lilith",affectionChange:40},{characterId:"isadora",affectionChange:20}],nextScene:"guardian_oath"}]},{id:"family_appreciation",title:"The Bonds of Chosen Family",text:["Your declaration of familial love creates a wave of profound emotion throughout the room.",`Lilith's ancient eyes shine with unshed tears. "Family. Yes, that's exactly what we are - not bound by blood, but by choice and love."`,'Morgana steps forward impulsively and embraces you. "Welcome home, sister."',"One by one, the others approach - even shy Umbra extends a tendril of shadow in what you understand is their version of a hug."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"embrace_all",text:"Open your arms to embrace as many as possible.",consequence:"Emotional openness  Shows joy in family connection",effects:[{characterId:"lilith",affectionChange:25},{characterId:"morgana",affectionChange:30},{characterId:"umbra",affectionChange:35},{characterId:"elena",affectionChange:25}],nextScene:"new_community"},{id:"express_gratitude",text:'"Thank you for welcoming me so completely. This feels like coming home."',consequence:"Grateful appreciation  Shows emotional fulfillment",effects:[{characterId:"lilith",affectionChange:30},{characterId:"seraphina",affectionChange:20}],nextScene:"sanctuary_awakening"},{id:"make_family_vow",text:`"I promise to protect this family as fiercely as you've protected each other."`,consequence:"Protective commitment  Shows fierce family loyalty",effects:[{characterId:"lilith",affectionChange:35},{characterId:"raven",affectionChange:25}],nextScene:"guardian_training"}]},{id:"umbra_friendship_begins",title:"Kindness to the Shy",text:["Your gentle approach clearly means a great deal to Umbra. Their form becomes more defined, and you can make out what might be a face within the swirling shadows.","They make a sound like distant music - hauntingly beautiful and clearly meant as a greeting.",`Lilith translates softly: "They're saying thank you for not being afraid."`,"Umbra extends a tendril of shadow toward you, stopping just short of contact, clearly asking permission."],character:b.umbra,background:"/backgrounds/music-room.png",choices:[{id:"extend_hand",text:"Gently extend your hand toward the shadow tendril.",consequence:"Brave acceptance  Shows trust in the unknown",effects:[{characterId:"umbra",affectionChange:35}],nextScene:"umbra_reveals_true_self"},{id:"speak_to_umbra",text:`"You don't need to thank me, Umbra. Fear has no place in friendship."`,consequence:"Direct kindness  Establishes friendship foundation",effects:[{characterId:"umbra",affectionChange:30}],nextScene:"umbra_mutual_discovery"},{id:"ask_about_their_nature",text:`"Could you tell me about yourself, Umbra? I'd love to understand."`,consequence:"Genuine interest  Shows desire to know them",effects:[{characterId:"umbra",affectionChange:32}],nextScene:"eldritch_nature_explained"}]},{id:"magical_education",title:"Understanding the Supernatural",text:["Celeste leads you to the library where ancient tomes and modern research blend seamlessly.",`"The supernatural world operates by different rules than the mortal one," she explains. "Understanding these rules isn't just academic - it's survival."`,`"We'll start with the basics: different species, their abilities and limitations, how to recognize threats, and how to navigate supernatural politics."`,"The scope of knowledge seems vast, but Celeste's systematic approach makes it feel manageable."],character:b.celeste,background:"/backgrounds/library.png",choices:[{id:"focus_on_safety",text:'"I want to prioritize learning about threats and safety measures."',consequence:"Safety-conscious  Prioritizes protection",effects:[{characterId:"celeste",affectionChange:20},{characterId:"raven",affectionChange:15}],nextScene:"danger_discussion"},{id:"study_vampire_lore",text:`"I'd like to understand vampire society and culture in depth."`,consequence:"Cultural interest  Wants to understand her new family",effects:[{characterId:"celeste",affectionChange:25},{characterId:"lilith",affectionChange:15}],nextScene:"coven_hierarchy_revealed"},{id:"learn_anchor_history",text:'"Could we study the history of other Anchors? I want to learn from precedent."',consequence:"Historical approach  Values learning from experience",effects:[{characterId:"celeste",affectionChange:30}],nextScene:"cordelia_research_revealed"}]},{id:"lilith_dreams_revealed",title:"Ancient Dreams",text:["Lilith's expression becomes distant, almost vulnerable.",`"I dream sometimes of what we could become - not just as individuals, but as a community. A place where vampires don't have to hide in shadows."`,`"I dream of a time when our nature isn't seen as a curse to be cured, but as a gift to be honored. When we can contribute openly to the world."`,'"Your presence here... it feels like the first step toward making those dreams reality."'],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"share_vision",text:`"I can see that future too. Let's work together to build it."`,consequence:"Shared vision  Commits to revolutionary change",effects:[{characterId:"lilith",affectionChange:40},{characterId:"valentina",affectionChange:20}],nextScene:"sanctuary_responsibilities"},{id:"practical_steps",text:'"What would be the first practical steps toward that future?"',consequence:"Strategic thinking  Focuses on implementation",effects:[{characterId:"lilith",affectionChange:35},{characterId:"celeste",affectionChange:20}],nextScene:"gradual_integration"},{id:"express_honor",text:`"It's an honor to be part of making your dreams come true."`,consequence:"Deep respect  Shows appreciation for her vision",effects:[{characterId:"lilith",affectionChange:45}],nextScene:"mutual_recognition"}]},{id:"mutual_recognition",title:"Souls Recognizing Souls",text:["A moment of profound understanding passes between you. Time seems to slow as you truly see each other.",`Lilith speaks softly: "You see us. Not what we are, but who we are. That's rarer than you know."`,"The connection feels deeper than attraction, deeper than friendship - it's recognition at the soul level.","You sense that this moment will be remembered as a turning point, not just for you, but for everyone here."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"acknowledge_connection",text:'"And you see me too - not just my mortality, but my potential."',consequence:"Deep mutual understanding  Acknowledges soul connection",effects:[{characterId:"lilith",affectionChange:50},{characterId:"morgana",affectionChange:25}],nextScene:"sanctuary_responsibilities"},{id:"express_gratitude",text:'"Thank you for looking past the surface and seeing who I really am."',consequence:"Grateful recognition  Appreciates being truly seen",effects:[{characterId:"lilith",affectionChange:45},{characterId:"seraphina",affectionChange:20}],nextScene:"honored_trust"},{id:"offer_same_gift",text:'"I want to offer you the same gift - being seen and accepted completely."',consequence:"Reciprocal offering  Promises mutual acceptance",effects:[{characterId:"lilith",affectionChange:48},{characterId:"elena",affectionChange:25}],nextScene:"sacred_vow_sealed"}]},{id:"sanctuary_responsibilities",title:"The Weight of Guardianship",text:["Lilith's expression becomes serious as she outlines the true scope of your role.",`"Being an Anchor means more than just liaison work. You'll be responsible for the safety and wellbeing of every soul here."`,`"You'll need to make decisions that affect lives, mediate disputes, and sometimes make choices that have no perfect answer."`,`"The burden is heavy, but you won't carry it alone. We'll guide you, support you, and share the weight."`],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"accept_responsibility",text:'"I understand the weight, and I accept it willingly."',consequence:"Full commitment  Accepts all responsibilities",effects:[{characterId:"lilith",affectionChange:40},{characterId:"raven",affectionChange:25}],nextScene:"guardian_training"},{id:"ask_about_support",text:'"How will the guidance and support work in practice?"',consequence:"Practical planning  Wants clear expectations",effects:[{characterId:"lilith",affectionChange:35},{characterId:"celeste",affectionChange:20}],nextScene:"diplomatic_training"},{id:"acknowledge_trust",text:'"The fact that you trust me with this responsibility means everything."',consequence:"Appreciates trust  Shows understanding of honor",effects:[{characterId:"lilith",affectionChange:45}],nextScene:"sacred_vow_sealed"}]},{id:"creative_partnership",title:"Artistic Souls Unite",text:["Morgana's eyes light up with artistic passion as she speaks.",`"There's something I've never attempted before - a collaborative piece. Art created by mortal and immortal hands working together."`,`"I think we could create something beautiful, something that captures the essence of what we're building here."`,`"Would you... would you like to create something with me? Something that's uniquely ours?"`],character:b.morgana,background:"/backgrounds/music-room.png",choices:[{id:"eagerly_accept",text:`"Yes! I'd love to create something beautiful with you."`,consequence:"Artistic enthusiasm  Embraces creative collaboration",effects:[{characterId:"morgana",affectionChange:45}],nextScene:"creative_communion"},{id:"ask_about_vision",text:'"What did you have in mind? What would this collaboration look like?"',consequence:"Creative curiosity  Wants to understand the artistic vision",effects:[{characterId:"morgana",affectionChange:40}],nextScene:"artistic_collaboration_planned"},{id:"offer_perspective",text:`"I'd bring a mortal's perspective to immortal beauty. That could be powerful."`,consequence:"Thoughtful contribution  Understands unique value",effects:[{characterId:"morgana",affectionChange:42},{characterId:"seraphina",affectionChange:15}],nextScene:"morgana_creative_connection"}]},{id:"morgana_hope",title:"Renaissance of the Heart",text:["Morgana's face transforms with joy and renewed purpose.",`"You've given me something I thought I'd lost forever - hope. Hope for new experiences, new connections, new art."`,`"For centuries, I've been painting the same subjects, feeling the same emotions. But you... you make everything feel fresh again."`,'"I want to paint you, to capture this moment of rebirth. Not just your image, but the feeling of hope itself."'],character:b.morgana,background:"/backgrounds/grand-hall.png",choices:[{id:"offer_to_model",text:`"I'd be honored to pose for you. Capture this moment of new beginnings."`,consequence:"Intimate trust  Offers vulnerability for art",effects:[{characterId:"morgana",affectionChange:50}],nextScene:"morgana_second_performance"},{id:"suggest_collaboration",text:'"What if we painted together? You could teach me your centuries of technique."',consequence:"Creative partnership  Wants to learn and create together",effects:[{characterId:"morgana",affectionChange:45}],nextScene:"creative_process_explanation"},{id:"focus_on_feeling",text:'"Paint the hope itself - what does renewed purpose look like in color?"',consequence:"Philosophical art  Focuses on emotion over form",effects:[{characterId:"morgana",affectionChange:48},{characterId:"seraphina",affectionChange:15}],nextScene:"artistic_appreciation"}]},{id:"morgana_second_performance",title:"Capturing Lightning",text:["In Morgana's studio, surrounded by centuries of artistic achievement, you pose as she works.",`"Stay just like that - the way the light catches your eyes, the slight tilt of your head. You're radiant with possibility."`,"Her brush moves with fluid confidence, but you notice her technique is different - looser, more experimental.",`"This is the first portrait I've painted in decades where I'm not trying to capture what was, but what could be."`],character:b.morgana,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_about_change",text:`"How has your technique changed? What's different about this painting?"`,consequence:"Artistic interest  Shows understanding of creative evolution",effects:[{characterId:"morgana",affectionChange:35}],nextScene:"creative_process_explanation"},{id:"stay_perfectly_still",text:"Remain perfectly still and let her work, communicating only with your eyes.",consequence:"Perfect model  Shows dedication to the artistic process",effects:[{characterId:"morgana",affectionChange:40}],nextScene:"artistic_gratitude"},{id:"share_vulnerability",text:'"It feels vulnerable being seen so intently, but also beautiful."',consequence:"Emotional honesty  Shares intimate feelings",effects:[{characterId:"morgana",affectionChange:45}],nextScene:"mutual_protection_bond"}]},{id:"philosophical_connection",title:"Meeting of Minds",text:["The conversation has evolved into something deeper - a true meeting of philosophical minds.",'Seraphina leans forward, engaged: "You understand the paradox of choice in a way that surprises me."','Morgana adds: "Most people see choice as simple - good or bad, right or wrong. But you see the complexity."',"You realize you're being intellectually courted, your mind as much as your heart drawing them to you."],character:b.seraphina,background:"/backgrounds/grand-hall.png",choices:[{id:"explore_paradox",text:`"Every meaningful choice contains its own contradictions. That's what makes them powerful."`,consequence:"Deep philosophical insight  Shows intellectual sophistication",effects:[{characterId:"seraphina",affectionChange:40},{characterId:"morgana",affectionChange:30}],nextScene:"paradox_appreciation"},{id:"apply_to_present",text:`"Like choosing to be here - it's simultaneously terrifying and exactly right."`,consequence:"Personal application  Connects philosophy to current situation",effects:[{characterId:"seraphina",affectionChange:35},{characterId:"morgana",affectionChange:35}],nextScene:"determined_despite_fear"},{id:"appreciate_complexity",text:'"Simple answers are rarely true answers. Real truth exists in the spaces between certainties."',consequence:"Sophisticated thinking  Shows appreciation for nuance",effects:[{characterId:"seraphina",affectionChange:45},{characterId:"celeste",affectionChange:20}],nextScene:"divine_understanding"}]},{id:"silence_discussion",title:"The Comfort of Quiet Understanding",text:["You and the vampires sit in comfortable silence for a moment, each lost in thought.","Sometimes the most meaningful conversations happen in the spaces between words.",`Seraphina finally speaks: "There's wisdom in knowing when to speak and when to simply be present."`,"You feel a deep sense of belonging in this moment of shared contemplation."],character:b.seraphina,background:"/backgrounds/grand-hall.png",choices:[{id:"appreciate_silence",text:'"Some truths are too deep for words. This silence says everything."',consequence:"Philosophical appreciation  Values non-verbal communication",effects:[{characterId:"seraphina",affectionChange:30},{characterId:"morgana",affectionChange:25}],nextScene:"spiritual_awakening"},{id:"share_presence",text:"Simply nod and continue sharing the peaceful moment.",consequence:"Comfortable presence  Shows ability to be still",effects:[{characterId:"seraphina",affectionChange:25},{characterId:"umbra",affectionChange:20}],nextScene:"mutual_protection_bond"},{id:"express_gratitude_quietly",text:'Whisper: "Thank you for teaching me the value of quiet togetherness."',consequence:"Gentle appreciation  Shows learning from the moment",effects:[{characterId:"seraphina",affectionChange:35}],nextScene:"honored_trust"}]},{id:"artistic_gratitude",title:"A Model's Grace",text:["As Morgana finishes the portrait session, she sets down her brush with reverent care.",'"Thank you. Not just for posing, but for inspiring me to see beauty in new ways."',`"You've reminded me that art isn't just about capturing what exists, but about revealing what's possible."`,"She turns the easel toward you, revealing a painting that somehow captures not just your appearance but your essence."],character:b.morgana,background:"/backgrounds/grand-hall.png",choices:[{id:"marvel_at_painting",text:`"It's beautiful. You've captured something I didn't even know was there."`,consequence:"Artistic appreciation  Recognizes deeper truth in art",effects:[{characterId:"morgana",affectionChange:40}],nextScene:"beauty_acknowledged"},{id:"focus_on_artist",text:'"The real art is in your vision. You see possibilities everywhere."',consequence:"Artist appreciation  Values her creative vision",effects:[{characterId:"morgana",affectionChange:45}],nextScene:"artistic_appreciation"},{id:"suggest_future_sessions",text:`"I'd love to pose for you again. We could explore different emotions, different moments."`,consequence:"Ongoing collaboration  Commits to artistic partnership",effects:[{characterId:"morgana",affectionChange:50}],nextScene:"creative_communion"}]},{id:"mutual_protection_bond",title:"Shields for Each Other",text:["A profound understanding passes between you about the nature of protection and vulnerability.",`Seraphina speaks softly: "True strength isn't about being invulnerable. It's about choosing to be vulnerable with the right people."`,"You feel the weight of mutual trust - they're offering to protect you, and you're offering the same in return.","This isn't just about physical safety, but about protecting each other's hearts, dreams, and very souls."],character:b.seraphina,background:"/backgrounds/grand-hall.png",choices:[{id:"vow_protection",text:'"I vow to protect what matters most to you, as you protect what matters to me."',consequence:"Sacred vow  Makes profound commitment",effects:[{characterId:"seraphina",affectionChange:45},{characterId:"lilith",affectionChange:25}],nextScene:"bond_protection_vow"},{id:"acknowledge_vulnerability",text:`"Being vulnerable with you feels safe. That's the most precious gift."`,consequence:"Emotional honesty  Acknowledges the gift of safety",effects:[{characterId:"seraphina",affectionChange:40},{characterId:"morgana",affectionChange:20}],nextScene:"comfort_accepted"},{id:"promise_support",text:`"Whatever challenges come, we'll face them together. You're not alone anymore."`,consequence:"Supportive commitment  Promises ongoing presence",effects:[{characterId:"seraphina",affectionChange:42},{characterId:"elena",affectionChange:25}],nextScene:"shared_grief"}]},{id:"purpose_revelation",title:"Understanding True Calling",text:["In this moment of connection, you begin to understand your true purpose here.","It's not just about being an Anchor or a liaison - it's about being a catalyst for growth, healing, and hope.",`Lilith observes: "You're beginning to see it, aren't you? Your real role here?"`,"You realize that your purpose is to help each of them become the best version of themselves while growing into your own potential."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"embrace_catalyst_role",text:`"I'm here to help everyone grow, including myself. We'll transform together."`,consequence:"Purpose clarity  Accepts role as catalyst for growth",effects:[{characterId:"lilith",affectionChange:45},{characterId:"seraphina",affectionChange:25}],nextScene:"transformation_education_detailed"},{id:"focus_on_healing",text:`"I think I'm meant to help heal old wounds and create new possibilities."`,consequence:"Healing focus  Understands therapeutic role",effects:[{characterId:"lilith",affectionChange:40},{characterId:"elena",affectionChange:30}],nextScene:"seraphina_healer_introduction"},{id:"acknowledge_reciprocity",text:`"The beautiful thing is that as I help you grow, you're helping me discover who I'm meant to be."`,consequence:"Mutual growth  Recognizes reciprocal development",effects:[{characterId:"lilith",affectionChange:50},{characterId:"morgana",affectionChange:25}],nextScene:"living_testament"}]},{id:"determined_despite_fear",title:"Courage in the Face of Unknown",text:["You acknowledge the fear that accompanies this momentous choice, but your determination remains unshaken.",`Morgana nods approvingly: "True courage isn't the absence of fear - it's choosing to act despite being afraid."`,`Seraphina adds: "Fear can be wisdom. It means you understand the magnitude of what you're choosing."`,"Your willingness to proceed despite uncertainty speaks to your character in ways that impress them deeply."],character:b.morgana,background:"/backgrounds/grand-hall.png",choices:[{id:"acknowledge_growth",text:`"Fear means I'm growing. I'd rather grow with you than stay safe alone."`,consequence:"Growth mindset  Chooses development over comfort",effects:[{characterId:"morgana",affectionChange:40},{characterId:"seraphina",affectionChange:35}],nextScene:"courage_recognition"},{id:"express_trust",text:`"I trust you enough to face my fears. That's what love means to me."`,consequence:"Trust declaration  Connects fear-facing with love",effects:[{characterId:"morgana",affectionChange:45},{characterId:"seraphina",affectionChange:40}],nextScene:"spiritual_awakening"},{id:"focus_on_potential",text:`"The fear is temporary, but the potential we're creating together is eternal."`,consequence:"Future focus  Values long-term possibility over short-term fear",effects:[{characterId:"morgana",affectionChange:42},{characterId:"lilith",affectionChange:25}],nextScene:"new_memory_creation"}]},{id:"wider_world_discussion",title:"Beyond the Manor Walls",text:["The conversation turns to the broader implications of your presence and role.",'Celeste speaks thoughtfully: "Your work here will eventually extend beyond Ravencroft. Other supernatural communities need advocates too."',`Lilith adds: "You're not just our Anchor - you're potentially a bridge between the human and supernatural worlds."`,"The scope of what you're stepping into becomes clear: this is about changing the world, one relationship at a time."],character:b.celeste,background:"/backgrounds/grand-hall.png",choices:[{id:"embrace_larger_mission",text:`"If I can help create understanding between our worlds, that's worth any challenge."`,consequence:"Global vision  Accepts broader mission",effects:[{characterId:"celeste",affectionChange:40},{characterId:"lilith",affectionChange:30}],nextScene:"diplomatic_training"},{id:"start_with_foundation",text:`"Let's build a strong foundation here first, then expand our influence gradually."`,consequence:"Strategic approach  Values solid foundations",effects:[{characterId:"celeste",affectionChange:35},{characterId:"isadora",affectionChange:25}],nextScene:"gradual_integration"},{id:"ask_about_other_communities",text:'"Tell me about these other supernatural communities. What challenges do they face?"',consequence:"Knowledge seeking  Shows interest in broader supernatural world",effects:[{characterId:"celeste",affectionChange:45}],nextScene:"forbidden_knowledge_access"}]},{id:"cordelia_letters",title:"Messages from the Past",text:["Lilith produces a small bundle of letters tied with a faded ribbon.",'"Cordelia left these for you. She wrote them during her final months, hoping to guide you when you arrived."',`The letters are addressed simply: "To My Successor" in Cordelia's elegant handwriting.`,"You sense that these contain not just practical advice, but emotional wisdom from someone who walked this path before you."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"read_immediately",text:`"I'd like to read them now, if that's alright."`,consequence:"Immediate engagement  Shows eagerness for guidance",effects:[{characterId:"lilith",affectionChange:30}],nextScene:"cordelia_love_story"},{id:"save_for_private_moment",text:`"I'd prefer to read these in private, to properly honor her words."`,consequence:"Respectful approach  Values intimate connection with Cordelia's memory",effects:[{characterId:"lilith",affectionChange:35}],nextScene:"cordelia_challenges"},{id:"ask_about_writing_them",text:'"What was she feeling when she wrote these? What did she want me to know?"',consequence:"Emotional insight  Seeks understanding of Cordelia's intentions",effects:[{characterId:"lilith",affectionChange:40}],nextScene:"cordelia_psychic_legacy"}]},{id:"reassurance_offered",title:"Calming Worried Hearts",text:["You notice signs of concern and uncertainty among some of the vampires, and you feel moved to offer reassurance.","Elena looks particularly anxious, while even confident Valentina seems to have questions in her eyes.",`"I know this is new for all of us," you say gently. "But we'll figure it out together."`,"Your words carry a calm authority that surprises even you - perhaps you're growing into your role already."],choices:[{id:"address_elena_directly",text:`Focus on Elena: "You don't have to carry your worries alone anymore."`,consequence:"Compassionate focus  Addresses individual needs",effects:[{characterId:"elena",affectionChange:35}],nextScene:"elena_comfort_accepted"},{id:"reassure_everyone",text:`"We're building something beautiful here. Trust the process."`,consequence:"General reassurance  Instills confidence in the group",effects:[{characterId:"elena",affectionChange:20},{characterId:"valentina",affectionChange:15},{characterId:"umbra",affectionChange:25}],nextScene:"new_community"},{id:"acknowledge_challenges",text:`"Change is scary, but it's also how we grow. We'll face challenges together."`,consequence:"Realistic optimism  Acknowledges difficulties while maintaining hope",effects:[{characterId:"elena",affectionChange:25},{characterId:"valentina",affectionChange:20}],nextScene:"sanctuary_challenges"}]},{id:"protection_details",title:"Understanding the Dangers",text:["Raven steps forward, her protective instincts evident.",`"The supernatural world has threats you need to understand - rival covens, hunters, rogue vampires who don't respect our code."`,'"Some see Anchors as valuable assets to capture or eliminate. Others view mortal advocates as abominations."','"But knowledge is your best protection. Understanding threats helps you avoid them."'],character:b.raven,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_about_hunters",text:'"Tell me about these hunters. How do I recognize them?"',consequence:"Practical caution  Seeks threat identification skills",effects:[{characterId:"raven",affectionChange:30}],nextScene:"threat_assessment"},{id:"inquire_about_rivals",text:'"What makes other covens see us as threats?"',consequence:"Political awareness  Understands supernatural politics",effects:[{characterId:"raven",affectionChange:25},{characterId:"celeste",affectionChange:15}],nextScene:"coven_hierarchy_revealed"},{id:"focus_on_preparation",text:'"How can I best prepare myself to handle these dangers?"',consequence:"Proactive approach  Focuses on personal readiness",effects:[{characterId:"raven",affectionChange:35}],nextScene:"guardian_training"}]},{id:"transformation_ritual_begins",title:"The Sacred Threshold",text:["The atmosphere becomes charged with ancient power as preparations begin for a profound transformation.","This isn't the vampiric transformation - that remains far in the future - but something deeper: the formal binding of your role as Anchor.",'Lilith speaks with ceremonial gravity: "This ritual will awaken your latent abilities and officially connect you to our sanctuary."',"You feel the weight of history in this moment, knowing that few mortals have ever undergone this sacred process."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"embrace_transformation",text:`"I'm ready. Let's begin the ritual."`,consequence:"Full commitment  Embraces sacred transformation",effects:[{characterId:"lilith",affectionChange:45}],nextScene:"anchor_powers_explained"},{id:"ask_about_abilities",text:'"What abilities will this awaken? What should I expect?"',consequence:"Informed consent  Seeks understanding before proceeding",effects:[{characterId:"lilith",affectionChange:40},{characterId:"celeste",affectionChange:20}],nextScene:"transformation_education_detailed"},{id:"request_delay",text:'"This feels rushed. Can we take more time to prepare?"',consequence:"Cautious approach  Values careful preparation",effects:[{characterId:"lilith",affectionChange:30},{characterId:"isadora",affectionChange:25}],nextScene:"transformation_delayed"}]},{id:"transformation_delayed",title:"Wisdom in Patience",text:["Lilith nods approvingly at your request for more time.",'"Wisdom. The ritual has waited centuries for the right person - it can wait a bit longer for the right moment."','"Use this time to deepen your understanding, strengthen your connections, and prepare your heart and mind."',`"When you're truly ready, the transformation will be all the more powerful for the preparation."`],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"focus_on_relationships",text:'"I want to strengthen my bonds with everyone here first."',consequence:"Relationship priority  Values personal connections",effects:[{characterId:"lilith",affectionChange:35},{characterId:"morgana",affectionChange:25}],nextScene:"individual_connections"},{id:"pursue_education",text:'"I need to learn more about supernatural law and customs."',consequence:"Knowledge seeking  Prioritizes education",effects:[{characterId:"lilith",affectionChange:30},{characterId:"celeste",affectionChange:35}],nextScene:"diplomatic_training"},{id:"explore_abilities",text:'"I want to understand what abilities I might gain."',consequence:"Self-awareness  Seeks understanding of potential",effects:[{characterId:"lilith",affectionChange:40}],nextScene:"anchor_powers_explained"}]},{id:"transformation_education_detailed",title:"The Anchor's Awakening",text:["Celeste joins Lilith to explain the transformation process in detail.",'"The ritual awakens dormant psychic abilities - enhanced empathy, supernatural awareness, protective instincts."',`"You'll be able to sense the emotional states of those you're bonded to, detect supernatural threats, and project calming influence."`,`"Most importantly, you'll develop an unbreakable connection to this sanctuary and everyone in it."`],character:b.celeste,background:"/backgrounds/grand-hall.png",choices:[{id:"express_enthusiasm",text:'"These abilities sound like exactly what I need to protect everyone."',consequence:"Protective focus  Excited about guardian abilities",effects:[{characterId:"celeste",affectionChange:35},{characterId:"raven",affectionChange:25}],nextScene:"guardian_training"},{id:"ask_about_empathy",text:'"The enhanced empathy intrigues me. How does that work?"',consequence:"Emotional intelligence  Interested in connection abilities",effects:[{characterId:"celeste",affectionChange:40},{characterId:"seraphina",affectionChange:20}],nextScene:"psychic_training_offered"},{id:"consider_responsibility",text:'"An unbreakable connection sounds like a profound responsibility."',consequence:"Serious consideration  Understands weight of commitment",effects:[{characterId:"celeste",affectionChange:45},{characterId:"lilith",affectionChange:25}],nextScene:"bond_protection_vow"}]},{id:"creative_communion",title:"Art as Connection",text:["In Morgana's studio, you work together on the collaborative piece.","Your hands move in harmony - her immortal skill guiding your mortal passion, your fresh perspective inspiring her ancient wisdom.",'"This is what I hoped for," Morgana whispers. "Art as a bridge between worlds, between souls."',"The painting emerges as something neither of you could have created alone - uniquely beautiful and profound."],character:b.morgana,background:"/backgrounds/grand-hall.png",choices:[{id:"marvel_at_collaboration",text:`"It's incredible how our different perspectives create something greater."`,consequence:"Collaborative insight  Appreciates synergy",effects:[{characterId:"morgana",affectionChange:45}],nextScene:"artistic_appreciation"},{id:"suggest_series",text:'"We should create a whole series - exploring different themes together."',consequence:"Artistic commitment  Proposes ongoing partnership",effects:[{characterId:"morgana",affectionChange:50}],nextScene:"artistic_collaboration_planned"},{id:"focus_on_meaning",text:`"This painting captures the essence of what we're building here."`,consequence:"Symbolic understanding  Sees deeper meaning",effects:[{characterId:"morgana",affectionChange:48},{characterId:"lilith",affectionChange:20}],nextScene:"living_testament"}]},{id:"honored_trust",title:"Sacred Confidence",text:["The weight of the trust being placed in you settles over your shoulders like a mantle.",'Lilith speaks with quiet intensity: "You hold our secrets, our hopes, our very lives in your hands now."',`"This trust isn't given lightly. It's earned through character, proven through action, and sealed through love."`,"You understand that this moment marks your true acceptance into their inner circle."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"vow_secrecy",text:`"Your secrets are safe with me. I'll guard them as fiercely as I guard your lives."`,consequence:"Sacred vow  Commits to absolute discretion",effects:[{characterId:"lilith",affectionChange:45},{characterId:"isadora",affectionChange:25}],nextScene:"sacred_vow_sealed"},{id:"acknowledge_honor",text:`"I'm honored beyond words. This trust means everything to me."`,consequence:"Humble gratitude  Shows appreciation for privilege",effects:[{characterId:"lilith",affectionChange:40},{characterId:"morgana",affectionChange:20}],nextScene:"family_consideration"},{id:"promise_worthiness",text:'"I promise to prove worthy of this trust every single day."',consequence:"Daily commitment  Vows ongoing worthiness",effects:[{characterId:"lilith",affectionChange:50}],nextScene:"guardian_oath"}]},{id:"creative_process_explanation",title:"The Evolution of Art",text:["Morgana sets down her brush and looks at you with deep thoughtfulness.",'"My art has evolved through three distinct phases across the centuries - technical mastery, emotional exploration, and now... collaborative discovery."',`"You've introduced something I'd never experienced - the joy of creating with someone whose perspective complements and challenges mine."`,`"This isn't just about painting anymore. It's about building something beautiful together."`],character:b.morgana,background:"/backgrounds/grand-hall.png",choices:[{id:"appreciate_evolution",text:`"It's beautiful how you've grown as an artist. Each phase built on the last."`,consequence:"Growth appreciation  Values artistic development",effects:[{characterId:"morgana",affectionChange:35}],nextScene:"artistic_appreciation"},{id:"focus_on_collaboration",text:`"I love that we're discovering this collaborative phase together."`,consequence:"Partnership focus  Values shared discovery",effects:[{characterId:"morgana",affectionChange:45}],nextScene:"morgana_creative_connection"},{id:"expand_beyond_art",text:`"Building something beautiful together - that applies to more than just art, doesn't it?"`,consequence:"Deeper meaning  Sees broader implications",effects:[{characterId:"morgana",affectionChange:50}],nextScene:"memory_sharing"}]},{id:"spiritual_awakening",title:"Touching the Divine",text:["In this moment of profound connection, you feel something awakening within you - not supernatural powers, but spiritual awareness.",`Seraphina's presence seems to glow with gentle light. "You're beginning to touch something eternal - love that transcends mortality."`,'"This is what I gave up my wings for - the ability to experience the sacred through imperfect, mortal love."',"You feel as though you're glimpsing what divine love might look like when filtered through human hearts."],character:b.seraphina,background:"/backgrounds/grand-hall.png",choices:[{id:"embrace_transcendence",text:'"I can feel it - love as something larger than ourselves, connecting us to everything."',consequence:"Spiritual insight  Experiences transcendent love",effects:[{characterId:"seraphina",affectionChange:50},{characterId:"umbra",affectionChange:25}],nextScene:"divine_understanding"},{id:"appreciate_her_sacrifice",text:`"Your sacrifice gave you the ability to show others this beauty. That's incredibly generous."`,consequence:"Gratitude for sacrifice  Appreciates her gift to others",effects:[{characterId:"seraphina",affectionChange:45}],nextScene:"purpose_revelation"},{id:"offer_to_explore_together",text:'"Will you help me explore this spiritual connection? I want to understand it fully."',consequence:"Spiritual partnership  Seeks guided exploration",effects:[{characterId:"seraphina",affectionChange:48}],nextScene:"heaven_memories"}]},{id:"heaven_memories",title:"Echoes of Paradise",text:["Seraphina's eyes become distant, reflecting memories of celestial realms.",'"Heaven was... perfect. Too perfect. Every emotion measured, every love calculated for maximum divine efficiency."','"I remember the music of the spheres, light that sang, beauty that existed only to glorify. But no surprise, no growth, no discovery."','"Falling gave me the gift of imperfection - the ability to love messily, completely, surprisingly."'],character:b.seraphina,background:"/backgrounds/music-room.png",choices:[{id:"appreciate_imperfection",text:'"Imperfect love sounds more real, more valuable than perfect love."',consequence:"Values authenticity  Appreciates genuine emotion",effects:[{characterId:"seraphina",affectionChange:45}],nextScene:"flight_memories"},{id:"ask_about_music",text:'"What did the music of the spheres sound like?"',consequence:"Curious about divine experience  Wants to understand her past",effects:[{characterId:"seraphina",affectionChange:35}],nextScene:"memory_sharing"},{id:"offer_new_memories",text:'"Let me help you create new memories that are beautiful in their imperfection."',consequence:"Romantic offer  Proposes creating beautiful experiences together",effects:[{characterId:"seraphina",affectionChange:50}],nextScene:"new_memory_creation"}]},{id:"comfort_accepted",title:"Finding Solace",text:["You allow yourself to accept the comfort being offered, recognizing that vulnerability can be a strength.","Seraphina wraps you in a gentle embrace that feels both protective and empowering.",`"Accepting comfort doesn't make you weak," she murmurs. "It makes you human in the most beautiful way."`,"You feel your defenses softening, allowing deeper connections to form."],character:b.seraphina,background:"/backgrounds/grand-hall.png",choices:[{id:"express_gratitude",text:`"Thank you for teaching me that it's okay to need comfort sometimes."`,consequence:"Emotional growth  Learns to accept support",effects:[{characterId:"seraphina",affectionChange:40}],nextScene:"shared_grief"},{id:"offer_reciprocal_comfort",text:'"I want to offer you the same comfort when you need it."',consequence:"Mutual support  Proposes reciprocal care",effects:[{characterId:"seraphina",affectionChange:45}],nextScene:"mutual_protection_bond"},{id:"acknowledge_trust",text:`"Being vulnerable with you feels safe. That's a precious gift."`,consequence:"Trust recognition  Values emotional safety",effects:[{characterId:"seraphina",affectionChange:42}],nextScene:"trust_acknowledged"}]},{id:"cordelia_challenges",title:"The Weight of Legacy",text:["Reading Cordelia's letters privately, you discover the challenges she faced in her role.",'"Some days the burden felt overwhelming," one letter reads. "Balancing their needs with the outside world, protecting secrets while advocating for change."',`"But remember - you're not meant to be perfect. You're meant to be present, to care, to try. That's enough."`,"Her words offer both warning and comfort about the path ahead."],choices:[{id:"accept_imperfection",text:"Take comfort in her message about not needing to be perfect.",consequence:"Self-acceptance  Embraces human limitations",effects:[{characterId:"lilith",affectionChange:25},{characterId:"elena",affectionChange:20}],nextScene:"patient_guidance"},{id:"prepare_for_challenges",text:"Use her warnings to better prepare for future difficulties.",consequence:"Strategic preparation  Learns from her experience",effects:[{characterId:"celeste",affectionChange:30},{characterId:"raven",affectionChange:20}],nextScene:"sanctuary_challenges"},{id:"seek_support",text:"Resolve to lean on the coven when challenges arise.",consequence:"Community reliance  Values collective support",effects:[{characterId:"lilith",affectionChange:30},{characterId:"morgana",affectionChange:20}],nextScene:"shared_grief"}]},{id:"sanctuary_awakening",title:"The Manor Responds",text:["As your connection to the sanctuary deepens, you begin to feel the manor itself responding to your presence.","Doors open more easily, rooms feel warmer, shadows seem less threatening.",'Lilith notices: "The house recognizes you now. Ravencroft itself accepts you as its guardian."',"You sense that the very walls have memories, and you're now part of their continuing story."],character:b.lilith,background:"/backgrounds/gothic-manor-entrance.png",choices:[{id:"embrace_connection",text:'"I can feel it too. This place is becoming part of me."',consequence:"Spiritual connection  Accepts bond with sanctuary",effects:[{characterId:"lilith",affectionChange:40},{characterId:"umbra",affectionChange:25}],nextScene:"anchor_powers_explained"},{id:"ask_about_memories",text:'"What memories do these walls hold? What stories can they tell?"',consequence:"Historical curiosity  Interested in manor's past",effects:[{characterId:"lilith",affectionChange:35},{characterId:"celeste",affectionChange:20}],nextScene:"historical_tour"},{id:"promise_protection",text:'"I promise to protect this sanctuary as it protects all of you."',consequence:"Guardian vow  Commits to sanctuary protection",effects:[{characterId:"lilith",affectionChange:45}],nextScene:"guardian_oath"}]},{id:"anchor_powers_explained",title:"The Gifts of Connection",text:["Celeste guides you through understanding your developing abilities.",`"Anchor powers aren't about control - they're about connection. You'll sense when someone you're bonded to is in distress."`,'"You can project calm in moments of crisis, share strength when others are weak, and serve as an emotional anchor in storms."','"Most importantly, you become a living bridge between the mortal and immortal worlds."'],character:b.celeste,background:"/backgrounds/grand-hall.png",choices:[{id:"test_abilities",text:'"Can we practice? I want to understand how these abilities work."',consequence:"Practical learning  Wants hands-on experience",effects:[{characterId:"celeste",affectionChange:35}],nextScene:"psychic_training_offered"},{id:"focus_on_responsibility",text:'"The responsibility of being an emotional anchor feels profound."',consequence:"Serious consideration  Understands weight of role",effects:[{characterId:"celeste",affectionChange:40},{characterId:"lilith",affectionChange:20}],nextScene:"guardian_training"},{id:"embrace_bridge_role",text:`"Being a bridge between worlds - that's exactly what I want to be."`,consequence:"Role acceptance  Embraces connection purpose",effects:[{characterId:"celeste",affectionChange:45}],nextScene:"diplomatic_training"}]},{id:"sacred_vow_sealed",title:"The Binding of Souls",text:["The formal ceremony reaches its crescendo as your vow is sealed.","Ancient words are spoken, candles flicker in a wind that touches only this room, and you feel something fundamental shift within you.",'Lilith places her hands on your shoulders: "By blood, by choice, by love - you are bound to us as we are bound to you."',"The connection settles into your bones, your breath, your heartbeat. You are no longer merely visiting - you belong."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"embrace_belonging",text:`"I feel it - the belonging, the connection. I'm home."`,consequence:"Complete acceptance  Fully embraces belonging",effects:[{characterId:"lilith",affectionChange:50},{characterId:"morgana",affectionChange:30}],nextScene:"new_community"},{id:"acknowledge_transformation",text:'"I can feel myself changing, becoming something more than I was."',consequence:"Transformation awareness  Recognizes personal growth",effects:[{characterId:"lilith",affectionChange:45},{characterId:"seraphina",affectionChange:25}],nextScene:"transformation_celebration"},{id:"vow_service",text:'"I vow to serve this family and this sanctuary with everything I have."',consequence:"Service commitment  Dedicates self to family",effects:[{characterId:"lilith",affectionChange:55}],nextScene:"guardian_oath"}]},{id:"guardian_training",title:"Learning to Protect",text:["Raven takes charge of your protection training, her intensity both intimidating and reassuring.",`"Protection isn't just about physical defense," she explains. "It's about awareness, preparation, and knowing when to fight and when to flee."`,`"You'll learn to read supernatural signatures, recognize threats before they escalate, and coordinate our defenses."`,"The training is rigorous but necessary - lives depend on your competence."],character:b.raven,background:"/backgrounds/grand-hall.png",choices:[{id:"embrace_intensity",text:`"I'm ready for whatever training you think I need."`,consequence:"Training commitment  Accepts rigorous preparation",effects:[{characterId:"raven",affectionChange:40}],nextScene:"threat_assessment"},{id:"ask_about_coordination",text:`"How do we coordinate defenses? What's my role in group protection?"`,consequence:"Strategic thinking  Focuses on team coordination",effects:[{characterId:"raven",affectionChange:35},{characterId:"lilith",affectionChange:15}],nextScene:"fortress_ravencroft"},{id:"request_scenario_practice",text:'"Can we practice with realistic scenarios? I learn best by doing."',consequence:"Practical learning  Wants experiential training",effects:[{characterId:"raven",affectionChange:45}],nextScene:"phobia_management_discussion"}]},{id:"diplomatic_training",title:"The Art of Supernatural Diplomacy",text:["Isadora gracefully takes over your diplomatic education.",'"Supernatural politics are complex," she begins. "Each species has protocols, hierarchies, and customs that must be respected."','"A misstep in vampire etiquette might be forgiven. The same mistake with fae or werewolf packs could mean war."','"Your role requires you to be translator, mediator, and sometimes buffer between conflicting interests."'],character:b.isadora,background:"/backgrounds/grand-hall.png",choices:[{id:"study_protocols",text:'"I want to learn all the protocols and customs. Where do we start?"',consequence:"Academic approach  Prioritizes formal knowledge",effects:[{characterId:"isadora",affectionChange:40},{characterId:"celeste",affectionChange:20}],nextScene:"coven_hierarchy_revealed"},{id:"focus_on_mediation",text:'"The mediation aspect interests me most. How do I resolve conflicts?"',consequence:"Conflict resolution  Focuses on peacemaking skills",effects:[{characterId:"isadora",affectionChange:35}],nextScene:"compromise_discussion"},{id:"ask_about_mistakes",text:'"What are the most dangerous mistakes I could make?"',consequence:"Risk awareness  Wants to avoid serious errors",effects:[{characterId:"isadora",affectionChange:45}],nextScene:"diplomatic_bridge_building"}]},{id:"creative_magic_training",title:"Art as Supernatural Expression",text:["Morgana introduces you to the concept of creative magic.",`"Art isn't just representation - for those with the gift, it can influence reality itself."`,'"Your enhanced empathy might allow you to create works that heal emotional wounds or inspire supernatural beings."',`"It's not about power over others, but about channeling emotion and intention into tangible form."`],character:b.morgana,background:"/backgrounds/grand-hall.png",choices:[{id:"explore_healing_art",text:'"The idea of art that heals emotions fascinates me. How does that work?"',consequence:"Healing focus  Interested in therapeutic creativity",effects:[{characterId:"morgana",affectionChange:40},{characterId:"elena",affectionChange:25}],nextScene:"artistic_soul_connection"},{id:"practice_with_morgana",text:'"Will you teach me? I want to learn this together with you."',consequence:"Partnership learning  Values shared discovery",effects:[{characterId:"morgana",affectionChange:50}],nextScene:"artistic_collaboration_planned"},{id:"understand_intention",text:'"How do intention and emotion translate into magical effect?"',consequence:"Technical understanding  Seeks mechanism knowledge",effects:[{characterId:"morgana",affectionChange:35},{characterId:"celeste",affectionChange:20}],nextScene:"paradox_appreciation"}]},{id:"paradox_appreciation",title:"Beauty in Contradiction",text:["Your philosophical discussion reaches a moment of profound insight.",'Seraphina speaks thoughtfully: "The greatest truths often appear contradictory - love that hurts, strength found in vulnerability, freedom through commitment."','Morgana adds: "Art captures these paradoxes better than logic ever could. Beauty emerges from tension."',"You realize you're experiencing one of these paradoxes yourself - finding home by leaving everything familiar."],character:b.seraphina,background:"/backgrounds/grand-hall.png",choices:[{id:"apply_to_self",text:`"I'm living that paradox now - finding myself by losing who I thought I was."`,consequence:"Self-insight  Recognizes personal paradox",effects:[{characterId:"seraphina",affectionChange:45},{characterId:"morgana",affectionChange:35}],nextScene:"spiritual_awakening"},{id:"explore_through_art",text:'"Could we create art that explores these paradoxes?"',consequence:"Creative exploration  Wants to express paradox artistically",effects:[{characterId:"morgana",affectionChange:45},{characterId:"seraphina",affectionChange:30}],nextScene:"creative_communion"},{id:"embrace_complexity",text:`"Maybe the goal isn't to resolve contradictions but to dance with them."`,consequence:"Philosophical acceptance  Embraces life's complexity",effects:[{characterId:"seraphina",affectionChange:50}],nextScene:"divine_understanding"}]},{id:"artistic_appreciation",title:"Understanding True Beauty",text:["Standing before Morgana's artwork, you're struck by the depth of beauty achieved through centuries of practice.","Each piece tells a story not just of technical skill, but of emotional evolution and spiritual growth.",`"Beauty isn't just about perfection," you realize aloud. "It's about truth captured in form."`,"Morgana's face lights up with joy at your understanding."],character:b.morgana,background:"/backgrounds/grand-hall.png",choices:[{id:"explore_truth_in_art",text:'"How do you capture truth in your art? What makes a painting honest?"',consequence:"Artistic philosophy  Seeks deeper understanding of creative truth",effects:[{characterId:"morgana",affectionChange:40}],nextScene:"morgana_creative_connection"},{id:"request_personal_lesson",text:'"Will you teach me to see beauty the way you do?"',consequence:"Learning desire  Wants to develop artistic vision",effects:[{characterId:"morgana",affectionChange:45}],nextScene:"artistic_collaboration_planned"},{id:"appreciate_evolution",text:`"I can see your emotional journey through these pieces. It's like a visual autobiography."`,consequence:"Deep insight  Recognizes personal history in art",effects:[{characterId:"morgana",affectionChange:50}],nextScene:"memory_sharing"}]},{id:"divine_understanding",title:"Glimpsing the Sacred",text:["Through your connection with Seraphina, you begin to understand what divine love might feel like.","It's not the cold perfection you might have expected, but something warm, encompassing, and deeply personal.",'"This is what I discovered when I fell," Seraphina explains. "Divine love filtered through mortal hearts becomes something even more beautiful."',"You feel touched by something eternal yet intimate."],character:b.seraphina,background:"/backgrounds/bedroom.png",choices:[{id:"embrace_sacred_connection",text:'"I feel blessed to experience this through you."',consequence:"Spiritual gratitude  Appreciates divine connection",effects:[{characterId:"seraphina",affectionChange:50}],nextScene:"flight_memories"},{id:"ask_about_mortal_hearts",text:'"How do mortal hearts transform divine love?"',consequence:"Philosophical curiosity  Wants to understand the transformation",effects:[{characterId:"seraphina",affectionChange:45}],nextScene:"beauty_acknowledged"},{id:"offer_partnership",text:'"Let me be your partner in exploring this beautiful mystery."',consequence:"Romantic partnership  Offers to explore love together",effects:[{characterId:"seraphina",affectionChange:55}],nextScene:"new_memory_creation"}]},{id:"beauty_acknowledged",title:"Recognizing the Sacred in the Ordinary",text:["A moment of profound recognition passes between you as you truly see the beauty in what's being offered.","It's not just the supernatural nature of your companions, but the everyday miracles of connection, understanding, and growth.",'Seraphina speaks softly: "This is what I hoped to find when I fell - beauty that emerges from imperfection, love that grows from choice."',"You understand that you're witnessing and participating in something genuinely sacred."],character:b.seraphina,background:"/backgrounds/grand-hall.png",choices:[{id:"celebrate_imperfection",text:'"Perfect love would be boring. This messy, growing love is so much more alive."',consequence:"Embraces authenticity  Values genuine over perfect",effects:[{characterId:"seraphina",affectionChange:45},{characterId:"morgana",affectionChange:25}],nextScene:"living_testament"},{id:"commit_to_growth",text:'"I want to grow in love alongside all of you."',consequence:"Growth commitment  Chooses development over stasis",effects:[{characterId:"seraphina",affectionChange:40},{characterId:"lilith",affectionChange:25}],nextScene:"transformation_celebration"},{id:"acknowledge_sacred_ordinary",text:`"You've taught me that the sacred exists in ordinary moments of connection."`,consequence:"Spiritual insight  Recognizes sacred in everyday",effects:[{characterId:"seraphina",affectionChange:50}],nextScene:"spiritual_awakening"}]},{id:"flight_memories",title:"Wings of the Past",text:["Seraphina closes her eyes, sharing a memory that feels almost tangible.",'"I remember the moment I chose to fall - spreading my wings one last time in Heaven before releasing them forever."','"The sensation of flight was freedom, but the sensation of falling was choice. And choice, I discovered, is its own kind of flight."',"You feel the echo of that monumental decision, the weight and liberation of choosing love over certainty."],character:b.seraphina,background:"/backgrounds/grand-hall.png",choices:[{id:"honor_her_sacrifice",text:`"Your sacrifice gave you something Heaven couldn't - the freedom to love deeply."`,consequence:"Honors sacrifice  Recognizes value of her choice",effects:[{characterId:"seraphina",affectionChange:50}],nextScene:"memory_sharing"},{id:"relate_to_falling",text:'"I understand that feeling - sometimes falling is the only way to truly fly."',consequence:"Personal connection  Relates to transformative choices",effects:[{characterId:"seraphina",affectionChange:45}],nextScene:"new_memory_creation"},{id:"ask_about_regret",text:'"Do you ever miss flying? Do you regret losing your wings?"',consequence:"Gentle curiosity  Shows concern for her feelings",effects:[{characterId:"seraphina",affectionChange:40}],nextScene:"comfort_accepted"}]},{id:"memory_sharing",title:"Weaving Stories Together",text:["The evening becomes a tapestry of shared memories as each person opens their heart.","Ancient stories blend with recent experiences, creating a collective narrative that includes you.","Morgana shares memories of artistic breakthroughs, Seraphina speaks of learning to love imperfectly, and you contribute your own journey of discovery.","You realize you're not just joining their history - you're helping write their future."],choices:[{id:"contribute_your_story",text:"Share your own pivotal memories and transformative moments.",consequence:"Emotional openness  Contributes to collective narrative",effects:[{characterId:"morgana",affectionChange:25},{characterId:"seraphina",affectionChange:25},{characterId:"lilith",affectionChange:20}],nextScene:"living_testament"},{id:"focus_on_future",text:`"These memories are beautiful, but I'm excited about the memories we'll create together."`,consequence:"Future-focused  Emphasizes upcoming shared experiences",effects:[{characterId:"morgana",affectionChange:30},{characterId:"seraphina",affectionChange:30}],nextScene:"new_memory_creation"},{id:"appreciate_inclusion",text:'"Thank you for including me in your stories. It makes me feel truly part of the family."',consequence:"Grateful inclusion  Appreciates being welcomed",effects:[{characterId:"lilith",affectionChange:35},{characterId:"morgana",affectionChange:20}],nextScene:"new_community"}]},{id:"new_memory_creation",title:"Writing Tomorrow's Stories",text:["This moment itself becomes a memory worth treasuring - the first of many you'll create together.","There's something magical about consciously creating a memory, knowing it will be looked back upon as a turning point.",'Seraphina takes your hand: "This is what I gave up my wings for - moments like this, perfect in their imperfection."',"You feel the weight and joy of participating in something that will echo through time."],character:b.seraphina,background:"/backgrounds/grand-hall.png",choices:[{id:"commit_to_many_memories",text:`"This is just the first of countless beautiful memories we'll make."`,consequence:"Future commitment  Promises continued connection",effects:[{characterId:"seraphina",affectionChange:50},{characterId:"morgana",affectionChange:30}],nextScene:"living_testament"},{id:"capture_the_moment",text:'"I want to remember everything about this moment - every detail, every feeling."',consequence:"Mindful presence  Values the current experience",effects:[{characterId:"seraphina",affectionChange:45}],nextScene:"transformation_celebration"},{id:"honor_the_gift",text:`"Your sacrifice made this moment possible. I'll treasure it always."`,consequence:"Honors sacrifice  Shows appreciation for her journey",effects:[{characterId:"seraphina",affectionChange:55}],nextScene:"spiritual_awakening"}]},{id:"living_testament",title:"Becoming the Story",text:["You realize that you're not just observing their stories or even joining them - you're becoming a living testament to what's possible.","Your presence proves that bridges can be built, that understanding can grow, that love can transcend boundaries.",`Lilith speaks with deep emotion: "You are proof that Cordelia's dream wasn't just fantasy. You make the impossible real."`,"The weight of being a symbol of hope settles on your shoulders, but it feels like purpose rather than burden."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"accept_symbolic_role",text:`"If my presence can inspire hope, then I'll be the best symbol I can be."`,consequence:"Symbolic acceptance  Embraces inspirational role",effects:[{characterId:"lilith",affectionChange:50},{characterId:"valentina",affectionChange:25}],nextScene:"transformation_celebration"},{id:"focus_on_relationships",text:`"I'm not interested in being a symbol. I just want to love and be loved."`,consequence:"Relationship focus  Prioritizes personal connection over symbolism",effects:[{characterId:"lilith",affectionChange:40},{characterId:"morgana",affectionChange:30}],nextScene:"new_community"},{id:"share_the_responsibility",text:`"We're all testaments to what's possible. This is our shared story."`,consequence:"Collective responsibility  Shares symbolic weight",effects:[{characterId:"lilith",affectionChange:45},{characterId:"seraphina",affectionChange:25}],nextScene:"guardian_oath"}]},{id:"transformation_celebration",title:"Honoring Growth",text:["The group spontaneously celebrates the transformation you've all undergone together.","It's not just about you joining them - they've changed too, becoming more open, more hopeful, more connected.",`Morgana raises an improvised toast: "To transformation - not the kind that changes what we are, but the kind that reveals who we've always been."`,"The celebration feels both joyous and sacred."],character:b.morgana,background:"/backgrounds/grand-hall.png",choices:[{id:"toast_to_growth",text:'"To growth, to love, to becoming the best versions of ourselves together."',consequence:"Celebratory growth  Honors mutual development",effects:[{characterId:"morgana",affectionChange:35},{characterId:"seraphina",affectionChange:30},{characterId:"lilith",affectionChange:25}],nextScene:"new_community"},{id:"appreciate_mutual_change",text:`"I love that we've all transformed each other. That's what real connection does."`,consequence:"Mutual transformation  Recognizes reciprocal change",effects:[{characterId:"morgana",affectionChange:40},{characterId:"seraphina",affectionChange:25}],nextScene:"living_testament"},{id:"promise_continued_growth",text:`"This is just the beginning. We'll keep growing together."`,consequence:"Future commitment  Promises ongoing development",effects:[{characterId:"morgana",affectionChange:45}],nextScene:"guardian_oath"}]},{id:"new_community",title:"The Circle Complete",text:["Looking around at the faces surrounding you, you realize that something fundamental has shifted.","What began as a group of individuals has become a true community, bound not just by circumstance but by choice and love.","Each person has found their place in this new configuration, including you.","The future stretches ahead, full of possibility and shared purpose."],choices:[{id:"embrace_leadership",text:"Step into a leadership role within this new community.",consequence:"Leadership acceptance  Takes active guiding role",effects:[{characterId:"lilith",affectionChange:40},{characterId:"valentina",affectionChange:25}],nextScene:"guardian_oath"},{id:"cherish_belonging",text:"Simply cherish the feeling of belonging completely.",consequence:"Grateful belonging  Appreciates complete acceptance",effects:[{characterId:"lilith",affectionChange:30},{characterId:"morgana",affectionChange:25},{characterId:"elena",affectionChange:30}],nextScene:"shared_grief"},{id:"plan_the_future",text:"Begin discussing plans for your shared future.",consequence:"Future planning  Focuses on upcoming possibilities",effects:[{characterId:"celeste",affectionChange:35},{characterId:"lilith",affectionChange:25}],nextScene:"wider_world_discussion"}]},{id:"courage_recognition",title:"Acknowledging Inner Strength",text:["Your companions look at you with newfound respect and admiration.",`Lilith speaks first: "The courage you've shown isn't the kind that boasts or seeks attention. It's the quiet bravery of someone willing to step into the unknown for love."`,`Raven nods approvingly: "True courage isn't fearlessness - it's feeling the fear and choosing to act anyway."`,"You feel recognized not for what you've accomplished, but for the character you've revealed through your choices."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"humble_acceptance",text:`"I'm just trying to be worthy of the trust you've placed in me."`,consequence:"Humble response  Shows continued dedication to earning trust",effects:[{characterId:"lilith",affectionChange:35},{characterId:"raven",affectionChange:25}],nextScene:"guardian_oath"},{id:"acknowledge_growth",text:`"You've all helped me discover courage I didn't know I had."`,consequence:"Growth recognition  Credits others for personal development",effects:[{characterId:"lilith",affectionChange:40},{characterId:"morgana",affectionChange:20}],nextScene:"transformation_celebration"},{id:"promise_continued_bravery",text:`"I promise to keep choosing courage, even when it's difficult."`,consequence:"Future commitment  Vows ongoing bravery",effects:[{characterId:"lilith",affectionChange:45},{characterId:"raven",affectionChange:30}],nextScene:"sacred_vow_sealed"}]},{id:"legacy_acceptance",title:"Embracing Cordelia's Vision",text:["Standing in the room where Cordelia once made her own promises, you feel the weight and honor of carrying forward her legacy.",'Lilith speaks with reverence: "She would be so proud to see you here, accepting the responsibility she carried for decades."',`"Cordelia's legacy isn't just about maintaining tradition - it's about growing it, making it stronger for future generations."`,"You understand that you're not just replacing her, but evolving her work into something new and more powerful."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"honor_her_vision",text:'"I want to honor her vision while adding my own perspective to strengthen it."',consequence:"Legacy evolution  Balances tradition with innovation",effects:[{characterId:"lilith",affectionChange:45},{characterId:"isadora",affectionChange:25}],nextScene:"cordelia_artistic_legacy"},{id:"promise_growth",text:'"I promise to help her legacy grow and flourish, not just survive."',consequence:"Growth commitment  Promises dynamic legacy continuation",effects:[{characterId:"lilith",affectionChange:50}],nextScene:"sanctuary_responsibilities"},{id:"ask_about_her_hopes",text:'"What were her deepest hopes for the future? I want to understand her dreams."',consequence:"Vision alignment  Seeks to understand Cordelia's aspirations",effects:[{characterId:"lilith",affectionChange:40}],nextScene:"cordelia_love_story"}]},{id:"cordelia_love_story",title:"The Heart Behind the Legacy",text:["Lilith's expression becomes tender as she shares Cordelia's most personal story.",`"Cordelia loved deeply - not just this coven, but each individual soul within it. She saw our potential when we couldn't see it ourselves."`,'"Her greatest joy was watching vampires discover their capacity for growth, for change, for becoming more than they thought possible."',`"That love - fierce, protective, nurturing - is what made her irreplaceable. And it's what I see growing in you."`],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"embrace_love_legacy",text:'"I want to love this family the way she did - completely and unconditionally."',consequence:"Love commitment  Embraces emotional legacy",effects:[{characterId:"lilith",affectionChange:55},{characterId:"elena",affectionChange:30}],nextScene:"family_appreciation"},{id:"learn_from_her_example",text:'"How can I learn to see potential in others the way she did?"',consequence:"Wisdom seeking  Wants to develop Cordelia's gift for seeing potential",effects:[{characterId:"lilith",affectionChange:45}],nextScene:"patient_guidance"},{id:"honor_her_heart",text:'"Her love created this sanctuary. I want to help it continue growing."',consequence:"Legacy honor  Commits to continuing her loving work",effects:[{characterId:"lilith",affectionChange:50},{characterId:"morgana",affectionChange:25}],nextScene:"sanctuary_challenges"}]},{id:"sanctuary_challenges",title:"Facing Future Difficulties",text:["The conversation turns to the practical challenges that lie ahead.",`Celeste speaks pragmatically: "Running a sanctuary isn't just about love and good intentions. There will be conflicts, resource issues, and difficult decisions."`,'Raven adds: "External threats, internal disagreements, political pressures from other supernatural communities."',"You realize that accepting this role means preparing for challenges that will test every aspect of your character."],character:b.celeste,background:"/backgrounds/grand-hall.png",choices:[{id:"prepare_systematically",text:`"Let's create systems and plans to handle these challenges proactively."`,consequence:"Strategic preparation  Focuses on systematic readiness",effects:[{characterId:"celeste",affectionChange:40},{characterId:"raven",affectionChange:25}],nextScene:"threat_assessment"},{id:"rely_on_team",text:`"I don't have to face these challenges alone. We'll handle them together."`,consequence:"Team approach  Emphasizes collective problem-solving",effects:[{characterId:"celeste",affectionChange:35},{characterId:"lilith",affectionChange:25}],nextScene:"collaborative_governance"},{id:"accept_learning_curve",text:`"I'll make mistakes, but I'll learn from them and keep improving."`,consequence:"Growth mindset  Accepts imperfection while committing to improvement",effects:[{characterId:"celeste",affectionChange:45}],nextScene:"patient_guidance"}]},{id:"shared_grief",title:"Mourning Together",text:["A moment of shared sadness passes through the room as everyone processes the losses that brought you here.",`Elena speaks quietly: "We all carry grief - for Cordelia, for the isolation we've endured, for the world that doesn't understand us."`,'Seraphina adds: "But grief shared becomes something different. It becomes connection, understanding, the foundation for healing."',"You feel the weight of their collective sorrow, but also the strength that comes from bearing it together."],character:b.elena,background:"/backgrounds/grand-hall.png",choices:[{id:"offer_comfort",text:'"Your grief is safe with me. Let me help carry it."',consequence:"Emotional support  Offers to share their burden",effects:[{characterId:"elena",affectionChange:45},{characterId:"seraphina",affectionChange:25}],nextScene:"elena_comfort_accepted"},{id:"share_your_grief",text:'"I have my own grief too. Maybe we can heal together."',consequence:"Mutual vulnerability  Shares personal pain",effects:[{characterId:"elena",affectionChange:50},{characterId:"umbra",affectionChange:25}],nextScene:"comfort_accepted"},{id:"focus_on_hope",text:`"From this shared grief, we'll build something beautiful together."`,consequence:"Transformative perspective  Sees grief as foundation for growth",effects:[{characterId:"elena",affectionChange:40},{characterId:"lilith",affectionChange:20}],nextScene:"new_community"}]},{id:"supernatural_potential",title:"Recognizing Hidden Abilities",text:["During your time at the sanctuary, you begin to notice subtle changes in yourself.","Your intuition seems sharper, your empathy more precise, your ability to sense the supernatural more acute.",'Celeste observes: "Living among us is awakening latent psychic abilities. This often happens to Anchors."',"You realize that your role here isn't just changing you emotionally and socially, but potentially on a fundamental level."],character:b.celeste,background:"/backgrounds/grand-hall.png",choices:[{id:"embrace_development",text:`"I welcome these changes. They'll help me serve everyone better."`,consequence:"Ability acceptance  Embraces supernatural development",effects:[{characterId:"celeste",affectionChange:40}],nextScene:"psychic_training_offered"},{id:"ask_about_extent",text:'"How far might these abilities develop? What should I expect?"',consequence:"Informed preparation  Seeks understanding of potential",effects:[{characterId:"celeste",affectionChange:35}],nextScene:"anchor_powers_explained"},{id:"request_guidance",text:'"Will you help me understand and control these developing abilities?"',consequence:"Seeks mentorship  Requests guidance in development",effects:[{characterId:"celeste",affectionChange:45}],nextScene:"psychic_training_offered"}]},{id:"natural_acceptance",title:"Feeling at Home",text:["Over time, what once felt strange and supernatural now feels natural and comfortable.","The vampires' nocturnal schedule becomes your rhythm, their concerns become your concerns, their joys become your joys.",`Morgana smiles as she observes: "You've stopped seeing us as 'other.' We're just... family now."`,"The transition from visitor to family member feels complete and effortless."],character:b.morgana,background:"/backgrounds/grand-hall.png",choices:[{id:"acknowledge_belonging",text:`"You're right. This isn't about vampires and humans anymore - it's just about family."`,consequence:"Family recognition  Acknowledges complete integration",effects:[{characterId:"morgana",affectionChange:40},{characterId:"lilith",affectionChange:25}],nextScene:"new_community"},{id:"appreciate_transition",text:'"The beautiful thing is how natural this feels now. Like I was always meant to be here."',consequence:"Destiny acceptance  Feels naturally placed",effects:[{characterId:"morgana",affectionChange:45}],nextScene:"living_testament"},{id:"commit_to_growth",text:'"And I want to keep growing into this role, becoming even more than I am now."',consequence:"Continued development  Commits to ongoing growth",effects:[{characterId:"morgana",affectionChange:50}],nextScene:"transformation_celebration"}]},{id:"partnership_explanation",title:"Defining the Relationship",text:["The nature of your partnership with the coven becomes clearer through open discussion.",`Lilith explains: "You're not our employee or servant - you're our partner. We make decisions together, share responsibilities, support each other."`,'"This is a relationship of equals, despite the differences in our nature. Your mortality brings perspectives we need."',"The mutual respect and collaboration feels both empowering and humbling."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"embrace_equality",text:'"I appreciate being treated as an equal partner. That means everything to me."',consequence:"Partnership appreciation  Values equal treatment",effects:[{characterId:"lilith",affectionChange:40},{characterId:"valentina",affectionChange:20}],nextScene:"collaborative_governance"},{id:"offer_unique_perspective",text:'"I promise to always offer my honest perspective, even when it differs from yours."',consequence:"Authentic contribution  Commits to honest input",effects:[{characterId:"lilith",affectionChange:45}],nextScene:"diplomatic_bridge_building"},{id:"ask_about_boundaries",text:'"What are the boundaries of this partnership? What decisions require consensus?"',consequence:"Practical clarity  Seeks clear expectations",effects:[{characterId:"lilith",affectionChange:35},{characterId:"celeste",affectionChange:20}],nextScene:"collaborative_governance"}]},{id:"danger_discussion",title:"Understanding the Risks",text:["Raven takes the lead in explaining the various dangers you might face in your new role.",'"Supernatural politics are volatile. Rival covens might see you as a threat or a prize to be captured."',`"Hunters still exist, though they're less common than in past centuries. And rogue vampires who reject our peaceful approach."`,'"Knowledge of these threats is your first line of defense."'],character:b.raven,background:"/backgrounds/grand-hall.png",choices:[{id:"request_training",text:'"I want comprehensive training in recognizing and avoiding these threats."',consequence:"Safety priority  Requests thorough preparation",effects:[{characterId:"raven",affectionChange:40}],nextScene:"threat_assessment"},{id:"ask_about_protection",text:'"What protection measures are already in place? How do we maintain security?"',consequence:"Security awareness  Seeks understanding of current protections",effects:[{characterId:"raven",affectionChange:35},{characterId:"lilith",affectionChange:15}],nextScene:"fortress_ravencroft"},{id:"focus_on_prevention",text:`"I'd rather prevent conflicts than fight them. How do we avoid making enemies?"`,consequence:"Peaceful approach  Prioritizes conflict prevention",effects:[{characterId:"raven",affectionChange:30},{characterId:"isadora",affectionChange:25}],nextScene:"diplomatic_bridge_building"}]},{id:"provisional_agreement",title:"Trial Period Begins",text:["The group agrees to begin with a provisional period to see how the arrangement works for everyone.",'Isadora suggests: "Perhaps a trial period would be wise - three months to see how we all adapt to this new dynamic."',`Celeste nods: "It takes time to fully understand the scope of the role and whether it's truly right for you."`,"The gradual approach feels both careful and caring."],character:b.isadora,background:"/backgrounds/grand-hall.png",choices:[{id:"accept_trial_period",text:'"A trial period makes sense. I want this to work for everyone."',consequence:"Reasonable approach  Accepts gradual integration",effects:[{characterId:"isadora",affectionChange:35},{characterId:"celeste",affectionChange:25}],nextScene:"gradual_integration"},{id:"express_confidence",text:`"I understand the caution, but I'm confident this is right for all of us."`,consequence:"Self-assured  Shows confidence in decision",effects:[{characterId:"isadora",affectionChange:30},{characterId:"lilith",affectionChange:20}],nextScene:"arrangement_honored"},{id:"suggest_milestones",text:'"Could we set specific milestones to evaluate progress during the trial?"',consequence:"Structured approach  Suggests measurable goals",effects:[{characterId:"isadora",affectionChange:40},{characterId:"celeste",affectionChange:30}],nextScene:"arrangement_details"}]},{id:"amazed_acceptance",title:"Wonder at the Impossible",text:["The reality of your situation hits you with renewed force - you're being accepted into a family of vampires.","The impossibility of it all strikes you: just weeks ago, vampires were mythology, and now you're about to become their advocate.",'Seraphina smiles at your expression: "The wonder never completely fades. Every day here still amazes me."',"You realize that maintaining this sense of awe might be important for staying grounded."],character:b.seraphina,background:"/backgrounds/grand-hall.png",choices:[{id:"embrace_wonder",text:'"I hope I never lose this sense of wonder. It makes everything more beautiful."',consequence:"Wonder preservation  Values maintaining awe",effects:[{characterId:"seraphina",affectionChange:40},{characterId:"umbra",affectionChange:25}],nextScene:"spiritual_awakening"},{id:"acknowledge_privilege",text:`"I'm amazed by the privilege of being trusted with something so extraordinary."`,consequence:"Privilege recognition  Shows gratitude for opportunity",effects:[{characterId:"seraphina",affectionChange:45}],nextScene:"honored_trust"},{id:"share_excitement",text:`"The impossibility of it makes it even more exciting. We're writing a new kind of story."`,consequence:"Excitement about novelty  Appreciates groundbreaking nature",effects:[{characterId:"seraphina",affectionChange:35},{characterId:"morgana",affectionChange:20}],nextScene:"new_memory_creation"}]},{id:"practical_coexistence",title:"Daily Life Together",text:["The conversation turns to the practical aspects of living together.",`Elena explains: "We'll need to coordinate schedules, share responsibilities, respect each other's space and needs."`,'Celeste adds: "Your human needs - sleep schedule, food, social connections - will need to be accommodated."',"The attention to practical details shows their genuine commitment to making this work."],character:b.elena,background:"/backgrounds/grand-hall.png",choices:[{id:"appreciate_consideration",text:'"Thank you for thinking about my practical needs. That consideration means a lot."',consequence:"Gratitude for thoughtfulness  Appreciates practical care",effects:[{characterId:"elena",affectionChange:35},{characterId:"celeste",affectionChange:20}],nextScene:"arrangement_details"},{id:"offer_flexibility",text:`"I'm happy to adapt my schedule and habits to work better with yours."`,consequence:"Flexible accommodation  Shows willingness to adapt",effects:[{characterId:"elena",affectionChange:40}],nextScene:"gradual_integration"},{id:"suggest_trial_run",text:'"Maybe we could do a trial run to work out any practical issues?"',consequence:"Practical testing  Suggests experimental approach",effects:[{characterId:"elena",affectionChange:30},{characterId:"celeste",affectionChange:25}],nextScene:"provisional_agreement"}]},{id:"trust_acknowledged",title:"The Gift of Confidence",text:["A moment of profound recognition passes between you as the depth of trust being offered becomes clear.",'Lilith speaks with quiet intensity: "Trust, once broken between mortals and vampires, takes generations to rebuild."',`"By offering you our trust, we're risking everything we've built. By accepting it, you're taking responsibility for our future."`,"The weight of mutual trust settles between you like a sacred bond."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"vow_protection",text:'"I will guard your trust as carefully as I guard your lives."',consequence:"Sacred protection  Commits to preserving trust",effects:[{characterId:"lilith",affectionChange:50}],nextScene:"bond_protection_vow"},{id:"promise_worthiness",text:'"I promise to prove worthy of this trust every single day."',consequence:"Daily commitment  Vows ongoing worthiness",effects:[{characterId:"lilith",affectionChange:45},{characterId:"isadora",affectionChange:20}],nextScene:"guardian_oath"},{id:"acknowledge_reciprocity",text:`"This trust goes both ways. I'm trusting you with my life and future too."`,consequence:"Mutual trust  Recognizes reciprocal vulnerability",effects:[{characterId:"lilith",affectionChange:55}],nextScene:"sacred_vow_sealed"}]},{id:"nature_explanation",title:"Understanding Vampire Nature",text:["Celeste takes time to explain the nuances of vampire nature that aren't found in mythology.",`"We're not the monsters of legend. We experience the full range of emotions, form deep relationships, create art, pursue knowledge."`,`"The need for blood is real, but we've developed ethical ways to manage it. Consent, partnerships with willing donors, medical sources."`,`"We're people who happen to be vampires, not vampires who used to be people."`],character:b.celeste,background:"/backgrounds/grand-hall.png",choices:[{id:"appreciate_complexity",text:'"I appreciate you explaining the reality rather than letting me rely on myths."',consequence:"Reality appreciation  Values truth over fiction",effects:[{characterId:"celeste",affectionChange:35}],nextScene:"coven_hierarchy_revealed"},{id:"ask_about_ethics",text:`"Tell me more about the ethical frameworks you've developed."`,consequence:"Ethical interest  Wants to understand moral systems",effects:[{characterId:"celeste",affectionChange:40},{characterId:"seraphina",affectionChange:20}],nextScene:"philosophical_connection"},{id:"focus_on_individuality",text:'"So each of you is a unique individual, just like any human community."',consequence:"Individual recognition  Sees them as distinct people",effects:[{characterId:"celeste",affectionChange:45}],nextScene:"individual_connections"}]},{id:"cordelia_role_detailed",title:"The Anchor's Daily Life",text:["Lilith provides detailed insight into what Cordelia's role actually involved day-to-day.",'"She was mediator, counselor, advocate, and sometimes simply a friend who listened without judgment."','"Some days involved complex negotiations with supernatural communities. Others were just about being present for someone having a difficult century."','"The role shaped itself around her strengths and grew with her understanding."'],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_about_mediation",text:'"What kinds of conflicts did she mediate? How did she approach resolution?"',consequence:"Mediation interest  Seeks conflict resolution skills",effects:[{characterId:"lilith",affectionChange:30}],nextScene:"diplomatic_bridge_building"},{id:"focus_on_counseling",text:'"The counseling aspect appeals to me. How do you help someone process centuries of experience?"',consequence:"Counseling interest  Values emotional support work",effects:[{characterId:"lilith",affectionChange:35},{characterId:"elena",affectionChange:25}],nextScene:"patient_guidance"},{id:"appreciate_flexibility",text:`"I like that the role can grow and change. It won't be static or limiting."`,consequence:"Flexibility appreciation  Values adaptive role",effects:[{characterId:"lilith",affectionChange:40}],nextScene:"arrangement_details"}]},{id:"patient_guidance",title:"Learning from Experience",text:["Lilith takes on the role of mentor, sharing her wisdom with gentle patience.",`"Cordelia taught me that the best guidance comes through questions, not commands. I'll help you discover your own answers."`,'"Experience is the best teacher, but wisdom shared can help you avoid unnecessary pain."',"Her approach feels both supportive and empowering, encouraging growth rather than dependence."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"appreciate_approach",text:'"I appreciate learning through discovery rather than being told what to do."',consequence:"Learning preference  Values guided discovery",effects:[{characterId:"lilith",affectionChange:35}],nextScene:"psychic_training_offered"},{id:"ask_about_cordelia_methods",text:'"How did Cordelia teach? What methods worked best for her students?"',consequence:"Teaching interest  Wants to understand educational approaches",effects:[{characterId:"lilith",affectionChange:40}],nextScene:"cordelia_research_revealed"},{id:"request_specific_guidance",text:'"What are the most important lessons I should focus on first?"',consequence:"Priority seeking  Wants to focus efforts effectively",effects:[{characterId:"lilith",affectionChange:30}],nextScene:"gradual_integration"}]},{id:"physical_challenges_explained",title:"The Body's Adaptation",text:["Celeste explains the physical realities of living in a vampire household.",'"Your sleep schedule will gradually shift to match ours. Your body will adapt to lower light levels, different meal times."','"Some humans develop enhanced night vision, improved hearing. Your body is remarkably adaptable."',`"We'll monitor your health carefully and adjust as needed."`],character:b.celeste,background:"/backgrounds/dining-hall.png",choices:[{id:"embrace_adaptation",text:`"I'm curious to see how my body adapts. It sounds fascinating."`,consequence:"Adaptation enthusiasm  Interested in physical changes",effects:[{characterId:"celeste",affectionChange:35}],nextScene:"supernatural_potential"},{id:"request_monitoring",text:`"I'd appreciate careful monitoring. I want to stay healthy through the transition."`,consequence:"Health priority  Values medical oversight",effects:[{characterId:"celeste",affectionChange:40}],nextScene:"arrangement_details"},{id:"ask_about_reversibility",text:'"Are these changes permanent? Can I return to a normal human schedule if needed?"',consequence:"Cautious inquiry  Seeks understanding of permanence",effects:[{characterId:"celeste",affectionChange:30}],nextScene:"gradual_integration"}]},{id:"cordelia_physical_stories",title:"Precedent from the Past",text:["Lilith shares stories of Cordelia's own adaptation to vampire life.",'"Cordelia initially struggled with the schedule change, but within months she was thriving on four hours of sleep."','"She developed remarkable intuition about supernatural presences. Could sense a vampire from across a crowded room."','"Her body adapted beautifully, but more importantly, she adapted emotionally and spiritually to our world."'],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"focus_on_intuition",text:'"The supernatural intuition sounds incredibly useful. How did she develop it?"',consequence:"Ability interest  Wants to develop supernatural senses",effects:[{characterId:"lilith",affectionChange:30}],nextScene:"psychic_training_offered"},{id:"appreciate_adaptation",text:`"It's encouraging to know someone else made this transition successfully."`,consequence:"Hope from precedent  Takes comfort in her example",effects:[{characterId:"lilith",affectionChange:35}],nextScene:"cordelia_psychic_legacy"},{id:"ask_about_emotional_adaptation",text:'"Tell me more about the emotional and spiritual adaptation. That seems most important."',consequence:"Holistic focus  Prioritizes emotional/spiritual growth",effects:[{characterId:"lilith",affectionChange:40}],nextScene:"spiritual_awakening"}]},{id:"morgana_creative_connection",title:"Artistic Kinship",text:["The connection between you and Morgana deepens through shared creative energy.",`"I feel it," she says with wonder. "A resonance between our creative spirits. It's like finding a missing harmony."`,'"You see art the way I do - not just as decoration, but as a language for things too deep for words."',"The artistic bond feels both inspiring and intimate."],character:b.morgana,background:"/backgrounds/bedroom.png",choices:[{id:"explore_resonance",text:'"This resonance is amazing. What can we create together with this connection?"',consequence:"Creative collaboration  Excited about joint artistic potential",effects:[{characterId:"morgana",affectionChange:45}],nextScene:"artistic_collaboration_planned"},{id:"appreciate_understanding",text:'"Finally, someone who understands that art is a language of the soul."',consequence:"Artistic appreciation  Values deep creative understanding",effects:[{characterId:"morgana",affectionChange:40}],nextScene:"creative_communion"},{id:"offer_inspiration",text:'"Let me inspire your art as you inspire mine. We can create something eternal."',consequence:"Mutual inspiration  Proposes reciprocal creative relationship",effects:[{characterId:"morgana",affectionChange:50}],nextScene:"memory_sharing"}]},{id:"willpower_struggle",title:"Testing Inner Strength",text:["A moment arises that tests your resolve and commitment to this new path.","The weight of responsibility, the strangeness of your situation, and the enormity of the commitment all press against your determination.",'Seraphina notices your struggle: "Every important choice involves a battle between fear and courage, doubt and faith."',"You realize this internal struggle is a natural part of growth."],character:b.seraphina,background:"/backgrounds/grand-hall.png",choices:[{id:"acknowledge_struggle",text:`"You're right. This is harder than I expected, but I'm not giving up."`,consequence:"Honest acknowledgment  Shows resilience despite difficulty",effects:[{characterId:"seraphina",affectionChange:35},{characterId:"lilith",affectionChange:20}],nextScene:"courage_recognition"},{id:"seek_support",text:'"I could use some encouragement right now. This feels overwhelming."',consequence:"Vulnerability  Asks for emotional support",effects:[{characterId:"seraphina",affectionChange:40}],nextScene:"comfort_accepted"},{id:"push_through_doubt",text:'"Doubt is just fear trying to protect me. I choose courage over comfort."',consequence:"Determined resolution  Overcomes doubt through willpower",effects:[{characterId:"seraphina",affectionChange:45},{characterId:"raven",affectionChange:25}],nextScene:"determined_despite_fear"}]},{id:"hidden_struggle",title:"Beneath the Surface",text:["You notice signs that not everything is as harmonious as it appears on the surface.","There are tensions, old wounds, unresolved conflicts that the coven is working to heal.",`Elena speaks quietly: "We're not perfect. We have our own struggles, our own healing to do."`,"Understanding their vulnerabilities makes them seem more human, more relatable."],character:b.elena,background:"/backgrounds/grand-hall.png",choices:[{id:"offer_support",text:'"Maybe having an outside perspective can help with some of these old wounds."',consequence:"Healing offer  Proposes to help with internal conflicts",effects:[{characterId:"elena",affectionChange:40},{characterId:"seraphina",affectionChange:20}],nextScene:"elena_comfort_accepted"},{id:"appreciate_honesty",text:'"Thank you for being honest about the struggles. Perfection would be intimidating."',consequence:"Honesty appreciation  Values authentic disclosure",effects:[{characterId:"elena",affectionChange:35}],nextScene:"shared_grief"},{id:"ask_how_to_help",text:'"How can I best support everyone through their individual healing journeys?"',consequence:"Supportive inquiry  Seeks to understand how to help",effects:[{characterId:"elena",affectionChange:45}],nextScene:"patient_guidance"}]},{id:"curiosity_acknowledged",title:"Questions Welcome",text:["Your natural curiosity about their world is met with appreciation rather than annoyance.",'Celeste smiles: "Your questions show genuine interest in understanding, not just satisfying curiosity."',`"We've lived with these realities for so long, we sometimes forget how remarkable they must seem to newcomers."`,"Your inquisitive nature is clearly seen as an asset rather than a burden."],character:b.celeste,background:"/backgrounds/grand-hall.png",choices:[{id:"express_fascination",text:'"Everything here fascinates me. I want to understand it all."',consequence:"Intellectual enthusiasm  Shows genuine fascination",effects:[{characterId:"celeste",affectionChange:35}],nextScene:"forbidden_knowledge_access"},{id:"promise_thoughtful_inquiry",text:`"I'll keep asking questions, but I promise they'll always be respectful and purposeful."`,consequence:"Respectful curiosity  Commits to thoughtful inquiry",effects:[{characterId:"celeste",affectionChange:40}],nextScene:"coven_hierarchy_revealed"},{id:"offer_fresh_perspective",text:'"My outsider perspective might help you see familiar things in new ways."',consequence:"Perspective offering  Proposes mutual learning",effects:[{characterId:"celeste",affectionChange:45}],nextScene:"diplomatic_bridge_building"}]},{id:"practical_curiosity",title:"Everyday Wonders",text:["Your questions shift to practical matters - how do they handle daily life, logistics, the mundane details of immortal existence.",'Morgana laughs: "You want to know about laundry and grocery shopping? How wonderfully human."',`"The truth is, immortal life still requires attention to practical details. We've just had more time to optimize our systems."`,"The blend of supernatural existence with ordinary concerns feels both amusing and reassuring."],character:b.morgana,background:"/backgrounds/grand-hall.png",choices:[{id:"appreciate_normalcy",text:`"It's comforting to know that even immortals have to deal with mundane tasks."`,consequence:"Normalcy comfort  Takes comfort in ordinary concerns",effects:[{characterId:"morgana",affectionChange:30},{characterId:"elena",affectionChange:20}],nextScene:"practical_coexistence"},{id:"ask_about_optimization",text:`"I'd love to learn about these optimized systems. Centuries of experience must create great efficiency."`,consequence:"Efficiency interest  Wants to learn optimized approaches",effects:[{characterId:"morgana",affectionChange:35},{characterId:"celeste",affectionChange:20}],nextScene:"arrangement_details"},{id:"offer_human_perspective",text:'"Maybe I can offer a fresh perspective on some of these systems."',consequence:"Collaborative improvement  Offers to contribute ideas",effects:[{characterId:"morgana",affectionChange:40}],nextScene:"partnership_explanation"}]},{id:"fearless_inquiry",title:"Courage in Questions",text:["You find yourself asking the difficult questions that others might shy away from.","Questions about death, immortality, the ethics of vampirism, the cost of eternal life.",'Seraphina responds with deep respect: "These are the questions that matter. Shallow curiosity we can handle anywhere - profound inquiry is precious."',"Your willingness to engage with complex topics clearly impresses them."],character:b.seraphina,background:"/backgrounds/grand-hall.png",choices:[{id:"pursue_ethics",text:`"I'm particularly interested in how you've developed ethical frameworks for immortal existence."`,consequence:"Ethical inquiry  Seeks understanding of moral systems",effects:[{characterId:"seraphina",affectionChange:45}],nextScene:"philosophical_connection"},{id:"explore_costs",text:`"What are the hidden costs of immortality that mortals don't consider?"`,consequence:"Cost awareness  Seeks understanding of immortal challenges",effects:[{characterId:"seraphina",affectionChange:40},{characterId:"elena",affectionChange:20}],nextScene:"hidden_struggle"},{id:"discuss_meaning",text:'"How do you find meaning and purpose across centuries of existence?"',consequence:"Existential inquiry  Explores purpose in immortality",effects:[{characterId:"seraphina",affectionChange:50}],nextScene:"purpose_revelation"}]},{id:"cordelia_psychic_legacy",title:"Inherited Abilities",text:["Celeste reveals more about Cordelia's unique psychic abilities and how they might manifest in you.",'"Cordelia developed remarkable empathic abilities - she could sense emotional states, detect deception, even glimpse surface thoughts when necessary."','"These abilities seem to run in certain bloodlines. You may already be showing early signs."',"The possibility of developing supernatural abilities both excites and concerns you."],character:b.celeste,background:"/backgrounds/grand-hall.png",choices:[{id:"embrace_potential",text:`"I'm ready to explore these abilities responsibly. Will you guide my development?"`,consequence:"Ability acceptance  Embraces psychic potential with guidance",effects:[{characterId:"celeste",affectionChange:45}],nextScene:"psychic_training_offered"},{id:"express_concerns",text:'"These abilities sound powerful. How do I ensure I use them ethically?"',consequence:"Ethical concern  Worried about responsible use",effects:[{characterId:"celeste",affectionChange:40},{characterId:"seraphina",affectionChange:20}],nextScene:"psychic_services_accepted"},{id:"ask_about_control",text:`"Can these abilities be controlled? I don't want to accidentally invade anyone's privacy."`,consequence:"Privacy concern  Worried about unwanted intrusion",effects:[{characterId:"celeste",affectionChange:50}],nextScene:"patient_guidance"}]},{id:"psychic_services_accepted",title:"Offering Your Gifts",text:["The coven warmly accepts your offer to use developing psychic abilities in service of the community.",'Lilith explains: "Cordelia often used her empathic abilities to mediate conflicts, detect threats, and provide emotional support."','"Your growing abilities could serve similar purposes - helping heal old wounds, building trust, protecting the sanctuary."',"The prospect of using supernatural gifts for the good of others feels deeply meaningful."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"commit_to_service",text:'"I want to use these gifts the way Cordelia did - to heal and protect."',consequence:"Service commitment  Dedicates abilities to community welfare",effects:[{characterId:"lilith",affectionChange:50},{characterId:"celeste",affectionChange:25}],nextScene:"guardian_oath"},{id:"request_training",text:`"I'll need proper training to use these abilities effectively and safely."`,consequence:"Training request  Seeks proper preparation",effects:[{characterId:"lilith",affectionChange:40}],nextScene:"psychic_training_offered"},{id:"ask_about_cordelia_methods",text:'"How exactly did Cordelia use her abilities? What techniques did she develop?"',consequence:"Method inquiry  Wants to understand Cordelia's approach",effects:[{characterId:"lilith",affectionChange:45}],nextScene:"cordelia_research_revealed"}]},{id:"psychic_training_offered",title:"Developing Your Gifts",text:["Celeste offers to personally train you in developing and controlling your emerging psychic abilities.",`"We'll start with meditation, energy awareness, emotional shielding. The fundamentals that keep you safe."`,`"Then we'll work on active abilities - reading emotions, detecting deception, projecting calm when needed."`,"The structured approach to supernatural development feels both exciting and reassuring."],character:b.celeste,background:"/backgrounds/grand-hall.png",choices:[{id:"begin_immediately",text:`"Let's start right away. I'm eager to begin developing these abilities."`,consequence:"Immediate start  Enthusiastic about training",effects:[{characterId:"celeste",affectionChange:40}],nextScene:"patience_training"},{id:"ask_about_commitment",text:'"What kind of time commitment does this training require?"',consequence:"Practical planning  Seeks understanding of requirements",effects:[{characterId:"celeste",affectionChange:35}],nextScene:"arrangement_details"},{id:"request_safety_focus",text:'"I want to prioritize safety and control above all else."',consequence:"Safety priority  Emphasizes responsible development",effects:[{characterId:"celeste",affectionChange:45}],nextScene:"gradual_integration"}]},{id:"family_consideration",title:"Weighing the Decision",text:["The magnitude of joining a vampire family gives you pause as you consider all the implications.","This isn't just changing jobs or moving - it's fundamentally altering the trajectory of your entire life.",'Elena notices your contemplation: "Take all the time you need. This decision will affect everyone, so it should feel completely right."',"The weight of the choice settles over you, but so does the exciting possibility of a truly extraordinary life."],character:b.elena,background:"/backgrounds/grand-hall.png",choices:[{id:"acknowledge_magnitude",text:`"You're right, this is the biggest decision I've ever made. But I think it's the right one."`,consequence:"Thoughtful acceptance  Recognizes significance while choosing to proceed",effects:[{characterId:"elena",affectionChange:40},{characterId:"lilith",affectionChange:20}],nextScene:"trust_acknowledged"},{id:"express_readiness",text:`"I've thought it through carefully. I'm ready for this extraordinary life."`,consequence:"Confident readiness  Shows decisive commitment",effects:[{characterId:"elena",affectionChange:35},{characterId:"isadora",affectionChange:20}],nextScene:"amazed_acceptance"},{id:"ask_for_time",text:'"Could I have a little more time to process everything before making my final decision?"',consequence:"Thoughtful delay  Requests additional consideration time",effects:[{characterId:"elena",affectionChange:45}],nextScene:"provisional_agreement"}]},{id:"bond_protection_vow",title:"Sacred Promise",text:["In a moment of profound connection, you make a solemn vow to protect the bonds you're forming.",`"I swear to guard not just your secrets and your safety, but the trust and love we're building together."`,`Lilith's eyes shine with emotion: "That vow goes both ways. We will protect you as fiercely as you protect us."`,"The mutual commitment feels like a sacred contract sealed not with signatures, but with hearts."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"seal_with_ceremony",text:'"Should we mark this commitment with some kind of ceremony or ritual?"',consequence:"Ceremonial marking  Seeks formal recognition of vows",effects:[{characterId:"lilith",affectionChange:50},{characterId:"seraphina",affectionChange:25}],nextScene:"guardian_oath"},{id:"focus_on_daily_proof",text:`"I'll prove this vow through my daily actions, not just my words."`,consequence:"Action commitment  Emphasizes proof through behavior",effects:[{characterId:"lilith",affectionChange:45},{characterId:"raven",affectionChange:20}],nextScene:"living_testament"},{id:"include_everyone",text:`"This vow extends to everyone here. You're all my family now."`,consequence:"Inclusive commitment  Extends vow to entire coven",effects:[{characterId:"lilith",affectionChange:55},{characterId:"elena",affectionChange:25},{characterId:"morgana",affectionChange:20}],nextScene:"new_community"}]},{id:"morgana_introduction",title:"The Artist's Welcome",text:["Morgana approaches with an elegant grace that speaks to centuries of refined movement.",`"Welcome to our sanctuary. I sense an artistic soul in you - there's a creative energy that's quite lovely."`,'She gestures to the artwork adorning the walls: "Art has always been my way of processing the complexity of immortal existence."',"Her immediate recognition of your creative nature feels both flattering and slightly unnerving."],character:b.morgana,background:"/backgrounds/grand-hall.png",choices:[{id:"appreciate_art",text:'"Your artwork is breathtaking. Each piece tells such a rich story."',consequence:"Artistic appreciation  Shows genuine admiration for her work",effects:[{characterId:"morgana",affectionChange:35}],nextScene:"artistic_appreciation"},{id:"share_creative_interests",text:'"I do love art and creativity. What mediums do you work in?"',consequence:"Creative curiosity  Shows interest in her artistic practice",effects:[{characterId:"morgana",affectionChange:40}],nextScene:"morgana_creative_connection"},{id:"ask_about_creative_process",text:'"How has immortality changed your artistic vision over the centuries?"',consequence:"Deep inquiry  Interested in how time affects creativity",effects:[{characterId:"morgana",affectionChange:45}],nextScene:"artistic_collaboration_planned"}]},{id:"artistic_collaboration_planned",title:"Creative Partnership",text:["Morgana's excitement about potential artistic collaboration is infectious.",`"I haven't had a creative partner in decades. The possibility of fresh perspectives, new techniques, collaborative inspiration..."`,'"We could create something neither of us could achieve alone - art that bridges mortal and immortal experience."',"The prospect of creating meaningful art together feels like a beautiful way to deepen your connection."],character:b.morgana,background:"/backgrounds/grand-hall.png",choices:[{id:"propose_joint_project",text:`"Let's start with a joint project that tells the story of this sanctuary."`,consequence:"Collaborative proposal  Suggests meaningful shared project",effects:[{characterId:"morgana",affectionChange:50}],nextScene:"cordelia_artistic_legacy"},{id:"offer_fresh_perspective",text:`"I'd love to bring a mortal perspective to immortal themes in your art."`,consequence:"Perspective offering  Proposes unique viewpoint contribution",effects:[{characterId:"morgana",affectionChange:45}],nextScene:"memory_sharing"},{id:"ask_about_teaching",text:'"Would you teach me some of your techniques? I want to learn from your centuries of experience."',consequence:"Learning request  Seeks artistic mentorship",effects:[{characterId:"morgana",affectionChange:40}],nextScene:"patient_guidance"}]},{id:"cordelia_artistic_legacy",title:"The Creative Inheritance",text:["Morgana shares how Cordelia influenced and supported the artistic life of the sanctuary.",`"Cordelia wasn't an artist herself, but she understood the importance of beauty, creativity, and self-expression for immortal wellbeing."`,'"She encouraged everyone to pursue their passions, provided resources, created spaces for artistic exploration."',`"Your own creative spirit could continue that legacy - supporting and inspiring everyone's artistic growth."`],character:b.morgana,background:"/backgrounds/grand-hall.png",choices:[{id:"embrace_cultural_role",text:`"I'd love to help cultivate a thriving artistic culture here."`,consequence:"Cultural commitment  Embraces role in creative community",effects:[{characterId:"morgana",affectionChange:50},{characterId:"elena",affectionChange:25}],nextScene:"new_community"},{id:"propose_art_programs",text:'"Maybe we could develop formal programs - workshops, exhibitions, creative collaborations."',consequence:"Program proposal  Suggests structured artistic activities",effects:[{characterId:"morgana",affectionChange:45},{characterId:"celeste",affectionChange:20}],nextScene:"arrangement_details"},{id:"honor_cordelia_vision",text:`"I want to honor Cordelia's vision while adding my own creative energy to it."`,consequence:"Legacy honor  Combines respect with innovation",effects:[{characterId:"morgana",affectionChange:55}],nextScene:"legacy_acceptance"}]},{id:"guardian_oath",title:"The Sacred Vow",text:["In a moment heavy with significance, you formally accept the role of Guardian and Anchor.",'Lilith speaks with ceremonial gravity: "Do you swear to protect this sanctuary, guide this family, and serve as bridge between our worlds?"',`"Do you promise to honor Cordelia's legacy while forging your own path forward?"`,"The weight of the oath settles on your shoulders, but it feels like purpose rather than burden."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"swear_complete_oath",text:'"I swear all of this, with my whole heart and soul."',consequence:"Full commitment  Complete acceptance of all responsibilities",effects:[{characterId:"lilith",affectionChange:60},{characterId:"isadora",affectionChange:30},{characterId:"celeste",affectionChange:25}],nextScene:"sacred_vow_sealed"},{id:"swear_with_conditions",text:'"I swear this oath, and I ask for your patience as I grow into these responsibilities."',consequence:"Humble commitment  Accepts while acknowledging learning needs",effects:[{characterId:"lilith",affectionChange:50},{characterId:"elena",affectionChange:25}],nextScene:"patient_guidance"},{id:"modify_oath",text:'"I swear to protect and guide, but I want this to be a partnership, not a hierarchy."',consequence:"Partnership emphasis  Seeks collaborative rather than hierarchical structure",effects:[{characterId:"lilith",affectionChange:55},{characterId:"valentina",affectionChange:30}],nextScene:"collaborative_governance"}]},{id:"threat_assessment",title:"Understanding the Dangers",text:["Raven provides a comprehensive overview of potential threats to the sanctuary.",'"External threats include rival covens seeking to expand territory, hunters who still operate in secret, and rogue vampires who might expose us all."','"Internal threats are subtler - conflicts between members, breaches of trust, or decisions that could fracture our unity."',"The systematic approach to threat awareness feels both sobering and reassuring."],character:b.raven,background:"/backgrounds/grand-hall.png",choices:[{id:"focus_on_prevention",text:'"How do we prevent these threats rather than just respond to them?"',consequence:"Prevention focus  Prioritizes proactive threat management",effects:[{characterId:"raven",affectionChange:40}],nextScene:"fortress_ravencroft"},{id:"ask_about_early_warning",text:'"What early warning systems do we have in place?"',consequence:"Security interest  Seeks understanding of detection methods",effects:[{characterId:"raven",affectionChange:35}],nextScene:"strategic_patience"},{id:"offer_human_perspective",text:`"My mortal perspective might help identify threats you haven't considered."`,consequence:"Perspective contribution  Offers unique viewpoint on security",effects:[{characterId:"raven",affectionChange:45}],nextScene:"collaborative_governance"}]},{id:"gradual_integration",title:"Taking It Slowly",text:["The decision is made to integrate you into the sanctuary gradually, allowing everyone to adjust.",'Elena explains: "This approach respects both your need to adapt and our need to ensure compatibility."',`"We'll start with extended visits, then longer stays, building up to full residency as everyone becomes comfortable."`,"The measured pace feels considerate and wise."],character:b.elena,background:"/backgrounds/grand-hall.png",choices:[{id:"appreciate_consideration",text:'"Thank you for being so thoughtful about this transition."',consequence:"Gratitude  Appreciates careful approach",effects:[{characterId:"elena",affectionChange:35},{characterId:"celeste",affectionChange:20}],nextScene:"arrangement_details"},{id:"suggest_milestones",text:'"Should we establish specific milestones to evaluate progress?"',consequence:"Structured approach  Proposes measurable integration goals",effects:[{characterId:"elena",affectionChange:40},{characterId:"isadora",affectionChange:25}],nextScene:"arrangement_details"},{id:"express_eagerness",text:`"I'm excited to take this journey, even if we're going slowly."`,consequence:"Positive attitude  Shows enthusiasm despite gradual pace",effects:[{characterId:"elena",affectionChange:45}],nextScene:"amazed_acceptance"}]},{id:"arrangement_honored",title:"Keeping Promises",text:["The commitment to honor all arrangements and agreements becomes a cornerstone of trust.",`Isadora speaks with approval: "Your word clearly means something to you. That's the foundation of all good relationships."`,`"When promises are kept consistently, trust grows naturally. When they're broken, it can take years to rebuild."`,"The emphasis on reliability and integrity resonates deeply with your values."],character:b.isadora,background:"/backgrounds/grand-hall.png",choices:[{id:"commit_to_reliability",text:'"My word is my bond. You can count on me to keep every promise I make."',consequence:"Reliability commitment  Emphasizes trustworthiness",effects:[{characterId:"isadora",affectionChange:45}],nextScene:"trust_acknowledged"},{id:"ask_about_expectations",text:'"What promises and commitments are most important to honor here?"',consequence:"Expectation clarity  Seeks understanding of key commitments",effects:[{characterId:"isadora",affectionChange:40}],nextScene:"arrangement_details"},{id:"appreciate_emphasis",text:'"I appreciate that integrity matters so much here. It shows the quality of this community."',consequence:"Value appreciation  Recognizes community character",effects:[{characterId:"isadora",affectionChange:50}],nextScene:"coven_hierarchy_revealed"}]},{id:"arrangement_details",title:"Working Out the Specifics",text:["The conversation turns to practical details of how your new role will function day-to-day.",`Celeste takes the lead: "We'll need to establish schedules, responsibilities, boundaries, and protocols for various situations."`,'Isadora adds: "Clear expectations prevent misunderstandings and help everyone feel secure in their roles."',"The attention to practical details shows their commitment to making this work smoothly."],character:b.celeste,background:"/backgrounds/grand-hall.png",choices:[{id:"request_written_guidelines",text:'"Could we document these arrangements so everyone has clear reference?"',consequence:"Documentation request  Seeks formal clarity",effects:[{characterId:"celeste",affectionChange:40},{characterId:"isadora",affectionChange:25}],nextScene:"negotiation_begins"},{id:"suggest_trial_period",text:'"Maybe we could start with provisional arrangements and adjust as we learn?"',consequence:"Flexible approach  Suggests adaptive arrangements",effects:[{characterId:"celeste",affectionChange:35}],nextScene:"provisional_agreement"},{id:"focus_on_communication",text:'"I think regular check-ins will be more important than rigid rules."',consequence:"Communication emphasis  Prioritizes ongoing dialogue",effects:[{characterId:"celeste",affectionChange:45}],nextScene:"collaborative_governance"}]},{id:"negotiation_begins",title:"Finding Common Ground",text:["The process of negotiating your role becomes an exercise in collaborative problem-solving.","Everyone contributes ideas, concerns, and suggestions, working toward arrangements that serve everyone's needs.",'Lilith observes: "This is exactly how Cordelia approached decisions - inclusive, thoughtful, focused on the common good."',"The collaborative approach makes you feel valued as an equal participant rather than a supplicant."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"appreciate_inclusion",text:'"I love that everyone gets input. This feels like true partnership."',consequence:"Partnership appreciation  Values inclusive decision-making",effects:[{characterId:"lilith",affectionChange:40},{characterId:"valentina",affectionChange:20}],nextScene:"collaborative_governance"},{id:"contribute_actively",text:'"Let me contribute some ideas based on my perspective and experience."',consequence:"Active participation  Offers to contribute to solutions",effects:[{characterId:"lilith",affectionChange:35}],nextScene:"partnership_explanation"},{id:"seek_win_win",text:'"I want to find solutions that benefit everyone, not just accommodate me."',consequence:"Win-win focus  Prioritizes mutual benefit",effects:[{characterId:"lilith",affectionChange:45}],nextScene:"diplomatic_bridge_building"}]},{id:"manor_tour_begins",title:"Exploring Your New Home",text:["The comprehensive tour of Ravencroft Manor reveals the depth of history and care invested in this sanctuary.","Elena guides you through libraries, art studios, meditation spaces, and comfortable living areas.",'"Every room has been designed with both beauty and function in mind. This is a home, not just a residence."',"The thoughtful design and maintenance show how much this place means to everyone who lives here."],character:b.elena,background:"/backgrounds/grand-hall.png",choices:[{id:"appreciate_design",text:'"The attention to detail is incredible. Every space feels both beautiful and purposeful."',consequence:"Design appreciation  Recognizes thoughtful planning",effects:[{characterId:"elena",affectionChange:35},{characterId:"morgana",affectionChange:20}],nextScene:"historical_tour"},{id:"ask_about_personalization",text:'"Can I contribute to the design and feel of the spaces? Add my own touches?"',consequence:"Personalization interest  Wants to contribute to home feel",effects:[{characterId:"elena",affectionChange:40}],nextScene:"resident_introductions"},{id:"focus_on_comfort",text:`"It really does feel like a home, not just a grand mansion. That's special."`,consequence:"Comfort recognition  Appreciates homey atmosphere",effects:[{characterId:"elena",affectionChange:45}],nextScene:"practical_coexistence"}]},{id:"historical_tour",title:"Stories in Stone",text:["The manor's history unfolds as you explore rooms that have witnessed decades of vampire life.",'Lilith shares stories: "This library saw countless late-night philosophical discussions. That parlor hosted negotiations that prevented wars."',`"Every corner holds memories of growth, conflict, resolution, and love. You're about to become part of that history."`,"The weight of historical significance makes your future role feel both daunting and honored."],character:b.lilith,background:"/backgrounds/library.png",choices:[{id:"honor_the_history",text:'"I want to add to this history respectfully, honoring what came before while building the future."',consequence:"Historical respect  Balances tradition with progress",effects:[{characterId:"lilith",affectionChange:45},{characterId:"isadora",affectionChange:25}],nextScene:"legacy_acceptance"},{id:"ask_about_stories",text:'"Will you tell me more of these stories? I want to understand the full context."',consequence:"Story interest  Seeks deeper historical understanding",effects:[{characterId:"lilith",affectionChange:40}],nextScene:"cordelia_love_story"},{id:"focus_on_future",text:`"I'm excited about the history we'll create together in these rooms."`,consequence:"Future focus  Emphasizes upcoming shared experiences",effects:[{characterId:"lilith",affectionChange:50}],nextScene:"new_memory_creation"}]},{id:"resident_introductions",title:"Meeting the Family",text:["Formal introductions allow you to connect with each resident as an individual rather than part of a group.","Each person shares something personal - a passion, a concern, a hope for the future.","The individual connections feel more intimate and meaningful than group interactions.","You begin to see the unique personality and story of each family member."],choices:[{id:"focus_on_individuals",text:"Take time to really connect with each person individually.",consequence:"Individual connection  Prioritizes personal relationships",effects:[{characterId:"elena",affectionChange:25},{characterId:"morgana",affectionChange:25},{characterId:"celeste",affectionChange:20}],nextScene:"individual_connections"},{id:"ask_about_roles",text:"Learn about everyone's specific roles and contributions to the sanctuary.",consequence:"Role understanding  Seeks to understand community structure",effects:[{characterId:"celeste",affectionChange:30},{characterId:"isadora",affectionChange:25}],nextScene:"coven_hierarchy_revealed"},{id:"share_about_yourself",text:"Open up about your own background, interests, and hopes.",consequence:"Personal sharing  Offers reciprocal openness",effects:[{characterId:"elena",affectionChange:30},{characterId:"seraphina",affectionChange:25}],nextScene:"memory_sharing"}]},{id:"conversation_continues",title:"Deepening Understanding",text:["As conversations deepen, barriers continue to fall and genuine connections form.","What started as formal introductions becomes natural, flowing dialogue about hopes, dreams, and experiences.","You find yourself laughing, debating, and sharing in ways that feel entirely natural.","The transition from stranger to family member is happening more quickly than you expected."],choices:[{id:"embrace_natural_flow",text:"Let the conversations develop organically without forcing connection.",consequence:"Natural development  Allows authentic relationship building",effects:[{characterId:"elena",affectionChange:25},{characterId:"morgana",affectionChange:20},{characterId:"umbra",affectionChange:25}],nextScene:"natural_acceptance"},{id:"ask_thoughtful_questions",text:"Ask deeper questions that show genuine interest in their experiences.",consequence:"Thoughtful inquiry  Shows deep interest in their lives",effects:[{characterId:"celeste",affectionChange:30},{characterId:"seraphina",affectionChange:25}],nextScene:"fearless_inquiry"},{id:"share_vulnerabilities",text:"Share some of your own vulnerabilities and uncertainties.",consequence:"Vulnerable sharing  Opens up authentically",effects:[{characterId:"elena",affectionChange:35},{characterId:"seraphina",affectionChange:30}],nextScene:"shared_grief"}]},{id:"seraphina_healer_introduction",title:"The Fallen Angel's Grace",text:["Seraphina approaches with otherworldly grace, her presence immediately calming your anxieties.",`"I sense your fear," she says gently. "It's natural when facing the unknown. I once felt the same terror when I chose to fall from Heaven."`,'"My gift is healing - not just physical wounds, but emotional and spiritual ones. Let me help ease your transition."',"Her divine nature feels comforting rather than intimidating, like being wrapped in warm starlight."],character:b.seraphina,background:"/backgrounds/grand-hall.png",choices:[{id:"accept_healing_offer",text:'"I would be grateful for your help. This is all so overwhelming."',consequence:"Accepts healing  Opens to divine comfort",effects:[{characterId:"seraphina",affectionChange:45}],nextScene:"phobia_management_discussion"},{id:"ask_about_falling",text:'"What was it like to fall from Heaven? How did you cope with such a massive change?"',consequence:"Personal curiosity  Seeks understanding of her experience",effects:[{characterId:"seraphina",affectionChange:40}],nextScene:"flight_memories"},{id:"appreciate_divine_nature",text:'"Your presence is incredibly peaceful. I can feel something sacred in you."',consequence:"Divine recognition  Acknowledges her holy nature",effects:[{characterId:"seraphina",affectionChange:50}],nextScene:"divine_understanding"}]},{id:"phobia_management_discussion",title:"Overcoming Fear",text:["Seraphina shares techniques for managing the overwhelming nature of supernatural encounters.",'"Fear is wisdom speaking - it keeps you alive. But when fear becomes paralysis, it needs guidance."',`"Breathing exercises, grounding techniques, gradual exposure - we'll help you build confidence step by step."`,"Her approach feels both practical and spiritually nurturing."],character:b.seraphina,background:"/backgrounds/grand-hall.png",choices:[{id:"request_immediate_help",text:'"Could we start with some techniques right now? I could use the support."',consequence:"Immediate support  Seeks current assistance",effects:[{characterId:"seraphina",affectionChange:40}],nextScene:"fear_overcoming_support"},{id:"ask_about_gradual_exposure",text:'"How does gradual exposure work with supernatural experiences?"',consequence:"Method curiosity  Wants to understand the process",effects:[{characterId:"seraphina",affectionChange:35}],nextScene:"patience_training"},{id:"appreciate_understanding",text:'"Thank you for understanding that fear can be both helpful and limiting."',consequence:"Appreciation  Values her balanced perspective",effects:[{characterId:"seraphina",affectionChange:45}],nextScene:"comfort_accepted"}]},{id:"fear_overcoming_support",title:"Building Courage Together",text:["Seraphina guides you through practical exercises for managing supernatural anxiety.","Her calm presence and gentle encouragement help you feel more grounded and capable.",`"Courage isn't the absence of fear - it's feeling the fear and choosing to act with love anyway."`,"Each small step forward builds your confidence for the journey ahead."],character:b.seraphina,background:"/backgrounds/grand-hall.png",choices:[{id:"practice_regularly",text:'"I want to practice these techniques regularly. Will you help me maintain this progress?"',consequence:"Commitment to growth  Seeks ongoing support",effects:[{characterId:"seraphina",affectionChange:45}],nextScene:"patient_guidance"},{id:"share_progress",text:'"I already feel more centered. Your guidance is incredibly effective."',consequence:"Progress recognition  Acknowledges improvement",effects:[{characterId:"seraphina",affectionChange:40}],nextScene:"courage_recognition"},{id:"ask_about_love_approach",text:`"Acting with love instead of fear - that's a beautiful philosophy. Tell me more."`,consequence:"Philosophy interest  Wants to understand love-based approach",effects:[{characterId:"seraphina",affectionChange:50}],nextScene:"divine_understanding"}]},{id:"raven_acknowledgment",title:"The Warrior's Respect",text:["Raven studies you with the careful assessment of someone who has seen many battles.",`"You have more steel in your spine than most mortals I've encountered," she observes approvingly.`,`"Strength isn't about fearlessness - it's about facing danger for something worth protecting."`,"Her respect feels hard-earned and deeply meaningful."],character:b.raven,background:"/backgrounds/grand-hall.png",choices:[{id:"honor_her_assessment",text:'"Coming from a warrior like you, that means everything. Thank you."',consequence:"Honor acceptance  Values warrior's respect",effects:[{characterId:"raven",affectionChange:40}],nextScene:"courage_recognition"},{id:"ask_about_protection",text:'"What do you see as worth protecting here? What drives your strength?"',consequence:"Values inquiry  Seeks understanding of her motivations",effects:[{characterId:"raven",affectionChange:45}],nextScene:"guardian_oath"},{id:"request_training",text:'"I want to become stronger, more capable of protecting what matters. Will you teach me?"',consequence:"Training request  Seeks to develop protective abilities",effects:[{characterId:"raven",affectionChange:50}],nextScene:"threat_assessment"}]},{id:"isadora_political_dance",title:"The Art of Diplomacy",text:["Isadora demonstrates the subtle art of supernatural politics through graceful conversation.",'"Every word carries weight in our world. A misplaced phrase can start wars; the right sentiment can prevent them."','"Diplomacy is like dancing - it requires grace, timing, and the ability to lead or follow as the situation demands."',"You begin to understand the complex social dynamics that keep supernatural communities stable."],character:b.isadora,background:"/backgrounds/grand-hall.png",choices:[{id:"request_diplomacy_lessons",text:'"I want to learn this art. Will you teach me the nuances of supernatural diplomacy?"',consequence:"Diplomacy learning  Seeks political education",effects:[{characterId:"isadora",affectionChange:45}],nextScene:"diplomatic_bridge_building"},{id:"appreciate_complexity",text:`"I had no idea how complex and delicate these relationships are. It's fascinating."`,consequence:"Complexity appreciation  Recognizes political sophistication",effects:[{characterId:"isadora",affectionChange:40}],nextScene:"coven_hierarchy_revealed"},{id:"ask_about_mistakes",text:'"What are the most dangerous mistakes a newcomer might make politically?"',consequence:"Risk awareness  Seeks to avoid diplomatic errors",effects:[{characterId:"isadora",affectionChange:50}],nextScene:"practical_concerns"}]},{id:"luna_prophecy_glimpse",title:"Visions of Tomorrow",text:["Luna steps forward from the shadows like a living constellation. She's ethereally beautiful with long silver-white hair that seems to shimmer with its own inner light, and deep violet eyes that hold the depth of eternity. Her pale skin has an otherworldly luminescence, as if starlight flows beneath the surface.","She wears flowing dark robes adorned with celestial symbols that seem to move and shift when you're not looking directly at them. Delicate silver jewelry catches the light, and her movements have a dreamlike quality that suggests she exists partially in this world and partially in realms beyond.",'Her eyes grow distant as she shares fragments of prophetic visions about your future. "I see threads of possibility - paths where you bring great change, others where you find deep love, some where you face terrible choices."','"The future is not fixed, but your presence here creates ripples that will be felt for generations." Her voice carries the weight of cosmic knowledge.',"Her mysterious insights both intrigue and unnerve you."],character:b.luna,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_about_specific_visions",text:'"Can you tell me more about these visions? What kinds of changes do you see?"',consequence:"Vision curiosity  Seeks specific prophetic details",effects:[{characterId:"luna",affectionChange:40}],nextScene:"purpose_revelation"},{id:"focus_on_choices",text:'"You mentioned terrible choices. How can I prepare to make the right decisions?"',consequence:"Choice preparation  Seeks guidance for future decisions",effects:[{characterId:"luna",affectionChange:45}],nextScene:"leadership_wisdom"},{id:"embrace_uncertainty",text:`"I'll focus on making each day meaningful rather than worrying about distant futures."`,consequence:"Present focus  Chooses immediate over prophetic",effects:[{characterId:"luna",affectionChange:35}],nextScene:"living_testament"}]},{id:"elena_isolation_bridge",title:"Reaching Across Loneliness",text:["Elena opens up about the profound isolation that comes with immortal existence.",'"Centuries of watching mortal friends age and die, of hiding our true nature, of never quite belonging anywhere..."',`"But your presence here offers something I'd almost forgotten - the possibility of genuine connection without pretense."`,"Her vulnerability creates a bridge of understanding between your experiences."],character:b.elena,background:"/backgrounds/grand-hall.png",choices:[{id:"share_your_isolation",text:`"I understand loneliness too. Maybe we can help heal each other's isolation."`,consequence:"Mutual healing  Offers reciprocal support",effects:[{characterId:"elena",affectionChange:50}],nextScene:"elena_comfort_accepted"},{id:"offer_genuine_connection",text:`"I want to offer you the genuine connection you've been missing."`,consequence:"Connection offer  Promises authentic relationship",effects:[{characterId:"elena",affectionChange:45}],nextScene:"artistic_soul_connection"},{id:"ask_about_belonging",text:'"How do we create a space where everyone truly belongs?"',consequence:"Belonging focus  Seeks to build inclusive community",effects:[{characterId:"elena",affectionChange:55}],nextScene:"new_community"}]},{id:"coven_hierarchy_revealed",title:"Understanding the Structure",text:["Celeste explains the complex hierarchy and relationships within the supernatural community.",'"We have elders who provide wisdom, specialists who handle specific needs, and newer members who bring fresh perspectives."',`"It's not rigid - roles can evolve, and respect is earned through contribution rather than just age or power."`,"The structure feels more like a family with specialized roles than a strict hierarchy."],character:b.celeste,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_about_your_place",text:'"Where would I fit in this structure? What would my role and responsibilities be?"',consequence:"Role inquiry  Seeks understanding of personal position",effects:[{characterId:"celeste",affectionChange:35}],nextScene:"cordelia_role_detailed"},{id:"appreciate_flexibility",text:`"I love that it's flexible and based on contribution rather than rigid hierarchy."`,consequence:"Structure appreciation  Values merit-based system",effects:[{characterId:"celeste",affectionChange:40}],nextScene:"collaborative_governance"},{id:"ask_about_decision_making",text:'"How are important decisions made? Who has input on major choices?"',consequence:"Process curiosity  Wants to understand governance",effects:[{characterId:"celeste",affectionChange:45}],nextScene:"democratic_coven"}]},{id:"revolutionary_recruitment",title:"The Call for Change",text:["Valentina passionately presents her vision for transforming vampire society.",'"We have the power to reshape the supernatural world - to create justice where there has been oppression, equality where there has been hierarchy."','"Your fresh perspective could be exactly what this revolution needs. Will you stand with us for real change?"',"Her revolutionary fervor is both inspiring and slightly overwhelming."],character:b.valentina,background:"/backgrounds/grand-hall.png",choices:[{id:"join_the_revolution",text:'"Yes, I want to help create a more just supernatural world."',consequence:"Revolutionary commitment  Joins the cause for change",effects:[{characterId:"valentina",affectionChange:55},{characterId:"isadora",affectionChange:-15}],nextScene:"revolutionary_planning"},{id:"seek_middle_ground",text:`"I support change, but I'd prefer gradual reform over revolution."`,consequence:"Moderate approach  Seeks compromise between extremes",effects:[{characterId:"valentina",affectionChange:25},{characterId:"isadora",affectionChange:20}],nextScene:"moderate_coalition_building"},{id:"request_more_information",text:'"Tell me more about your specific goals and methods before I decide."',consequence:"Information gathering  Seeks details before commitment",effects:[{characterId:"valentina",affectionChange:30}],nextScene:"alternative_strategies"}]},{id:"diplomatic_bridge_building",title:"The Art of Connection",text:["Isadora teaches you the delicate art of building bridges between opposing factions.",`"True diplomacy isn't about compromise for its own sake - it's about finding genuine common ground and shared values."`,'"Sometimes the best solution is one that no one initially considered, born from real understanding between different perspectives."',"Her approach emphasizes patience, listening, and creative problem-solving."],character:b.isadora,background:"/backgrounds/grand-hall.png",choices:[{id:"practice_diplomacy",text:'"I want to develop these skills. Can we practice with real scenarios?"',consequence:"Skill development  Seeks practical diplomatic training",effects:[{characterId:"isadora",affectionChange:45}],nextScene:"bridging_divisions"},{id:"apply_to_current_conflict",text:'"How can we apply these principles to the current tensions in the coven?"',consequence:"Immediate application  Seeks to help current situation",effects:[{characterId:"isadora",affectionChange:50}],nextScene:"compromise_discussion"},{id:"focus_on_understanding",text:'"Teaching me to truly understand different perspectives seems most important."',consequence:"Understanding priority  Values empathy development",effects:[{characterId:"isadora",affectionChange:55}],nextScene:"principled_neutrality"}]},{id:"valentina_war_stories",title:"Tales from the Battlefield",text:["Valentina shares stories from supernatural conflicts she's witnessed or participated in.",`"I've seen what happens when oppression goes unchecked - communities destroyed, individuals broken, potential lost forever."`,`"But I've also seen what's possible when people stand up and fight for what's right. Real change is possible."`,"Her experiences add weight and context to her revolutionary fervor."],character:b.valentina,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_about_victories",text:`"Tell me about the successful changes you've helped create."`,consequence:"Success focus  Interested in positive outcomes",effects:[{characterId:"valentina",affectionChange:40}],nextScene:"historical_conflicts"},{id:"inquire_about_costs",text:'"What have been the costs of these conflicts? How do we minimize harm?"',consequence:"Cost awareness  Concerned about collateral damage",effects:[{characterId:"valentina",affectionChange:35},{characterId:"seraphina",affectionChange:20}],nextScene:"careful_revolution"},{id:"focus_on_prevention",text:'"How do we prevent the conditions that lead to these conflicts in the first place?"',consequence:"Prevention focus  Seeks root cause solutions",effects:[{characterId:"valentina",affectionChange:45}],nextScene:"alternative_strategies"}]},{id:"forbidden_knowledge_access",title:"Secrets of the Supernatural",text:["Celeste offers access to rare and forbidden knowledge about supernatural history and abilities.",'"This information has been guarded for centuries, shared only with those who prove themselves trustworthy."',`"Knowledge is power, but it's also responsibility. Are you prepared for what you might learn?"`,"The offer feels both thrilling and daunting."],character:b.celeste,background:"/backgrounds/grand-hall.png",choices:[{id:"accept_knowledge_fully",text:`"Yes, I want to learn everything. I'm ready for the responsibility."`,consequence:"Full knowledge acceptance  Heavy sanity cost for complete forbidden learning",effects:[{characterId:"celeste",affectionChange:50}],playerStatEffects:{sanityChange:-25},nextScene:"cordelia_research_revealed"},{id:"request_gradual_access",text:'"Could we approach this gradually? I want to process each revelation properly."',consequence:"Gradual learning  Seeks measured knowledge acquisition",effects:[{characterId:"celeste",affectionChange:40}],nextScene:"patient_guidance"},{id:"ask_about_safeguards",text:`"What safeguards exist to ensure this knowledge isn't misused?"`,consequence:"Security concern  Worried about knowledge protection",effects:[{characterId:"celeste",affectionChange:45}],nextScene:"restriction_analysis"}]},{id:"cordelia_research_revealed",title:"Cordelia's Hidden Studies",text:["Celeste reveals Cordelia's extensive research into mortal-vampire integration and psychic development.",'"She spent decades studying how mortals could safely develop supernatural abilities while maintaining their humanity."','"Her research could guide your own development and help us understand the unique role Anchors can play."',"The depth of Cordelia's preparation for your arrival becomes clear."],character:b.celeste,background:"/backgrounds/gothic-manor-entrance.png",choices:[{id:"study_the_research",text:'"I want to study everything she discovered. Her research could be invaluable."',consequence:"Research dedication  Commits to studying Cordelia's work",effects:[{characterId:"celeste",affectionChange:50}],nextScene:"pragmatic_testing_approach"},{id:"focus_on_practical_application",text:'"How can we apply her findings to my situation right now?"',consequence:"Practical focus  Seeks immediate application",effects:[{characterId:"celeste",affectionChange:45}],nextScene:"psychic_training_offered"},{id:"honor_her_legacy",text:'"I want to continue her research and build on her discoveries."',consequence:"Legacy continuation  Seeks to advance her work",effects:[{characterId:"celeste",affectionChange:55}],nextScene:"cordelia_psychic_legacy"}]},{id:"elena_comfort_accepted",title:"Finding Solace Together",text:["Elena gratefully accepts your offer of comfort and companionship.",`"It's been so long since I felt truly understood. Your presence here fills a void I'd forgotten existed."`,'"Perhaps together we can heal some of the wounds that centuries of isolation have created."',"The mutual comfort creates a deep bond of understanding and support."],character:b.elena,background:"/backgrounds/grand-hall.png",choices:[{id:"promise_continued_support",text:'"I promise to be here for you, to help heal those wounds together."',consequence:"Support commitment  Promises ongoing emotional care",effects:[{characterId:"elena",affectionChange:55}],nextScene:"artistic_soul_connection"},{id:"share_healing_journey",text:`"Let's embark on this healing journey together. We both have wounds that need tending."`,consequence:"Mutual healing  Emphasizes shared recovery",effects:[{characterId:"elena",affectionChange:50}],nextScene:"shared_grief"},{id:"create_new_memories",text:`"Let's create new memories together that can help overshadow the painful ones."`,consequence:"Memory creation  Focuses on building positive experiences",effects:[{characterId:"elena",affectionChange:60}],nextScene:"new_memory_creation"}]},{id:"artistic_soul_connection",title:"Kindred Creative Spirits",text:["Elena reveals her own artistic nature and the deep connection she feels with your creative spirit.",'"I see in you a fellow artist - someone who understands that creation is healing, that beauty can emerge from pain."','"Perhaps we could collaborate, create something together that expresses what words cannot."',"The recognition of shared artistic passion creates an immediate and profound bond."],character:b.elena,background:"/backgrounds/grand-hall.png",choices:[{id:"embrace_collaboration",text:`"Yes, let's create something beautiful together. Art as healing sounds perfect."`,consequence:"Artistic collaboration  Embraces creative partnership",effects:[{characterId:"elena",affectionChange:55},{characterId:"morgana",affectionChange:25}],nextScene:"artistic_collaboration_planned"},{id:"explore_art_as_healing",text:'"Tell me more about how art can be healing. I want to understand this connection."',consequence:"Healing curiosity  Seeks understanding of therapeutic art",effects:[{characterId:"elena",affectionChange:50}],nextScene:"elena_purpose_reframing"},{id:"share_your_creative_journey",text:'"Let me share my own creative journey with you. Maybe our stories can inspire each other."',consequence:"Story sharing  Offers reciprocal creative vulnerability",effects:[{characterId:"elena",affectionChange:60}],nextScene:"memory_sharing"}]},{id:"elena_purpose_reframing",title:"Discovering New Meaning",text:["Elena helps you understand how your arrival has given new purpose to everyone in the sanctuary.",`"For centuries, we've existed without clear direction. Your presence offers us a chance to become something more meaningful."`,`"We're not just surviving anymore - we're building something beautiful and lasting."`,"The shift from mere existence to purposeful living feels transformative for everyone involved."],character:b.elena,background:"/backgrounds/gothic-manor-entrance.png",choices:[{id:"embrace_shared_purpose",text:`"I'm honored to help everyone find new meaning and direction."`,consequence:"Purpose acceptance  Embraces role in providing direction",effects:[{characterId:"elena",affectionChange:50}],nextScene:"living_testament"},{id:"ask_about_individual_purposes",text:'"How has this changed the personal goals and dreams of each person here?"',consequence:"Individual focus  Interested in personal transformations",effects:[{characterId:"elena",affectionChange:45}],nextScene:"transformation_celebration"},{id:"focus_on_building_together",text:`"Let's focus on what we can build together, step by step."`,consequence:"Collaborative building  Emphasizes shared construction",effects:[{characterId:"elena",affectionChange:55}],nextScene:"new_community"}]},{id:"moderate_coalition_building",title:"Finding Middle Ground",text:["You work to build a coalition of moderate voices who support gradual but meaningful change.","Both traditionalists and revolutionaries contribute ideas for sustainable reform that addresses real problems without causing upheaval.","The collaborative approach creates solutions that have broader support and better chances of success.","Compromise proves to be more creative and effective than either extreme position alone."],choices:[{id:"formalize_coalition",text:"Establish formal structures for ongoing moderate collaboration.",consequence:"Coalition formalization  Creates lasting moderate alliance",effects:[{characterId:"isadora",affectionChange:40},{characterId:"valentina",affectionChange:20},{characterId:"celeste",affectionChange:30}],nextScene:"collaborative_governance"},{id:"focus_on_implementation",text:"Concentrate on implementing the moderate reforms you've developed.",consequence:"Implementation focus  Prioritizes putting ideas into action",effects:[{characterId:"isadora",affectionChange:35},{characterId:"lilith",affectionChange:25}],nextScene:"measured_progress"},{id:"expand_participation",text:"Invite more community members to join the moderate coalition.",consequence:"Participation expansion  Seeks broader moderate involvement",effects:[{characterId:"isadora",affectionChange:45},{characterId:"elena",affectionChange:25}],nextScene:"democratic_coven"}]},{id:"restriction_analysis",title:"Understanding Limitations",text:["Celeste carefully explains the restrictions and safeguards around supernatural knowledge and abilities.",'"These limitations exist not to control, but to protect. Some knowledge can be dangerous in the wrong hands or at the wrong time."','"The goal is responsible development - gaining power and knowledge while maintaining wisdom and ethics."',"The thoughtful approach to power and knowledge reassures you about the community's values."],character:b.celeste,background:"/backgrounds/grand-hall.png",choices:[{id:"accept_gradual_approach",text:`"I understand. I'd rather develop slowly and safely than risk harm."`,consequence:"Safety priority  Chooses gradual safe development",effects:[{characterId:"celeste",affectionChange:45}],nextScene:"gradual_integration"},{id:"ask_about_oversight",text:'"Who provides oversight? How do we ensure these restrictions are fair?"',consequence:"Oversight inquiry  Seeks understanding of governance",effects:[{characterId:"celeste",affectionChange:40}],nextScene:"anchor_oversight"},{id:"propose_transparency",text:'"Could we make these restrictions more transparent so everyone understands them?"',consequence:"Transparency proposal  Seeks clearer communication",effects:[{characterId:"celeste",affectionChange:50}],nextScene:"democratic_coven"}]},{id:"pragmatic_testing_approach",title:"Scientific Method",text:["Celeste proposes a systematic, scientific approach to testing and developing your abilities.",`"We'll document everything, test systematically, and proceed based on evidence rather than assumptions."`,`"Cordelia's research provides the foundation, but your experience will advance the science."`,"The methodical approach feels both exciting and reassuring."],character:b.celeste,background:"/backgrounds/grand-hall.png",choices:[{id:"embrace_scientific_method",text:`"I love this approach. Let's build a solid foundation of knowledge."`,consequence:"Scientific enthusiasm  Embraces methodical development",effects:[{characterId:"celeste",affectionChange:50}],nextScene:"cordelia_research_revealed"},{id:"request_participation_in_design",text:'"Can I help design the testing protocols? I want to understand the methodology."',consequence:"Design participation  Seeks involvement in planning",effects:[{characterId:"celeste",affectionChange:45}],nextScene:"collaborative_governance"},{id:"focus_on_safety_protocols",text:'"What safety protocols will we have in place during testing?"',consequence:"Safety concern  Prioritizes protection during development",effects:[{characterId:"celeste",affectionChange:55}],nextScene:"patient_guidance"}]},{id:"umbra_shares_story",title:"Tales from Beyond",text:["Umbra timidly begins to share fragments of their existence before arriving at the sanctuary.",'"I... I drifted between dimensions for eons, watching but never belonging, seeing beauty but never being part of it."','"The loneliness was... indescribable. But here, for the first time, I feel... noticed. Valued."',"Their vulnerability and gratitude create a profound emotional connection."],character:b.umbra,background:"/backgrounds/grand-hall.png",choices:[{id:"offer_belonging",text:`"You belong here now. You're not alone anymore."`,consequence:"Belonging assurance  Offers security and acceptance",effects:[{characterId:"umbra",affectionChange:55}],nextScene:"umbra_overwhelming_gratitude"},{id:"ask_about_dimensions",text:'"What were those other dimensions like? What did you see?"',consequence:"Dimensional curiosity  Interested in their experiences",effects:[{characterId:"umbra",affectionChange:45}],nextScene:"umbra_shares_cosmic_stories"},{id:"appreciate_their_perspective",text:'"Your unique perspective must give you incredible insights into existence."',consequence:"Perspective appreciation  Values their otherworldly viewpoint",effects:[{characterId:"umbra",affectionChange:50}],nextScene:"umbra_shares_cosmic_wonders"}]},{id:"eldritch_nature_explained",title:"Understanding the Unknowable",text:["Umbra carefully explains their eldritch nature in terms you can comprehend.",'"I exist partially outside normal reality - time flows differently for me, space bends around my presence."','"I try to contain my true form to avoid overwhelming others, but sometimes... sometimes I slip."',"Their consideration for others despite their alien nature shows remarkable empathy."],character:b.umbra,background:"/backgrounds/grand-hall.png",choices:[{id:"appreciate_consideration",text:'"Thank you for being so considerate of our limitations."',consequence:"Consideration appreciation  Values their thoughtfulness",effects:[{characterId:"umbra",affectionChange:50}],nextScene:"umbra_appreciates_patience"},{id:"ask_about_true_form",text:`"I'd like to understand your true nature better, if you're comfortable sharing."`,consequence:"Understanding desire  Seeks deeper knowledge despite alien nature",effects:[{characterId:"umbra",affectionChange:45}],nextScene:"umbra_reveals_true_self"},{id:"offer_acceptance",text:`"I accept all aspects of your nature. You don't have to hide yourself."`,consequence:"Complete acceptance  Embraces their eldritch nature fully",effects:[{characterId:"umbra",affectionChange:60}],nextScene:"umbra_touched_by_understanding"}]},{id:"family_values_discussion",title:"What Makes a Family",text:["The conversation turns to what truly makes a family, especially one as unconventional as yours.",`Umbra observes: "Family isn't about sharing blood or species... it's about choosing to care for each other."`,`"You've all chosen me, despite my strangeness. That makes you more family than I ever hoped to have."`,"The definition of family expands to include choice, acceptance, and unconditional care."],character:b.umbra,background:"/backgrounds/grand-hall.png",choices:[{id:"affirm_chosen_family",text:'"Chosen family is often stronger than blood family. We chose each other."',consequence:"Chosen family affirmation  Validates family by choice",effects:[{characterId:"umbra",affectionChange:55},{characterId:"elena",affectionChange:25}],nextScene:"new_community"},{id:"celebrate_differences",text:'"Our differences make us stronger. Each person brings something unique and valuable."',consequence:"Diversity celebration  Values individual contributions",effects:[{characterId:"umbra",affectionChange:50},{characterId:"morgana",affectionChange:20}],nextScene:"transformation_celebration"},{id:"commit_to_care",text:'"I promise to care for everyone here, regardless of how different we might be."',consequence:"Care commitment  Promises unconditional support",effects:[{characterId:"umbra",affectionChange:60}],nextScene:"bond_protection_vow"}]},{id:"umbra_overwhelming_gratitude",title:"Cosmic Appreciation",text:["Umbra's gratitude manifests in ways that transcend normal emotional expression.","The air around them shimmers with starlight, and you feel a wave of pure, overwhelming appreciation.",'"Never... never has anyone offered me belonging so freely. I am... I am transformed by your kindness."',"Their cosmic nature makes their emotions feel vast and profound."],character:b.umbra,background:"/backgrounds/grand-hall.png",choices:[{id:"share_mutual_gratitude",text:`"Your presence has transformed all of us too. We're grateful for you."`,consequence:"Mutual gratitude  Expresses reciprocal appreciation",effects:[{characterId:"umbra",affectionChange:60}],nextScene:"umbra_mutual_discovery"},{id:"embrace_cosmic_emotion",text:`"I can feel the depth of your gratitude. It's beautiful and overwhelming."`,consequence:"Emotional connection  Acknowledges their cosmic emotional expression",effects:[{characterId:"umbra",affectionChange:55}],nextScene:"umbra_demonstrates_forms"},{id:"ground_in_present",text:`"Let's focus on building our future together, one day at a time."`,consequence:"Present focus  Grounds cosmic emotion in daily reality",effects:[{characterId:"umbra",affectionChange:50}],nextScene:"living_testament"}]},{id:"umbra_shares_cosmic_stories",title:"Visions from the Void",text:["Umbra shares breathtaking stories of cosmic wonders they witnessed across dimensions.",`"I've seen stars born from the dreams of ancient beings, watched galaxies dance in patterns that spell out forgotten poems."`,'"In one dimension, time flows backward and effect precedes cause. In another, music has physical form and can be sculpted."',"Their tales expand your understanding of what's possible beyond conventional reality."],character:b.umbra,background:"/backgrounds/music-room.png",choices:[{id:"request_more_stories",text:'"Please tell me more. These visions are incredible."',consequence:"Story fascination  Desires more cosmic tales",effects:[{characterId:"umbra",affectionChange:45}],nextScene:"umbra_shares_cosmic_wonders"},{id:"ask_about_bringing_wonders_here",text:'"Could you bring some of these wonders to our reality?"',consequence:"Wonder sharing  Interested in cosmic gifts",effects:[{characterId:"umbra",affectionChange:50}],nextScene:"umbra_demonstrates_forms"},{id:"connect_to_artistic_inspiration",text:'"These visions could inspire incredible art. Would you share them with Morgana and Elena?"',consequence:"Artistic connection  Links cosmic visions to creativity",effects:[{characterId:"umbra",affectionChange:55},{characterId:"morgana",affectionChange:20}],nextScene:"artistic_collaboration_planned"}]},{id:"umbra_appreciates_patience",title:"Grateful for Understanding",text:["Umbra expresses deep appreciation for your patience with their unusual nature.",'"Most beings flee when they sense what I am. You... you stay. You listen. You try to understand."','"Your patience gives me hope that perhaps I can learn to exist harmoniously in this reality."',"Their gratitude feels both humble and profound."],character:b.umbra,background:"/backgrounds/grand-hall.png",choices:[{id:"offer_continued_patience",text:`"I'll always have patience for you. Take all the time you need."`,consequence:"Patience commitment  Promises ongoing understanding",effects:[{characterId:"umbra",affectionChange:55}],nextScene:"umbra_gains_confidence"},{id:"encourage_self_acceptance",text:`"You don't need to change who you are. We accept you as you are."`,consequence:"Acceptance encouragement  Promotes self-acceptance",effects:[{characterId:"umbra",affectionChange:60}],nextScene:"umbra_touched_by_understanding"},{id:"focus_on_harmony",text:`"We'll figure out harmony together. You're not alone in this."`,consequence:"Collaborative harmony  Offers partnership in adaptation",effects:[{characterId:"umbra",affectionChange:50}],nextScene:"family_values_discussion"}]},{id:"umbra_shares_cosmic_wonders",title:"Marvels Beyond Imagination",text:["Umbra describes cosmic phenomena that challenge your understanding of reality.",`"I've witnessed the birth of concepts - watching 'love' and 'hope' come into existence as living entities."`,'"In the spaces between dimensions, beauty exists in forms that have no names in any language."',"Their descriptions paint pictures of impossible, wonderful realities."],character:b.umbra,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_to_experience_some",text:'"Is there any way I could experience even a glimpse of these wonders?"',consequence:"Experience desire  Wants to witness cosmic beauty",effects:[{characterId:"umbra",affectionChange:50}],nextScene:"umbra_demonstrates_forms"},{id:"appreciate_expanded_perspective",text:`"You've expanded my understanding of what's possible. Thank you."`,consequence:"Perspective gratitude  Appreciates mind expansion",effects:[{characterId:"umbra",affectionChange:45}],nextScene:"spiritual_awakening"},{id:"connect_to_earth_beauty",text:'"And now you get to experience the unique beauty of our dimension too."',consequence:"Reciprocal beauty  Highlights local wonders",effects:[{characterId:"umbra",affectionChange:55}],nextScene:"umbra_mutual_discovery"}]},{id:"umbra_reveals_true_self",title:"Beyond the Veil",text:["Umbra carefully reveals glimpses of their true eldritch form - geometric patterns that shift through impossible angles.","You see starlight made solid, space folding in on itself, and beauty that exists outside normal perception.",'"This is who I really am," they whisper. "Do you... do you still accept me?"',"The revelation is overwhelming but somehow beautiful rather than terrifying."],character:b.umbra,background:"/backgrounds/grand-hall.png",choices:[{id:"embrace_true_form",text:`"You're beautiful in ways I never imagined possible. Of course I accept you."`,consequence:"Complete acceptance  Sanity cost for witnessing true eldritch form",effects:[{characterId:"umbra",affectionChange:70}],playerStatEffects:{sanityChange:-10},nextScene:"umbra_touched_by_understanding"},{id:"ask_to_understand_more",text:'"Help me understand this form better. I want to appreciate all aspects of who you are."',consequence:"Understanding desire  Seeks deeper comprehension",effects:[{characterId:"umbra",affectionChange:60}],nextScene:"eldritch_nature_explained"},{id:"share_wonder",text:'"This is incredible. I feel honored that you trust me with this truth."',consequence:"Honor recognition  Appreciates their trust",effects:[{characterId:"umbra",affectionChange:65}],nextScene:"umbra_overwhelming_gratitude"}]},{id:"umbra_mutual_discovery",title:"Learning Together",text:["You and Umbra embark on a journey of mutual discovery, learning about each other's realities.",'"You show me the beauty of linear time, of cause and effect, of emotions tied to physical form."','"I can show you the poetry written in quantum fluctuations, the music of dimensional barriers."',"The exchange of perspectives enriches both of your understandings of existence."],character:b.umbra,background:"/backgrounds/music-room.png",choices:[{id:"establish_regular_exchanges",text:`"Let's make this a regular thing - sharing our different perspectives on reality."`,consequence:"Regular exchange  Establishes ongoing perspective sharing",effects:[{characterId:"umbra",affectionChange:55}],nextScene:"memory_sharing"},{id:"document_discoveries",text:'"We should document these discoveries. They could help others understand."',consequence:"Documentation desire  Wants to record insights for others",effects:[{characterId:"umbra",affectionChange:50},{characterId:"celeste",affectionChange:20}],nextScene:"cordelia_research_revealed"},{id:"celebrate_uniqueness",text:'"Our different natures make this exchange possible. Diversity creates beauty."',consequence:"Diversity celebration  Appreciates differences as strength",effects:[{characterId:"umbra",affectionChange:60}],nextScene:"transformation_celebration"}]},{id:"umbra_gains_confidence",title:"Growing Self-Assurance",text:["Through acceptance and understanding, Umbra begins to gain confidence in their place within the sanctuary.",'"For the first time in eons, I feel... stable. Grounded. Like I belong somewhere."','"Your acceptance has given me the courage to be myself without apology or fear."',"Their growing confidence creates positive changes throughout the community."],character:b.umbra,background:"/backgrounds/grand-hall.png",choices:[{id:"encourage_leadership",text:'"Your unique perspective could help guide important decisions here."',consequence:"Leadership encouragement  Sees potential for guidance role",effects:[{characterId:"umbra",affectionChange:50},{characterId:"lilith",affectionChange:20}],nextScene:"collaborative_governance"},{id:"celebrate_growth",text:`"I'm so proud of how you've grown. You're becoming more yourself every day."`,consequence:"Growth celebration  Celebrates their development",effects:[{characterId:"umbra",affectionChange:55}],nextScene:"transformation_celebration"},{id:"offer_continued_support",text:`"I'll always be here to support your journey of self-discovery."`,consequence:"Support commitment  Promises ongoing encouragement",effects:[{characterId:"umbra",affectionChange:60}],nextScene:"bond_protection_vow"}]},{id:"umbra_demonstrates_forms",title:"Cosmic Artistry",text:["Umbra carefully demonstrates some of their abilities, creating beautiful displays of otherworldly phenomena.","Starlight dances in impossible patterns, creating temporary constellations that tell stories without words.",'"This is how we communicated in the void - through light and pattern and the geometry of meaning."',"The display is breathtakingly beautiful and utterly alien."],character:b.umbra,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_to_learn_communication",text:'"Could you teach me to understand this form of communication?"',consequence:"Communication learning  Heavy sanity cost for learning eldritch language",effects:[{characterId:"umbra",affectionChange:60}],playerStatEffects:{sanityChange:-20},nextScene:"patient_guidance"},{id:"suggest_artistic_collaboration",text:'"This would be incredible combined with traditional art forms."',consequence:"Artistic fusion  Sees potential for mixed-medium art",effects:[{characterId:"umbra",affectionChange:50},{characterId:"morgana",affectionChange:25}],nextScene:"artistic_collaboration_planned"},{id:"appreciate_beauty",text:`"This is the most beautiful thing I've ever seen. Thank you for sharing it."`,consequence:"Beauty appreciation  Expresses awe at their artistry",effects:[{characterId:"umbra",affectionChange:65}],nextScene:"umbra_overwhelming_gratitude"}]},{id:"umbra_touched_by_understanding",title:"Profound Connection",text:["Umbra is deeply moved by your complete acceptance and understanding of their nature.",'"Never... in all my existence across countless dimensions... has anyone accepted me so completely."',"Their gratitude manifests as waves of warm cosmic energy that seem to bless everyone present.","The moment feels sacred - a bridge built between radically different forms of existence."],character:b.umbra,background:"/backgrounds/grand-hall.png",choices:[{id:"offer_eternal_friendship",text:'"You have my friendship for as long as existence itself endures."',consequence:"Eternal bond  Sanity cost for comprehending infinite timescales",effects:[{characterId:"umbra",affectionChange:75}],playerStatEffects:{sanityChange:-12},nextScene:"sacred_vow_sealed"},{id:"share_mutual_gratitude",text:`"I'm equally grateful for you. You've expanded my understanding of what love means."`,consequence:"Mutual gratitude  Expresses reciprocal appreciation",effects:[{characterId:"umbra",affectionChange:70}],nextScene:"divine_understanding"},{id:"focus_on_community_impact",text:`"Your presence makes all of us better. We're lucky to have you in our family."`,consequence:"Community blessing  Recognizes their positive impact",effects:[{characterId:"umbra",affectionChange:65},{characterId:"lilith",affectionChange:20}],nextScene:"new_community"}]},{id:"tension_acknowledged",title:"Recognizing Conflict",text:["You acknowledge the underlying tensions between different factions within the sanctuary.","While everyone shares common goals, there are genuine disagreements about methods, pace of change, and priorities.","Rather than ignoring these tensions, you address them directly with honesty and respect.","Open acknowledgment creates space for constructive dialogue rather than hidden resentment."],choices:[{id:"facilitate_open_discussion",text:"Create a safe space for all sides to express their concerns openly.",consequence:"Conflict mediation  Facilitates honest dialogue",effects:[{characterId:"isadora",affectionChange:30},{characterId:"valentina",affectionChange:25},{characterId:"lilith",affectionChange:20}],nextScene:"compromise_discussion"},{id:"address_root_causes",text:"Focus on understanding the deeper causes behind these tensions.",consequence:"Root analysis  Seeks underlying causes",effects:[{characterId:"celeste",affectionChange:35},{characterId:"seraphina",affectionChange:25}],nextScene:"historical_conflicts"},{id:"propose_structured_resolution",text:"Suggest formal processes for resolving future conflicts constructively.",consequence:"Structural solution  Creates conflict resolution systems",effects:[{characterId:"isadora",affectionChange:40},{characterId:"celeste",affectionChange:30}],nextScene:"democratic_coven"}]},{id:"practical_concerns",title:"Addressing Real Issues",text:["The conversation turns to practical concerns that affect daily life in the sanctuary.","Resource allocation, security protocols, communication systems - the mundane but essential aspects of community life.",`Isadora emphasizes: "Grand ideals mean nothing if we can't manage the practical realities of our existence."`,"Addressing these concerns shows respect for the complexity of supernatural community management."],character:b.isadora,background:"/backgrounds/grand-hall.png",choices:[{id:"volunteer_for_practical_work",text:'"I want to help with the practical aspects. What needs the most attention?"',consequence:"Practical contribution  Offers to help with daily operations",effects:[{characterId:"isadora",affectionChange:45}],nextScene:"arrangement_details"},{id:"suggest_systematic_review",text:'"Should we conduct a systematic review of all our practical systems?"',consequence:"Systematic approach  Proposes comprehensive analysis",effects:[{characterId:"isadora",affectionChange:40},{characterId:"celeste",affectionChange:25}],nextScene:"restriction_analysis"},{id:"propose_efficiency_improvements",text:'"Maybe fresh eyes could identify efficiency improvements in existing systems."',consequence:"Efficiency focus  Seeks optimization opportunities",effects:[{characterId:"isadora",affectionChange:50}],nextScene:"pragmatic_testing_approach"}]},{id:"isadora_agreement",title:"Finding Common Ground",text:["Isadora expresses cautious agreement with your proposed approach to the sanctuary's challenges.",'"Your suggestions show wisdom beyond your years. Perhaps fresh perspective combined with respect for tradition is exactly what we need."',`"I'm willing to support this path, provided we maintain the stability that has kept us safe for so long."`,"Her support feels like a significant political victory for collaborative governance."],character:b.isadora,background:"/backgrounds/grand-hall.png",choices:[{id:"appreciate_her_support",text:'"Your support means everything. Together we can build something lasting."',consequence:"Gratitude expression  Values her political backing",effects:[{characterId:"isadora",affectionChange:45}],nextScene:"collaborative_governance"},{id:"address_stability_concerns",text:'"Stability will remain our foundation. Change will come through careful evolution, not revolution."',consequence:"Stability assurance  Commits to careful progress",effects:[{characterId:"isadora",affectionChange:50}],nextScene:"measured_progress"},{id:"formalize_the_agreement",text:'"Should we formalize this agreement to ensure everyone understands our approach?"',consequence:"Formalization proposal  Seeks clear documentation",effects:[{characterId:"isadora",affectionChange:55}],nextScene:"democratic_coven"}]},{id:"political_divide_deepens",title:"Tensions Escalate",text:["Despite efforts at mediation, the political divide between factions continues to deepen.","Valentina and Isadora's disagreements become more entrenched, with each side gathering supporters.","The sanctuary faces a crossroads - either find a way to bridge these differences or risk permanent fracture.","Your role as mediator becomes more crucial and more difficult."],choices:[{id:"call_for_cooling_off_period",text:"Suggest a temporary pause in political discussions to let emotions settle.",consequence:"Cooling off  Health stress from managing political tensions",effects:[{characterId:"lilith",affectionChange:30},{characterId:"seraphina",affectionChange:25}],playerStatEffects:{healthChange:-5},nextScene:"strategic_patience"},{id:"propose_structured_debate",text:"Organize formal debates with clear rules to ensure all voices are heard.",consequence:"Structured discourse  Creates formal discussion framework",effects:[{characterId:"isadora",affectionChange:35},{characterId:"celeste",affectionChange:30}],nextScene:"compromise_discussion"},{id:"seek_external_mediation",text:"Suggest bringing in neutral outside parties to help mediate.",consequence:"External help  Seeks impartial mediation",effects:[{characterId:"lilith",affectionChange:25}],nextScene:"principled_neutrality"}]},{id:"traditionalist_support",title:"Preserving What Works",text:["You express understanding and support for traditionalist concerns about preserving what has worked well.","Isadora appreciates your recognition that not all change is improvement, and that stability has real value.",`"Tradition isn't just about clinging to the past," she explains. "It's about preserving wisdom that has been tested by time."`,"Your balanced approach helps bridge the gap between innovation and preservation."],character:b.isadora,background:"/backgrounds/grand-hall.png",choices:[{id:"learn_from_tradition",text:'"I want to understand the wisdom embedded in our traditions before proposing changes."',consequence:"Tradition learning  Seeks to understand before changing",effects:[{characterId:"isadora",affectionChange:50}],nextScene:"historical_conflicts"},{id:"propose_gradual_evolution",text:`"Let's build on strong traditions while gradually adapting to new realities."`,consequence:"Evolutionary approach  Balances tradition with adaptation",effects:[{characterId:"isadora",affectionChange:45}],nextScene:"gentle_traditionalism"},{id:"emphasize_preservation",text:'"Our first priority should be preserving what has kept everyone safe and stable."',consequence:"Preservation priority  Emphasizes safety through tradition",effects:[{characterId:"isadora",affectionChange:55}],nextScene:"fortress_ravencroft"}]},{id:"compromise_discussion",title:"Seeking Middle Ground",text:["You facilitate a careful discussion aimed at finding compromises that address everyone's core concerns.","Rather than seeking perfect solutions, the focus is on finding approaches that everyone can live with.","Small concessions from each side begin to build toward a framework that has broader support.","The process is slow but shows promise for sustainable resolution."],choices:[{id:"document_agreements",text:"Carefully document each point of agreement to build momentum.",consequence:"Agreement documentation  Records progress systematically",effects:[{characterId:"isadora",affectionChange:35},{characterId:"celeste",affectionChange:30}],nextScene:"democratic_coven"},{id:"focus_on_shared_values",text:"Emphasize the values and goals that everyone already shares.",consequence:"Shared values  Builds on common ground",effects:[{characterId:"lilith",affectionChange:30},{characterId:"isadora",affectionChange:25},{characterId:"valentina",affectionChange:20}],nextScene:"bridging_divisions"},{id:"test_small_changes_first",text:"Propose testing small changes before implementing larger reforms.",consequence:"Incremental testing  Reduces risk through gradual implementation",effects:[{characterId:"isadora",affectionChange:40},{characterId:"celeste",affectionChange:25}],nextScene:"measured_progress"}]},{id:"leadership_wisdom",title:"Learning to Guide",text:["Luna shares insights about leadership drawn from her prophetic visions and centuries of observation.",`"True leadership isn't about having all the answers - it's about helping others find their own wisdom."`,'"The best leaders serve their communities rather than ruling them. They facilitate growth rather than controlling it."',"Her perspective on leadership emphasizes humility, service, and empowerment of others."],character:b.luna,background:"/backgrounds/grand-hall.png",choices:[{id:"embrace_servant_leadership",text:'"I want to serve this community, not rule it. How do I develop that kind of leadership?"',consequence:"Servant leadership  Embraces service-oriented approach",effects:[{characterId:"luna",affectionChange:50},{characterId:"lilith",affectionChange:25}],nextScene:"collaborative_governance"},{id:"ask_about_facilitating_growth",text:'"How do I help others discover their own wisdom and potential?"',consequence:"Growth facilitation  Seeks to empower others",effects:[{characterId:"luna",affectionChange:45}],nextScene:"patient_guidance"},{id:"request_specific_guidance",text:'"What specific leadership challenges do you foresee, and how should I prepare?"',consequence:"Preparation focus  Seeks specific developmental guidance",effects:[{characterId:"luna",affectionChange:55}],nextScene:"leadership_lesson"}]},{id:"historical_conflicts",title:"Learning from the Past",text:["Celeste shares detailed accounts of past conflicts within supernatural communities and how they were resolved.",'"History teaches us that sustainable solutions require patience, understanding, and genuine respect for all parties involved."','"The conflicts that were resolved successfully focused on shared interests rather than ideological purity."',"The historical perspective provides valuable context for current challenges."],character:b.celeste,background:"/backgrounds/grand-hall.png",choices:[{id:"apply_historical_lessons",text:'"How can we apply these historical lessons to our current situation?"',consequence:"Historical application  Seeks to use past wisdom",effects:[{characterId:"celeste",affectionChange:45}],nextScene:"bridging_divisions"},{id:"focus_on_shared_interests",text:`"Let's identify the shared interests that unite everyone here."`,consequence:"Shared interest focus  Emphasizes common ground",effects:[{characterId:"celeste",affectionChange:40}],nextScene:"compromise_discussion"},{id:"study_successful_resolutions",text:'"I want to study the most successful conflict resolutions in detail."',consequence:"Resolution study  Seeks detailed understanding of success patterns",effects:[{characterId:"celeste",affectionChange:50}],nextScene:"alternative_strategies"}]},{id:"beyond_statistics",title:"The Human Element",text:["The discussion moves beyond data and statistics to focus on the human (and vampire) element in governance.","Each person has fears, hopes, dreams, and concerns that go deeper than political positions.","Understanding these deeper motivations proves more valuable than any formal analysis.","Personal connections become the foundation for political solutions."],choices:[{id:"prioritize_personal_connections",text:"Focus on building stronger personal relationships as the foundation for political cooperation.",consequence:"Relationship priority  Makes personal connection the political foundation",effects:[{characterId:"elena",affectionChange:35},{characterId:"seraphina",affectionChange:30}],nextScene:"family_values_discussion"},{id:"address_individual_concerns",text:"Take time to understand and address each person's specific fears and hopes.",consequence:"Individual focus  Addresses personal motivations",effects:[{characterId:"elena",affectionChange:30},{characterId:"umbra",affectionChange:25}],nextScene:"private_consultations"},{id:"create_safe_spaces",text:"Establish environments where people feel safe expressing their deeper concerns.",consequence:"Safety creation  Builds trust through secure expression",effects:[{characterId:"seraphina",affectionChange:35},{characterId:"elena",affectionChange:25}],nextScene:"principled_neutrality"}]},{id:"alternative_strategies",title:"Creative Solutions",text:["When traditional approaches reach their limits, you begin exploring creative alternative strategies.","Instead of choosing between existing options, you work to develop entirely new approaches that transcend current limitations.","The creative process energizes everyone and opens possibilities that hadn't been considered.","Innovation proves more powerful than optimization of existing systems."],choices:[{id:"brainstorm_new_approaches",text:"Organize collaborative brainstorming sessions to generate novel solutions.",consequence:"Creative brainstorming  Generates innovative approaches",effects:[{characterId:"morgana",affectionChange:35},{characterId:"celeste",affectionChange:30}],nextScene:"collaborative_governance"},{id:"prototype_solutions",text:"Create small-scale prototypes to test new ideas before full implementation.",consequence:"Solution prototyping  Tests innovations safely",effects:[{characterId:"celeste",affectionChange:40},{characterId:"isadora",affectionChange:25}],nextScene:"pragmatic_testing_approach"},{id:"combine_best_elements",text:"Synthesize the best elements from different approaches into hybrid solutions.",consequence:"Synthesis approach  Combines strengths from multiple sources",effects:[{characterId:"lilith",affectionChange:35},{characterId:"valentina",affectionChange:20},{characterId:"isadora",affectionChange:20}],nextScene:"bridging_divisions"}]},{id:"private_consultations",title:"One-on-One Discussions",text:["You schedule private consultations with each community member to understand their individual concerns and perspectives.","Away from group dynamics, people feel more comfortable sharing their honest thoughts and deeper motivations.","These personal conversations reveal the human stories behind political positions and create opportunities for genuine understanding.","The individual attention helps everyone feel heard and valued."],choices:[{id:"synthesize_insights",text:"Combine insights from all consultations to identify common themes and solutions.",consequence:"Insight synthesis  Identifies patterns across individual concerns",effects:[{characterId:"lilith",affectionChange:30},{characterId:"celeste",affectionChange:25}],nextScene:"bridging_divisions"},{id:"address_specific_needs",text:"Develop targeted approaches to address each person's specific concerns.",consequence:"Individualized solutions  Creates personalized approaches",effects:[{characterId:"elena",affectionChange:35},{characterId:"umbra",affectionChange:30}],nextScene:"measured_progress"},{id:"build_coalition_support",text:"Use understanding gained to build broader support for collaborative solutions.",consequence:"Coalition building  Leverages personal connections for political progress",effects:[{characterId:"isadora",affectionChange:30},{characterId:"valentina",affectionChange:25}],nextScene:"collaborative_governance"}]},{id:"revolutionary_planning",title:"Mapping Change",text:["Working with Valentina, you develop concrete plans for implementing progressive changes in supernatural society.","The focus shifts from abstract ideals to practical steps that can create real improvement in people's lives.","Careful planning helps ensure that revolutionary goals don't create unintended chaos or harm.","The systematic approach builds confidence in the possibility of positive change."],character:b.valentina,background:"/backgrounds/grand-hall.png",choices:[{id:"prioritize_achievable_goals",text:"Focus first on changes that are both impactful and achievable.",consequence:"Strategic prioritization  Focuses on winnable battles",effects:[{characterId:"valentina",affectionChange:45}],nextScene:"measured_progress"},{id:"build_broader_support",text:"Work to build support for changes beyond just the revolutionary faction.",consequence:"Coalition expansion  Seeks broader political support",effects:[{characterId:"valentina",affectionChange:40},{characterId:"isadora",affectionChange:15}],nextScene:"bridging_divisions"},{id:"develop_safeguards",text:"Create safeguards to ensure changes don't cause unintended harm.",consequence:"Risk mitigation  Builds protections against negative consequences",effects:[{characterId:"valentina",affectionChange:50}],nextScene:"careful_revolution"}]},{id:"bridging_divisions",title:"Healing the Rift",text:["Through patient work and genuine respect for all perspectives, divisions within the community begin to heal.","Rather than trying to eliminate disagreement, you help create ways for different viewpoints to coexist constructively.","The process teaches everyone that unity doesn't require uniformity, and that diversity of thought can be a strength.","Gradually, the community becomes more cohesive while remaining intellectually vibrant."],choices:[{id:"celebrate_diversity",text:"Formally recognize that diverse perspectives make the community stronger.",consequence:"Diversity celebration  Institutionalizes appreciation for different viewpoints",effects:[{characterId:"lilith",affectionChange:35},{characterId:"valentina",affectionChange:25},{characterId:"isadora",affectionChange:25}],nextScene:"democratic_coven"},{id:"establish_ongoing_dialogue",text:"Create permanent structures for ongoing dialogue and collaboration.",consequence:"Dialogue institutionalization  Creates lasting communication frameworks",effects:[{characterId:"isadora",affectionChange:40},{characterId:"celeste",affectionChange:30}],nextScene:"collaborative_governance"},{id:"focus_on_shared_projects",text:"Unite the community around shared projects that everyone can support.",consequence:"Unity through action  Builds cohesion through collaborative work",effects:[{characterId:"elena",affectionChange:30},{characterId:"morgana",affectionChange:25}],nextScene:"new_community"}]},{id:"careful_revolution",title:"Thoughtful Transformation",text:["The revolutionary changes proceed carefully, with attention to minimizing disruption and maximizing positive impact.","Each step is evaluated for its effects on all community members, ensuring that progress doesn't come at anyone's expense.","The measured approach proves more effective than dramatic gestures, creating lasting change that everyone can support.","Revolution becomes evolution, powered by wisdom rather than anger."],character:b.valentina,background:"/backgrounds/grand-hall.png",choices:[{id:"document_lessons_learned",text:"Carefully document what works so these methods can be shared with other communities.",consequence:"Knowledge sharing  Records successful methods for broader use",effects:[{characterId:"valentina",affectionChange:50},{characterId:"celeste",affectionChange:25}],nextScene:"leadership_lesson"},{id:"expand_gradual_changes",text:"Use early successes as foundation for additional gradual improvements.",consequence:"Incremental expansion  Builds on successful changes",effects:[{characterId:"valentina",affectionChange:45}],nextScene:"measured_progress"},{id:"celebrate_collaborative_success",text:"Recognize that success came through collaboration rather than conflict.",consequence:"Collaboration recognition  Credits teamwork for positive outcomes",effects:[{characterId:"valentina",affectionChange:55},{characterId:"isadora",affectionChange:30}],nextScene:"transformation_celebration"}]},{id:"fortress_ravencroft",title:"Sanctuary Secured",text:["The sanctuary's security systems are reviewed and strengthened, ensuring that Ravencroft Manor remains a safe haven.","Raven oversees improvements to both physical and magical protections, while maintaining the welcoming atmosphere.","The balance between security and openness reflects the community's values - protected but not isolated.","Everyone feels more secure knowing that their home is well-defended against external threats."],character:b.raven,background:"/backgrounds/grand-hall.png",choices:[{id:"appreciate_security_measures",text:'"Thank you for keeping everyone safe while maintaining our open, welcoming spirit."',consequence:"Security appreciation  Values protection without isolation",effects:[{characterId:"raven",affectionChange:45}],nextScene:"strategic_patience"},{id:"ask_about_ongoing_vigilance",text:'"What ongoing vigilance is needed to maintain this security?"',consequence:"Vigilance inquiry  Seeks to understand security maintenance",effects:[{characterId:"raven",affectionChange:40}],nextScene:"anchor_oversight"},{id:"offer_security_assistance",text:'"How can I help with security efforts? What role can I play?"',consequence:"Security participation  Offers to contribute to protection efforts",effects:[{characterId:"raven",affectionChange:50}],nextScene:"guardian_oath"}]},{id:"gentle_traditionalism",title:"Honoring the Past While Growing",text:["The community finds ways to honor traditions while allowing for gentle evolution and growth.","Change comes through deepening understanding of traditional wisdom rather than rejecting it.","New practices emerge that feel consistent with historical values while meeting contemporary needs.","The approach satisfies both traditionalists and progressives by showing that growth and preservation can coexist."],character:b.isadora,background:"/backgrounds/grand-hall.png",choices:[{id:"develop_new_traditions",text:"Create new traditions that build on historical foundations.",consequence:"Tradition evolution  Creates new practices rooted in history",effects:[{characterId:"isadora",affectionChange:50},{characterId:"morgana",affectionChange:25}],nextScene:"transformation_celebration"},{id:"teach_traditional_wisdom",text:"Ensure that traditional wisdom is taught and understood by all community members.",consequence:"Wisdom preservation  Maintains cultural knowledge",effects:[{characterId:"isadora",affectionChange:45}],nextScene:"patient_guidance"},{id:"balance_old_and_new",text:"Establish formal processes for balancing traditional and innovative approaches.",consequence:"Balance institutionalization  Creates systematic approach to tradition and innovation",effects:[{characterId:"isadora",affectionChange:55}],nextScene:"collaborative_governance"}]},{id:"strategic_patience",title:"The Wisdom of Waiting",text:["You learn the value of strategic patience - knowing when to act and when to wait for better timing.","Some changes require preparation, some conflicts need time to cool, some solutions emerge only through careful observation.","The ability to wait wisely proves as valuable as the ability to act decisively.","Patience becomes a form of wisdom rather than mere passivity."],choices:[{id:"develop_timing_wisdom",text:"Study the patterns that reveal optimal timing for different types of actions.",consequence:"Timing mastery  Develops wisdom about when to act",effects:[{characterId:"luna",affectionChange:40},{characterId:"lilith",affectionChange:25}],nextScene:"leadership_lesson"},{id:"practice_mindful_waiting",text:"Use waiting periods for preparation, observation, and deepening understanding.",consequence:"Mindful patience  Makes waiting periods productive",effects:[{characterId:"seraphina",affectionChange:35},{characterId:"celeste",affectionChange:25}],nextScene:"patience_training"},{id:"balance_patience_and_action",text:"Learn to balance patience with decisive action when the moment is right.",consequence:"Balance mastery  Develops judgment about timing",effects:[{characterId:"lilith",affectionChange:35},{characterId:"raven",affectionChange:25}],nextScene:"leadership_wisdom"}]},{id:"collaborative_governance",title:"Shared Leadership",text:["The community develops a collaborative governance model where leadership is shared rather than concentrated.","Decisions are made through inclusive processes that draw on everyone's expertise and perspectives.","The approach proves more effective than traditional hierarchies, producing better decisions with broader support.","Leadership becomes a service to the community rather than power over it."],choices:[{id:"formalize_the_system",text:"Create formal structures and processes to institutionalize collaborative governance.",consequence:"System formalization  Creates lasting governance structures",effects:[{characterId:"isadora",affectionChange:40},{characterId:"celeste",affectionChange:35}],nextScene:"democratic_coven"},{id:"train_collaborative_skills",text:"Develop training programs to help everyone participate effectively in collaborative governance.",consequence:"Skill development  Builds capacity for participation",effects:[{characterId:"celeste",affectionChange:40},{characterId:"elena",affectionChange:25}],nextScene:"leadership_lesson"},{id:"model_servant_leadership",text:"Demonstrate leadership as service, inspiring others to adopt the same approach.",consequence:"Leadership modeling  Inspires service-oriented leadership",effects:[{characterId:"lilith",affectionChange:45},{characterId:"seraphina",affectionChange:30}],nextScene:"living_testament"}]},{id:"anchor_oversight",title:"Guardian Responsibilities",text:["You learn about the oversight responsibilities that come with being an anchor to the supernatural community.",`Lilith explains: "Anchors don't just provide stability - they also help ensure that power is used responsibly."`,'"Your role includes watching for signs of corruption or abuse, and intervening when necessary."',"The responsibility feels weighty but important for maintaining community trust."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"accept_oversight_role",text:`"I understand the responsibility. I'm prepared to fulfill this role."`,consequence:"Oversight acceptance  Embraces guardian responsibilities",effects:[{characterId:"lilith",affectionChange:50}],nextScene:"guardian_oath"},{id:"ask_about_safeguards",text:`"What safeguards exist to ensure oversight itself doesn't become corrupt?"`,consequence:"Safeguard inquiry  Seeks checks and balances",effects:[{characterId:"lilith",affectionChange:45}],nextScene:"democratic_coven"},{id:"request_training",text:'"I need training to fulfill this role properly. Who can teach me?"',consequence:"Training request  Seeks preparation for responsibilities",effects:[{characterId:"lilith",affectionChange:55}],nextScene:"leadership_lesson"}]},{id:"measured_progress",title:"Steady Advancement",text:["The community makes steady, measured progress on its goals through careful planning and incremental steps.","Each small advancement builds on previous successes, creating sustainable momentum.","The approach proves more effective than dramatic changes, with broader support and fewer unintended consequences.","Progress feels solid and lasting rather than fragile or temporary."],choices:[{id:"celebrate_incremental_wins",text:"Acknowledge and celebrate each incremental achievement.",consequence:"Progress celebration  Recognizes steady advancement",effects:[{characterId:"isadora",affectionChange:40},{characterId:"celeste",affectionChange:30}],nextScene:"transformation_celebration"},{id:"document_successful_methods",text:"Record what approaches work best for future reference.",consequence:"Method documentation  Preserves successful strategies",effects:[{characterId:"celeste",affectionChange:45},{characterId:"lilith",affectionChange:25}],nextScene:"leadership_lesson"},{id:"expand_successful_initiatives",text:"Use proven approaches as foundation for additional improvements.",consequence:"Initiative expansion  Builds on demonstrated success",effects:[{characterId:"valentina",affectionChange:35},{characterId:"isadora",affectionChange:30}],nextScene:"new_community"}]},{id:"democratic_coven",title:"Inclusive Governance",text:["The community establishes democratic governance structures that ensure everyone has a voice in important decisions.","Formal processes balance efficiency with inclusivity, allowing thorough discussion while avoiding endless debate.","The system respects both individual expertise and collective wisdom.","Democratic participation strengthens community bonds and increases commitment to shared decisions."],choices:[{id:"refine_decision_processes",text:"Continuously improve decision-making processes based on experience.",consequence:"Process refinement  Evolves governance through practice",effects:[{characterId:"isadora",affectionChange:45},{characterId:"celeste",affectionChange:40}],nextScene:"living_testament"},{id:"train_democratic_participation",text:"Develop training programs to help everyone participate effectively.",consequence:"Participation training  Builds democratic skills",effects:[{characterId:"celeste",affectionChange:50},{characterId:"elena",affectionChange:30}],nextScene:"leadership_lesson"},{id:"balance_expertise_and_input",text:"Create systems that respect expertise while ensuring broad input.",consequence:"Balance achievement  Harmonizes knowledge and democracy",effects:[{characterId:"lilith",affectionChange:40},{characterId:"isadora",affectionChange:35}],nextScene:"new_community"}]},{id:"leadership_lesson",title:"Wisdom Shared",text:["Through formal and informal teaching, you learn essential lessons about leadership and community building.","The lessons emphasize service over power, collaboration over control, and wisdom over authority.","Multiple mentors contribute their perspectives, creating a comprehensive understanding of leadership.","The knowledge feels practical and immediately applicable to current challenges."],choices:[{id:"apply_lessons_immediately",text:"Put the lessons into practice right away.",consequence:"Immediate application  Uses knowledge actively",effects:[{characterId:"lilith",affectionChange:45},{characterId:"luna",affectionChange:40}],nextScene:"living_testament"},{id:"develop_teaching_materials",text:"Create materials to help teach these lessons to others.",consequence:"Knowledge sharing  Develops educational resources",effects:[{characterId:"celeste",affectionChange:50},{characterId:"elena",affectionChange:30}],nextScene:"memory_sharing"},{id:"seek_additional_mentorship",text:"Request ongoing mentorship to continue developing leadership skills.",consequence:"Continued learning  Pursues ongoing development",effects:[{characterId:"lilith",affectionChange:55},{characterId:"seraphina",affectionChange:25}],nextScene:"patient_guidance"}]},{id:"principled_neutrality",title:"Balanced Mediation",text:["You maintain principled neutrality while mediating conflicts, ensuring all sides feel heard and respected.","Rather than false equivalency, your approach recognizes valid concerns across different perspectives.","The neutral stance allows you to facilitate dialogue without becoming part of the conflict.","Trust in your fairness enables more honest communication between opposing sides."],choices:[{id:"formalize_mediation_role",text:"Establish formal mediation processes for future conflicts.",consequence:"Mediation formalization  Creates systematic conflict resolution",effects:[{characterId:"lilith",affectionChange:45},{characterId:"seraphina",affectionChange:40}],nextScene:"democratic_coven"},{id:"train_other_mediators",text:"Teach mediation skills to others so multiple people can fill this role.",consequence:"Mediation training  Builds community conflict resolution capacity",effects:[{characterId:"celeste",affectionChange:50},{characterId:"elena",affectionChange:35}],nextScene:"leadership_lesson"},{id:"focus_on_prevention",text:"Work on preventing conflicts before they require mediation.",consequence:"Conflict prevention  Addresses root causes proactively",effects:[{characterId:"luna",affectionChange:45},{characterId:"seraphina",affectionChange:30}],nextScene:"new_community"}]},{id:"guided_tour",title:"Exploring the Sanctuary",text:["You receive a comprehensive guided tour of the sanctuary, learning about its history, hidden areas, and special features.","Each room tells part of the story of the community that has grown here over the centuries.","Secret passages, protected chambers, and mystical gardens reveal the depth of magical protections.","The tour helps you understand your place within this ancient and sacred space."],choices:[{id:"ask_about_hidden_histories",text:"Learn about the hidden histories and stories embedded in different areas.",consequence:"History exploration  Seeks deeper understanding of sanctuary legacy",effects:[{characterId:"celeste",affectionChange:45},{characterId:"morgana",affectionChange:30}],nextScene:"memory_sharing"},{id:"understand_magical_protections",text:"Focus on understanding the magical protections and how to maintain them.",consequence:"Protection understanding  Learns sanctuary defense systems",effects:[{characterId:"raven",affectionChange:50},{characterId:"seraphina",affectionChange:25}],nextScene:"anchor_oversight"},{id:"appreciate_architectural_beauty",text:"Take time to appreciate the architectural and artistic beauty of the space.",consequence:"Beauty appreciation  Values aesthetic and artistic elements",effects:[{characterId:"morgana",affectionChange:45},{characterId:"elena",affectionChange:40}],nextScene:"artistic_collaboration_planned"}]},{id:"patience_training",title:"Cultivating Inner Stillness",text:["You learn patience as both a practical skill and a spiritual practice.","Seraphina teaches breathing techniques, meditation practices, and mindfulness exercises.","The training helps you remain centered during conflicts and clear-headed during complex decisions.","Patience becomes a source of strength rather than a sign of passivity."],character:b.seraphina,background:"/backgrounds/grand-hall.png",choices:[{id:"deepen_meditation_practice",text:"Commit to regular meditation practice to deepen your patience and clarity.",consequence:"Meditation commitment  Develops regular spiritual practice",effects:[{characterId:"seraphina",affectionChange:55}],nextScene:"spiritual_awakening"},{id:"apply_patience_to_leadership",text:"Use patience training to improve your leadership and decision-making.",consequence:"Leadership patience  Applies mindfulness to governance",effects:[{characterId:"seraphina",affectionChange:50},{characterId:"lilith",affectionChange:25}],nextScene:"leadership_lesson"},{id:"teach_patience_to_others",text:"Share patience techniques with other community members.",consequence:"Patience sharing  Teaches mindfulness to others",effects:[{characterId:"seraphina",affectionChange:60},{characterId:"elena",affectionChange:20}],nextScene:"memory_sharing"}]},{id:"multiple_hostility_bad_end",title:"The Coven's Wrath",text:["Your relentless probing and accusations have finally pushed the coven beyond their breaking point. As you enter the grand hall, you find them all waiting - their eyes cold and predatory.",'"You have tested our patience for the last time," Lilith says, her voice like winter ice. "We welcomed you into our sanctuary, and you repaid our hospitality with suspicion and betrayal."','Morgana steps forward, shadows writhing around her fingers. "Some mortals cannot be trusted with our secrets. They see only threats where we offer friendship."',"You realize too late that these supernatural beings are not merely playing at being dangerous - they are apex predators, and you have cornered yourself with no escape.","The last thing you see are their eyes, glowing with an inhuman hunger you should have recognized from the beginning."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"game_over",text:"[GAME OVER] - Your distrust has led to your doom.",consequence:"Fatal outcome  The coven eliminates the threat you posed",effects:[],nextScene:"game_over_screen"}]},{id:"lilith_hostility_bad_end",title:"The Leader's Judgment",text:["Lilith stands alone in the candlelit study, her ancient eyes reflecting centuries of accumulated wisdom and wrath. Your constant questioning of her authority and probing into forbidden matters has finally crossed an unforgivable line.",'"I have ruled this coven for over eight hundred years," she says quietly, her voice carrying the weight of ages. "I have protected these vampires through inquisitions, wars, and the rise of the modern world."','She approaches slowly, each step deliberate and final. "Your great-aunt understood the delicate balance required to maintain our existence. You... you see only puzzles to solve and secrets to expose."',"Her hand moves faster than your eyes can follow. The last sensation you experience is the realization that some mysteries are meant to remain buried.","Ancient power brooks no challenge from mortal arrogance."],character:b.lilith,background:"/backgrounds/library.png",choices:[{id:"game_over_lilith",text:"[GAME OVER] - The ancient leader has rendered her final judgment.",consequence:"Fatal outcome  Lilith eliminates a threat to coven stability",effects:[],nextScene:"game_over_screen"}]},{id:"widespread_distrust_bad_end",title:"Exile from Paradise",text:["The entire coven has gathered in the grand hall, their faces a mixture of disappointment and cold resolve. Your pattern of suspicion and probing has eroded any chance of belonging here.",`"We had hoped," Celeste says sadly, closing an ancient tome with finality, "that Cordelia's blood would carry her wisdom. Instead, we find only paranoia and accusation."`,'Valentina shakes her head. "In all my centuries of fighting for justice, I have learned to distinguish between healthy caution and destructive suspicion. You embody the latter."','Lilith steps forward with a scroll already prepared. "By unanimous decision of the Ravencroft Coven, you are hereby exiled from these lands. You have until dawn to gather your belongings and leave forever."','Elena looks away as she adds quietly, "The manor will be sold. Find somewhere else to cast your shadows of doubt."',"You realize you've lost not just a home, but the chance to be part of something extraordinary - destroyed by your own inability to trust."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"accept_exile",text:"Accept the exile and leave Ravencroft Manor forever.",consequence:"Exile ending  Lost the chance for supernatural belonging",effects:[],nextScene:"exile_ending"}]},{id:"financial_tension",title:"Legal Complications",text:["Lilith's expression grows noticeably cooler as she processes your legalistic approach. The warm welcome dissipates like morning mist.",'"I see," she says carefully, her tone now measured and cautious. "You wish to treat this as a business transaction rather than... a homecoming."','She exchanges a meaningful glance with someone in the shadows behind her. "Very well. We shall provide you with whatever documentation satisfies your legal obligations. Though I confess, your aunt never required such... formalities."',"The atmosphere has shifted palpably. Where there was warmth, now there is polite distance.",'"Perhaps we should discuss these arrangements tomorrow, in daylight, when such matters seem more... appropriate."'],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"insist_on_documents",text:'"I appreciate your understanding. When can I expect to review the rental agreements and tax records?"',consequence:"Persistent legal pressure  Further erodes goodwill",effects:[{characterId:"lilith",affectionChange:-3,trustChange:-8}],dangerLevel:"medium",nextScene:"document_demand"},{id:"apologize_business_tone",text:`"I apologize if I sounded cold. It's just that everything happened so suddenly with Cordelia's passing."`,consequence:"Attempt to repair relations  Partial recovery",effects:[{characterId:"lilith",affectionChange:5,trustChange:2}],nextScene:"relationship_repair"}]},{id:"death_suspicion",title:"Dangerous Accusations",text:["The temperature in the room seems to drop ten degrees. Lilith's violet eyes narrow dangerously, and you hear what sounds like a sharp intake of breath from the shadows.",`"Suspicion about Cordelia's death?" Lilith's voice is silk wrapped around steel. "That is a very serious accusation to level at people who cared for her deeply."`,'A figure emerges from the shadows - a tall woman with predatory grace and ice-cold eyes. "Perhaps," the newcomer says softly, "our new... landlord would prefer to discuss such matters with the local authorities instead of us."','Lilith raises a hand slightly, and the other woman steps back. "Forgive my companion. Raven becomes protective when family is... questioned. Tell me, what exactly are you implying?"',"You realize you may have just accused a house full of supernatural beings of murder. The air crackles with dangerous tension."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"double_down_suspicion",text:`"I'm not implying anything. I'm stating that I find the circumstances of her death suspicious and I want answers."`,consequence:"Direct accusation  Severe trust damage to all",effects:[{characterId:"lilith",affectionChange:-15,trustChange:-25},{characterId:"raven",affectionChange:-20,trustChange:-30},{characterId:"morgana",affectionChange:-10,trustChange:-20}],dangerLevel:"lethal",secretsProbed:["murder_accusation"],nextScene:"accusation_escalation"},{id:"backtrack_carefully",text:`"I... I'm sorry. I'm grieving and not thinking clearly. Of course you cared for her. I just... miss her terribly."`,consequence:"Careful retreat  Minimal damage control",effects:[{characterId:"lilith",affectionChange:-2,trustChange:-5},{characterId:"raven",affectionChange:-5,trustChange:-8}],nextScene:"grief_understanding"}]},{id:"individual_passions_revealed",title:"Personal Interests",text:["As you speak with each person individually, their unique passions and interests emerge.",`Celeste lights up when discussing her research into vampire genealogies and historical patterns. "I've traced bloodlines back twelve centuries," she says with scholarly excitement.`,'Isadora shares her love for political strategy and social dynamics. "Every conversation is a chess match, every gathering a chance to understand power structures."',"The personal connections deepen as you discover the individual humanity behind their supernatural natures."],character:b.celeste,background:"/backgrounds/library.png",choices:[{id:"express_fascination_with_research",text:'"Your research sounds fascinating. What patterns have you discovered?"',consequence:"Scholarly interest  Shows appreciation for intellectual pursuits",effects:[{characterId:"celeste",affectionChange:25}],nextScene:"celeste_library_offer"},{id:"appreciate_political_insight",text:'"Isadora, your understanding of social dynamics is impressive. What have you learned about power?"',consequence:"Political appreciation  Shows respect for strategic thinking",effects:[{characterId:"isadora",affectionChange:20}],nextScene:"isadora_political_lessons"},{id:"ask_about_others_interests",text:'"What about the others? What drives their passions?"',consequence:"Inclusive curiosity  Shows interest in everyone",effects:[{characterId:"celeste",affectionChange:15},{characterId:"isadora",affectionChange:15}],nextScene:"community_roles_explained"}]},{id:"community_roles_explained",title:"The Structure of Sanctuary",text:["You learn about the intricate roles each person plays in maintaining the sanctuary's harmony and security.",'Lilith explains: "Celeste maintains our knowledge archives and researches threats. Isadora handles external relations and political intelligence."','"Morgana provides artistic soul and emotional healing. Seraphina offers spiritual guidance and protection. Each role is essential."',"The complexity and interdependence of their community becomes clear - everyone contributes something vital."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_about_your_role",text:'"Where do I fit in this structure? What role can I play?"',consequence:"Role seeking  Shows desire to contribute meaningfully",effects:[{characterId:"lilith",affectionChange:20}],nextScene:"community_needs_assessment"},{id:"appreciate_complexity",text:'"This is beautifully complex. Everyone has found their perfect niche."',consequence:"System appreciation  Shows understanding of community dynamics",effects:[{characterId:"lilith",affectionChange:15},{characterId:"isadora",affectionChange:12}],nextScene:"earning_place_discussion"},{id:"offer_flexibility",text:`"I'm willing to help wherever I'm needed most. What are the current gaps?"`,consequence:"Flexible service  Shows adaptability and helpfulness",effects:[{characterId:"lilith",affectionChange:18},{characterId:"celeste",affectionChange:15}],nextScene:"skill_integration_planning"}]},{id:"mutual_introduction",title:"Opening Your Heart",text:["You share something meaningful about yourself, opening up about your own hopes, fears, and values.",`"I've always believed that home isn't a place, but the people who accept you completely," you say.`,"Your vulnerability is met with warmth and understanding. Celeste nods thoughtfully, while Isadora's calculating expression softens.","The reciprocal sharing creates immediate bonds of trust and mutual respect."],character:b.celeste,background:"/backgrounds/grand-hall.png",choices:[{id:"share_more_about_values",text:"Continue sharing your core values and what drives you.",consequence:"Deep sharing  Creates strong emotional connections",effects:[{characterId:"celeste",affectionChange:25},{characterId:"isadora",affectionChange:20}],nextScene:"chosen_family_bonds"},{id:"ask_about_their_values",text:'"What values guide your community? What principles do you share?"',consequence:"Values inquiry  Seeks understanding of community principles",effects:[{characterId:"lilith",affectionChange:18},{characterId:"celeste",affectionChange:20}],nextScene:"wisdom_sharing_culture"},{id:"express_gratitude_for_acceptance",text:'"Thank you for making me feel so welcome. This acceptance means everything."',consequence:"Grateful recognition  Shows appreciation for welcome",effects:[{characterId:"isadora",affectionChange:22},{characterId:"lilith",affectionChange:15}],nextScene:"earning_place_discussion"}]},{id:"chosen_family_bonds",title:"Bonds Beyond Blood",text:["The conversation deepens into the meaning of chosen family and how bonds of choice can be stronger than blood.",`Lilith shares: "We've learned that family means those who see your true nature and love you anyway - not those who share your genetics."`,`Isadora adds thoughtfully: "In our long lives, we've discovered that loyalty earned is worth more than loyalty assumed."`,"You feel the profound truth in their words and the warmth of being welcomed into something precious."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"embrace_chosen_family_concept",text:'"I understand completely. True family chooses to stay through everything."',consequence:"Family philosophy alignment  Shows deep understanding",effects:[{characterId:"lilith",affectionChange:30},{characterId:"isadora",affectionChange:25}],nextScene:"cordelia_legacy_story"},{id:"share_family_experiences",text:"Share your own experiences with chosen family and belonging.",consequence:"Personal sharing  Creates intimate connection",effects:[{characterId:"lilith",affectionChange:25},{characterId:"celeste",affectionChange:20}],nextScene:"mutual_understanding"},{id:"ask_about_challenges",text:'"What challenges has your chosen family faced? How do you work through conflicts?"',consequence:"Practical inquiry  Seeks understanding of relationship dynamics",effects:[{characterId:"isadora",affectionChange:20},{characterId:"lilith",affectionChange:18}],nextScene:"wisdom_sharing_culture"}]},{id:"cordelia_legacy_story",title:"Cordelia's Integration",text:["Lilith's eyes grow warm with memory as she shares how Cordelia became part of their family.",'"She arrived much like you - inheriting the manor, uncertain but brave. What made her special was her immediate acceptance of our nature."',`"Most humans fear us or try to change us. Cordelia simply said, 'You are what you are, and I love who you are.' That acceptance transformed everything."`,"The story reveals why your great-aunt was so beloved and provides a template for your own integration."],character:b.lilith,background:"/backgrounds/library.png",choices:[{id:"follow_cordelias_example",text:'"I want to follow her example. I accept you as you are, completely."',consequence:"Legacy continuation  Shows commitment to acceptance",effects:[{characterId:"lilith",affectionChange:35},{characterId:"morgana",affectionChange:20}],nextScene:"earning_place_discussion"},{id:"ask_about_her_challenges",text:'"What challenges did she face? How did she overcome them?"',consequence:"Learning orientation  Seeks practical guidance",effects:[{characterId:"lilith",affectionChange:25},{characterId:"celeste",affectionChange:18}],nextScene:"wisdom_sharing_culture"},{id:"express_honor_at_comparison",text:`"I'm honored to be compared to her. I hope I can earn that level of trust."`,consequence:"Humble aspiration  Shows respect for legacy",effects:[{characterId:"lilith",affectionChange:30},{characterId:"isadora",affectionChange:22}],nextScene:"community_needs_assessment"}]},{id:"earning_place_discussion",title:"Finding Your Place",text:["The conversation turns to how you can earn your place in this close-knit community.",`Isadora explains: "Belonging here isn't automatic - it's earned through consistent actions that show you truly understand and support our values."`,`Celeste adds: "We've found that the best integration happens when someone finds ways to contribute that match their unique strengths."`,"You sense this is about proving yourself through deeds rather than words."],character:b.isadora,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_how_to_prove_yourself",text:'"What specific actions would demonstrate my commitment to your community?"',consequence:"Commitment seeking  Shows desire to prove worthiness",effects:[{characterId:"isadora",affectionChange:25},{characterId:"lilith",affectionChange:18}],nextScene:"community_needs_assessment"},{id:"offer_immediate_help",text:`"I'd like to start helping immediately. What needs attention right now?"`,consequence:"Immediate service  Shows eagerness to contribute",effects:[{characterId:"celeste",affectionChange:20},{characterId:"isadora",affectionChange:18}],nextScene:"skill_integration_planning"},{id:"emphasize_patience",text:`"I understand that trust takes time. I'm prepared to earn my place gradually."`,consequence:"Patient wisdom  Shows understanding of relationship building",effects:[{characterId:"isadora",affectionChange:30},{characterId:"luna",affectionChange:15}],nextScene:"wisdom_sharing_culture"}]},{id:"community_needs_assessment",title:"Identifying Contributions",text:["You work with the community to identify current needs and how your skills might address them.",'Celeste mentions: "We could use help with historical research and documentation. Many of our stories exist only in memory."','Isadora notes: "External relations are increasingly complex. Fresh perspectives on human-supernatural diplomacy would be valuable."',"The assessment reveals multiple ways you could contribute meaningfully to the community's wellbeing."],character:b.celeste,background:"/backgrounds/library.png",choices:[{id:"focus_on_historical_documentation",text:`"I'd love to help preserve your histories. Stories shouldn't be lost."`,consequence:"Historical preservation  Shows value for community legacy",effects:[{characterId:"celeste",affectionChange:30},{characterId:"luna",affectionChange:20}],nextScene:"skill_integration_planning"},{id:"offer_diplomatic_perspective",text:'"My human perspective might be useful for external relations work."',consequence:"Diplomatic contribution  Offers unique viewpoint",effects:[{characterId:"isadora",affectionChange:25},{characterId:"lilith",affectionChange:18}],nextScene:"practical_arrangements"},{id:"suggest_comprehensive_approach",text:`"Could I contribute to multiple areas? I'd like to be as helpful as possible."`,consequence:"Comprehensive service  Shows broad willingness to help",effects:[{characterId:"celeste",affectionChange:25},{characterId:"isadora",affectionChange:20}],nextScene:"wisdom_sharing_culture"}]},{id:"skill_integration_planning",title:"Practical Integration",text:["Together, you develop a practical plan for integrating your skills and abilities into the community's operations.","The plan balances your desire to help with the need to learn and understand before taking on major responsibilities.","Each role is designed to build gradually, allowing you to prove yourself while gaining deeper understanding.","The thoughtful approach ensures successful integration rather than overwhelming you or disrupting existing dynamics."],character:b.celeste,background:"/backgrounds/library.png",choices:[{id:"start_with_observation",text:`"I'd like to start by observing and learning before taking on active roles."`,consequence:"Learning first  Shows wisdom in gradual approach",effects:[{characterId:"celeste",affectionChange:25},{characterId:"luna",affectionChange:20}],nextScene:"wisdom_sharing_culture"},{id:"begin_with_simple_tasks",text:'"Let me begin with simple tasks and build up to more complex responsibilities."',consequence:"Gradual progression  Shows practical wisdom",effects:[{characterId:"isadora",affectionChange:22},{characterId:"celeste",affectionChange:20}],nextScene:"practical_arrangements"},{id:"request_mentorship",text:`"I'd appreciate mentorship as I learn to contribute effectively."`,consequence:"Mentorship seeking  Shows humility and desire to learn",effects:[{characterId:"lilith",affectionChange:25},{characterId:"celeste",affectionChange:22}],nextScene:"wisdom_sharing_culture"}]},{id:"wisdom_sharing_culture",title:"Learning Together",text:["You discover that the community has a strong culture of sharing wisdom and learning from each other.",`Luna explains: "We believe that knowledge belongs to the community. Each person's insights strengthen everyone."`,'Celeste adds: "Learning never stops, even with centuries of experience. Fresh perspectives always reveal new truths."',"The emphasis on collective wisdom creates an environment where growth and understanding flourish."],character:b.luna,background:"/backgrounds/library.png",choices:[{id:"embrace_continuous_learning",text:'"I love the idea of continuous learning. What can I learn from each of you?"',consequence:"Learning enthusiasm  Shows appreciation for growth",effects:[{characterId:"luna",affectionChange:25},{characterId:"celeste",affectionChange:20}],nextScene:"individual_connections"},{id:"offer_to_share_knowledge",text:`"I'd like to share what I know too. Learning should be reciprocal."`,consequence:"Knowledge sharing  Shows willingness to contribute wisdom",effects:[{characterId:"celeste",affectionChange:25},{characterId:"luna",affectionChange:22}],nextScene:"mutual_understanding"},{id:"ask_about_learning_methods",text:'"How do you structure learning and knowledge sharing? What are your methods?"',consequence:"Method inquiry  Shows interest in systematic learning",effects:[{characterId:"celeste",affectionChange:30},{characterId:"luna",affectionChange:18}],nextScene:"educational_development"}]},{id:"valentina_personal_story",title:"The Revolutionary's Heart",text:["Valentina sits heavily, her fierce composure cracking as she speaks about Maria.",'"She was an art student. Bright, passionate, full of dreams about changing the world through beauty." Her voice trembles with barely contained emotion.',`"When I found her, she was covered in her own artwork - paintings torn to shreds because she couldn't control her strength. She kept apologizing for 'ruining everything.'"`,`Tears shine in Valentina's amber eyes. "I held her while she cried, and I swore that no one else would suffer alone like she did. That's why this program isn't just politics to me - it's personal."`],character:b.valentina,background:"/backgrounds/grand-hall.png",choices:[{id:"offer_emotional_support",text:"Gently place a comforting hand on her shoulder.",consequence:"Emotional support  Shows compassion for her pain",effects:[{characterId:"valentina",affectionChange:35}],nextScene:"valentina_gratitude"},{id:"validate_her_mission",text:`"Maria's story makes the urgency so clear. Thank you for sharing something so personal."`,consequence:"Mission validation  Honors her personal motivation",effects:[{characterId:"valentina",affectionChange:30}],nextScene:"revolutionary_determination"},{id:"ask_about_marias_recovery",text:'"How is Maria now? Was she able to rebuild her life?"',consequence:"Recovery interest  Shows care for individual outcomes",effects:[{characterId:"valentina",affectionChange:28}],nextScene:"rescue_outcomes"}]},{id:"game_over_screen",title:"Journey's End",text:["Your story has reached its conclusion. The choices you made have shaped not only your own destiny, but the fate of the entire supernatural community.","The relationships you built, the trust you earned or lost, and the values you demonstrated have all contributed to this outcome.","Though this chapter ends, the impact of your decisions will echo through the community for generations to come.","Thank you for experiencing the world of Eternal Hearts: A Ravencroft Romance."],background:"/backgrounds/grand-hall.png",choices:[{id:"restart_game",text:"Begin a new story",consequence:"New beginning  Start fresh journey",effects:[],nextScene:"character_creation"},{id:"view_relationship_summary",text:"Review your relationships",consequence:"Reflection  See final relationship states",effects:[],nextScene:"relationship_summary"}]},{id:"exile_ending",title:"Cast Out",text:["The weight of lost trust has become too heavy to bear. One by one, the vampires have turned away from you, their faith shattered by your choices.",'Lilith speaks with cold finality: "You have proven that you cannot be trusted with our secrets or our safety. You must leave Ravencroft Manor."',"Your belongings are packed quietly. No one meets your eyes as you prepare to go. The family you thought you'd found has become strangers.","As you walk through the manor gates for the last time, you realize that trust, once broken, may be impossible to repair. Your exile is complete."],character:b.lilith,background:"/backgrounds/gothic-manor-entrance.png",choices:[{id:"accept_exile_with_dignity",text:"Leave quietly without making things worse.",consequence:"Dignified departure  Accepts consequences gracefully",effects:[],nextScene:"game_over_screen"},{id:"attempt_final_apology",text:"Try one last time to apologize and make amends.",consequence:"Final appeal  Attempts reconciliation",effects:[],nextScene:"relationship_repair"}]},{id:"document_demand",title:"Secrets Demanded",text:["Your probing into forbidden topics has gone too far. Multiple vampires now see you as a security threat rather than a trusted ally.",`Isadora's voice is ice-cold: "You seem to know a great deal about our private matters. Perhaps you should share how you came by this information."`,`Raven steps forward menacingly: "Documents. Names. Sources. Now. Or we'll assume you're working for our enemies."`,"The atmosphere has turned hostile. Your curious questions have been interpreted as espionage, and now you must face the consequences."],character:b.isadora,background:"/backgrounds/grand-hall.png",choices:[{id:"refuse_to_reveal_sources",text:`"I won't betray anyone's confidence, even to save myself."`,consequence:"Protective silence  Maintains confidentiality despite danger",effects:[{characterId:"isadora",affectionChange:-20},{characterId:"raven",affectionChange:-15}],nextScene:"accusation_escalation"},{id:"explain_innocent_curiosity",text:'"I was only curious! I meant no harm by asking questions."',consequence:"Innocent explanation  Claims harmless intent",effects:[{characterId:"isadora",affectionChange:-10},{characterId:"lilith",affectionChange:-8}],nextScene:"trust_evaluation"},{id:"offer_full_transparency",text:`"I'll tell you everything I know and how I learned it."`,consequence:"Complete transparency  Offers full disclosure",effects:[{characterId:"isadora",affectionChange:5},{characterId:"lilith",affectionChange:3}],nextScene:"relationship_repair"}]},{id:"relationship_repair",title:"Attempting Reconciliation",text:["You make a sincere effort to repair the damaged relationships and rebuild lost trust.","Your words carry genuine remorse and a deep understanding of how your actions affected others.","Some vampires are willing to listen, while others remain skeptical. The process is slow and uncertain.","Whether reconciliation is possible depends on the depth of the damage and your sincerity in making amends."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"accept_whatever_outcome",text:`"I accept whatever decision you make. I just needed you to know I'm truly sorry."`,consequence:"Humble acceptance  Shows genuine remorse",effects:[{characterId:"lilith",affectionChange:10},{characterId:"seraphina",affectionChange:8}],nextScene:"forgiveness_consideration"},{id:"propose_probation_period",text:'"Perhaps I could earn back your trust through a probationary period?"',consequence:"Earning trust  Proposes gradual rebuilding",effects:[{characterId:"isadora",affectionChange:5},{characterId:"celeste",affectionChange:8}],nextScene:"conditional_acceptance"},{id:"promise_changed_behavior",text:'"I promise to change my behavior completely. Give me one more chance."',consequence:"Behavioral change  Commits to transformation",effects:[{characterId:"lilith",affectionChange:8},{characterId:"valentina",affectionChange:5}],nextScene:"second_chance_consideration"}]},{id:"accusation_escalation",title:"Suspicions Confirmed",text:["Your refusal to provide information only confirms their worst suspicions about your motives.",`Raven's hand moves to her weapon. "Silence is admission of guilt. You're working for someone against us."`,`Lilith's expression turns to stone. "Pack your belongings. You have one hour before we escort you from the grounds."`,"The situation has escalated beyond repair. Your attempt to protect confidentiality has been interpreted as proof of betrayal."],character:b.raven,background:"/backgrounds/grand-hall.png",choices:[{id:"leave_immediately",text:"Pack quickly and leave without further confrontation.",consequence:"Immediate departure  Avoids further conflict",effects:[],nextScene:"exile_ending"},{id:"make_final_appeal",text:"Try one last desperate attempt to convince them of your innocence.",consequence:"Final appeal  Last chance for reconciliation",effects:[{characterId:"lilith",affectionChange:-5},{characterId:"raven",affectionChange:-10}],nextScene:"relationship_repair"}]},{id:"grief_understanding",title:"Shared Sorrow",text:["In a moment of vulnerability, the community shares their deepest grief with you, and you with them.","Elena speaks of her lost family, Valentina of those she couldn't save, and others add their own stories of loss.","The shared sorrow creates profound bonds of understanding and mutual support.","You realize that grief shared is grief diminished, and that healing happens in community."],character:b.elena,background:"/backgrounds/grand-hall.png",choices:[{id:"offer_comfort_to_all",text:"Open your arms to comfort anyone who needs it.",consequence:"Universal comfort  Offers support to everyone",effects:[{characterId:"elena",affectionChange:35},{characterId:"morgana",affectionChange:25},{characterId:"valentina",affectionChange:20}],nextScene:"healing_circle"},{id:"share_your_own_grief",text:"Share your own experiences with loss and sorrow.",consequence:"Grief sharing  Creates mutual vulnerability",effects:[{characterId:"elena",affectionChange:40},{characterId:"seraphina",affectionChange:25}],nextScene:"mutual_healing"},{id:"suggest_memorial_ritual",text:`"Perhaps we could create a ritual to honor all those we've lost."`,consequence:"Memorial creation  Proposes healing ceremony",effects:[{characterId:"luna",affectionChange:30},{characterId:"morgana",affectionChange:25}],nextScene:"sacred_remembrance"}]},{id:"isadora_political_lessons",title:"The Art of Influence",text:["Isadora shares her centuries of experience with political strategy and social influence.",`"Power is never about force - it's about understanding what people want and helping them see how your goals align with theirs," she explains.`,'"Every conversation is an opportunity to build alliances, gather information, or plant seeds for future cooperation."',"Her insights reveal the sophisticated political thinking that keeps the supernatural community stable."],character:b.isadora,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_about_negotiation_tactics",text:'"What are your most effective negotiation tactics?"',consequence:"Tactical learning  Seeks practical political skills",effects:[{characterId:"isadora",affectionChange:25}],nextScene:"political_mastery"},{id:"discuss_ethical_boundaries",text:'"How do you maintain ethical boundaries while being politically effective?"',consequence:"Ethical inquiry  Shows moral consideration",effects:[{characterId:"isadora",affectionChange:30}],nextScene:"principled_politics"}]},{id:"educational_development",title:"Learning Systems",text:["You work with Celeste to develop comprehensive educational systems for the community.","The approach balances formal instruction with experiential learning and mentorship.","Different learning styles and preferences are accommodated to ensure everyone can participate fully.","The educational framework becomes a model for other supernatural communities."],character:b.celeste,background:"/backgrounds/library.png",choices:[{id:"focus_on_practical_skills",text:"Emphasize practical skills that can be immediately applied.",consequence:"Practical focus  Prioritizes applicable knowledge",effects:[{characterId:"celeste",affectionChange:30}],nextScene:"skill_development"},{id:"balance_theory_and_practice",text:"Create balanced curriculum combining theoretical understanding with practical application.",consequence:"Balanced approach  Integrates different learning approaches",effects:[{characterId:"celeste",affectionChange:35}],nextScene:"comprehensive_education"}]},{id:"valentina_gratitude",title:"Revolutionary Appreciation",text:["Valentina's fierce exterior softens as she expresses genuine gratitude for your understanding and support.",`"You didn't just hear my words - you felt the pain behind them. That means everything to someone like me."`,'Her amber eyes shine with unshed tears. "So few people understand that revolution comes from love, not anger."',"The moment creates a deep bond built on mutual understanding and shared compassion."],character:b.valentina,background:"/backgrounds/grand-hall.png",choices:[{id:"deepen_revolutionary_bond",text:'"Your passion inspires me. How can I help make your vision real?"',consequence:"Revolutionary alliance  Commits to shared cause",effects:[{characterId:"valentina",affectionChange:40}],nextScene:"revolutionary_partnership"},{id:"offer_emotional_support",text:`"You don't have to carry this burden alone anymore."`,consequence:"Emotional support  Offers partnership in struggle",effects:[{characterId:"valentina",affectionChange:35}],nextScene:"shared_burden"}]},{id:"revolutionary_determination",title:"Strengthened Resolve",text:["Your support strengthens Valentina's determination to continue fighting for the marginalized.",'"With allies like you, real change becomes possible. We can build the network of support that so many desperately need."',"Her revolutionary fervor is tempered by wisdom gained through your conversations.","The partnership promises to create lasting positive change in the supernatural community."],character:b.valentina,background:"/backgrounds/grand-hall.png",choices:[{id:"plan_systematic_approach",text:`"Let's develop a systematic approach to building this network."`,consequence:"Strategic planning  Focuses on organized approach",effects:[{characterId:"valentina",affectionChange:30}],nextScene:"network_development"},{id:"start_with_immediate_needs",text:'"Should we start by addressing the most urgent cases first?"',consequence:"Immediate action  Prioritizes urgent needs",effects:[{characterId:"valentina",affectionChange:35}],nextScene:"crisis_intervention"}]},{id:"rescue_outcomes",title:"Stories of Recovery",text:["Valentina shares the outcomes of her rescue efforts, both successful recoveries and heartbreaking losses.",'"Maria is thriving now - she teaches art to other young vampires, helping them channel their emotions constructively."',`"But not every story ends well. Dmitri took his own life before we could reach him. That's why timing matters so much."`,"The mixed outcomes underscore both the importance and the urgency of the work."],character:b.valentina,background:"/backgrounds/grand-hall.png",choices:[{id:"honor_the_lost",text:`"We should honor those we couldn't save by saving others in their memory."`,consequence:"Memorial commitment  Channels grief into purpose",effects:[{characterId:"valentina",affectionChange:40}],nextScene:"memorial_dedication"},{id:"focus_on_prevention",text:`"How can we prevent more tragedies like Dmitri's?"`,consequence:"Prevention focus  Seeks proactive solutions",effects:[{characterId:"valentina",affectionChange:35}],nextScene:"prevention_strategies"}]},{id:"character_creation",title:"New Beginnings",text:["You return to the beginning of your journey, ready to make different choices and explore new paths.","The knowledge of previous experiences gives you wisdom, but the future remains unwritten.","Each choice still matters, each relationship still needs to be built through genuine connection.","Your story begins anew with endless possibilities stretching ahead."],background:"/backgrounds/title-screen.png",choices:[{id:"begin_character_creation",text:"Create your character",consequence:"Fresh start  Begin new journey",effects:[],nextScene:"trait_selection"}]},{id:"relationship_summary",title:"Bonds Forged",text:["Looking back on your journey, you reflect on the relationships you've built and the trust you've earned.","Each connection tells a story of growth, understanding, and mutual respect developed through your choices.","The vampire community has been forever changed by your presence, just as you have been changed by theirs.","These bonds will endure beyond this single story, part of the eternal tapestry of Ravencroft Manor."],background:"/backgrounds/grand-hall.png",choices:[{id:"start_new_story",text:"Begin a new journey",consequence:"New adventure  Fresh possibilities",effects:[],nextScene:"character_creation"}]},{id:"trust_evaluation",title:"Weighing Your Worth",text:["The community carefully evaluates whether your curiosity crossed acceptable boundaries or remained within reasonable limits.",'Lilith leads the discussion: "Intent matters as much as action. Was this genuine curiosity or something more concerning?"',"Different vampires offer varying perspectives, some more forgiving than others.","Your fate hangs in the balance as they decide whether trust can be maintained or has been irreparably damaged."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"accept_their_judgment",text:'"I accept whatever decision you make. I understand your concerns."',consequence:"Humble acceptance  Shows respect for community judgment",effects:[{characterId:"lilith",affectionChange:10}],nextScene:"forgiveness_consideration"},{id:"defend_your_intentions",text:'"My questions came from genuine interest, never malicious intent."',consequence:"Intent defense  Clarifies motivations",effects:[{characterId:"lilith",affectionChange:5}],nextScene:"conditional_acceptance"}]},{id:"forgiveness_consideration",title:"Mercy's Deliberation",text:["The community weighs the possibility of forgiveness against the need for security.",'Seraphina advocates for mercy: "Forgiveness is divine, and everyone deserves a second chance if they truly repent."',`Raven argues for caution: "Security isn't just about us - it's about protecting everyone we shelter."`,"The decision will set a precedent for how the community handles future trust violations."],character:b.seraphina,background:"/backgrounds/grand-hall.png",choices:[{id:"promise_to_earn_forgiveness",text:'"I will spend however long it takes proving I deserve your forgiveness."',consequence:"Forgiveness commitment  Pledges to rebuild trust",effects:[{characterId:"seraphina",affectionChange:15}],nextScene:"redemption_path"},{id:"accept_exile_if_necessary",text:`"If exile is what's best for everyone's safety, I'll accept it."`,consequence:"Selfless acceptance  Puts community safety first",effects:[{characterId:"lilith",affectionChange:8}],nextScene:"noble_sacrifice"}]},{id:"conditional_acceptance",title:"Probationary Status",text:["The community decides to allow you to stay under strict conditions and constant supervision.",'Isadora outlines the terms: "Limited access to sensitive information, regular check-ins, and demonstration of trustworthy behavior."',"The probationary period will test whether you can rebuild the trust that was damaged.","Success means full restoration of your place in the community; failure means permanent exile."],character:b.isadora,background:"/backgrounds/grand-hall.png",choices:[{id:"accept_probation_eagerly",text:'"I accept these conditions gratefully. Thank you for this chance."',consequence:"Probation acceptance  Shows gratitude for opportunity",effects:[{characterId:"isadora",affectionChange:12}],nextScene:"probationary_period"},{id:"ask_about_timeline",text:'"How long will the probationary period last?"',consequence:"Timeline inquiry  Seeks understanding of process",effects:[{characterId:"isadora",affectionChange:8}],nextScene:"probation_details"}]},{id:"second_chance_consideration",title:"The Weight of Second Chances",text:["Your promise of changed behavior is weighed carefully by the community.",'Luna speaks with prophetic wisdom: "I see genuine remorse, but also the difficulty of changing ingrained patterns."','Celeste adds analytically: "Second chances work best when supported by structural changes, not just good intentions."',"The decision will require both your commitment and the community's willingness to invest in your rehabilitation."],character:b.luna,background:"/backgrounds/grand-hall.png",choices:[{id:"propose_accountability_measures",text:'"I want accountability measures to help ensure I keep my promise."',consequence:"Accountability seeking  Requests support structure",effects:[{characterId:"celeste",affectionChange:15}],nextScene:"accountability_framework"},{id:"ask_for_community_support",text:`"I need your help to change. I can't do this alone."`,consequence:"Support request  Acknowledges need for assistance",effects:[{characterId:"luna",affectionChange:12}],nextScene:"community_rehabilitation"}]},{id:"healing_circle",title:"Circle of Comfort",text:["The community forms a healing circle, offering comfort and support to all who are grieving.","Physical touch, gentle words, and shared presence create a sacred space for processing pain.","The circle demonstrates that healing happens in community, not in isolation.","Each person's grief is honored while the collective strength helps everyone bear their burdens."],character:b.elena,background:"/backgrounds/grand-hall.png",choices:[{id:"establish_regular_circles",text:"Suggest making healing circles a regular community practice.",consequence:"Institutionalized healing  Creates ongoing support structure",effects:[{characterId:"elena",affectionChange:30},{characterId:"seraphina",affectionChange:25}],nextScene:"therapeutic_community"},{id:"focus_on_present_healing",text:"Concentrate fully on the healing happening in this moment.",consequence:"Present focus  Emphasizes immediate healing",effects:[{characterId:"morgana",affectionChange:25},{characterId:"elena",affectionChange:35}],nextScene:"collective_healing"}]},{id:"mutual_healing",title:"Shared Recovery",text:["You and the community members heal together, supporting each other through shared vulnerability.","The mutual exchange of comfort and understanding creates deeper bonds than sympathy alone could achieve.","Everyone discovers that giving healing helps receive it, and receiving healing enables giving it.","The process transforms individual pain into collective strength and wisdom."],character:b.elena,background:"/backgrounds/grand-hall.png",choices:[{id:"develop_healing_partnerships",text:"Form ongoing healing partnerships with community members.",consequence:"Partnership formation  Creates sustained support relationships",effects:[{characterId:"elena",affectionChange:40},{characterId:"morgana",affectionChange:30}],nextScene:"therapeutic_bonds"},{id:"share_healing_wisdom",text:"Document and share the healing wisdom gained through this experience.",consequence:"Wisdom preservation  Records healing insights",effects:[{characterId:"celeste",affectionChange:25},{characterId:"luna",affectionChange:30}],nextScene:"healing_legacy"}]},{id:"sacred_remembrance",title:"Honoring the Lost",text:["The community creates a sacred ritual to honor and remember all those who have been lost.","Each name is spoken with love, each story shared with reverence, each memory treasured.","The ritual transforms grief into celebration of lives lived and love shared.","The remembrance becomes a healing tradition that will comfort future generations facing loss."],character:b.luna,background:"/backgrounds/grand-hall.png",choices:[{id:"establish_annual_remembrance",text:"Make this an annual tradition to honor all losses.",consequence:"Traditional establishment  Creates lasting memorial practice",effects:[{characterId:"luna",affectionChange:35},{characterId:"morgana",affectionChange:30}],nextScene:"memorial_tradition"},{id:"create_memorial_garden",text:"Propose creating a physical memorial garden for ongoing remembrance.",consequence:"Memorial creation  Establishes permanent tribute",effects:[{characterId:"elena",affectionChange:40},{characterId:"seraphina",affectionChange:25}],nextScene:"living_memorial"}]},{id:"political_mastery",title:"Strategic Excellence",text:["Under Isadora's guidance, you develop sophisticated political and negotiation skills.","The lessons cover reading body language, managing information flow, building coalitions, and finding win-win solutions.","Your growing expertise in diplomacy becomes valuable for both internal community dynamics and external relations.","Political mastery proves to be about creating value for everyone, not just winning."],character:b.isadora,background:"/backgrounds/grand-hall.png",choices:[{id:"apply_skills_internally",text:"Use these skills to improve internal community dynamics.",consequence:"Internal application  Strengthens community relationships",effects:[{characterId:"isadora",affectionChange:30}],nextScene:"community_harmony"},{id:"focus_on_external_relations",text:"Concentrate on improving external supernatural community relations.",consequence:"External focus  Builds broader alliances",effects:[{characterId:"isadora",affectionChange:35}],nextScene:"diplomatic_success"}]},{id:"principled_politics",title:"Ethics in Action",text:["You and Isadora develop frameworks for maintaining ethical standards while being politically effective.","The approach emphasizes transparency, honesty, and mutual benefit while still achieving strategic goals.","Principled politics proves more sustainable and trustworthy than manipulative tactics.","Your ethical approach earns respect and creates lasting alliances based on genuine trust."],character:b.isadora,background:"/backgrounds/grand-hall.png",choices:[{id:"teach_ethical_frameworks",text:"Share these ethical frameworks with other community members.",consequence:"Ethics teaching  Spreads principled approach",effects:[{characterId:"isadora",affectionChange:40}],nextScene:"moral_leadership"},{id:"document_best_practices",text:"Document best practices for future reference and training.",consequence:"Practice documentation  Preserves ethical methods",effects:[{characterId:"celeste",affectionChange:25}],nextScene:"ethical_legacy"}]},{id:"skill_development",title:"Practical Mastery",text:["Focus on developing immediately applicable practical skills serves the community well.","Members quickly gain competencies they can use in daily challenges and responsibilities.","The hands-on approach builds confidence and creates visible improvements in community functioning.","Practical skills form the foundation for more advanced theoretical understanding later."],character:b.celeste,background:"/backgrounds/library.png",choices:[{id:"expand_skill_programs",text:"Develop additional practical skill programs for specialized areas.",consequence:"Program expansion  Creates comprehensive skill development",effects:[{characterId:"celeste",affectionChange:35}],nextScene:"mastery_pathways"},{id:"create_mentorship_pairs",text:"Pair experienced members with newcomers for skill transfer.",consequence:"Mentorship creation  Builds learning relationships",effects:[{characterId:"celeste",affectionChange:30}],nextScene:"knowledge_transfer"}]},{id:"comprehensive_education",title:"Holistic Learning",text:["The balanced educational approach creates well-rounded community members with both practical skills and theoretical understanding.","Students learn to think critically while also gaining hands-on competencies.","The comprehensive curriculum becomes a model for other supernatural communities seeking educational excellence.","Graduates emerge as thoughtful leaders capable of handling complex challenges."],character:b.celeste,background:"/backgrounds/library.png",choices:[{id:"establish_graduation_ceremonies",text:"Create formal recognition for educational achievements.",consequence:"Achievement recognition  Celebrates learning milestones",effects:[{characterId:"celeste",affectionChange:30}],nextScene:"academic_excellence"},{id:"develop_advanced_curricula",text:"Create advanced programs for continued learning beyond basics.",consequence:"Advanced development  Enables lifelong learning",effects:[{characterId:"celeste",affectionChange:40}],nextScene:"lifelong_learning"}]},{id:"revolutionary_partnership",title:"United in Change",text:["Your partnership with Valentina creates a powerful force for positive transformation in supernatural society.","Together, you develop strategies that are both revolutionary in scope and practical in implementation.","The collaboration combines your fresh perspective with her experienced passion for justice.","Your united efforts inspire others to join the movement for progressive change."],character:b.valentina,background:"/backgrounds/grand-hall.png",choices:[{id:"recruit_additional_allies",text:"Work together to recruit additional allies for the cause.",consequence:"Alliance building  Expands revolutionary network",effects:[{characterId:"valentina",affectionChange:40}],nextScene:"movement_growth"},{id:"focus_on_specific_reforms",text:"Concentrate efforts on achieving specific, measurable reforms.",consequence:"Reform focus  Targets concrete changes",effects:[{characterId:"valentina",affectionChange:35}],nextScene:"reform_success"}]},{id:"shared_burden",title:"Strength in Unity",text:["By sharing Valentina's emotional burden, you help lighten the weight of her revolutionary mission.","The support allows her to pursue change from a place of hope rather than desperation.","Your partnership demonstrates that sustainable revolution requires emotional sustainability.","Together, you create a model for how passionate advocacy can be both effective and healthy."],character:b.valentina,background:"/backgrounds/grand-hall.png",choices:[{id:"establish_support_networks",text:"Create support networks for other passionate advocates.",consequence:"Network creation  Builds emotional support systems",effects:[{characterId:"valentina",affectionChange:45}],nextScene:"advocate_support"},{id:"develop_sustainable_practices",text:"Develop practices that maintain passion while preventing burnout.",consequence:"Sustainability focus  Creates healthy advocacy methods",effects:[{characterId:"valentina",affectionChange:40}],nextScene:"sustainable_revolution"}]},{id:"trait_selection",title:"Character Creation",text:["You stand at the beginning of your journey, ready to define the traits that will shape your story.","Each choice will influence how you interact with the vampire community and the paths available to you.","Your character's unique combination of traits, flaws, and boons will create distinctive opportunities.","The adventure awaits your decisions."],background:"/backgrounds/title-screen.png",choices:[{id:"begin_trait_selection",text:"Choose your character traits",consequence:"Character creation  Define your nature",effects:[],nextScene:"character_creation_complete"}]},{id:"network_development",title:"Building Connections",text:["You and Valentina systematically build a network of support for marginalized supernatural beings.","The network provides emergency assistance, ongoing support, and advocacy for policy changes.","Careful organization ensures the network can respond quickly while maintaining security.","The growing community of support creates hope for lasting positive change."],character:b.valentina,background:"/backgrounds/grand-hall.png",choices:[{id:"expand_geographic_reach",text:"Expand the network to cover broader geographic areas.",consequence:"Geographic expansion  Extends support coverage",effects:[{characterId:"valentina",affectionChange:35}],nextScene:"regional_networks"},{id:"deepen_local_connections",text:"Focus on deepening connections and services in current areas.",consequence:"Local deepening  Strengthens existing support",effects:[{characterId:"valentina",affectionChange:40}],nextScene:"community_strengthening"}]},{id:"crisis_intervention",title:"Emergency Response",text:["You and Valentina develop rapid response systems for supernatural beings in crisis.","The intervention protocols balance immediate safety with long-term support and recovery.","Training programs ensure multiple team members can respond effectively to different types of emergencies.","Lives are saved through quick action and compassionate follow-up care."],character:b.valentina,background:"/backgrounds/grand-hall.png",choices:[{id:"expand_response_capabilities",text:"Expand capabilities to handle more types of crises.",consequence:"Capability expansion  Increases intervention scope",effects:[{characterId:"valentina",affectionChange:40}],nextScene:"comprehensive_response"},{id:"focus_on_prevention",text:"Develop programs to prevent crises before they occur.",consequence:"Prevention focus  Addresses root causes",effects:[{characterId:"valentina",affectionChange:35}],nextScene:"crisis_prevention"}]},{id:"memorial_dedication",title:"Honoring the Lost",text:["You and Valentina create a memorial dedicated to those who were lost before help could reach them.","The memorial serves as both a place of remembrance and a commitment to preventing future tragedies.","Each name represents a life that mattered and a reminder of the importance of the work.","The dedication ceremony brings together supporters from across the supernatural community."],character:b.valentina,background:"/backgrounds/garden-courtyard.png",choices:[{id:"establish_annual_remembrance",text:"Create an annual memorial service to honor the lost.",consequence:"Memorial tradition  Creates ongoing remembrance",effects:[{characterId:"valentina",affectionChange:45}],nextScene:"memorial_tradition"},{id:"channel_grief_into_action",text:"Use the memorial as inspiration for renewed action.",consequence:"Grief transformation  Converts sorrow into purpose",effects:[{characterId:"valentina",affectionChange:40}],nextScene:"purpose_renewal"}]},{id:"prevention_strategies",title:"Stopping Tragedy",text:["You develop comprehensive strategies to prevent the kind of tragedies that took Dmitri and others.","Early intervention programs identify at-risk individuals before crisis points are reached.","Community education reduces stigma and encourages people to seek help sooner.","The prevention approach proves more effective than crisis response alone."],character:b.valentina,background:"/backgrounds/grand-hall.png",choices:[{id:"implement_early_warning_systems",text:"Create systems to identify and respond to early warning signs.",consequence:"Warning systems  Enables proactive intervention",effects:[{characterId:"valentina",affectionChange:40}],nextScene:"proactive_care"},{id:"focus_on_community_education",text:"Concentrate on educating communities about prevention.",consequence:"Education focus  Builds prevention awareness",effects:[{characterId:"valentina",affectionChange:35}],nextScene:"prevention_education"}]},{id:"redemption_path",title:"Road to Forgiveness",text:["You begin the difficult but necessary work of earning back the trust you lost.","Each day requires demonstrating through actions that you understand the harm caused and are committed to change.","The process is slow and sometimes frustrating, but gradual progress becomes visible.","Redemption proves to be not just about being forgiven, but about becoming worthy of that forgiveness."],character:b.seraphina,background:"/backgrounds/grand-hall.png",choices:[{id:"focus_on_consistent_actions",text:"Demonstrate change through consistent, trustworthy actions.",consequence:"Behavioral consistency  Shows reliable transformation",effects:[{characterId:"seraphina",affectionChange:20}],nextScene:"trust_rebuilding"},{id:"seek_guidance_for_improvement",text:"Ask for guidance on how to improve and make amends.",consequence:"Guidance seeking  Shows humility and learning desire",effects:[{characterId:"lilith",affectionChange:15}],nextScene:"guided_redemption"}]},{id:"noble_sacrifice",title:"Selfless Choice",text:["Your willingness to accept exile for the community's safety demonstrates genuine remorse and character growth.","The sacrifice doesn't go unnoticed - several community members are moved by your selflessness.","Though you prepare to leave, the gesture opens unexpected possibilities for reconciliation.","Sometimes the greatest strength is shown through willingness to give up what you want most."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"accept_exile_gracefully",text:"Prepare to leave with dignity and gratitude for the time you had.",consequence:"Graceful departure  Shows maturity and acceptance",effects:[{characterId:"lilith",affectionChange:12}],nextScene:"dignified_exile"},{id:"express_hope_for_future",text:"Express hope that your sacrifice contributes to community safety.",consequence:"Hopeful sacrifice  Shows continued care for community",effects:[{characterId:"seraphina",affectionChange:15}],nextScene:"sacrificial_legacy"}]},{id:"probationary_period",title:"Earning Trust",text:["The probationary period tests your commitment to rebuilding trust through consistent actions.","Daily interactions are carefully observed, and your responses to challenges are noted.","Progress is slow but measurable as you demonstrate reliable judgment and trustworthy behavior.","The structured approach helps both you and the community feel secure during the rebuilding process."],character:b.isadora,background:"/backgrounds/grand-hall.png",choices:[{id:"exceed_expectations",text:"Go above and beyond the minimum requirements.",consequence:"Excellence demonstration  Shows extraordinary commitment",effects:[{characterId:"isadora",affectionChange:18}],nextScene:"exceptional_progress"},{id:"meet_requirements_consistently",text:"Focus on meeting all requirements consistently and reliably.",consequence:"Consistent compliance  Shows reliable improvement",effects:[{characterId:"isadora",affectionChange:15}],nextScene:"steady_progress"}]},{id:"probation_details",title:"Understanding the Process",text:["Isadora explains the detailed structure of your probationary period and what success looks like.","The timeline depends on demonstrated progress rather than fixed dates, ensuring genuine change.","Regular evaluations will assess both behavior and understanding of why trust was damaged.","The process is designed to be fair while maintaining community security."],character:b.isadora,background:"/backgrounds/grand-hall.png",choices:[{id:"commit_to_the_process",text:"Fully commit to following the process as designed.",consequence:"Process commitment  Shows acceptance of structure",effects:[{characterId:"isadora",affectionChange:12}],nextScene:"probationary_period"},{id:"ask_about_support_resources",text:"Ask what support resources are available during probation.",consequence:"Support inquiry  Seeks help for success",effects:[{characterId:"celeste",affectionChange:10}],nextScene:"probation_support"}]},{id:"accountability_framework",title:"Structured Change",text:["Together, you develop a comprehensive accountability framework to support your behavioral changes.","The structure includes regular check-ins, specific goals, and measurements of progress.","Accountability partners help provide support while ensuring consistency in improvement efforts.","The framework becomes a model for helping others make positive changes in their lives."],character:b.celeste,background:"/backgrounds/library.png",choices:[{id:"implement_framework_fully",text:"Embrace the full accountability framework enthusiastically.",consequence:"Framework embrace  Shows commitment to structured change",effects:[{characterId:"celeste",affectionChange:20}],nextScene:"systematic_improvement"},{id:"adapt_framework_to_needs",text:"Work to adapt the framework to your specific needs and challenges.",consequence:"Framework adaptation  Personalizes change approach",effects:[{characterId:"celeste",affectionChange:18}],nextScene:"personalized_growth"}]},{id:"community_rehabilitation",title:"Collective Support",text:["The entire community commits to supporting your rehabilitation and positive change.","Different members offer various forms of assistance: mentorship, skills training, emotional support.","The collective approach demonstrates the community's commitment to redemption and growth.","Your rehabilitation becomes a community effort that strengthens everyone involved."],character:b.luna,background:"/backgrounds/grand-hall.png",choices:[{id:"accept_community_support",text:"Gratefully accept the community's support and guidance.",consequence:"Support acceptance  Shows humility and gratitude",effects:[{characterId:"luna",affectionChange:20}],nextScene:"supported_growth"},{id:"contribute_to_others_growth",text:"Look for ways to support others' growth while working on your own.",consequence:"Mutual support  Shows commitment to community wellbeing",effects:[{characterId:"elena",affectionChange:15}],nextScene:"reciprocal_healing"}]},{id:"therapeutic_community",title:"Healing Culture",text:["The regular healing circles transform the community culture, making emotional support a core value.","Everyone feels more comfortable sharing struggles and seeking help when needed.","The therapeutic approach prevents many problems from escalating into serious crises.","The community becomes known for its emotional intelligence and supportive environment."],character:b.elena,background:"/backgrounds/grand-hall.png",choices:[{id:"train_community_therapists",text:"Train community members in therapeutic techniques.",consequence:"Therapeutic training  Builds healing capacity",effects:[{characterId:"elena",affectionChange:35}],nextScene:"healing_expertise"},{id:"document_healing_practices",text:"Document the healing practices for sharing with other communities.",consequence:"Practice documentation  Spreads healing knowledge",effects:[{characterId:"celeste",affectionChange:30}],nextScene:"healing_wisdom"}]},{id:"collective_healing",title:"Community Recovery",text:["The community's collective healing process strengthens bonds and creates deeper understanding.","Shared healing experiences build empathy and mutual support among all members.","The process demonstrates that individual healing contributes to community wellbeing.","Collective recovery becomes more powerful than individual healing efforts alone."],character:b.morgana,background:"/backgrounds/grand-hall.png",choices:[{id:"celebrate_collective_strength",text:"Celebrate the strength that comes from healing together.",consequence:"Strength celebration  Honors collective power",effects:[{characterId:"morgana",affectionChange:30}],nextScene:"unified_community"},{id:"continue_healing_work",text:"Commit to ongoing healing work as a community practice.",consequence:"Ongoing commitment  Maintains healing focus",effects:[{characterId:"elena",affectionChange:35}],nextScene:"healing_tradition"}]},{id:"therapeutic_bonds",title:"Healing Partnerships",text:["The ongoing healing partnerships create deep, supportive relationships within the community.","Partners help each other process emotions, overcome challenges, and celebrate growth.","The therapeutic bonds demonstrate that healing is both an individual and relational process.","These partnerships become one of the community's greatest strengths."],character:b.elena,background:"/backgrounds/grand-hall.png",choices:[{id:"formalize_partnership_program",text:"Create a formal program for therapeutic partnerships.",consequence:"Program formalization  Systematizes healing support",effects:[{characterId:"elena",affectionChange:40}],nextScene:"healing_system"},{id:"focus_on_partnership_quality",text:"Focus on deepening the quality of existing partnerships.",consequence:"Quality focus  Strengthens current bonds",effects:[{characterId:"morgana",affectionChange:30}],nextScene:"deep_connections"}]},{id:"healing_legacy",title:"Wisdom Preserved",text:["The healing wisdom gained through community experience is carefully documented and preserved.","Future generations will benefit from the lessons learned about emotional support and recovery.","The documented practices become resources for other communities facing similar challenges.","Your healing legacy extends far beyond the immediate community."],character:b.celeste,background:"/backgrounds/library.png",choices:[{id:"create_healing_library",text:"Establish a specialized library of healing wisdom and practices.",consequence:"Library creation  Preserves healing knowledge",effects:[{characterId:"celeste",affectionChange:40}],nextScene:"knowledge_preservation"},{id:"train_future_healers",text:"Focus on training future healers in the documented practices.",consequence:"Healer training  Ensures knowledge continuity",effects:[{characterId:"elena",affectionChange:35}],nextScene:"healing_succession"}]},{id:"memorial_tradition",title:"Remembrance Ritual",text:["The annual memorial tradition becomes a cornerstone of community life.","Each year, the community gathers to honor those lost and renew commitment to supporting the living.","The tradition provides comfort to the grieving while inspiring continued dedication to the cause.","Memorial events strengthen community bonds and preserve important memories."],character:b.luna,background:"/backgrounds/garden-courtyard.png",choices:[{id:"expand_memorial_activities",text:"Develop additional memorial activities throughout the year.",consequence:"Memorial expansion  Creates ongoing remembrance",effects:[{characterId:"luna",affectionChange:30}],nextScene:"remembrance_culture"},{id:"focus_on_celebration_of_life",text:"Emphasize celebrating the lives lived rather than mourning the losses.",consequence:"Life celebration  Focuses on positive memories",effects:[{characterId:"morgana",affectionChange:35}],nextScene:"joyful_remembrance"}]},{id:"living_memorial",title:"Garden of Memory",text:["The memorial garden becomes a living tribute where beauty grows from remembrance.","Each plant represents a life remembered, creating a space of natural peace and reflection.","The garden provides ongoing comfort to community members processing grief.","Tending the memorial garden becomes a meditative practice that honors the past while nurturing the future."],character:b.elena,background:"/backgrounds/garden-courtyard.png",choices:[{id:"expand_garden_program",text:"Develop programs where community members can participate in garden care.",consequence:"Garden program  Creates participatory memorial",effects:[{characterId:"elena",affectionChange:40}],nextScene:"participatory_memorial"},{id:"create_garden_ceremonies",text:"Develop special ceremonies for planting and tending the memorial garden.",consequence:"Garden ceremonies  Ritualizes memorial care",effects:[{characterId:"luna",affectionChange:35}],nextScene:"ritual_gardening"}]},{id:"community_harmony",title:"Internal Balance",text:["Your political skills create unprecedented harmony within the community.","Conflicts are resolved before they escalate, and everyone feels heard and valued.","The improved dynamics strengthen both individual relationships and collective effectiveness.","The community becomes a model of cooperative living and mutual respect."],background:"/backgrounds/grand-hall.png",choices:[{id:"maintain_harmony_systems",text:"Establish systems to maintain this harmony long-term.",consequence:"System establishment  Creates lasting harmony",effects:[{characterId:"lilith",affectionChange:30}],nextScene:"living_testament"}]},{id:"diplomatic_success",title:"External Relations Triumph",text:["Your diplomatic efforts create breakthrough improvements in external supernatural community relations.","Long-standing conflicts are resolved through skilled negotiation and mutual understanding.","The success positions your community as a leader in supernatural diplomacy.","Other communities seek your guidance for their own diplomatic challenges."],background:"/backgrounds/grand-hall.png",choices:[{id:"share_diplomatic_methods",text:"Share successful diplomatic methods with other communities.",consequence:"Method sharing  Spreads diplomatic success",effects:[{characterId:"isadora",affectionChange:40}],nextScene:"diplomatic_legacy"}]},{id:"moral_leadership",title:"Ethical Influence",text:["Your commitment to ethical frameworks inspires moral leadership throughout the community.","Others adopt principled approaches to challenges, creating a culture of integrity.","Ethical decision-making becomes the standard rather than the exception.","The community's moral reputation attracts like-minded individuals seeking principled leadership."],background:"/backgrounds/grand-hall.png",choices:[{id:"formalize_ethical_standards",text:"Create formal ethical standards for community guidance.",consequence:"Standards formalization  Institutionalizes ethics",effects:[{characterId:"seraphina",affectionChange:35}],nextScene:"ethical_community"}]},{id:"ethical_legacy",title:"Principled Foundation",text:["The documented ethical practices become a lasting legacy for future generations.","The principles guide decision-making long after current leaders move on.","Other communities adopt these frameworks, spreading ethical leadership broadly.","Your contribution to principled governance extends far beyond the immediate community."],background:"/backgrounds/library.png",choices:[{id:"continue_ethical_development",text:"Continue developing and refining ethical frameworks.",consequence:"Ongoing development  Advances ethical thinking",effects:[{characterId:"celeste",affectionChange:30}],nextScene:"wisdom_evolution"}]},{id:"mastery_pathways",title:"Specialized Excellence",text:["Expanded skill programs create clear pathways to mastery in specialized areas.","Community members can pursue deep expertise while contributing to collective knowledge.","The mastery programs attract talented individuals seeking advanced development opportunities.","Specialized excellence strengthens the community's capability and reputation."],background:"/backgrounds/library.png",choices:[{id:"create_mastery_recognition",text:"Establish formal recognition for achieved mastery.",consequence:"Recognition system  Honors expertise achievement",effects:[{characterId:"celeste",affectionChange:35}],nextScene:"expertise_celebration"}]},{id:"knowledge_transfer",title:"Wisdom Sharing",text:["Mentorship pairs create effective knowledge transfer between experienced and new members.","Learning becomes more personal and effective through one-on-one relationships.","The mentorship culture ensures important knowledge and skills are preserved.","Strong bonds develop between mentors and mentees, strengthening community connections."],background:"/backgrounds/library.png",choices:[{id:"expand_mentorship_program",text:"Expand mentorship to cover all aspects of community life.",consequence:"Program expansion  Creates comprehensive mentorship",effects:[{characterId:"luna",affectionChange:30}],nextScene:"mentorship_culture"}]},{id:"academic_excellence",title:"Educational Achievement",text:["Formal recognition ceremonies celebrate educational achievements and inspire continued learning.","The graduation events become important community celebrations that honor intellectual growth.","Academic excellence becomes a valued community tradition that motivates all members.","The educational achievements attract attention from other communities seeking similar success."],background:"/backgrounds/library.png",choices:[{id:"establish_academic_traditions",text:"Create lasting academic traditions and celebrations.",consequence:"Tradition establishment  Creates educational culture",effects:[{characterId:"celeste",affectionChange:40}],nextScene:"scholarly_community"}]},{id:"lifelong_learning",title:"Continuous Growth",text:["Advanced curricula ensure that learning never stops, even for the most experienced members.","The community becomes known for its commitment to intellectual growth and development.","Lifelong learning creates adaptability and resilience in facing new challenges.","The culture of continuous education attracts scholars and thinkers from across the supernatural world."],background:"/backgrounds/library.png",choices:[{id:"document_learning_innovations",text:"Document educational innovations for sharing with other communities.",consequence:"Innovation documentation  Spreads educational excellence",effects:[{characterId:"celeste",affectionChange:45}],nextScene:"educational_leadership"}]},{id:"movement_growth",title:"Revolutionary Expansion",text:["Additional allies join the revolutionary movement, creating a powerful network for change.","The growing movement has the strength and reach to create meaningful systemic improvements.","Success in recruiting demonstrates the appeal of the revolutionary vision.","The expanded network can tackle larger challenges and create more significant reforms."],background:"/backgrounds/grand-hall.png",choices:[{id:"coordinate_movement_activities",text:"Coordinate activities across the expanded revolutionary network.",consequence:"Coordination establishment  Organizes revolutionary efforts",effects:[{characterId:"valentina",affectionChange:45}],nextScene:"organized_revolution"}]},{id:"reform_success",title:"Tangible Change",text:["Specific, measurable reforms are successfully implemented, creating visible improvements.","The concrete achievements demonstrate that revolutionary ideals can become practical reality.","Success builds momentum and credibility for additional reform efforts.","The reforms serve as proof of concept for other communities considering similar changes."],background:"/backgrounds/grand-hall.png",choices:[{id:"build_on_reform_success",text:"Use successful reforms as foundation for additional changes.",consequence:"Success building  Expands reform achievements",effects:[{characterId:"valentina",affectionChange:40}],nextScene:"progressive_transformation"}]},{id:"advocate_support",title:"Sustaining Passion",text:["Support networks for passionate advocates prevent burnout while maintaining effectiveness.","The emotional support systems enable sustainable long-term advocacy work.","Advocates feel supported and understood, reducing isolation and frustration.","The support networks become a model for other movements seeking sustainable activism."],background:"/backgrounds/grand-hall.png",choices:[{id:"formalize_support_systems",text:"Create formal support systems for all advocacy work.",consequence:"System formalization  Institutionalizes advocate support",effects:[{characterId:"elena",affectionChange:30}],nextScene:"advocacy_infrastructure"}]},{id:"sustainable_revolution",title:"Healthy Change",text:["Practices that maintain passion while preventing burnout create sustainable revolutionary work.","The healthy approach proves more effective than unsustainable activism that leads to exhaustion.","Revolutionary work becomes a long-term commitment rather than a brief burst of activity.","The sustainable methods inspire others to join the movement without fear of burnout."],background:"/backgrounds/grand-hall.png",choices:[{id:"teach_sustainable_methods",text:"Teach sustainable advocacy methods to other movements.",consequence:"Method teaching  Spreads sustainable activism",effects:[{characterId:"valentina",affectionChange:50}],nextScene:"revolution_mastery"}]},{id:"character_creation_complete",title:"Ready to Begin",text:["Your character is now complete with traits, flaws, and boons that will shape your journey.","The unique combination of characteristics opens specific paths and opportunities.","Your story in the world of Eternal Hearts is ready to unfold.","The vampires of Ravencroft Manor await your arrival."],background:"/backgrounds/title-screen.png",choices:[{id:"start_main_story",text:"Begin your story at Ravencroft Manor",consequence:"Story beginning  Enter the vampire world",effects:[],nextScene:"the_inheritance"}]},{id:"regional_networks",title:"Expanded Reach",text:["Geographic expansion creates regional networks that can respond to needs across broader areas.","The expanded coverage ensures that help is available to more supernatural beings in need.","Regional coordination improves resource sharing and response effectiveness.","The network becomes a significant force for positive change across multiple communities."],background:"/backgrounds/grand-hall.png",choices:[{id:"establish_regional_coordination",text:"Create coordination systems for the regional networks.",consequence:"Coordination creation  Organizes regional efforts",effects:[{characterId:"isadora",affectionChange:30}],nextScene:"network_coordination"}]},{id:"community_strengthening",title:"Deep Roots",text:["Focusing on deepening local connections creates stronger, more resilient community support.","The intensive local approach builds trust and understanding within specific areas.","Deep community connections enable more effective and nuanced support services.","The strengthened local communities become models for intensive support approaches."],background:"/backgrounds/grand-hall.png",choices:[{id:"document_community_methods",text:"Document successful community strengthening methods.",consequence:"Method documentation  Preserves successful approaches",effects:[{characterId:"celeste",affectionChange:25}],nextScene:"community_wisdom"}]},{id:"comprehensive_response",title:"Full-Spectrum Crisis Support",text:["Expanded crisis response capabilities can handle diverse emergency situations effectively.","The comprehensive approach ensures appropriate help is available for any type of crisis.","Multiple response options increase the likelihood of successful intervention.","The full-spectrum capabilities become a model for other communities developing crisis response."],background:"/backgrounds/grand-hall.png",choices:[{id:"train_specialized_responders",text:"Train specialized responders for different types of crises.",consequence:"Specialization training  Develops expert responders",effects:[{characterId:"raven",affectionChange:35}],nextScene:"crisis_expertise"}]},{id:"crisis_prevention",title:"Proactive Protection",text:["Prevention programs successfully reduce the number of crises requiring emergency response.","The proactive approach proves more effective and less traumatic than reactive crisis intervention.","Prevention work creates lasting improvements in community wellbeing and resilience.","The prevention success demonstrates the value of addressing root causes rather than just symptoms."],background:"/backgrounds/grand-hall.png",choices:[{id:"expand_prevention_programs",text:"Expand prevention programs to cover additional risk factors.",consequence:"Prevention expansion  Addresses more potential crises",effects:[{characterId:"luna",affectionChange:30}],nextScene:"comprehensive_prevention"}]},{id:"purpose_renewal",title:"Renewed Dedication",text:["The memorial inspiration renews dedication to the work with fresh energy and commitment.","Grief transforms into purposeful action that honors those who were lost.","The renewal creates sustainable motivation that can endure through difficult times.","Purpose-driven work proves more resilient and effective than guilt-driven activism."],background:"/backgrounds/garden-courtyard.png",choices:[{id:"channel_purpose_into_action",text:"Channel renewed purpose into concrete action plans.",consequence:"Purpose channeling  Converts inspiration into action",effects:[{characterId:"valentina",affectionChange:45}],nextScene:"inspired_action"}]},{id:"proactive_care",title:"Early Intervention",text:["Early warning systems enable intervention before crisis points are reached.","Proactive care proves more effective and less traumatic than emergency response.","The early intervention approach saves lives while requiring fewer resources.","Proactive systems become a model for other communities seeking to prevent tragedies."],background:"/backgrounds/grand-hall.png",choices:[{id:"refine_warning_systems",text:"Continuously refine and improve early warning capabilities.",consequence:"System refinement  Improves early detection",effects:[{characterId:"luna",affectionChange:35}],nextScene:"predictive_care"}]},{id:"prevention_education",title:"Community Awareness",text:["Educational programs build community awareness and capacity for prevention work.","Education reduces stigma and encourages people to seek help before crises develop.","Community knowledge creates a network of informal support and early detection.","Education-based prevention proves sustainable and scalable across different communities."],background:"/backgrounds/library.png",choices:[{id:"develop_education_materials",text:"Create comprehensive educational materials for broader distribution.",consequence:"Material development  Enables education scaling",effects:[{characterId:"celeste",affectionChange:40}],nextScene:"education_resources"}]},{id:"trust_rebuilding",title:"Slow Recovery",text:["Consistent trustworthy actions gradually rebuild the damaged relationships.","Each demonstration of reliability adds a small piece to the foundation of restored trust.","The slow but steady progress proves that damaged relationships can be repaired.","Trust rebuilding becomes a testament to the possibility of redemption and growth."],background:"/backgrounds/grand-hall.png",choices:[{id:"continue_consistent_behavior",text:"Maintain consistent, trustworthy behavior over time.",consequence:"Consistency maintenance  Builds reliable trust",effects:[{characterId:"lilith",affectionChange:20}],nextScene:"restored_trust"}]},{id:"guided_redemption",title:"Mentored Recovery",text:["Guidance from community leaders helps navigate the complex process of earning redemption.","The mentored approach provides structure and support for genuine behavioral change.","Guided redemption proves more successful than unsupported attempts at improvement.","The mentorship creates accountability while offering encouragement and wisdom."],background:"/backgrounds/grand-hall.png",choices:[{id:"embrace_guided_process",text:"Fully embrace the guided redemption process.",consequence:"Process embrace  Commits to mentored growth",effects:[{characterId:"seraphina",affectionChange:25}],nextScene:"redemption_progress"}]},{id:"dignified_exile",title:"Noble Departure",text:["Your graceful acceptance of exile demonstrates character growth and genuine remorse.","The dignified departure leaves room for possible future reconciliation.","Even in leaving, you show respect for the community and understanding of their needs.","The noble exit becomes a powerful statement about taking responsibility for one's actions."],background:"/backgrounds/gothic-manor-entrance.png",choices:[{id:"leave_with_hope",text:"Leave with hope that your example might help others learn from mistakes.",consequence:"Hopeful departure  Seeks positive legacy despite exile",effects:[],nextScene:"exile_reflection"}]},{id:"sacrificial_legacy",title:"Example of Growth",text:["Your willingness to sacrifice for community safety becomes an inspiring example.","The sacrificial choice demonstrates that genuine growth and character change are possible.","Your legacy shows that even serious mistakes can lead to wisdom and positive influence.","The example inspires others to take responsibility for their actions and seek genuine redemption."],background:"/backgrounds/grand-hall.png",choices:[{id:"accept_legacy_responsibility",text:"Accept the responsibility of being an example for others.",consequence:"Legacy acceptance  Embraces role as example",effects:[{characterId:"seraphina",affectionChange:20}],nextScene:"positive_influence"}]},{id:"exceptional_progress",title:"Exceeding Expectations",text:["Going beyond minimum requirements demonstrates extraordinary commitment to rebuilding trust.","The exceptional effort impresses even skeptical community members.","Exceeding expectations accelerates the trust rebuilding process.","The extraordinary commitment becomes a model for how to approach redemption seriously."],background:"/backgrounds/grand-hall.png",choices:[{id:"maintain_exceptional_standards",text:"Continue maintaining these exceptional standards.",consequence:"Standard maintenance  Sustains exceptional performance",effects:[{characterId:"isadora",affectionChange:25}],nextScene:"trust_acceleration"}]},{id:"steady_progress",title:"Reliable Improvement",text:["Consistent compliance with requirements shows reliable commitment to change.","The steady progress builds confidence in your genuine desire to rebuild trust.","Reliability proves as important as dramatic gestures in demonstrating trustworthiness.","Steady improvement creates a solid foundation for restored relationships."],background:"/backgrounds/grand-hall.png",choices:[{id:"continue_steady_improvement",text:"Maintain steady, consistent progress.",consequence:"Progress continuation  Builds reliable improvement",effects:[{characterId:"celeste",affectionChange:18}],nextScene:"gradual_restoration"}]},{id:"probation_support",title:"Supported Recovery",text:["Support resources help ensure success during the challenging probationary period.","Having access to guidance and assistance makes the rehabilitation process more effective.","Support systems demonstrate the community's genuine investment in your recovery.","The supported approach increases the likelihood of successful trust rebuilding."],background:"/backgrounds/library.png",choices:[{id:"utilize_support_fully",text:"Make full use of available support resources.",consequence:"Support utilization  Maximizes recovery assistance",effects:[{characterId:"celeste",affectionChange:20}],nextScene:"supported_progress"}]},{id:"systematic_improvement",title:"Structured Growth",text:["The accountability framework enables systematic, measurable improvement.","Structured change proves more effective than unguided attempts at personal growth.","The systematic approach creates clear milestones and measures of progress.","Structured improvement becomes a model for others seeking to make positive changes."],background:"/backgrounds/library.png",choices:[{id:"refine_improvement_systems",text:"Continuously refine and improve the systematic approach.",consequence:"System refinement  Enhances improvement methods",effects:[{characterId:"celeste",affectionChange:30}],nextScene:"optimization_mastery"}]},{id:"personalized_growth",title:"Tailored Development",text:["Adapting the framework to personal needs makes the change process more effective.","Personalized approaches recognize that different people need different support methods.","Tailored development demonstrates the flexibility and thoughtfulness of the community's approach.","Personalized growth becomes more sustainable and authentic than generic improvement programs."],background:"/backgrounds/library.png",choices:[{id:"share_personalization_insights",text:"Share insights about personalizing growth approaches with others.",consequence:"Insight sharing  Helps others personalize their growth",effects:[{characterId:"luna",affectionChange:25}],nextScene:"growth_wisdom"}]},{id:"supported_growth",title:"Community-Assisted Development",text:["Community support creates an environment where positive change can flourish.","The collective investment in your growth demonstrates the power of community rehabilitation.","Supported growth proves more successful and sustainable than isolated attempts at improvement.","The community support model becomes an example for other groups seeking to help members grow."],background:"/backgrounds/grand-hall.png",choices:[{id:"contribute_to_community_growth",text:"Look for ways to contribute to others' growth and development.",consequence:"Growth contribution  Supports others' development",effects:[{characterId:"elena",affectionChange:30}],nextScene:"mutual_development"}]},{id:"reciprocal_healing",title:"Mutual Support",text:["Supporting others' growth while working on your own creates powerful reciprocal healing.","The mutual support demonstrates that rehabilitation can strengthen the entire community.","Reciprocal healing builds connections and understanding between community members.","The approach shows that helping others is part of one's own healing journey."],background:"/backgrounds/grand-hall.png",choices:[{id:"formalize_reciprocal_support",text:"Create formal systems for reciprocal support and growth.",consequence:"System formalization  Institutionalizes mutual support",effects:[{characterId:"elena",affectionChange:35}],nextScene:"support_systems"}]},{id:"healing_expertise",title:"Therapeutic Mastery",text:["Community members develop advanced therapeutic skills through comprehensive training.","The expertise enables professional-quality emotional support and healing services.","Therapeutic mastery creates a community known for exceptional healing capabilities.","The expertise becomes a valuable resource for other communities seeking healing knowledge."],background:"/backgrounds/grand-hall.png",choices:[{id:"establish_healing_certification",text:"Create certification programs for therapeutic expertise.",consequence:"Certification creation  Formalizes healing expertise",effects:[{characterId:"elena",affectionChange:40}],nextScene:"living_testament"}]},{id:"healing_wisdom",title:"Documented Knowledge",text:["Healing practices are thoroughly documented for preservation and sharing.","The documented wisdom becomes a valuable resource for future generations.","Other communities benefit from access to proven healing methodologies.","The healing knowledge creates a lasting legacy of emotional support expertise."],background:"/backgrounds/library.png",choices:[{id:"share_wisdom_broadly",text:"Share healing wisdom with supernatural communities worldwide.",consequence:"Wisdom sharing  Spreads healing knowledge globally",effects:[{characterId:"celeste",affectionChange:45}],nextScene:"living_testament"}]},{id:"unified_community",title:"Collective Strength",text:["The community achieves unprecedented unity while maintaining individual diversity.","Collective healing creates bonds that strengthen everyone without eliminating uniqueness.","The unified approach enables tackling larger challenges with coordinated effort.","Unity becomes a source of strength rather than conformity."],background:"/backgrounds/grand-hall.png",choices:[{id:"maintain_unity_diversity_balance",text:"Ensure unity never sacrifices healthy individual diversity.",consequence:"Balance maintenance  Preserves individual uniqueness within unity",effects:[{characterId:"morgana",affectionChange:35}],nextScene:"living_testament"}]},{id:"healing_tradition",title:"Lasting Practice",text:["Ongoing healing work becomes a permanent community tradition.","The tradition ensures that emotional support remains a core community value.","Future generations inherit both the knowledge and commitment to healing.","The healing tradition becomes part of the community's essential identity."],background:"/backgrounds/grand-hall.png",choices:[{id:"strengthen_healing_tradition",text:"Continuously strengthen and evolve the healing tradition.",consequence:"Tradition strengthening  Ensures healing legacy",effects:[{characterId:"elena",affectionChange:40}],nextScene:"living_testament"}]},{id:"healing_system",title:"Formalized Support",text:["Formal therapeutic partnership programs create systematic healing support.","The systematized approach ensures consistent, high-quality emotional care.","Formal systems make healing support accessible and reliable for all community members.","The healing system becomes a model for other communities developing support structures."],background:"/backgrounds/grand-hall.png",choices:[{id:"expand_healing_systems",text:"Expand formal healing systems to cover all aspects of wellbeing.",consequence:"System expansion  Creates comprehensive healing support",effects:[{characterId:"elena",affectionChange:45}],nextScene:"living_testament"}]},{id:"deep_connections",title:"Profound Bonds",text:["Focusing on partnership quality creates extraordinarily deep healing relationships.","The profound connections enable healing at levels not possible through surface interactions.","Deep therapeutic bonds become one of the community's greatest sources of strength.","The quality-focused approach proves more effective than quantity-based support systems."],background:"/backgrounds/grand-hall.png",choices:[{id:"nurture_deep_bonds",text:"Continue nurturing and protecting these deep healing connections.",consequence:"Bond nurturing  Maintains profound therapeutic relationships",effects:[{characterId:"morgana",affectionChange:35}],nextScene:"living_testament"}]},{id:"knowledge_preservation",title:"Wisdom Legacy",text:["A specialized healing library preserves all therapeutic knowledge and wisdom.","The preserved knowledge ensures that healing expertise will never be lost.","Future healers will have access to comprehensive resources for learning and development.","The knowledge preservation becomes a gift to countless future generations."],background:"/backgrounds/library.png",choices:[{id:"expand_knowledge_collection",text:"Continuously expand the healing knowledge collection.",consequence:"Collection expansion  Grows healing wisdom repository",effects:[{characterId:"celeste",affectionChange:40}],nextScene:"living_testament"}]},{id:"healing_succession",title:"Future Healers",text:["Training future healers ensures continuity of therapeutic expertise.","The succession planning guarantees that healing knowledge will be passed forward.","New healers bring fresh perspectives while preserving essential wisdom.","The succession creates an unbroken chain of healing knowledge and capability."],background:"/backgrounds/library.png",choices:[{id:"establish_healer_lineages",text:"Create formal lineages of healing knowledge and mentorship.",consequence:"Lineage establishment  Creates healing knowledge inheritance",effects:[{characterId:"elena",affectionChange:45}],nextScene:"living_testament"}]},{id:"remembrance_culture",title:"Memorial Integration",text:["Memorial activities become integrated throughout the year, not just at formal events.","The remembrance culture keeps the memory of the lost alive in daily community life.","Ongoing memorial activities provide continuous comfort and connection.","The culture ensures that loss becomes part of the community's strength rather than just its sorrow."],background:"/backgrounds/garden-courtyard.png",choices:[{id:"weave_remembrance_into_daily_life",text:"Integrate remembrance more deeply into all aspects of community life.",consequence:"Daily integration  Makes remembrance part of everyday experience",effects:[{characterId:"luna",affectionChange:35}],nextScene:"living_testament"}]},{id:"joyful_remembrance",title:"Celebration of Life",text:["Memorial focus shifts to celebrating the joy and love that the lost brought to the world.","Joyful remembrance proves more healing than sorrowful mourning.","The celebration approach honors the positive impact of those who are gone.","Joyful memorial practices inspire others to live fully and love deeply."],background:"/backgrounds/garden-courtyard.png",choices:[{id:"spread_joyful_memorial_practices",text:"Share joyful memorial practices with other grieving communities.",consequence:"Practice sharing  Spreads healing memorial approaches",effects:[{characterId:"morgana",affectionChange:40}],nextScene:"living_testament"}]},{id:"participatory_memorial",title:"Community Gardening",text:["Community members actively participate in caring for the memorial garden.","Participatory memorial work creates ongoing connection and healing.","The shared gardening becomes a meditative practice that strengthens community bonds.","Active participation makes memorial care a source of comfort rather than burden."],background:"/backgrounds/garden-courtyard.png",choices:[{id:"expand_participatory_programs",text:"Develop additional participatory memorial programs.",consequence:"Program expansion  Creates more memorial participation opportunities",effects:[{characterId:"elena",affectionChange:45}],nextScene:"living_testament"}]},{id:"ritual_gardening",title:"Sacred Cultivation",text:["Special ceremonies transform memorial garden care into sacred ritual.","Ritual gardening creates meaningful spiritual experiences for participants.","The ceremonies provide structure and depth to memorial practices.","Sacred cultivation becomes a powerful form of grief processing and healing."],background:"/backgrounds/garden-courtyard.png",choices:[{id:"develop_seasonal_rituals",text:"Create seasonal ritual cycles for memorial garden care.",consequence:"Ritual development  Creates ongoing sacred practices",effects:[{characterId:"luna",affectionChange:40}],nextScene:"living_testament"}]},{id:"diplomatic_legacy",title:"Diplomatic Excellence Spread",text:["Your diplomatic methods become widely adopted across supernatural communities.","The legacy of successful negotiation creates lasting peace between previously hostile groups.","Diplomatic excellence becomes your lasting contribution to supernatural society.","Future generations benefit from the peaceful relations your methods established."],background:"/backgrounds/grand-hall.png",choices:[{id:"continue_diplomatic_work",text:"Continue advancing diplomatic practices and training.",consequence:"Ongoing diplomacy  Maintains peace-building efforts",effects:[{characterId:"isadora",affectionChange:30}],nextScene:"living_testament"}]},{id:"ethical_community",title:"Principled Society",text:["The community becomes known throughout supernatural society for its ethical standards.","Principled decision-making attracts like-minded individuals seeking moral leadership.","The ethical community becomes a beacon of integrity in a complex world.","Your contribution to principled governance creates lasting positive change."],background:"/backgrounds/grand-hall.png",choices:[{id:"expand_ethical_influence",text:"Work to expand ethical standards to other communities.",consequence:"Ethical expansion  Spreads principled governance",effects:[{characterId:"seraphina",affectionChange:35}],nextScene:"living_testament"}]},{id:"wisdom_evolution",title:"Growing Understanding",text:["Ethical frameworks continue evolving through ongoing development and refinement.","The living wisdom adapts to new challenges while maintaining core principles.","Evolutionary ethics prove more robust than rigid dogma.","The growing understanding creates increasingly sophisticated moral guidance."],background:"/backgrounds/library.png",choices:[{id:"document_wisdom_growth",text:"Document the evolution of ethical wisdom for future study.",consequence:"Documentation  Preserves wisdom development",effects:[{characterId:"celeste",affectionChange:30}],nextScene:"living_testament"}]},{id:"expertise_celebration",title:"Mastery Recognition",text:["Formal recognition of achieved mastery creates inspiring celebration of excellence.","The celebrations honor both individual achievement and collective support.","Mastery recognition motivates others to pursue their own areas of expertise.","The recognition system becomes a valued community tradition."],background:"/backgrounds/library.png",choices:[{id:"establish_mastery_traditions",text:"Create lasting traditions around mastery achievement and recognition.",consequence:"Tradition creation  Establishes excellence culture",effects:[{characterId:"celeste",affectionChange:35}],nextScene:"living_testament"}]},{id:"mentorship_culture",title:"Teaching Community",text:["Comprehensive mentorship creates a culture where teaching and learning are deeply valued.","The mentorship approach ensures knowledge transfer while building strong relationships.","Teaching becomes a honored role that strengthens the entire community.","The culture creates continuous growth and development for all members."],background:"/backgrounds/library.png",choices:[{id:"honor_teaching_contributions",text:"Create special recognition for outstanding mentorship and teaching.",consequence:"Teaching honor  Celebrates mentorship contributions",effects:[{characterId:"luna",affectionChange:30}],nextScene:"living_testament"}]},{id:"scholarly_community",title:"Academic Excellence",text:["Academic traditions establish the community as a center of learning and scholarship.","The scholarly reputation attracts students and researchers from across the supernatural world.","Academic excellence becomes a defining characteristic of community identity.","The scholarly community contributes significantly to supernatural knowledge advancement."],background:"/backgrounds/library.png",choices:[{id:"establish_academic_exchange",text:"Create academic exchange programs with other scholarly communities.",consequence:"Exchange creation  Builds scholarly networks",effects:[{characterId:"celeste",affectionChange:40}],nextScene:"living_testament"}]},{id:"educational_leadership",title:"Learning Innovation",text:["Educational innovations become models adopted by communities worldwide.","The leadership in learning creates lasting improvements in supernatural education.","Innovation documentation spreads effective educational methods broadly.","Educational leadership becomes a significant legacy contribution."],background:"/backgrounds/library.png",choices:[{id:"continue_innovation",text:"Continue developing and sharing educational innovations.",consequence:"Ongoing innovation  Maintains educational leadership",effects:[{characterId:"celeste",affectionChange:45}],nextScene:"living_testament"}]},{id:"organized_revolution",title:"Coordinated Change",text:["Organized revolutionary activities create systematic positive change across multiple communities.","Coordination enables larger-scale reforms than isolated efforts could achieve.","The organized approach proves more effective than scattered individual actions.","Revolutionary coordination becomes a model for sustainable social change."],background:"/backgrounds/grand-hall.png",choices:[{id:"institutionalize_coordination",text:"Create permanent institutions for revolutionary coordination.",consequence:"Institutionalization  Creates lasting change infrastructure",effects:[{characterId:"valentina",affectionChange:45}],nextScene:"living_testament"}]},{id:"progressive_transformation",title:"Expanding Reform",text:["Successful reforms create foundation for additional progressive transformations.","The expanding changes demonstrate that systematic improvement is possible.","Progressive transformation builds momentum for continued positive change.","The success creates a model for other communities seeking similar reforms."],background:"/backgrounds/grand-hall.png",choices:[{id:"accelerate_transformation",text:"Use momentum to accelerate progressive transformation efforts.",consequence:"Acceleration  Speeds positive change",effects:[{characterId:"valentina",affectionChange:40}],nextScene:"living_testament"}]},{id:"advocacy_infrastructure",title:"Support Systems",text:["Formal support systems create infrastructure for sustainable advocacy work.","The infrastructure ensures advocates have resources needed for long-term effectiveness.","Advocacy support becomes institutionalized rather than dependent on individual effort.","The infrastructure model spreads to other movements seeking sustainability."],background:"/backgrounds/grand-hall.png",choices:[{id:"strengthen_infrastructure",text:"Continuously strengthen and expand advocacy support infrastructure.",consequence:"Infrastructure strengthening  Builds advocacy capacity",effects:[{characterId:"elena",affectionChange:30}],nextScene:"living_testament"}]},{id:"revolution_mastery",title:"Change Expertise",text:["Teaching sustainable advocacy methods creates expertise in revolutionary change.","The mastery of sustainable revolution spreads effective methods widely.","Change expertise prevents the burnout and exhaustion common in activist movements.","Revolutionary mastery becomes a valued skill across the supernatural community."],background:"/backgrounds/grand-hall.png",choices:[{id:"establish_revolution_academy",text:"Create formal training programs for sustainable revolutionary methods.",consequence:"Academy establishment  Formalizes change training",effects:[{characterId:"valentina",affectionChange:50}],nextScene:"living_testament"}]},{id:"the_inheritance",title:"A New Beginning",text:["You stand before the imposing gates of Ravencroft Manor, the Gothic architecture looming against storm clouds.","The inheritance letter crinkles in your hand as you approach your great-aunt Cordelia's estate.","Strange sensations prickle along your skin - as if the very air here holds secrets.","Your journey into the supernatural world is about to begin."],background:"/backgrounds/gothic-manor-entrance.png",choices:[{id:"approach_manor_confidently",text:"Walk confidently to the front door.",consequence:"Confident approach  Shows self-assurance",effects:[],nextScene:"manor_entrance"},{id:"observe_surroundings_carefully",text:"Take time to observe the manor and surroundings carefully.",consequence:"Careful observation  Shows attention to detail",effects:[],nextScene:"manor_observation"}]},{id:"network_coordination",title:"Regional Organization",text:["Coordination systems enable effective management of regional support networks.","The organizational structure ensures resources reach where they're needed most.","Regional coordination prevents duplication while maximizing coverage.","The coordination model becomes valuable for other large-scale support efforts."],background:"/backgrounds/grand-hall.png",choices:[{id:"refine_coordination_methods",text:"Continuously refine coordination methods for maximum effectiveness.",consequence:"Method refinement  Improves coordination efficiency",effects:[{characterId:"isadora",affectionChange:30}],nextScene:"living_testament"}]},{id:"community_wisdom",title:"Documented Methods",text:["Successful community strengthening methods are preserved for future reference.","The documented wisdom becomes a resource for other communities seeking deep connections.","Community wisdom spreads effective approaches for building strong local bonds.","The methods create lasting improvements in community development practices."],background:"/backgrounds/library.png",choices:[{id:"share_community_methods",text:"Share community strengthening methods with other groups.",consequence:"Method sharing  Spreads community development wisdom",effects:[{characterId:"celeste",affectionChange:25}],nextScene:"living_testament"}]},{id:"crisis_expertise",title:"Specialized Response",text:["Specialized crisis responders develop expertise in handling diverse emergency situations.","The specialized training creates highly effective crisis intervention capabilities.","Crisis expertise ensures appropriate help is available for any emergency type.","The specialized approach becomes a model for other crisis response programs."],background:"/backgrounds/grand-hall.png",choices:[{id:"expand_specialization_training",text:"Develop additional specialized training programs for crisis response.",consequence:"Training expansion  Builds crisis response expertise",effects:[{characterId:"raven",affectionChange:35}],nextScene:"living_testament"}]},{id:"comprehensive_prevention",title:"Complete Coverage",text:["Expanded prevention programs address all major risk factors for crisis development.","Comprehensive coverage ensures no potential crisis source is overlooked.","The complete approach proves more effective than partial prevention efforts.","Comprehensive prevention becomes the gold standard for crisis prevention work."],background:"/backgrounds/grand-hall.png",choices:[{id:"maintain_comprehensive_approach",text:"Continue maintaining and improving comprehensive prevention coverage.",consequence:"Approach maintenance  Sustains complete prevention",effects:[{characterId:"luna",affectionChange:30}],nextScene:"living_testament"}]},{id:"inspired_action",title:"Purpose-Driven Work",text:["Renewed purpose translates into concrete action plans that honor the lost while helping the living.","Purpose-driven work proves more sustainable and effective than guilt-motivated activism.","The inspired action creates meaningful progress while maintaining emotional health.","Purpose-driven activism becomes a model for sustainable social change work."],background:"/backgrounds/garden-courtyard.png",choices:[{id:"institutionalize_purpose_approach",text:"Create systems to maintain purpose-driven rather than guilt-driven work.",consequence:"Purpose institutionalization  Maintains healthy motivation",effects:[{characterId:"valentina",affectionChange:45}],nextScene:"living_testament"}]},{id:"predictive_care",title:"Advanced Warning Systems",text:["Refined early warning systems achieve remarkable accuracy in predicting crisis development.","Predictive care enables intervention at the earliest possible stage.","The advanced systems prevent most crises from developing past manageable stages.","Predictive care becomes a breakthrough approach to crisis prevention."],background:"/backgrounds/grand-hall.png",choices:[{id:"share_predictive_methods",text:"Share predictive care methods with other prevention programs.",consequence:"Method sharing  Spreads predictive care innovation",effects:[{characterId:"luna",affectionChange:35}],nextScene:"living_testament"}]},{id:"education_resources",title:"Learning Materials",text:["Comprehensive educational materials enable scaling of prevention education.","The resources make prevention knowledge accessible to diverse communities.","Educational materials become widely used tools for crisis prevention work.","The resources create lasting improvements in prevention education effectiveness."],background:"/backgrounds/library.png",choices:[{id:"continue_resource_development",text:"Continue developing and updating educational resources.",consequence:"Resource development  Maintains educational effectiveness",effects:[{characterId:"celeste",affectionChange:40}],nextScene:"living_testament"}]},{id:"restored_trust",title:"Relationship Renewal",text:["Consistent trustworthy behavior successfully rebuilds damaged relationships.","The restored trust creates stronger bonds than existed before the damage.","Successful trust rebuilding demonstrates that redemption is possible.","The restoration becomes an inspiring example of growth and forgiveness."],background:"/backgrounds/grand-hall.png",choices:[{id:"maintain_rebuilt_trust",text:"Continue behaviors that maintain and strengthen rebuilt trust.",consequence:"Trust maintenance  Sustains restored relationships",effects:[{characterId:"lilith",affectionChange:25}],nextScene:"living_testament"}]},{id:"redemption_progress",title:"Guided Growth",text:["The guided redemption process creates measurable progress toward full restoration.","Mentored growth proves more effective than unsupported attempts at change.","The redemption progress inspires hope for others seeking similar growth.","Guided redemption becomes a model for effective rehabilitation approaches."],background:"/backgrounds/grand-hall.png",choices:[{id:"complete_redemption_process",text:"Commit to completing the full redemption process.",consequence:"Process completion  Achieves full rehabilitation",effects:[{characterId:"seraphina",affectionChange:30}],nextScene:"living_testament"}]},{id:"exile_reflection",title:"Learning from Loss",text:["Even in exile, the experience becomes a source of wisdom and growth.","Reflection on mistakes creates insights that could help others avoid similar errors.","The exile experience demonstrates that growth can emerge from even the most difficult circumstances.","Learning from loss transforms exile into an opportunity for contribution."],background:"/backgrounds/gothic-manor-entrance.png",choices:[{id:"document_lessons_learned",text:"Document lessons learned for others who might face similar challenges.",consequence:"Lesson documentation  Shares wisdom from experience",effects:[],nextScene:"living_testament"}]},{id:"positive_influence",title:"Example of Growth",text:["Your example of taking responsibility and growing from mistakes influences others.","The positive influence demonstrates that character development is always possible.","Others are inspired to examine their own behavior and seek improvement.","Positive influence creates ripple effects of growth throughout the community."],background:"/backgrounds/grand-hall.png",choices:[{id:"continue_positive_example",text:"Continue being a positive example of growth and responsibility.",consequence:"Example continuation  Maintains positive influence",effects:[{characterId:"seraphina",affectionChange:25}],nextScene:"living_testament"}]},{id:"trust_acceleration",title:"Rapid Progress",text:["Exceptional performance accelerates the trust rebuilding process beyond normal timelines.","The rapid progress demonstrates extraordinary commitment to change.","Trust acceleration creates momentum that benefits all restoration efforts.","The accelerated approach becomes a model for intensive rehabilitation programs."],background:"/backgrounds/grand-hall.png",choices:[{id:"maintain_exceptional_pace",text:"Continue the exceptional performance that enables rapid trust building.",consequence:"Pace maintenance  Sustains accelerated progress",effects:[{characterId:"isadora",affectionChange:30}],nextScene:"living_testament"}]},{id:"gradual_restoration",title:"Steady Rebuilding",text:["Steady improvement creates a solid foundation for gradual relationship restoration.","The reliable progress builds confidence in long-term positive change.","Gradual restoration proves more sustainable than dramatic but unsustained efforts.","The steady approach creates lasting improvements in trust and connection."],background:"/backgrounds/grand-hall.png",choices:[{id:"continue_steady_rebuilding",text:"Maintain the steady approach to relationship rebuilding.",consequence:"Rebuilding continuation  Sustains gradual restoration",effects:[{characterId:"celeste",affectionChange:20}],nextScene:"living_testament"}]},{id:"supported_progress",title:"Assisted Development",text:["Support resources significantly enhance the effectiveness of rehabilitation efforts.","Assisted development creates better outcomes than unsupported attempts at change.","The supported approach demonstrates the value of community investment in individual growth.","Supported progress becomes a model for effective rehabilitation programs."],background:"/backgrounds/library.png",choices:[{id:"maximize_support_utilization",text:"Continue making full use of available support resources.",consequence:"Support maximization  Optimizes assisted development",effects:[{characterId:"celeste",affectionChange:25}],nextScene:"living_testament"}]},{id:"optimization_mastery",title:"System Perfection",text:["Continuous refinement creates optimized systems for systematic improvement.","The optimization mastery enables helping others achieve more effective personal growth.","Perfected systems become valuable resources for community development.","Optimization mastery creates lasting contributions to personal growth methodology."],background:"/backgrounds/library.png",choices:[{id:"share_optimization_methods",text:"Share optimization methods with others seeking systematic improvement.",consequence:"Method sharing  Spreads optimization mastery",effects:[{characterId:"celeste",affectionChange:35}],nextScene:"living_testament"}]},{id:"growth_wisdom",title:"Personalization Insights",text:["Insights about personalizing growth approaches help others customize their development.","Growth wisdom recognizes that effective personal development must be individually tailored.","The personalization insights become valuable for community members seeking change.","Growth wisdom creates more effective and sustainable personal development approaches."],background:"/backgrounds/library.png",choices:[{id:"develop_personalization_guides",text:"Create guides to help others personalize their growth approaches.",consequence:"Guide development  Enables customized personal growth",effects:[{characterId:"luna",affectionChange:30}],nextScene:"living_testament"}]},{id:"mutual_development",title:"Reciprocal Growth",text:["Contributing to others' growth while developing personally creates powerful mutual development.","The reciprocal approach strengthens both individual growth and community bonds.","Mutual development proves more effective than isolated personal improvement efforts.","The approach becomes a model for community-based personal development."],background:"/backgrounds/grand-hall.png",choices:[{id:"institutionalize_mutual_growth",text:"Create formal programs for mutual development and reciprocal growth.",consequence:"Program institutionalization  Formalizes mutual development",effects:[{characterId:"elena",affectionChange:35}],nextScene:"living_testament"}]},{id:"support_systems",title:"Formal Mutual Aid",text:["Formal systems for reciprocal support create institutional mutual aid.","The systems ensure that mutual support becomes reliable rather than dependent on individual initiative.","Formalized mutual aid creates sustainable support networks.","The support systems become a cornerstone of community resilience and growth."],background:"/backgrounds/grand-hall.png",choices:[{id:"expand_support_networks",text:"Continuously expand and strengthen formal support networks.",consequence:"Network expansion  Grows mutual aid capacity",effects:[{characterId:"elena",affectionChange:40}],nextScene:"living_testament"}]},{id:"manor_entrance",title:"The Grand Entrance",text:["You approach the imposing front door of Ravencroft Manor with confidence.","The heavy oak door is adorned with intricate Gothic metalwork that seems to pulse with its own energy.","Before you can knock, the door swings open silently, revealing a dimly lit entrance hall.","Your confident approach has been noticed - someone was expecting you."],background:"/backgrounds/gothic-manor-entrance.png",choices:[{id:"enter_immediately",text:"Step inside without hesitation.",consequence:"Bold entry  Shows fearlessness",effects:[],nextScene:"grand_hall_arrival"},{id:"call_out_greeting",text:"Call out a polite greeting before entering.",consequence:"Polite announcement  Shows respect",effects:[],nextScene:"welcomed_entry"}]},{id:"manor_observation",title:"Careful Assessment",text:["You take time to study the manor and its surroundings before approaching.","The Gothic architecture reveals subtle details: protective symbols carved into stone, windows that seem to watch back.","Gardens show signs of careful tending, and you notice movement in upper windows - you are not alone here.","Your careful observation reveals this is a place of power and ancient secrets."],background:"/backgrounds/gothic-manor-entrance.png",choices:[{id:"approach_respectfully",text:"Approach the door with respectful caution.",consequence:"Respectful approach  Shows wisdom and courtesy",effects:[],nextScene:"respectful_arrival"},{id:"look_for_alternative_entrance",text:"Look for a servants' entrance or side door.",consequence:"Alternative approach  Shows humility",effects:[],nextScene:"humble_entry"}]},{id:"grand_hall_arrival",title:"Bold Entrance",text:["You step boldly into the manor, your footsteps echoing in the grand entrance hall.","Candles flicker to life as you enter, illuminating portraits of stern-faced ancestors whose eyes seem to track your movement.","A figure emerges from the shadows - tall, elegant, with an otherworldly grace that immediately marks them as supernatural.","Your bold entrance has made an impression; there's approval in their ancient eyes."],background:"/backgrounds/grand-hall.png",choices:[{id:"meet_gaze_confidently",text:"Meet their gaze with confident directness.",consequence:"Confident meeting  Shows strength and fearlessness",effects:[{characterId:"lilith",affectionChange:10}],nextScene:"first_vampire_encounter"},{id:"bow_respectfully",text:"Offer a respectful bow of greeting.",consequence:"Respectful greeting  Shows courtesy despite boldness",effects:[{characterId:"lilith",affectionChange:8}],nextScene:"formal_introduction"}]},{id:"welcomed_entry",title:"Courteous Arrival",text:["Your polite greeting echoes through the entrance hall before a warm voice responds from within.",'"Welcome, dear child. We have been expecting you." The voice carries centuries of wisdom and gentle authority.',"A figure glides forward - ethereally beautiful with silver hair and eyes that hold starlight. This can only be Lilith herself.","Your courteous approach has earned immediate approval from the coven's leader."],background:"/backgrounds/grand-hall.png",choices:[{id:"express_gratitude",text:`"Thank you for welcoming me. I'm honored to be here."`,consequence:"Grateful recognition  Shows appreciation for hospitality",effects:[{characterId:"lilith",affectionChange:15}],nextScene:"warm_reception"},{id:"ask_about_expectations",text:'"You were expecting me? How did you know I would come?"',consequence:"Curious inquiry  Shows intelligent interest",effects:[{characterId:"lilith",affectionChange:12}],nextScene:"prophetic_knowledge"}]},{id:"respectful_arrival",title:"Wise Approach",text:["You approach the door with the caution of someone who recognizes they are entering a place of power.","Before you can knock, the door opens to reveal a woman of impossible beauty with knowing eyes.",'"Your respectful approach shows wisdom beyond your years," she says with approval. "I am Lilith, and you are most welcome here."',"Your careful observation and respectful manner have created an excellent first impression."],background:"/backgrounds/grand-hall.png",choices:[{id:"acknowledge_power_sensed",text:'"I could sense this was a place of great power and deserved respect."',consequence:"Power recognition  Shows supernatural awareness",effects:[{characterId:"lilith",affectionChange:18}],nextScene:"supernatural_awareness"},{id:"express_humble_gratitude",text:'"Thank you for your welcome, Lady Lilith. I am grateful for your hospitality."',consequence:"Humble gratitude  Shows proper respect and courtesy",effects:[{characterId:"lilith",affectionChange:16}],nextScene:"gracious_welcome"}]},{id:"humble_entry",title:"Modest Beginning",text:["You find a smaller side entrance, choosing humility over presumption.",`A gentle voice calls out before you can knock: "There is no need for the servant's entrance, child. You are family here."`,'The main door opens, and Lilith herself appears with a warm smile. "Your humility is touching, but unnecessary. You belong here."',"Your modest approach has revealed your character and earned deep respect."],background:"/backgrounds/grand-hall.png",choices:[{id:"explain_humble_intention",text:`"I didn't want to presume. I wasn't sure of my place here."`,consequence:"Humble explanation  Shows thoughtful consideration",effects:[{characterId:"lilith",affectionChange:20}],nextScene:"family_recognition"},{id:"accept_belonging_gratefully",text:'"Thank you for saying I belong here. That means everything to me."',consequence:"Grateful acceptance  Shows appreciation for belonging",effects:[{characterId:"lilith",affectionChange:18}],nextScene:"immediate_acceptance"}]},{id:"first_vampire_encounter",title:"Meeting the Ancient",text:["You hold the vampire's gaze steadily, neither backing down nor showing aggression.",'A slow smile spreads across their perfect features. "Impressive. Most mortals cannot meet my eyes so directly."',`"I am Lilith Ravencroft, and you... you have Cordelia's strength." Her voice carries the weight of centuries.`,"Your fearless confidence has earned immediate respect from the coven's ancient leader."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_about_cordelia",text:'"Tell me about my great-aunt. What was she like?"',consequence:"Family inquiry  Shows desire to understand legacy",effects:[{characterId:"lilith",affectionChange:15}],nextScene:"cordelia_memories"},{id:"acknowledge_vampire_nature",text:`"You're a vampire. I can sense it."`,consequence:"Direct acknowledgment  Shows supernatural awareness",effects:[{characterId:"lilith",affectionChange:12}],nextScene:"nature_revelation"}]},{id:"formal_introduction",title:"Courtly Manners",text:["Your respectful bow is received with gracious approval.",'"Such lovely manners," Lilith says warmly. "Cordelia taught you well, even from a distance."','"I am Lilith Ravencroft, guardian of this sanctuary and keeper of its secrets. You are most welcome here."',"Your combination of boldness and respect has struck the perfect balance."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"express_honor",text:'"The honor is mine, Lady Lilith. This place feels... significant."',consequence:"Respectful recognition  Shows appreciation for significance",effects:[{characterId:"lilith",affectionChange:18}],nextScene:"sanctuary_significance"},{id:"ask_about_secrets",text:'"What secrets does this sanctuary hold?"',consequence:"Secret inquiry  Shows curiosity about mysteries",effects:[{characterId:"lilith",affectionChange:14}],nextScene:"mystery_introduction"}]},{id:"warm_reception",title:"Gracious Welcome",text:["Lilith's smile radiates genuine warmth as she extends her hand in greeting.",'"Your gratitude is touching, but unnecessary. You are family here, and family is always welcome."',`"Cordelia spoke of you often in her letters. She would be so proud to see the person you've become."`,"The warmth of your reception makes you feel immediately at home in this mysterious place."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_about_cordelias_letters",text:'"She wrote about me? What did she say?"',consequence:"Personal interest  Shows curiosity about aunt's perspective",effects:[{characterId:"lilith",affectionChange:16}],nextScene:"cordelias_words"},{id:"express_family_gratitude",text:`"Thank you for calling me family. I've never felt like I belonged anywhere before."`,consequence:"Belonging appreciation  Shows emotional vulnerability",effects:[{characterId:"lilith",affectionChange:20}],nextScene:"finding_belonging"}]},{id:"prophetic_knowledge",title:"Foreseen Arrival",text:["Lilith's eyes take on an otherworldly gleam as she speaks of your anticipated arrival.",'"Some among us have the gift of foresight. Luna saw your coming in the patterns of stars and shadow."',`"But more than prophecy, we felt the pull when Cordelia's protection passed to you. The manor itself called to you."`,"The revelation that your arrival was both foreseen and magically connected fills you with wonder."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_about_protection",text:'"What protection did Cordelia pass to me?"',consequence:"Protection inquiry  Shows desire to understand inheritance",effects:[{characterId:"lilith",affectionChange:15}],nextScene:"magical_inheritance"},{id:"ask_about_luna",text:`"I'd like to meet Luna and learn about her gift."`,consequence:"Seer interest  Shows curiosity about prophetic abilities",effects:[{characterId:"luna",affectionChange:12}],nextScene:"seer_introduction"}]},{id:"supernatural_awareness",title:"Recognized Sensitivity",text:["Lilith's eyes widen with surprise and approval at your supernatural awareness.",`"Remarkable. Few mortals can sense our nature so readily. You have inherited more than Cordelia's estate."`,'"The sensitivity to supernatural energy runs in your bloodline, though it rarely manifests so strongly."',"Your natural ability to perceive the supernatural has revealed hidden potential within you."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_about_bloodline_gift",text:'"Is this sensitivity something I can develop further?"',consequence:"Gift development  Shows interest in supernatural abilities",effects:[{characterId:"lilith",affectionChange:18}],nextScene:"ability_development"},{id:"ask_about_manor_residents",text:'"Are there others here like you? Can I sense them too?"',consequence:"Resident inquiry  Shows awareness of community",effects:[{characterId:"lilith",affectionChange:16}],nextScene:"community_sensing"}]},{id:"gracious_welcome",title:"Noble Courtesy",text:["Lilith's expression softens with genuine pleasure at your formal courtesy.",'"Such grace and proper respect. Cordelia raised you well, even from afar."','"Please, there is no need for such formality among family. You may simply call me Lilith."',"Your respectful approach has earned deep appreciation and immediate acceptance."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"accept_familial_warmth",text:'"Thank you, Lilith. It means everything to be considered family."',consequence:"Family acceptance  Shows appreciation for inclusion",effects:[{characterId:"lilith",affectionChange:20}],nextScene:"family_bonds"},{id:"maintain_respectful_distance",text:'"I appreciate your kindness, but I want to earn my place here first."',consequence:"Earned respect  Shows desire to prove worthiness",effects:[{characterId:"lilith",affectionChange:18}],nextScene:"proving_worth"}]},{id:"family_recognition",title:"Understanding Humility",text:["Lilith's expression fills with profound understanding and warmth.",'"Your uncertainty shows wisdom, but let me be clear: you belong here not because of what you might prove, but because of who you are."',`"Cordelia's blood runs in your veins, but more importantly, her heart beats in your chest. That humility proves it."`,"Your humble honesty has revealed the depth of your character and earned profound respect."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"accept_belonging",text:`"If you're certain I belong here, then I gratefully accept my place."`,consequence:"Belonging acceptance  Shows trust in judgment",effects:[{characterId:"lilith",affectionChange:22}],nextScene:"accepted_family"},{id:"ask_about_cordelia_heart",text:`"What do you mean about Cordelia's heart beating in my chest?"`,consequence:"Heart inquiry  Shows curiosity about spiritual connection",effects:[{characterId:"lilith",affectionChange:20}],nextScene:"spiritual_legacy"}]},{id:"immediate_acceptance",title:"Grateful Belonging",text:["Tears of joy shine in your eyes as you accept Lilith's declaration of belonging.",'"Your gratitude touches my ancient heart," Lilith says softly. "Welcome home, dear child."','"This has been your home all along - you simply needed to find your way here. Cordelia always knew you would."',"The overwhelming sense of finally belonging somewhere creates an instant, deep connection with Lilith."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_about_coming_home",text:'"How did Cordelia know I would find my way here?"',consequence:"Destiny inquiry  Shows curiosity about predetermined path",effects:[{characterId:"lilith",affectionChange:18}],nextScene:"destined_arrival"},{id:"express_overwhelming_gratitude",text:'"I never expected to feel so immediately welcome. Thank you for giving me a home."',consequence:"Deep gratitude  Shows profound appreciation",effects:[{characterId:"lilith",affectionChange:25}],nextScene:"heartfelt_welcome"}]},{id:"nature_revelation",title:"Truth Acknowledged",text:["Lilith nods with appreciation at your direct acknowledgment of her vampiric nature.",'"Most humans cannot sense what we are so clearly. Your supernatural sensitivity is remarkable."','"Yes, I am a vampire, as are the others who dwell here. This manor is a sanctuary for our kind."',"Your straightforward acceptance of the supernatural has earned respect and trust."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_about_sanctuary",text:'"What makes this place a sanctuary? Are you hiding from something?"',consequence:"Sanctuary inquiry  Shows understanding of supernatural dangers",effects:[{characterId:"lilith",affectionChange:15}],nextScene:"introduction_complete"},{id:"express_acceptance",text:`"I'm not afraid. I want to understand this world you've welcomed me into."`,consequence:"Acceptance expression  Shows openness to supernatural world",effects:[{characterId:"lilith",affectionChange:18}],nextScene:"introduction_complete"}]},{id:"sanctuary_significance",title:"Sacred Ground",text:["Lilith's eyes light up with pleasure at your recognition of the manor's significance.",'"This place has been a sanctuary for centuries. The very stones hold protective enchantments woven by generations of guardians."','"It serves as a haven for supernatural beings seeking safety, community, and purpose in a world that often rejects us."',"Your ability to sense the manor's significance reveals your connection to the supernatural world."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"offer_to_help_protect",text:'"How can I help protect this sanctuary? I want to contribute."',consequence:"Protection offer  Shows commitment to sanctuary's mission",effects:[{characterId:"lilith",affectionChange:20}],nextScene:"introduction_complete"},{id:"ask_about_guardians",text:'"Tell me about the guardians who created these protections."',consequence:"Guardian inquiry  Shows interest in sanctuary history",effects:[{characterId:"lilith",affectionChange:16}],nextScene:"introduction_complete"}]},{id:"mystery_introduction",title:"Secrets Unveiled",text:["Lilith's smile becomes mysterious as she considers how to answer your question about secrets.",'"This sanctuary holds many secrets - some protective, some dangerous, all meaningful to those who dwell here."','"The greatest secret is perhaps the simplest: that love and acceptance can exist between beings of different natures."',"Your curiosity about the manor's mysteries shows your readiness to embrace the unknown."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_about_dangerous_secrets",text:'"What makes some secrets dangerous? Should I be concerned?"',consequence:"Danger inquiry  Shows awareness of potential risks",effects:[{characterId:"lilith",affectionChange:14}],nextScene:"introduction_complete"},{id:"focus_on_love_acceptance",text:'"Love and acceptance between different beings - that sounds wonderful."',consequence:"Acceptance focus  Shows appreciation for inclusive community",effects:[{characterId:"lilith",affectionChange:18}],nextScene:"introduction_complete"}]},{id:"cordelias_words",title:"Aunt's Legacy",text:["Lilith's expression grows tender as she recalls Cordelia's letters about you.",`"She wrote of your kindness, your curiosity, your strength in facing life's challenges alone."`,'"Most of all, she spoke of your open heart - how you never let hardship make you bitter or closed off to others."',"Learning about your great-aunt's perception of you creates a deeper understanding of your place here."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"feel_honored_by_description",text:`"I'm honored she saw those qualities in me. I hope to live up to her faith."`,consequence:"Honor expression  Shows desire to honor aunt's memory",effects:[{characterId:"lilith",affectionChange:18}],nextScene:"introduction_complete"},{id:"ask_how_she_knew",text:'"How did she know so much about me? We rarely spoke."',consequence:"Knowledge inquiry  Shows curiosity about connection",effects:[{characterId:"lilith",affectionChange:15}],nextScene:"introduction_complete"}]},{id:"finding_belonging",title:"Home at Last",text:["Lilith's expression fills with maternal warmth at your confession about never belonging anywhere.",'"Oh, dear child. The search for belonging ends here. You are home now, truly and completely."',`"Family isn't about blood alone - it's about choosing to love and support each other through everything."`,"The overwhelming sense of finally finding your place in the world brings tears of relief to your eyes."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"embrace_family_concept",text:'"Chosen family sounds perfect. I choose all of you too."',consequence:"Family choice  Shows commitment to new relationships",effects:[{characterId:"lilith",affectionChange:25}],nextScene:"introduction_complete"},{id:"ask_about_earning_place",text:`"How do I make sure I'm worthy of this family?"`,consequence:"Worthiness inquiry  Shows desire to contribute meaningfully",effects:[{characterId:"lilith",affectionChange:20}],nextScene:"introduction_complete"}]},{id:"magical_inheritance",title:"Protective Legacy",text:["Lilith's voice takes on a reverent tone as she explains your magical inheritance.",'"Cordelia bound protective enchantments to your bloodline - wards against supernatural harm and the ability to sense danger."',`"The inheritance also includes the manor's acceptance of you as its rightful guardian and heir to its secrets."`,"Understanding your magical inheritance reveals the depth of responsibility you've inherited."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"accept_guardian_role",text:`"I accept the responsibility of being this place's guardian."`,consequence:"Guardian acceptance  Shows commitment to protective role",effects:[{characterId:"lilith",affectionChange:22}],nextScene:"introduction_complete"},{id:"ask_about_learning_magic",text:'"Can I learn to use these magical abilities properly?"',consequence:"Magic learning  Shows interest in developing inherited gifts",effects:[{characterId:"lilith",affectionChange:18}],nextScene:"introduction_complete"}]},{id:"seer_introduction",title:"Meeting the Oracle",text:["Lilith nods approvingly at your interest in Luna's prophetic abilities.",'"Luna will be delighted to meet you. Her gift of foresight is both blessing and burden - she sees possibilities, not certainties."',`"She spoke of your arrival weeks ago, describing you as 'the one who brings change wrapped in acceptance.'"`,"Your interest in Luna's gift demonstrates your openness to the supernatural community's diversity."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_about_change_prophecy",text:'"What kind of change am I supposed to bring?"',consequence:"Change inquiry  Shows curiosity about prophetic role",effects:[{characterId:"luna",affectionChange:15}],nextScene:"introduction_complete"},{id:"express_eagerness_to_meet_luna",text:`"I'd love to meet Luna and learn more about her visions."`,consequence:"Seer interest  Shows respect for prophetic abilities",effects:[{characterId:"luna",affectionChange:18}],nextScene:"introduction_complete"}]},{id:"ability_development",title:"Supernatural Potential",text:["Lilith's eyes sparkle with excitement at your interest in developing your supernatural sensitivity.",'"Absolutely. With proper guidance, your natural abilities could become quite remarkable."','"Morgana specializes in developing latent supernatural talents, and Luna can help you understand what your sensitivity reveals."',"The possibility of developing your supernatural abilities opens exciting new avenues for growth."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"request_training",text:`"I'd like to begin training as soon as possible."`,consequence:"Training request  Shows eagerness to develop abilities",effects:[{characterId:"morgana",affectionChange:12}],nextScene:"introduction_complete"},{id:"ask_about_responsibilities",text:'"What responsibilities come with having supernatural abilities?"',consequence:"Responsibility inquiry  Shows mature consideration of power",effects:[{characterId:"lilith",affectionChange:20}],nextScene:"introduction_complete"}]},{id:"community_sensing",title:"Supernatural Awareness",text:["Lilith nods with pride at your question about sensing other supernatural residents.",'"Indeed, there are others here. Each has their own unique supernatural signature that you may learn to distinguish."',`"Your sensitivity will grow stronger with time and practice. Soon you'll sense not just what someone is, but who they are."`,"Your growing supernatural awareness promises deeper connections with the manor's supernatural community."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_to_meet_others",text:`"I'd like to meet the other residents and learn to sense their unique natures."`,consequence:"Community interest  Shows desire to connect with all residents",effects:[{characterId:"lilith",affectionChange:18}],nextScene:"introduction_complete"},{id:"focus_on_developing_sensitivity",text:'"How can I practice developing this sensitivity?"',consequence:"Sensitivity development  Shows commitment to improving abilities",effects:[{characterId:"lilith",affectionChange:16}],nextScene:"introduction_complete"}]},{id:"family_bonds",title:"Immediate Kinship",text:["Lilith's smile radiates pure joy at your acceptance of the family bond.",'"The connection between us is immediate and real. Chosen family often creates stronger bonds than blood alone."','"You will find that each resident here brings something unique to our family dynamic - and you will too."',"The instant family connection creates a foundation of love and support for your new life."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_about_family_dynamics",text:'"What should I know about the family dynamics here?"',consequence:"Dynamic inquiry  Shows interest in understanding relationships",effects:[{characterId:"lilith",affectionChange:18}],nextScene:"introduction_complete"},{id:"express_contribution_desire",text:'"I want to contribute something meaningful to this family."',consequence:"Contribution desire  Shows commitment to family wellbeing",effects:[{characterId:"lilith",affectionChange:20}],nextScene:"introduction_complete"}]},{id:"proving_worth",title:"Earning Respect",text:["Lilith's expression shows deep respect for your desire to earn your place.",'"Your humility and determination to prove yourself actually prove that you already belong here."',`"True worthiness isn't about grand gestures - it's about consistent kindness, reliability, and care for others."`,"Your commitment to earning your place demonstrates the very character that makes you worthy."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_how_to_contribute",text:'"How can I contribute to the community in meaningful ways?"',consequence:"Contribution inquiry  Shows genuine desire to help",effects:[{characterId:"lilith",affectionChange:20}],nextScene:"introduction_complete"},{id:"promise_to_prove_worthy",text:'"I promise to show through my actions that I deserve this place."',consequence:"Worthiness promise  Shows commitment to earning acceptance",effects:[{characterId:"lilith",affectionChange:18}],nextScene:"introduction_complete"}]},{id:"accepted_family",title:"Unconditional Welcome",text:["Lilith's face glows with happiness as you accept your place in the family.",'"Your acceptance brings such joy to my heart. Welcome home, truly and completely."','"This family has been waiting for you without even knowing it. You complete something that was missing."',"The mutual acceptance creates an unbreakable bond between you and your new supernatural family."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_what_was_missing",text:'"What was missing that I complete?"',consequence:"Completion inquiry  Shows curiosity about role in family",effects:[{characterId:"lilith",affectionChange:18}],nextScene:"introduction_complete"},{id:"express_overwhelming_gratitude",text:'"Thank you for making me feel so completely welcomed and loved."',consequence:"Grateful expression  Shows deep appreciation for acceptance",effects:[{characterId:"lilith",affectionChange:22}],nextScene:"introduction_complete"}]},{id:"spiritual_legacy",title:"Heart's Inheritance",text:["Lilith's voice becomes deeply emotional as she explains the spiritual connection.",`"Cordelia's heart - her capacity for love, acceptance, and bringing out the best in others - lives on in you."`,`"It's not about blood or genetics. It's about carrying forward her spirit of unconditional love and creating sanctuary for others."`,"Understanding your spiritual inheritance reveals the profound responsibility and gift you've received."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"vow_to_honor_legacy",text:`"I vow to honor Cordelia's legacy and continue her work of creating sanctuary."`,consequence:"Legacy vow  Shows commitment to continuing aunt's mission",effects:[{characterId:"lilith",affectionChange:25}],nextScene:"introduction_complete"},{id:"ask_about_creating_sanctuary",text:'"How did Cordelia create sanctuary for others? What did she do?"',consequence:"Sanctuary inquiry  Shows desire to learn from aunt's example",effects:[{characterId:"lilith",affectionChange:20}],nextScene:"introduction_complete"}]},{id:"destined_arrival",title:"Predetermined Path",text:["Lilith's eyes take on an otherworldly gleam as she speaks of destiny and predetermined paths.",'"Cordelia had a touch of prophecy herself. She saw that you would find your way here when the time was right."','"Some paths are written in the stars, but they still require courage to walk. You chose to come here - destiny merely opened the door."',"Learning about your destined arrival adds a sense of cosmic significance to your journey."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"embrace_destiny",text:'"If this is my destiny, then I embrace it completely."',consequence:"Destiny acceptance  Shows openness to predetermined path",effects:[{characterId:"lilith",affectionChange:20}],nextScene:"introduction_complete"},{id:"focus_on_personal_choice",text:`"I'm glad I had the courage to choose this path, destiny or not."`,consequence:"Choice focus  Shows appreciation for personal agency",effects:[{characterId:"lilith",affectionChange:18}],nextScene:"introduction_complete"}]},{id:"heartfelt_welcome",title:"Home Found",text:["Lilith is visibly moved by your profound gratitude and the depth of your emotional response.",`"Your words touch the very core of what we've tried to build here - a place where everyone can truly belong."`,'"This is what Cordelia dreamed of when she first opened these doors to lost souls seeking sanctuary."',"The heartfelt exchange cements your place in the family and creates an unshakeable foundation of mutual love."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"promise_to_help_others_find_home",text:`"I want to help others find the same sense of home and belonging I've found here."`,consequence:"Service promise  Shows commitment to helping other lost souls",effects:[{characterId:"lilith",affectionChange:25}],nextScene:"introduction_complete"},{id:"ask_about_cordelias_dream",text:`"Tell me more about Cordelia's dream of sanctuary for lost souls."`,consequence:"Dream inquiry  Shows interest in understanding aunt's vision",effects:[{characterId:"lilith",affectionChange:22}],nextScene:"introduction_complete"}]},{id:"introduction_complete",title:"Welcome to Your New Life",text:["Your introduction to Ravencroft Manor and its supernatural inhabitants draws to a close.","Lilith's warm smile encompasses all the promise and possibility of your new life here.",`"Now that you understand what this place is and who we are, it's time to begin your true journey among us."`,"Your arrival has been completed, and your story in the supernatural world is ready to unfold."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"begin_new_life",text:"Step forward into your new supernatural life.",consequence:"Life beginning  Embraces transformation and new possibilities",effects:[{characterId:"lilith",affectionChange:15}],nextScene:"arrival"}]}]},{id:"chapter_2",title:"Political Tensions",scenes:[{id:"chapter_2_start",title:"Brewing Storm",text:["Several weeks have passed since your arrival at Ravencroft Manor. You've begun to understand the delicate balance of power that exists among the vampire residents.","However, tensions that have long simmered beneath the surface are beginning to boil over.","Valentina, the revolutionary, and Isadora, the traditionalist socialite, have been increasingly at odds.","Their philosophical differences about how the coven should interact with the modern world have reached a breaking point."],background:"/backgrounds/grand-hall.png",choices:[{id:"observe_tensions",text:"Observe the growing tensions carefully before taking action.",consequence:"Cautious observation  Gather information before acting",effects:[{characterId:"celeste",affectionChange:8}],nextScene:"valentina_proposal"},{id:"seek_lilith_counsel",text:"Seek Lilith's guidance on handling the situation.",consequence:"Leadership consultation  Shows respect for authority",effects:[{characterId:"lilith",affectionChange:12}],nextScene:"lilith_political_advice"},{id:"talk_to_morgana",text:"Ask Morgana for her mystical insight into the conflict.",consequence:"Mystical consultation  Seeks deeper understanding",effects:[{characterId:"morgana",affectionChange:10}],nextScene:"morgana_political_vision"}]},{id:"valentina_proposal",title:"The Revolutionary's Vision",text:["You find Valentina in the library, surrounded by books on political theory and social movements.","Her passionate eyes burn with conviction as she looks up from her reading.",'"The time for hiding in shadows is over," she declares. "We have the power to shape the modern world, not merely observe it from the sidelines."','"Isadora and her traditional approach will keep us trapped in the past forever. We need progressive action."'],character:b.valentina,background:"/backgrounds/library.png",choices:[{id:"support_valentina",text:"Express support for Valentina's progressive vision.",consequence:"Progressive alliance  Supports modernization",effects:[{characterId:"valentina",affectionChange:25},{characterId:"isadora",affectionChange:-15},{characterId:"lilith",affectionChange:-8}],playerStatEffects:{sanityChange:-5},nextScene:"valentina_detailed_plan"},{id:"express_concerns",text:"Voice concerns about the potential risks of rapid change.",consequence:"Diplomatic caution  Shows balanced thinking",effects:[{characterId:"valentina",affectionChange:5},{characterId:"celeste",affectionChange:12},{characterId:"lilith",affectionChange:8}],nextScene:"valentina_frustrated_response"},{id:"ask_specifics",text:"Ask for specific details about her proposed changes.",consequence:"Information gathering  Seeks concrete plans",effects:[{characterId:"valentina",affectionChange:10},{characterId:"celeste",affectionChange:8}],nextScene:"valentina_detailed_plan"}]},{id:"lilith_political_advice",title:"The Matriarch's Wisdom",text:["Lilith receives you in her private study, a room that radiates ancient authority.","She listens carefully as you describe the growing tensions between Valentina and Isadora.",'"I have governed this coven for centuries," she says thoughtfully. "Change is inevitable, but it must be managed carefully."','"Both Valentina and Isadora have valid concerns. The challenge is finding a path that honors our traditions while adapting to modern realities."'],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_lilith_preference",text:"Ask Lilith which approach she personally favors.",consequence:"Direct inquiry  Seeks leadership guidance",effects:[{characterId:"lilith",affectionChange:15}],nextScene:"lilith_reveals_preference"},{id:"suggest_mediation",text:"Suggest that you could help mediate between the factions.",consequence:"Diplomatic offer  Takes initiative in conflict resolution",effects:[{characterId:"lilith",affectionChange:20},{characterId:"celeste",affectionChange:15}],playerStatEffects:{healthChange:-3},nextScene:"lilith_mediation_approval"},{id:"express_neutrality",text:"Express that you see merit in both perspectives.",consequence:"Neutral stance  Shows diplomatic balance",effects:[{characterId:"lilith",affectionChange:12},{characterId:"morgana",affectionChange:8}],nextScene:"lilith_neutrality_response"}]},{id:"morgana_political_vision",title:"Shadows of the Future",text:["Morgana's eyes grow distant as she peers into realms beyond ordinary perception.","The shadows around her seem to whisper secrets as she considers your question.",'"The threads of fate are tangled here," she murmurs. "I see two paths diverging - one leads to growth through strife, the other to stagnation through peace."','"The choice you make will ripple through decades to come. Trust your instincts, for they are guided by forces older than politics."'],character:b.morgana,background:"/backgrounds/library.png",choices:[{id:"ask_about_consequences",text:"Ask Morgana to elaborate on the long-term consequences.",consequence:"Mystical inquiry  Seeks deeper understanding",effects:[{characterId:"morgana",affectionChange:18}],playerStatEffects:{sanityChange:-8},nextScene:"morgana_dark_prophecy"},{id:"request_guidance",text:"Ask for her guidance on which path to choose.",consequence:"Mystical guidance  Relies on supernatural wisdom",effects:[{characterId:"morgana",affectionChange:15}],nextScene:"morgana_cryptic_advice"},{id:"thank_and_leave",text:"Thank Morgana and decide to make your own choice.",consequence:"Independent decision  Shows personal agency",effects:[{characterId:"morgana",affectionChange:10},{characterId:"lilith",affectionChange:5}],nextScene:"isadora_confrontation"}]},{id:"isadora_confrontation",title:"The Traditionalist's Stand",text:["You encounter Isadora in the ballroom, where she's arranging fresh flowers with meticulous care.","Her elegant composure barely masks her frustration as she speaks.",`"Valentina's reckless ideas will destroy everything we've built," she says with controlled anger.`,'"Our traditions have kept us safe for centuries. This rush toward modernity is nothing but dangerous foolishness that will expose us all."'],character:b.isadora,background:"/backgrounds/ballroom.png",choices:[{id:"support_isadora",text:"Agree that tradition and caution are important.",consequence:"Traditional alliance  Supports established ways",effects:[{characterId:"isadora",affectionChange:25},{characterId:"valentina",affectionChange:-15},{characterId:"raven",affectionChange:-8}],nextScene:"isadora_traditional_plan"},{id:"challenge_isadora",text:"Gently challenge her resistance to all change.",consequence:"Diplomatic challenge  Questions rigid thinking",effects:[{characterId:"isadora",affectionChange:-5},{characterId:"valentina",affectionChange:8},{characterId:"celeste",affectionChange:10}],nextScene:"isadora_defensive_response"},{id:"ask_about_fears",text:"Ask what specifically she fears about Valentina's proposals.",consequence:"Understanding inquiry  Seeks deeper motivations",effects:[{characterId:"isadora",affectionChange:12},{characterId:"morgana",affectionChange:5}],nextScene:"isadora_reveals_fears"}]},{id:"valentina_detailed_plan",title:"The Progressive Agenda",text:["Valentina's eyes light up as she shares her vision for the future.",'"We could establish vampire-owned businesses, influence politics from within, use our abilities to actually help humanity instead of preying on them."','"Imagine a world where we work alongside humans as partners, not predators. We have so much to offer."',"Her passion is infectious, but you can see the risks in her ambitious plans."],character:b.valentina,background:"/backgrounds/library.png",choices:[{id:"full_commitment",text:"Offer your full commitment to her cause.",consequence:"Revolutionary alliance  Complete dedication to change",effects:[{characterId:"valentina",affectionChange:35},{characterId:"isadora",affectionChange:-25},{characterId:"raven",affectionChange:15}],playerStatEffects:{healthChange:-8},nextScene:"valentina_grateful_response"},{id:"gradual_approach",text:"Suggest a more gradual approach to implementing changes.",consequence:"Moderate progression  Balances innovation with caution",effects:[{characterId:"valentina",affectionChange:15},{characterId:"celeste",affectionChange:18},{characterId:"lilith",affectionChange:12}],nextScene:"compromise_discussion"},{id:"express_doubts",text:"Express doubts about the feasibility of her plans.",consequence:"Realistic concerns  Questions implementation",effects:[{characterId:"valentina",affectionChange:-10},{characterId:"isadora",affectionChange:8},{characterId:"morgana",affectionChange:5}],nextScene:"valentina_defensive_argument"}]},{id:"isadora_traditional_plan",title:"The Wisdom of Ages",text:["Isadora's voice takes on the weight of centuries as she explains her perspective.",'"Our discretion has protected us through wars, plagues, and the rise and fall of empires. We survive by remaining hidden."',`"The old ways work because they've been tested by time. Valentina's experiments could destroy us all."`,"Her fear is genuine, born from knowledge of past disasters when vampires became too bold."],character:b.isadora,background:"/backgrounds/ballroom.png",choices:[{id:"embrace_tradition",text:"Agree that the traditional ways should be preserved.",consequence:"Traditional alliance  Supports established order",effects:[{characterId:"isadora",affectionChange:35},{characterId:"valentina",affectionChange:-25},{characterId:"lilith",affectionChange:15}],nextScene:"isadora_relief_response"},{id:"suggest_adaptation",text:"Suggest that tradition can adapt without abandoning core values.",consequence:"Adaptive tradition  Modernizes while preserving essence",effects:[{characterId:"isadora",affectionChange:10},{characterId:"celeste",affectionChange:20},{characterId:"morgana",affectionChange:12}],nextScene:"compromise_discussion"},{id:"challenge_fear",text:"Gently challenge her fear of all change.",consequence:"Progressive challenge  Questions conservative stance",effects:[{characterId:"isadora",affectionChange:-15},{characterId:"valentina",affectionChange:12},{characterId:"raven",affectionChange:8}],nextScene:"isadora_angry_response"}]},{id:"compromise_discussion",title:"Seeking Middle Ground",text:["You find yourself in the unique position of potentially bridging the gap between two opposing philosophies.","Both Valentina and Isadora have valid concerns, and perhaps there's a way to honor both perspectives.","The challenge will be convincing both factions that compromise isn't betrayal.","Your diplomatic efforts could shape the future of the entire coven."],background:"/backgrounds/grand-hall.png",choices:[{id:"propose_council",text:"Propose forming a council with representatives from both sides.",consequence:"Democratic solution  Creates formal decision-making structure",effects:[{characterId:"lilith",affectionChange:25},{characterId:"celeste",affectionChange:20},{characterId:"valentina",affectionChange:10},{characterId:"isadora",affectionChange:10}],playerStatEffects:{healthChange:-5},nextScene:"council_formation"},{id:"gradual_reform",text:"Suggest implementing small changes gradually over time.",consequence:"Gradual reform  Minimizes risk while allowing progress",effects:[{characterId:"celeste",affectionChange:25},{characterId:"valentina",affectionChange:15},{characterId:"isadora",affectionChange:15},{characterId:"morgana",affectionChange:10}],nextScene:"gradual_reform_plan"},{id:"suggest_trial_period",text:"Propose a trial period for new policies with built-in safeguards.",consequence:"Experimental approach  Tests changes safely",effects:[{characterId:"valentina",affectionChange:20},{characterId:"isadora",affectionChange:8},{characterId:"lilith",affectionChange:15}],nextScene:"trial_period_discussion"}]},{id:"council_formation",title:"Democratic Governance",text:["Your proposal for a governing council resonates with Lilith's desire for structured leadership.","The idea of formal representation gives both factions a voice while maintaining order.",`"This could work," Lilith muses. "We've governed by tradition and authority for so long, perhaps it's time for a more inclusive approach."`,"The formation of the council marks a new chapter in vampire governance at Ravencroft Manor."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"volunteer_leadership",text:"Volunteer to help lead the council formation process.",consequence:"Leadership initiative  Takes responsibility for implementation",effects:[{characterId:"lilith",affectionChange:30},{characterId:"celeste",affectionChange:25}],playerStatEffects:{healthChange:-10},nextScene:"chapter_2_conclusion_council"},{id:"suggest_elections",text:"Suggest holding elections for council positions.",consequence:"Democratic process  Ensures fair representation",effects:[{characterId:"valentina",affectionChange:20},{characterId:"raven",affectionChange:15}],nextScene:"election_planning"},{id:"recommend_advisors",text:"Recommend that experienced members serve as advisors.",consequence:"Balanced wisdom  Combines new ideas with experience",effects:[{characterId:"isadora",affectionChange:18},{characterId:"morgana",affectionChange:15},{characterId:"lilith",affectionChange:12}],nextScene:"advisor_system"}]}]}],Sv={currentChapter:0,currentScene:"arrival",characters:b,playerCharacter:void 0,playerStats:{health:100,sanity:100,location:"Ravencroft Manor Gates",maxHealth:100,maxSanity:100,restCount:0,meditationCount:0},inventory:[],flags:{},completedScenes:[],choiceHistory:[],isCharacterCreated:!1,journal:[],achievements:[],unlockedBackstories:[],availableRecoveryActions:["basic_rest","meditation","social_recovery"],lastRecoveryTimes:{}},Jt=[{id:"first_steps",name:"First Steps",description:"Complete character creation and enter Ravencroft Manor",unlocked:!1,category:"story",icon:"Home"},{id:"manor_explorer",name:"Manor Explorer",description:"Visit all major locations in Ravencroft Manor",unlocked:!1,category:"exploration",icon:"Map"},{id:"chapter_one_complete",name:"Inheritance Accepted",description:"Complete Chapter 1: The Inheritance",unlocked:!1,category:"story",icon:"BookOpen"},{id:"chapter_two_complete",name:"Political Navigator",description:"Complete Chapter 2: Political Tensions",unlocked:!1,category:"story",icon:"Crown"},{id:"first_friend",name:"First Friend",description:"Reach 50+ affection with any character",unlocked:!1,category:"relationship",icon:"Heart"},{id:"trusted_ally",name:"Trusted Ally",description:"Reach 80+ affection and 70+ trust with any character",unlocked:!1,category:"relationship",icon:"Shield"},{id:"beloved",name:"Beloved",description:"Reach maximum affection (100) with any character",unlocked:!1,category:"relationship",icon:"HeartHandshake"},{id:"social_butterfly",name:"Social Butterfly",description:"Maintain 60+ affection with at least 5 characters",unlocked:!1,category:"relationship",icon:"Users"},{id:"lilith_confidant",name:"Lilith's Confidant",description:"Earn Lilith's complete trust and affection",unlocked:!1,category:"relationship",icon:"Crown"},{id:"morgana_mystic",name:"Shadow Mystic",description:"Unlock Morgana's deepest magical secrets",unlocked:!1,category:"relationship",icon:"Sparkles"},{id:"survivor",name:"Survivor",description:"Maintain health and sanity above 50 for 10 consecutive choices",unlocked:!1,category:"survival",icon:"Heart"},{id:"iron_will",name:"Iron Will",description:"Never let sanity drop below 25",unlocked:!1,category:"survival",icon:"Brain"},{id:"resilient",name:"Resilient",description:"Recover from critical health/sanity through rest and recovery",unlocked:!1,category:"survival",icon:"RefreshCw"},{id:"master_diplomat",name:"Master Diplomat",description:"Successfully navigate political crisis without losing any trust",unlocked:!1,category:"survival",icon:"MessageCircle"},{id:"secret_keeper",name:"Secret Keeper",description:"Discover 5 character backstories",unlocked:!1,category:"exploration",icon:"Eye"},{id:"lore_master",name:"Lore Master",description:"Uncover the complete history of Ravencroft Manor",unlocked:!1,category:"exploration",icon:"Scroll"},{id:"truth_seeker",name:"Truth Seeker",description:"Make 25 investigative choices",unlocked:!1,category:"exploration",icon:"Search"},{id:"cosmic_witness",name:"Cosmic Witness",description:"Successfully communicate with Umbra",unlocked:!1,category:"exploration",icon:"Star"},{id:"perfect_balance",name:"Perfect Balance",description:"Maintain 100 health and 100 sanity simultaneously",unlocked:!1,category:"survival",icon:"Scale"},{id:"peace_maker",name:"Peace Maker",description:"Successfully mediate between opposing faction members",unlocked:!1,category:"story",icon:"Handshake"},{id:"master_of_manor",name:"Master of the Manor",description:"Gain the respect and trust of all vampire residents",unlocked:!1,category:"relationship",icon:"Castle"}],nI=e=>{const t=[];return Jt.forEach(n=>{if(n.unlocked)return;let a=!1;switch(n.id){case"first_steps":a=e.isCharacterCreated&&e.completedScenes.length>0;break;case"manor_explorer":const r=["grand_hall","library","music_room","garden","dining_hall","ballroom"];a=e.completedScenes.filter(l=>r.some(u=>l.includes(u))).length>=6;break;case"chapter_one_complete":a=e.currentChapter>=1;break;case"chapter_two_complete":a=e.currentChapter>=2;break;case"first_friend":a=Object.values(e.characters).some(l=>l.affection>=50);break;case"trusted_ally":a=Object.values(e.characters).some(l=>l.affection>=80&&l.trust>=70);break;case"beloved":a=Object.values(e.characters).some(l=>l.affection>=100);break;case"social_butterfly":a=Object.values(e.characters).filter(l=>l.affection>=60).length>=5;break;case"survivor":const s=e.choiceHistory.slice(-10);a=s.length>=10&&s.every(()=>e.playerStats.health>50&&e.playerStats.sanity>50);break;case"iron_will":a=e.playerStats.sanity>=25&&e.choiceHistory.length>20;break;case"perfect_balance":a=e.playerStats.health===100&&e.playerStats.sanity===100;break;case"secret_keeper":a=e.unlockedBackstories.length>=5;break;case"cosmic_witness":a=e.characters.umbra&&e.characters.umbra.affection>=30;break}a&&t.push(n.id)}),t},aI=[{id:"lilith_origin",characterId:"lilith",title:"The Ancient Queen's Origin",unlockRequirement:{minAffection:60,minTrust:50},unlocked:!1,scenes:[{id:"lilith_backstory_1",title:"Echoes of Ancient Babylon",text:["Lilith's eyes grow distant as she shares a memory from millennia past.",'"I was not always as you see me now. Once, I ruled over vast cities in ancient Mesopotamia."','"The mortals called me the Queen of the Night, though they never understood my true nature."',"She pauses, the weight of countless centuries evident in her expression."],character:b.lilith,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_about_rule",text:"Ask about her reign as queen.",consequence:"Historical inquiry  Shows interest in her past power",effects:[{characterId:"lilith",affectionChange:15}],nextScene:"lilith_backstory_2"},{id:"ask_about_transformation",text:"Ask about her transformation into a vampire.",consequence:"Personal inquiry  Seeks understanding of her nature",effects:[{characterId:"lilith",affectionChange:12}],nextScene:"lilith_transformation_story"}]}]},{id:"morgana_shadow_magic",characterId:"morgana",title:"The Shadow Witch's Secret",unlockRequirement:{minAffection:50,minTrust:40},unlocked:!1,scenes:[{id:"morgana_backstory_1",title:"The Salem Connection",text:["Morgana's voice drops to a whisper as she reveals a closely guarded secret.",'"I was in Salem during the witch trials, but not as you might think."','"I was the one they were truly hunting - a real witch with real power."',"The shadows around her seem to respond to her emotions, growing darker and more animated."],character:b.morgana,background:"/backgrounds/library.png",choices:[{id:"ask_about_salem",text:"Ask about her experiences during the trials.",consequence:"Historical trauma  Shows empathy for her suffering",effects:[{characterId:"morgana",affectionChange:20}],nextScene:"morgana_salem_survival"},{id:"ask_about_powers",text:"Ask about the true extent of her magical abilities.",consequence:"Power inquiry  Shows interest in her capabilities",effects:[{characterId:"morgana",affectionChange:15}],playerStatEffects:{sanityChange:-5},nextScene:"morgana_power_demonstration"}]}]},{id:"seraphina_fall",characterId:"seraphina",title:"The Fallen Angel's Tragedy",unlockRequirement:{minAffection:55,minTrust:60},unlocked:!1,scenes:[{id:"seraphina_backstory_1",title:"Divine Punishment",text:["Seraphina's ethereal beauty is tinged with profound sadness as she speaks.",'"I was cast out for loving too deeply, for caring too much about mortal suffering."','"The other angels saw my compassion as weakness, my interventions as defiance."',"Her voice carries the weight of divine judgment and eternal exile."],character:b.seraphina,background:"/backgrounds/garden-courtyard.png",choices:[{id:"offer_comfort",text:"Offer comfort for her loss of paradise.",consequence:"Emotional support  Shows deep empathy",effects:[{characterId:"seraphina",affectionChange:25}],nextScene:"seraphina_gratitude"},{id:"ask_about_powers",text:"Ask if she retained any of her divine abilities.",consequence:"Divine inquiry  Shows curiosity about her nature",effects:[{characterId:"seraphina",affectionChange:12}],nextScene:"seraphina_remaining_grace"}]}]},{id:"valentina_revolution",characterId:"valentina",title:"The Revolutionary's Fire",unlockRequirement:{minAffection:45,requiredFlags:["supported_progressive_ideas"]},unlocked:!1,scenes:[{id:"valentina_backstory_1",title:"Born in Revolution",text:["Valentina's passionate nature becomes clearer as she shares her origins.",'"I was turned during the French Revolution, in the chaos of social upheaval."','"My maker believed that vampires should be the vanguard of progress, not shadows hiding from history."',"Her revolutionary spirit was forged in the fires of one of history's greatest transformations."],character:b.valentina,background:"/backgrounds/library.png",choices:[{id:"discuss_maker",text:"Ask about her vampire maker.",consequence:"Personal history  Shows interest in her transformation",effects:[{characterId:"valentina",affectionChange:18}],nextScene:"valentina_maker_story"},{id:"discuss_revolution",text:"Discuss the parallels between then and now.",consequence:"Revolutionary philosophy  Engages with her ideals",effects:[{characterId:"valentina",affectionChange:20}],nextScene:"valentina_modern_revolution"}]}]},{id:"raven_hunter_past",characterId:"raven",title:"The Huntress's Burden",unlockRequirement:{minAffection:40,minTrust:45},unlocked:!1,scenes:[{id:"raven_backstory_1",title:"Hunter Becomes Hunted",text:["Raven's stoic facade cracks slightly as she reveals her painful past.",'"I was a vampire hunter once, sworn to destroy the very creatures I now live among."','"Irony has a cruel sense of humor - the monster I hunted most relentlessly was the one who turned me."',"The weight of her transformation from hunter to vampire has shaped every aspect of her existence."],character:b.raven,background:"/backgrounds/grand-hall.png",choices:[{id:"ask_about_hunt",text:"Ask about her time as a hunter.",consequence:"Painful inquiry  Shows courage to face difficult truths",effects:[{characterId:"raven",affectionChange:15}],nextScene:"raven_hunting_days"},{id:"ask_about_maker",text:"Ask about the vampire who turned her.",consequence:"Transformation inquiry  Seeks understanding of her change",effects:[{characterId:"raven",affectionChange:18}],nextScene:"raven_maker_confrontation"}]}]},{id:"elena_musical_tragedy",characterId:"elena",title:"The Musician's Lost Symphony",unlockRequirement:{minAffection:35,minTrust:30},unlocked:!1,scenes:[{id:"elena_backstory_1",title:"Silenced by Society",text:["Elena's fingers pause on the piano keys as she shares her tragic tale.",'"I was a composer in Vienna, during an era when women were forbidden from such pursuits."',`"My music was published under men's names, my genius attributed to others."`,"The pain of having her life's work stolen echoes in every note she plays."],character:b.elena,background:"/backgrounds/music-room.png",choices:[{id:"express_outrage",text:"Express outrage at the injustice she faced.",consequence:"Emotional solidarity  Shows anger at historical wrongs",effects:[{characterId:"elena",affectionChange:22}],nextScene:"elena_vindication"},{id:"ask_about_music",text:"Ask to hear some of her original compositions.",consequence:"Artistic appreciation  Shows respect for her talent",effects:[{characterId:"elena",affectionChange:20}],nextScene:"elena_private_concert"}]}]}],rI=e=>{const t=[];return aI.forEach(n=>{if(e.unlockedBackstories.includes(n.id))return;const a=e.characters[n.characterId];if(!a)return;let r=!0;n.unlockRequirement.minAffection&&a.affection<n.unlockRequirement.minAffection&&(r=!1),n.unlockRequirement.minTrust&&a.trust<n.unlockRequirement.minTrust&&(r=!1),n.unlockRequirement.requiredFlags&&n.unlockRequirement.requiredFlags.forEach(o=>{e.flags[o]||(r=!1)}),r&&t.push(n.id)}),t};function Je(e,t){var n;return((n=e==null?void 0:e.traits)==null?void 0:n.some(a=>a.id===t))||!1}function na(e,t){var n;return((n=e==null?void 0:e.flaws)==null?void 0:n.some(a=>a.id===t))||!1}function lt(e,t){var n;return((n=e==null?void 0:e.boons)==null?void 0:n.some(a=>a.id===t))||!1}function oI(e){return["fight","run","athletic","physical","strength","endurance","chase","escape"].some(n=>e.text.toLowerCase().includes(n)||e.consequence.toLowerCase().includes(n))}function ou(e){return["charm","persuade","talk","convince","social","conversation","diplomacy","negotiate"].some(n=>e.text.toLowerCase().includes(n)||e.consequence.toLowerCase().includes(n))}function iI(e){return["feel","emotion","heart","love","comfort","empathy","understand","connect","vulnerable"].some(n=>e.text.toLowerCase().includes(n)||e.consequence.toLowerCase().includes(n))}function sI(e){return["analyze","think","reason","logic","deduce","solve","question","investigate"].some(n=>e.text.toLowerCase().includes(n)||e.consequence.toLowerCase().includes(n))}function cI(e){return["art","music","create","beauty","aesthetic","compose","artistic","creative"].some(n=>e.text.toLowerCase().includes(n)||e.consequence.toLowerCase().includes(n))}function lI(e){return["demand","insist","firm","assertive","bold","confident","direct","command"].some(n=>e.text.toLowerCase().includes(n)||e.consequence.toLowerCase().includes(n))}function uI(e){return["observe","watch","notice","silent","quiet","listen","wait","study"].some(n=>e.text.toLowerCase().includes(n)||e.consequence.toLowerCase().includes(n))}function hI(e){return["blood","bite","feed","vampire","fang","neck","vein","drain"].some(n=>e.text.toLowerCase().includes(n)||e.consequence.toLowerCase().includes(n))}function dI(e){return["trust","believe","faith","accept","honest","open","vulnerable"].some(n=>e.text.toLowerCase().includes(n)||e.consequence.toLowerCase().includes(n))}function fI(e){return["suspect","doubt","cautious","wary","suspicious","distrust","question"].some(n=>e.text.toLowerCase().includes(n)||e.consequence.toLowerCase().includes(n))}function pI(e){return["bold","reckless","rush","immediate","without thinking","impulsive","dare"].some(n=>e.text.toLowerCase().includes(n)||e.consequence.toLowerCase().includes(n))}function mI(e){return["careful","cautious","slow","think","consider","deliberate","wait"].some(n=>e.text.toLowerCase().includes(n)||e.consequence.toLowerCase().includes(n))}function Cv(e){return["investigate","explore","discover","search","find out","learn","curious"].some(n=>e.text.toLowerCase().includes(n)||e.consequence.toLowerCase().includes(n))}function gI(e){return["supernatural","magic","vampire","angel","divine","mystical","otherworldly"].some(n=>e.text.toLowerCase().includes(n)||e.consequence.toLowerCase().includes(n))}function yI(e){return["resist","fight","oppose","refuse","reject","deny","stand against"].some(n=>e.text.toLowerCase().includes(n)||e.consequence.toLowerCase().includes(n))}function vI(e){return["brave","courage","fearless","bold","face","confront","stand up"].some(n=>e.text.toLowerCase().includes(n)||e.consequence.toLowerCase().includes(n))}function wI(e){return["see","detect","sense","perceive","notice","observe","identify"].some(n=>e.text.toLowerCase().includes(n)||e.consequence.toLowerCase().includes(n))}function bI(e){return["determined","persist","will","resolve","steadfast","unwavering","committed"].some(n=>e.text.toLowerCase().includes(n)||e.consequence.toLowerCase().includes(n))}function xI(e){return["rest","sleep","recover","relax","calm","peaceful","meditate","retreat"].some(n=>e.text.toLowerCase().includes(n)||e.consequence.toLowerCase().includes(n))}function _I(e){return["lie","deceive","trick","manipulate","betray","false","mislead","dishonest"].some(n=>e.text.toLowerCase().includes(n)||e.consequence.toLowerCase().includes(n))}function Iv(e){return["dangerous","risk","peril","hazard","threat","unsafe","reckless","deadly"].some(n=>e.text.toLowerCase().includes(n)||e.consequence.toLowerCase().includes(n))}function kI(e){return["group","everyone","together","gathering","crowd","assembly","meeting","social"].some(n=>e.text.toLowerCase().includes(n)||e.consequence.toLowerCase().includes(n))}function SI(e){return["alone","solitary","private","isolated","individual","personal","solo","single"].some(n=>e.text.toLowerCase().includes(n)||e.consequence.toLowerCase().includes(n))}function CI(e){return["past","memory","remember","history","before","previous","former","childhood"].some(n=>e.text.toLowerCase().includes(n)||e.consequence.toLowerCase().includes(n))}function II(e){return["luck","fortune","chance","gamble","risk","random","serendipity","fate"].some(n=>e.text.toLowerCase().includes(n)||e.consequence.toLowerCase().includes(n))}function TI(e){return["discover","find","uncover","reveal","stumble","happen upon","come across"].some(n=>e.text.toLowerCase().includes(n)||e.consequence.toLowerCase().includes(n))}function Tv(e,t){return t?e.map(n=>{let a={...n};return a=qI(a,t),a=EI(a,t),a=PI(a,t),a}):e}function qI(e,t){let n={...e};return Je(t,"athletic")&&oI(e)&&(n.effects=n.effects.map(a=>({...a,affectionChange:a.affectionChange+2})),n.consequence+="  Athletic bonus"),Je(t,"charismatic")&&ou(e)&&(n.effects=n.effects.map(a=>({...a,affectionChange:a.affectionChange+3})),n.consequence+="  Charismatic bonus"),Je(t,"empathetic")&&iI(e)&&(n.effects=n.effects.map(a=>({...a,affectionChange:a.affectionChange+4})),n.consequence+="  Empathetic insight"),Je(t,"intelligent")&&sI(e)&&(n.effects=n.effects.map(a=>({...a,affectionChange:a.affectionChange+2})),n.consequence+="  Brilliant deduction"),Je(t,"creative")&&cI(e)&&(n.effects=n.effects.map(a=>({...a,affectionChange:a.affectionChange+5})),n.consequence+="  Creative connection"),Je(t,"intimidating")&&lI(e)&&(n.effects=n.effects.map(a=>({...a,affectionChange:a.affectionChange+2})),n.consequence+="  Intimidating presence"),Je(t,"shy")&&uI(e)&&(n.effects=n.effects.map(a=>({...a,affectionChange:a.affectionChange+3})),n.consequence+="  Observant nature"),n}function EI(e,t){var a,r,o,i,s,l,u,h,d,f;let n={...e};return na(t,"bloodphobia")&&hI(e)&&(n.effects=n.effects.map(w=>({...w,affectionChange:Math.max(0,w.affectionChange-3)})),n.playerStatEffects={...n.playerStatEffects,sanityChange:(((a=n.playerStatEffects)==null?void 0:a.sanityChange)||0)-5},n.consequence+="  Hemophobia distress"),na(t,"nightmares")&&(xI(e)&&(n.playerStatEffects={...n.playerStatEffects,healthChange:Math.max(-5,(((r=n.playerStatEffects)==null?void 0:r.healthChange)||0)-3),sanityChange:(((o=n.playerStatEffects)==null?void 0:o.sanityChange)||0)-2},n.consequence+="  Nightmares haunt your rest"),Math.random()<.1&&(n.playerStatEffects={...n.playerStatEffects,sanityChange:(((i=n.playerStatEffects)==null?void 0:i.sanityChange)||0)-3},n.consequence+="  Sudden nightmare flashback")),na(t,"trusting")&&(dI(e)?(n.effects=n.effects.map(w=>({...w,affectionChange:w.affectionChange+2})),n.consequence+="  Trusting nature"):fI(e)&&(n.effects=n.effects.map(w=>({...w,affectionChange:Math.max(0,w.affectionChange-2)})),n.consequence+="  Struggles with suspicion"),_I(e)&&(n.effects=n.effects.map(w=>({...w,affectionChange:Math.max(0,w.affectionChange-4)})),n.playerStatEffects={...n.playerStatEffects,sanityChange:(((s=n.playerStatEffects)==null?void 0:s.sanityChange)||0)-3},n.consequence+="  Trusting nature exploited")),na(t,"reckless")&&(pI(e)?(n.effects=n.effects.map(w=>({...w,affectionChange:w.affectionChange+2})),n.consequence+="  Reckless enthusiasm",n.playerStatEffects={...n.playerStatEffects,healthChange:(((l=n.playerStatEffects)==null?void 0:l.healthChange)||0)-2}):mI(e)&&(n.effects=n.effects.map(w=>({...w,affectionChange:Math.max(0,w.affectionChange-1)})),n.consequence+="  Restraint is difficult")),na(t,"curious")&&Cv(e)&&(n.effects=n.effects.map(w=>({...w,affectionChange:w.affectionChange+3})),n.consequence+="  Irresistible curiosity",Iv(e)&&(n.playerStatEffects={...n.playerStatEffects,healthChange:(((u=n.playerStatEffects)==null?void 0:u.healthChange)||0)-3,sanityChange:(((h=n.playerStatEffects)==null?void 0:h.sanityChange)||0)-2})),na(t,"isolated")&&(kI(e)?(n.effects=n.effects.map(w=>({...w,affectionChange:Math.max(0,w.affectionChange-2)})),n.consequence+="  Social isolation shows"):SI(e)&&(n.effects=n.effects.map(w=>({...w,affectionChange:w.affectionChange+2})),n.consequence+="  Comfortable alone")),na(t,"haunted")&&(CI(e)&&(n.playerStatEffects={...n.playerStatEffects,sanityChange:(((d=n.playerStatEffects)==null?void 0:d.sanityChange)||0)-8},n.consequence+="  Haunted past resurfaces"),Math.random()<.05&&(n.playerStatEffects={...n.playerStatEffects,sanityChange:(((f=n.playerStatEffects)==null?void 0:f.sanityChange)||0)-5},n.consequence+="  Past trauma triggered")),n}function PI(e,t){var o,i,s,l,u,h,d,f,w,x;let n={...e};const a=lt(t,"resistance"),r=lt(t,"willpower");return(o=n.playerStatEffects)!=null&&o.sanityChange&&n.playerStatEffects.sanityChange<0&&(a&&r?(n.playerStatEffects.sanityChange=0,n.consequence+="  Mental fortitude & iron will provide complete protection"):a?(n.playerStatEffects.sanityChange=Math.ceil(n.playerStatEffects.sanityChange/2),n.consequence+="  Mental fortitude reduces psychological impact"):r&&(n.playerStatEffects.sanityChange=Math.ceil(n.playerStatEffects.sanityChange*.75),n.consequence+="  Iron will provides some protection")),lt(t,"psychic")&&gI(e)&&(n.effects=n.effects.map(m=>({...m,affectionChange:m.affectionChange+4})),n.consequence+="  Psychic insight"),lt(t,"resistance")&&yI(e)&&(n.effects=n.effects.map(m=>({...m,affectionChange:m.affectionChange+3})),n.consequence+="  Mental resistance"),lt(t,"charm")&&ou(e)&&(n.effects=n.effects.map(m=>({...m,affectionChange:m.affectionChange+2})),n.consequence+="  Natural charm"),lt(t,"courage")&&vI(e)&&(n.effects=n.effects.map(m=>({...m,affectionChange:m.affectionChange+3})),n.consequence+="  Fearless courage"),lt(t,"bloodsight")&&wI(e)&&(n.effects=n.effects.map(m=>({...m,affectionChange:m.affectionChange+3})),n.consequence+="  Blood sight reveals truth"),lt(t,"willpower")&&bI(e)&&(n.effects=n.effects.map(m=>({...m,affectionChange:m.affectionChange+2})),n.consequence+="  Iron will prevails"),lt(t,"lucky")&&((i=n.playerStatEffects)!=null&&i.sanityChange&&n.playerStatEffects.sanityChange<0&&Math.random()<.15&&(n.playerStatEffects.sanityChange=0,n.consequence+="  Lucky escape from psychological harm"),(s=n.playerStatEffects)!=null&&s.healthChange&&n.playerStatEffects.healthChange<0&&Math.random()<.15&&(n.playerStatEffects.healthChange=0,n.consequence+="  Miraculous avoidance of injury"),Cv(e)&&Math.random()<.2&&(n.effects=n.effects.map(g=>({...g,affectionChange:g.affectionChange+5})),n.consequence+="  Lucky discovery reveals hidden secrets"),Iv(e)&&Math.random()<.1&&(n.effects=n.effects.map(g=>({...g,affectionChange:g.affectionChange+8})),n.playerStatEffects={...n.playerStatEffects,healthChange:(((l=n.playerStatEffects)==null?void 0:l.healthChange)||0)+5,sanityChange:(((u=n.playerStatEffects)==null?void 0:u.sanityChange)||0)+3},n.consequence+="  Incredible luck turns danger into triumph"),ou(e)&&Math.random()<.25&&(n.effects=n.effects.map(g=>({...g,affectionChange:g.affectionChange+3})),n.consequence+="  Fortuitous timing improves social outcome"),n.effects.some(g=>g.affectionChange<0)&&Math.random()<.12&&(n.effects=n.effects.map(g=>({...g,affectionChange:Math.max(0,g.affectionChange)})),n.consequence+="  Lucky circumstances prevent relationship damage"),II(e)&&(n.effects=n.effects.map(g=>({...g,affectionChange:g.affectionChange+4})),n.consequence+="  Supernatural luck amplifies fortune"),TI(e)&&Math.random()<.3&&(n.consequence+="  Luck leads to unexpected findings",n.playerStatEffects={...n.playerStatEffects,sanityChange:(((h=n.playerStatEffects)==null?void 0:h.sanityChange)||0)+2}),((d=n.playerStatEffects)!=null&&d.healthChange&&n.playerStatEffects.healthChange<-3||(f=n.playerStatEffects)!=null&&f.sanityChange&&n.playerStatEffects.sanityChange<-5)&&Math.random()<.08&&(n.playerStatEffects={healthChange:Math.abs(((w=n.playerStatEffects)==null?void 0:w.healthChange)||0),sanityChange:Math.abs(((x=n.playerStatEffects)==null?void 0:x.sanityChange)||0)},n.consequence+="  Miraculous luck reverses misfortune into blessing")),n}function jI(e){if(!e)return[];const t=[];return lt(e,"psychic")&&t.push({id:"psychic_insight",text:"[Psychic] Focus your supernatural senses to read the area before proceeding.",consequence:"Psychic insight  Gathers information then returns to door choices",effects:[],nextScene:"psychic_door_insight"}),lt(e,"bloodsight")&&t.push({id:"blood_sight_analysis",text:"[Blood Sight] Use your rare gift to examine supernatural presences before entering.",consequence:"Blood sight  Detects supernatural nature then returns to door choices",effects:[],nextScene:"blood_sight_door_analysis"}),Je(e,"athletic")&&t.push({id:"athletic_approach",text:"[Athletic] Use your physical prowess to demonstrate confidence.",consequence:"Athletic demonstration  Shows physical capability",effects:[{characterId:"lilith",affectionChange:8}],nextScene:"athletic_demonstration"}),Je(e,"creative")&&t.push({id:"creative_perspective",text:"[Creative] Offer a unique artistic perspective on the situation.",consequence:"Creative insight  Shows artistic soul and unique viewpoint",effects:[{characterId:"morgana",affectionChange:10},{characterId:"elena",affectionChange:15}],nextScene:"creative_insight"}),Je(e,"charismatic")&&t.push({id:"charismatic_influence",text:"[Charismatic] Use your natural charm to influence the social dynamics.",consequence:"Social influence  Affects group relationships",effects:[{characterId:"isadora",affectionChange:20},{characterId:"valentina",affectionChange:10}],nextScene:"charismatic_manipulation"}),Je(e,"intelligent")&&t.push({id:"analytical_approach",text:"[Intelligent] Analyze the underlying motivations and power structures at play.",consequence:"Strategic analysis  Reveals hidden agendas",effects:[{characterId:"celeste",affectionChange:25},{characterId:"luna",affectionChange:15}],nextScene:"analytical_revelation"}),Je(e,"empathetic")&&t.push({id:"empathetic_understanding",text:"[Empathetic] Sense the emotional undercurrents and address them directly.",consequence:"Emotional insight  Connects with hidden pain",effects:[{characterId:"elena",affectionChange:30},{characterId:"seraphina",affectionChange:20}],nextScene:"empathetic_breakthrough"}),Je(e,"intimidating")&&t.push({id:"intimidating_presence",text:"[Intimidating] Assert your presence to command respect and attention.",consequence:"Dominant display  Forces acknowledgment of strength",effects:[{characterId:"raven",affectionChange:25},{characterId:"valentina",affectionChange:20}],nextScene:"dominance_established"}),lt(e,"lucky")&&(t.push({id:"lucky_discovery",text:"[Lucky] Trust in your supernatural fortune to guide you to something important.",consequence:"Serendipitous discovery  Fortune reveals hidden opportunities",effects:[{characterId:"luna",affectionChange:20},{characterId:"celeste",affectionChange:15}],nextScene:"fortuitous_revelation"}),t.push({id:"lucky_escape",text:"[Lucky] Take a seemingly risky path, trusting luck to see you through safely.",consequence:"Miraculous escape  Danger becomes opportunity through fortune",effects:[{characterId:"raven",affectionChange:18},{characterId:"morgana",affectionChange:12}],playerStatEffects:{healthChange:5,sanityChange:3},nextScene:"lucky_breakthrough"})),t}const qv=p.createContext(void 0);function NI(e,t){switch(t.type){case"CREATE_CHARACTER":return{...e,playerCharacter:t.payload,isCharacterCreated:!0,currentScene:"arrival",playerStats:{...e.playerStats,location:"Ravencroft Manor Gates"}};case"MAKE_CHOICE":const n=t.payload,a={...e};n.effects.forEach(i=>{if(a.characters[i.characterId]){a.characters[i.characterId].affection=Math.max(0,Math.min(100,a.characters[i.characterId].affection+i.affectionChange)),i.trustChange!==void 0&&(a.characters[i.characterId].trust=Math.max(0,Math.min(100,a.characters[i.characterId].trust+i.trustChange)));const s=a.characters[i.characterId].affection,l=a.characters[i.characterId].trust;l<=10?a.characters[i.characterId].status="Hostile":l<=20?a.characters[i.characterId].status="Deeply Suspicious":l<=30?a.characters[i.characterId].status="Distrustful":l<=40?a.characters[i.characterId].status="Wary":s>=80?a.characters[i.characterId].status="Deeply in Love":s>=60?a.characters[i.characterId].status="Smitten":s>=40?a.characters[i.characterId].status="Interested":s>=20?a.characters[i.characterId].status="Curious":a.characters[i.characterId].status="Neutral"}}),n.playerStatEffects&&(n.playerStatEffects.healthChange&&(a.playerStats.health=Math.max(0,Math.min(100,a.playerStats.health+n.playerStatEffects.healthChange))),n.playerStatEffects.sanityChange&&(a.playerStats.sanity=Math.max(0,Math.min(100,a.playerStats.sanity+n.playerStatEffects.sanityChange))));const r=Object.values(a.characters).filter(i=>i.trust<=10),o=Object.values(a.characters).filter(i=>i.trust<=20);return r.length>=2?(a.currentScene="multiple_hostility_bad_end",a.playerStats.health=0,a):r.length===1&&r[0].id==="lilith"?(a.currentScene="lilith_hostility_bad_end",a.playerStats.health=0,a):o.length>=4?(a.currentScene="widespread_distrust_bad_end",a):(n.secretsProbed&&n.secretsProbed.forEach(i=>{a.flags[`secret_${i}_probed`]||(a.flags[`secret_${i}_probed`]=!0,Object.keys(a.characters).forEach(s=>{a.characters[s].trust>30&&(a.characters[s].trust=Math.max(20,a.characters[s].trust-Math.floor(Math.random()*8+3)))}))}),a.choiceHistory.push({sceneId:a.currentScene,choiceId:n.id,choiceText:n.text,consequence:n.consequence,timestamp:Date.now(),characterEffects:n.effects}),n.nextScene&&(a.currentScene=n.nextScene,a.completedScenes.push(e.currentScene)),a);case"UPDATE_AFFECTION":return{...e,characters:{...e.characters,[t.payload.characterId]:{...e.characters[t.payload.characterId],affection:Math.max(0,Math.min(100,e.characters[t.payload.characterId].affection+t.payload.change))}}};case"UPDATE_TRUST":return{...e,characters:{...e.characters,[t.payload.characterId]:{...e.characters[t.payload.characterId],trust:Math.max(0,Math.min(100,e.characters[t.payload.characterId].trust+t.payload.change))}}};case"ADD_JOURNAL_ENTRY":return{...e,journal:[...e.journal,t.payload]};case"UNLOCK_ACHIEVEMENT":return{...e,achievements:e.achievements.map(i=>i.id===t.payload?{...i,unlocked:!0,unlockedAt:Date.now()}:i)};case"PERFORM_RECOVERY":return{...e,playerStats:{...e.playerStats,health:Math.min(e.playerStats.maxHealth,e.playerStats.health+t.payload.healthRestore),sanity:Math.min(e.playerStats.maxSanity,e.playerStats.sanity+t.payload.sanityRestore),restCount:t.payload.actionId==="basic_rest"?e.playerStats.restCount+1:e.playerStats.restCount,meditationCount:t.payload.actionId==="meditation"?e.playerStats.meditationCount+1:e.playerStats.meditationCount},lastRecoveryTimes:{...e.lastRecoveryTimes,[t.payload.actionId]:Date.now()}};case"UNLOCK_BACKSTORY":return{...e,unlockedBackstories:[...e.unlockedBackstories,t.payload]};case"UPDATE_PLAYER_STATS":return{...e,playerStats:{...e.playerStats,...t.payload}};case"LOAD_GAME":return t.payload;case"RESET_GAME":return Sv;default:return e}}function Ev({children:e}){const t={...Sv,achievements:Jt.map(x=>({...x,unlocked:!1}))},[n,a]=p.useReducer(NI,t);p.useEffect(()=>{const m=setInterval(()=>{localStorage.setItem("crimsonEmbrace_autoSave",JSON.stringify(n))},3e4);return()=>clearInterval(m)},[n]),p.useEffect(()=>{const x=localStorage.getItem("crimsonEmbrace_autoSave");if(x)try{const m=JSON.parse(x);m.isCharacterCreated&&m.completedScenes.length>0?a({type:"LOAD_GAME",payload:m}):localStorage.removeItem("crimsonEmbrace_autoSave")}catch(m){console.error("Failed to load auto-save:",m),localStorage.removeItem("crimsonEmbrace_autoSave")}},[]);const r=()=>{const x=xn[n.currentChapter];return x==null?void 0:x.scenes.find(m=>m.id===n.currentScene)},o=x=>{const m=n.playerCharacter?Tv([x],n.playerCharacter)[0]:x;a({type:"MAKE_CHOICE",payload:m});const _={id:`choice_${Date.now()}`,type:"choice",title:m.text,description:m.consequence||"Made a significant decision",timestamp:Date.now(),sceneId:n.currentScene,metadata:{effects:m.effects,playerStatEffects:m.playerStatEffects}};h(_),setTimeout(()=>{nI(n).forEach(v=>{d(v)}),rI(n).forEach(v=>{w(v);const k={id:`backstory_${Date.now()}`,type:"backstory",title:"Character Story Unlocked",description:"A character has shared more of their past with you",timestamp:Date.now(),metadata:{backstoryId:v}};h(k)})},100)},i=x=>{a({type:"CREATE_CHARACTER",payload:x})},s=x=>{const m={...n,timestamp:new Date().toISOString()};localStorage.setItem(`crimsonEmbrace_save_${x}`,JSON.stringify(m))},l=x=>{a({type:"LOAD_GAME",payload:x})},u=()=>{localStorage.removeItem("crimsonEmbrace_autoSave"),a({type:"RESET_GAME"})},h=x=>{a({type:"ADD_JOURNAL_ENTRY",payload:x})},d=x=>{a({type:"UNLOCK_ACHIEVEMENT",payload:x})},f=x=>{const m=x==="basic_rest"?20:x==="meditation"?15:10,_=x==="meditation"?25:x==="basic_rest"?10:15;a({type:"PERFORM_RECOVERY",payload:{actionId:x,healthRestore:m,sanityRestore:_}});const g={id:`recovery_${Date.now()}`,type:"recovery",title:`Recovery: ${x.replace("_"," ").toUpperCase()}`,description:`Restored ${m} health and ${_} sanity through ${x.replace("_"," ")}.`,timestamp:Date.now()};h(g)},w=x=>{a({type:"UNLOCK_BACKSTORY",payload:x})};return c.jsx(qv.Provider,{value:{gameState:n,currentScene:r(),makeChoice:o,createCharacter:i,saveGame:s,loadGame:l,resetGame:u,addJournalEntry:h,unlockAchievement:d,performRecoveryAction:f,unlockBackstory:w},children:e})}function Nt(){const e=p.useContext(qv);if(e===void 0)throw new Error("useGame must be used within a GameProvider");return e}const ue=p.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:ne("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));ue.displayName="Card";const Ce=p.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:ne("flex flex-col space-y-1.5 p-6",e),...t}));Ce.displayName="CardHeader";const Ie=p.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:ne("text-2xl font-semibold leading-none tracking-tight",e),...t}));Ie.displayName="CardTitle";const Xr=p.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:ne("text-sm text-muted-foreground",e),...t}));Xr.displayName="CardDescription";const de=p.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:ne("p-6 pt-0",e),...t}));de.displayName="CardContent";const RI=p.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:ne("flex items-center p-6 pt-0",e),...t}));RI.displayName="CardFooter";var Ih="Progress",Th=100,[AI,oq]=gn(Ih),[LI,MI]=AI(Ih),Pv=p.forwardRef((e,t)=>{const{__scopeProgress:n,value:a=null,max:r,getValueLabel:o=OI,...i}=e;(r||r===0)&&!Bf(r)&&console.error(DI(`${r}`,"Progress"));const s=Bf(r)?r:Th;a!==null&&!Vf(a,s)&&console.error(zI(`${a}`,"Progress"));const l=Vf(a,s)?a:null,u=ms(l)?o(l,s):void 0;return c.jsx(LI,{scope:n,value:l,max:s,children:c.jsx(K.div,{"aria-valuemax":s,"aria-valuemin":0,"aria-valuenow":ms(l)?l:void 0,"aria-valuetext":u,role:"progressbar","data-state":Rv(l,s),"data-value":l??void 0,"data-max":s,...i,ref:t})})});Pv.displayName=Ih;var jv="ProgressIndicator",Nv=p.forwardRef((e,t)=>{const{__scopeProgress:n,...a}=e,r=MI(jv,n);return c.jsx(K.div,{"data-state":Rv(r.value,r.max),"data-value":r.value??void 0,"data-max":r.max,...a,ref:t})});Nv.displayName=jv;function OI(e,t){return`${Math.round(e/t*100)}%`}function Rv(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function ms(e){return typeof e=="number"}function Bf(e){return ms(e)&&!isNaN(e)&&e>0}function Vf(e,t){return ms(e)&&!isNaN(e)&&e<=t&&e>=0}function DI(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Th}\`.`}function zI(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Th} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Av=Pv,WI=Nv;const rn=p.forwardRef(({className:e,value:t,...n},a)=>c.jsx(Av,{ref:a,className:ne("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:c.jsx(WI,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));rn.displayName=Av.displayName;const FI=ph("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function tt({className:e,variant:t,...n}){return c.jsx("div",{className:ne(FI({variant:t}),e),...n})}var YI=p.createContext(void 0);function qh(e){const t=p.useContext(YI);return e||t||"ltr"}var Rc="rovingFocusGroup.onEntryFocus",HI={bubbles:!1,cancelable:!0},$s="RovingFocusGroup",[iu,Lv,BI]=cy($s),[VI,Mv]=gn($s,[BI]),[UI,$I]=VI($s),Ov=p.forwardRef((e,t)=>c.jsx(iu.Provider,{scope:e.__scopeRovingFocusGroup,children:c.jsx(iu.Slot,{scope:e.__scopeRovingFocusGroup,children:c.jsx(GI,{...e,ref:t})})}));Ov.displayName=$s;var GI=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:a,loop:r=!1,dir:o,currentTabStopId:i,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...d}=e,f=p.useRef(null),w=ye(t,f),x=qh(o),[m=null,_]=Ds({prop:i,defaultProp:s,onChange:l}),[g,y]=p.useState(!1),v=be(u),k=Lv(n),S=p.useRef(!1),[T,I]=p.useState(0);return p.useEffect(()=>{const q=f.current;if(q)return q.addEventListener(Rc,v),()=>q.removeEventListener(Rc,v)},[v]),c.jsx(UI,{scope:n,orientation:a,dir:x,loop:r,currentTabStopId:m,onItemFocus:p.useCallback(q=>_(q),[_]),onItemShiftTab:p.useCallback(()=>y(!0),[]),onFocusableItemAdd:p.useCallback(()=>I(q=>q+1),[]),onFocusableItemRemove:p.useCallback(()=>I(q=>q-1),[]),children:c.jsx(K.div,{tabIndex:g||T===0?-1:0,"data-orientation":a,...d,ref:w,style:{outline:"none",...e.style},onMouseDown:B(e.onMouseDown,()=>{S.current=!0}),onFocus:B(e.onFocus,q=>{const P=!S.current;if(q.target===q.currentTarget&&P&&!g){const N=new CustomEvent(Rc,HI);if(q.currentTarget.dispatchEvent(N),!N.defaultPrevented){const D=k().filter(F=>F.focusable),O=D.find(F=>F.active),$=D.find(F=>F.id===m),X=[O,$,...D].filter(Boolean).map(F=>F.ref.current);Wv(X,h)}}S.current=!1}),onBlur:B(e.onBlur,()=>y(!1))})})}),Dv="RovingFocusGroupItem",zv=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:a=!0,active:r=!1,tabStopId:o,...i}=e,s=lo(),l=o||s,u=$I(Dv,n),h=u.currentTabStopId===l,d=Lv(n),{onFocusableItemAdd:f,onFocusableItemRemove:w}=u;return p.useEffect(()=>{if(a)return f(),()=>w()},[a,f,w]),c.jsx(iu.ItemSlot,{scope:n,id:l,focusable:a,active:r,children:c.jsx(K.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...i,ref:t,onMouseDown:B(e.onMouseDown,x=>{a?u.onItemFocus(l):x.preventDefault()}),onFocus:B(e.onFocus,()=>u.onItemFocus(l)),onKeyDown:B(e.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){u.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const m=XI(x,u.orientation,u.dir);if(m!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let g=d().filter(y=>y.focusable).map(y=>y.ref.current);if(m==="last")g.reverse();else if(m==="prev"||m==="next"){m==="prev"&&g.reverse();const y=g.indexOf(x.currentTarget);g=u.loop?ZI(g,y+1):g.slice(y+1)}setTimeout(()=>Wv(g))}})})})});zv.displayName=Dv;var KI={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function QI(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function XI(e,t,n){const a=QI(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(a))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(a)))return KI[a]}function Wv(e,t=!1){const n=document.activeElement;for(const a of e)if(a===n||(a.focus({preventScroll:t}),document.activeElement!==n))return}function ZI(e,t){return e.map((n,a)=>e[(t+a)%e.length])}var JI=Ov,e1=zv,Eh="Tabs",[t1,iq]=gn(Eh,[Mv]),Fv=Mv(),[n1,Ph]=t1(Eh),Yv=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:a,onValueChange:r,defaultValue:o,orientation:i="horizontal",dir:s,activationMode:l="automatic",...u}=e,h=qh(s),[d,f]=Ds({prop:a,onChange:r,defaultProp:o});return c.jsx(n1,{scope:n,baseId:lo(),value:d,onValueChange:f,orientation:i,dir:h,activationMode:l,children:c.jsx(K.div,{dir:h,"data-orientation":i,...u,ref:t})})});Yv.displayName=Eh;var Hv="TabsList",Bv=p.forwardRef((e,t)=>{const{__scopeTabs:n,loop:a=!0,...r}=e,o=Ph(Hv,n),i=Fv(n);return c.jsx(JI,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:a,children:c.jsx(K.div,{role:"tablist","aria-orientation":o.orientation,...r,ref:t})})});Bv.displayName=Hv;var Vv="TabsTrigger",Uv=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:a,disabled:r=!1,...o}=e,i=Ph(Vv,n),s=Fv(n),l=Kv(i.baseId,a),u=Qv(i.baseId,a),h=a===i.value;return c.jsx(e1,{asChild:!0,...s,focusable:!r,active:h,children:c.jsx(K.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:l,...o,ref:t,onMouseDown:B(e.onMouseDown,d=>{!r&&d.button===0&&d.ctrlKey===!1?i.onValueChange(a):d.preventDefault()}),onKeyDown:B(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&i.onValueChange(a)}),onFocus:B(e.onFocus,()=>{const d=i.activationMode!=="manual";!h&&!r&&d&&i.onValueChange(a)})})})});Uv.displayName=Vv;var $v="TabsContent",Gv=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:a,forceMount:r,children:o,...i}=e,s=Ph($v,n),l=Kv(s.baseId,a),u=Qv(s.baseId,a),h=a===s.value,d=p.useRef(h);return p.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),c.jsx(jt,{present:r||h,children:({present:f})=>c.jsx(K.div,{"data-state":h?"active":"inactive","data-orientation":s.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:u,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:f&&o})})});Gv.displayName=$v;function Kv(e,t){return`${e}-trigger-${t}`}function Qv(e,t){return`${e}-content-${t}`}var a1=Yv,Xv=Bv,Zv=Uv,Jv=Gv;const jh=a1,Gs=p.forwardRef(({className:e,...t},n)=>c.jsx(Xv,{ref:n,className:ne("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Gs.displayName=Xv.displayName;const Ee=p.forwardRef(({className:e,...t},n)=>c.jsx(Zv,{ref:n,className:ne("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Ee.displayName=Zv.displayName;const Tn=p.forwardRef(({className:e,...t},n)=>c.jsx(Jv,{ref:n,className:ne("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Tn.displayName=Jv.displayName;function r1(){const{gameState:e,currentScene:t}=Nt(),a=(()=>{const i=[];if(Object.values(e.characters).forEach(h=>{h.affection>=80?i.push({type:"relationship",title:"Deep Connection",description:`Your bond with ${h.name} has grown incredibly strong. Major story paths may be opening.`,character:h.id,priority:"high"}):h.affection>=60?i.push({type:"relationship",title:"Growing Bond",description:`${h.name} is developing strong feelings. Continue showing interest to deepen this relationship.`,character:h.id,priority:"medium"}):h.affection<=20&&h.affection>0&&i.push({type:"warning",title:"Strained Relationship",description:`Your relationship with ${h.name} seems distant. Consider choices that align with their values.`,character:h.id,priority:"medium"})}),t!=null&&t.choices){const h=t.choices.some(f=>f.consequence.toLowerCase().includes("romantic")||f.consequence.toLowerCase().includes("attraction")),d=t.choices.some(f=>f.consequence.toLowerCase().includes("risk")||f.consequence.toLowerCase().includes("danger")||f.effects.some(w=>w.affectionChange<-5));h&&i.push({type:"opportunity",title:"Romantic Moment",description:"This scene offers opportunities to express romantic interest. Consider your feelings carefully.",priority:"medium"}),d&&i.push({type:"warning",title:"Careful Consideration",description:"Some choices here may significantly impact your relationships. Think about long-term consequences.",priority:"high"})}e.characters.lilith.affection>=50&&i.push({type:"story",title:"Vampire Lore",description:"Lilith may be willing to share deeper secrets about vampire nature and transformation.",character:"lilith",priority:"medium"}),e.characters.morgana.affection>=40&&i.push({type:"opportunity",title:"Artistic Connection",description:"Morgana appreciates those who understand her music. Show interest in her artistic expression.",character:"morgana",priority:"low"}),e.characters.seraphina.affection>=45&&i.push({type:"story",title:"Divine Mysteries",description:"Seraphina may reveal more about her angelic past and the choices that led her here.",character:"seraphina",priority:"medium"});const s=Object.values(e.characters).reduce((h,d)=>h+d.affection,0);Math.max(...Object.values(e.characters).map(h=>h.affection))>=90&&s>=200&&i.push({type:"opportunity",title:"Deepest Bonds",description:"Your connections have reached extraordinary depths. Profound choices may become available.",priority:"high"});const u=e.choiceHistory||[];if(u.length>=3){const h=u.slice(-5),d=h.filter(_=>_.consequence.toLowerCase().includes("romantic")||_.consequence.toLowerCase().includes("attraction")||_.consequence.toLowerCase().includes("love")),f=h.filter(_=>_.consequence.toLowerCase().includes("cautious")||_.consequence.toLowerCase().includes("wisdom")||_.consequence.toLowerCase().includes("practical")),w=h.filter(_=>_.consequence.toLowerCase().includes("bold")||_.consequence.toLowerCase().includes("confident")||_.consequence.toLowerCase().includes("commit"));d.length>=3&&i.push({type:"opportunity",title:"Romantic Heart",description:"You consistently choose love and connection. This path may lead to deep, transformative relationships.",priority:"medium"}),f.length>=3&&i.push({type:"story",title:"Thoughtful Approach",description:"Your careful consideration is building trust slowly but surely. Patience often yields the deepest bonds.",priority:"medium"}),w.length>=3&&i.push({type:"warning",title:"Bold Path",description:"Your confident choices create strong impressions. Some characters may find this attractive, others overwhelming.",priority:"medium"});const x={};h.forEach(_=>{_.characterEffects.forEach(g=>{g.affectionChange>0&&(x[g.characterId]=(x[g.characterId]||0)+1)})});const m=Object.entries(x).reduce((_,[g,y])=>y>(_[1]||0)?[g,y]:_,["",0]);if(m[1]>=3&&e.characters[m[0]]){const _=e.characters[m[0]];i.push({type:"relationship",title:"Focused Affection",description:`You're clearly drawn to ${_.name}. Continue this path to unlock their unique storyline.`,character:m[0],priority:"medium"})}}if(u.length>=2){const h={};u.slice(-3).forEach(d=>{d.characterEffects.forEach(f=>{h[f.characterId]||(h[f.characterId]=[]),h[f.characterId].push(f.affectionChange)})}),Object.entries(h).forEach(([d,f])=>{const w=f.reduce((m,_)=>m+_,0),x=e.characters[d];w>=15&&x?i.push({type:"opportunity",title:"Building Momentum",description:`Your relationship with ${x.name} is gaining momentum. Major story developments may be ahead.`,character:d,priority:"high"}):w<=-10&&x&&i.push({type:"warning",title:"Relationship Strain",description:`Recent choices have created tension with ${x.name}. Consider their values in future decisions.`,character:d,priority:"high"})})}return i.sort((h,d)=>{const f={high:3,medium:2,low:1};return f[d.priority]-f[h.priority]}).slice(0,4)})();if(a.length===0)return null;const r=i=>{switch(i){case"relationship":return c.jsx(Me,{className:"w-4 h-4"});case"story":return c.jsx(MS,{className:"w-4 h-4"});case"warning":return c.jsx(co,{className:"w-4 h-4"});case"opportunity":return c.jsx(Zl,{className:"w-4 h-4"})}},o=i=>{switch(i){case"relationship":return"bg-rose-500/20 text-rose-200 border-rose-500/30";case"story":return"bg-blue-500/20 text-blue-200 border-blue-500/30";case"warning":return"bg-amber-500/20 text-amber-200 border-amber-500/30";case"opportunity":return"bg-emerald-500/20 text-emerald-200 border-emerald-500/30"}};return c.jsxs("div",{className:"space-y-3",children:[c.jsxs("h3",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[c.jsx(Zl,{className:"w-4 h-4"}),"Story Insights"]}),c.jsx("div",{className:"space-y-2",children:a.map((i,s)=>{var l;return c.jsx(ue,{className:`border transition-all duration-200 hover:border-opacity-60 ${o(i.type)}`,children:c.jsx(de,{className:"p-3",children:c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsx("div",{className:"flex-shrink-0 mt-0.5",children:r(i.type)}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("h4",{className:"text-xs font-medium truncate",children:i.title}),i.character&&c.jsx(tt,{variant:"outline",className:"text-xs px-1 py-0",children:(l=e.characters[i.character])==null?void 0:l.name})]}),c.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:i.description})]})]})})},s)})})]})}function o1(e,[t,n]){return Math.min(n,Math.max(t,e))}function i1(e,t){return p.useReducer((n,a)=>t[n][a]??n,e)}var Nh="ScrollArea",[ew,sq]=gn(Nh),[s1,vt]=ew(Nh),tw=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:a="hover",dir:r,scrollHideDelay:o=600,...i}=e,[s,l]=p.useState(null),[u,h]=p.useState(null),[d,f]=p.useState(null),[w,x]=p.useState(null),[m,_]=p.useState(null),[g,y]=p.useState(0),[v,k]=p.useState(0),[S,T]=p.useState(!1),[I,q]=p.useState(!1),P=ye(t,D=>l(D)),N=qh(r);return c.jsx(s1,{scope:n,type:a,dir:N,scrollHideDelay:o,scrollArea:s,viewport:u,onViewportChange:h,content:d,onContentChange:f,scrollbarX:w,onScrollbarXChange:x,scrollbarXEnabled:S,onScrollbarXEnabledChange:T,scrollbarY:m,onScrollbarYChange:_,scrollbarYEnabled:I,onScrollbarYEnabledChange:q,onCornerWidthChange:y,onCornerHeightChange:k,children:c.jsx(K.div,{dir:N,...i,ref:P,style:{position:"relative","--radix-scroll-area-corner-width":g+"px","--radix-scroll-area-corner-height":v+"px",...e.style}})})});tw.displayName=Nh;var nw="ScrollAreaViewport",aw=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:a,nonce:r,...o}=e,i=vt(nw,n),s=p.useRef(null),l=ye(t,s,i.onViewportChange);return c.jsxs(c.Fragment,{children:[c.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),c.jsx(K.div,{"data-radix-scroll-area-viewport":"",...o,ref:l,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:c.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:a})})]})});aw.displayName=nw;var $t="ScrollAreaScrollbar",Rh=p.forwardRef((e,t)=>{const{forceMount:n,...a}=e,r=vt($t,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:i}=r,s=e.orientation==="horizontal";return p.useEffect(()=>(s?o(!0):i(!0),()=>{s?o(!1):i(!1)}),[s,o,i]),r.type==="hover"?c.jsx(c1,{...a,ref:t,forceMount:n}):r.type==="scroll"?c.jsx(l1,{...a,ref:t,forceMount:n}):r.type==="auto"?c.jsx(rw,{...a,ref:t,forceMount:n}):r.type==="always"?c.jsx(Ah,{...a,ref:t}):null});Rh.displayName=$t;var c1=p.forwardRef((e,t)=>{const{forceMount:n,...a}=e,r=vt($t,e.__scopeScrollArea),[o,i]=p.useState(!1);return p.useEffect(()=>{const s=r.scrollArea;let l=0;if(s){const u=()=>{window.clearTimeout(l),i(!0)},h=()=>{l=window.setTimeout(()=>i(!1),r.scrollHideDelay)};return s.addEventListener("pointerenter",u),s.addEventListener("pointerleave",h),()=>{window.clearTimeout(l),s.removeEventListener("pointerenter",u),s.removeEventListener("pointerleave",h)}}},[r.scrollArea,r.scrollHideDelay]),c.jsx(jt,{present:n||o,children:c.jsx(rw,{"data-state":o?"visible":"hidden",...a,ref:t})})}),l1=p.forwardRef((e,t)=>{const{forceMount:n,...a}=e,r=vt($t,e.__scopeScrollArea),o=e.orientation==="horizontal",i=Qs(()=>l("SCROLL_END"),100),[s,l]=i1("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(s==="idle"){const u=window.setTimeout(()=>l("HIDE"),r.scrollHideDelay);return()=>window.clearTimeout(u)}},[s,r.scrollHideDelay,l]),p.useEffect(()=>{const u=r.viewport,h=o?"scrollLeft":"scrollTop";if(u){let d=u[h];const f=()=>{const w=u[h];d!==w&&(l("SCROLL"),i()),d=w};return u.addEventListener("scroll",f),()=>u.removeEventListener("scroll",f)}},[r.viewport,o,l,i]),c.jsx(jt,{present:n||s!=="hidden",children:c.jsx(Ah,{"data-state":s==="hidden"?"hidden":"visible",...a,ref:t,onPointerEnter:B(e.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:B(e.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),rw=p.forwardRef((e,t)=>{const n=vt($t,e.__scopeScrollArea),{forceMount:a,...r}=e,[o,i]=p.useState(!1),s=e.orientation==="horizontal",l=Qs(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,h=n.viewport.offsetHeight<n.viewport.scrollHeight;i(s?u:h)}},10);return Sr(n.viewport,l),Sr(n.content,l),c.jsx(jt,{present:a||o,children:c.jsx(Ah,{"data-state":o?"visible":"hidden",...r,ref:t})})}),Ah=p.forwardRef((e,t)=>{const{orientation:n="vertical",...a}=e,r=vt($t,e.__scopeScrollArea),o=p.useRef(null),i=p.useRef(0),[s,l]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=lw(s.viewport,s.content),h={...a,sizes:s,onSizesChange:l,hasThumb:u>0&&u<1,onThumbChange:f=>o.current=f,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:f=>i.current=f};function d(f,w){return m1(f,i.current,s,w)}return n==="horizontal"?c.jsx(u1,{...h,ref:t,onThumbPositionChange:()=>{if(r.viewport&&o.current){const f=r.viewport.scrollLeft,w=Uf(f,s,r.dir);o.current.style.transform=`translate3d(${w}px, 0, 0)`}},onWheelScroll:f=>{r.viewport&&(r.viewport.scrollLeft=f)},onDragScroll:f=>{r.viewport&&(r.viewport.scrollLeft=d(f,r.dir))}}):n==="vertical"?c.jsx(h1,{...h,ref:t,onThumbPositionChange:()=>{if(r.viewport&&o.current){const f=r.viewport.scrollTop,w=Uf(f,s);o.current.style.transform=`translate3d(0, ${w}px, 0)`}},onWheelScroll:f=>{r.viewport&&(r.viewport.scrollTop=f)},onDragScroll:f=>{r.viewport&&(r.viewport.scrollTop=d(f))}}):null}),u1=p.forwardRef((e,t)=>{const{sizes:n,onSizesChange:a,...r}=e,o=vt($t,e.__scopeScrollArea),[i,s]=p.useState(),l=p.useRef(null),u=ye(t,l,o.onScrollbarXChange);return p.useEffect(()=>{l.current&&s(getComputedStyle(l.current))},[l]),c.jsx(iw,{"data-orientation":"horizontal",...r,ref:u,sizes:n,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Ks(n)+"px",...e.style},onThumbPointerDown:h=>e.onThumbPointerDown(h.x),onDragScroll:h=>e.onDragScroll(h.x),onWheelScroll:(h,d)=>{if(o.viewport){const f=o.viewport.scrollLeft+h.deltaX;e.onWheelScroll(f),hw(f,d)&&h.preventDefault()}},onResize:()=>{l.current&&o.viewport&&i&&a({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:ys(i.paddingLeft),paddingEnd:ys(i.paddingRight)}})}})}),h1=p.forwardRef((e,t)=>{const{sizes:n,onSizesChange:a,...r}=e,o=vt($t,e.__scopeScrollArea),[i,s]=p.useState(),l=p.useRef(null),u=ye(t,l,o.onScrollbarYChange);return p.useEffect(()=>{l.current&&s(getComputedStyle(l.current))},[l]),c.jsx(iw,{"data-orientation":"vertical",...r,ref:u,sizes:n,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Ks(n)+"px",...e.style},onThumbPointerDown:h=>e.onThumbPointerDown(h.y),onDragScroll:h=>e.onDragScroll(h.y),onWheelScroll:(h,d)=>{if(o.viewport){const f=o.viewport.scrollTop+h.deltaY;e.onWheelScroll(f),hw(f,d)&&h.preventDefault()}},onResize:()=>{l.current&&o.viewport&&i&&a({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:ys(i.paddingTop),paddingEnd:ys(i.paddingBottom)}})}})}),[d1,ow]=ew($t),iw=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:a,hasThumb:r,onThumbChange:o,onThumbPointerUp:i,onThumbPointerDown:s,onThumbPositionChange:l,onDragScroll:u,onWheelScroll:h,onResize:d,...f}=e,w=vt($t,n),[x,m]=p.useState(null),_=ye(t,P=>m(P)),g=p.useRef(null),y=p.useRef(""),v=w.viewport,k=a.content-a.viewport,S=be(h),T=be(l),I=Qs(d,10);function q(P){if(g.current){const N=P.clientX-g.current.left,D=P.clientY-g.current.top;u({x:N,y:D})}}return p.useEffect(()=>{const P=N=>{const D=N.target;(x==null?void 0:x.contains(D))&&S(N,k)};return document.addEventListener("wheel",P,{passive:!1}),()=>document.removeEventListener("wheel",P,{passive:!1})},[v,x,k,S]),p.useEffect(T,[a,T]),Sr(x,I),Sr(w.content,I),c.jsx(d1,{scope:n,scrollbar:x,hasThumb:r,onThumbChange:be(o),onThumbPointerUp:be(i),onThumbPositionChange:T,onThumbPointerDown:be(s),children:c.jsx(K.div,{...f,ref:_,style:{position:"absolute",...f.style},onPointerDown:B(e.onPointerDown,P=>{P.button===0&&(P.target.setPointerCapture(P.pointerId),g.current=x.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",w.viewport&&(w.viewport.style.scrollBehavior="auto"),q(P))}),onPointerMove:B(e.onPointerMove,q),onPointerUp:B(e.onPointerUp,P=>{const N=P.target;N.hasPointerCapture(P.pointerId)&&N.releasePointerCapture(P.pointerId),document.body.style.webkitUserSelect=y.current,w.viewport&&(w.viewport.style.scrollBehavior=""),g.current=null})})})}),gs="ScrollAreaThumb",sw=p.forwardRef((e,t)=>{const{forceMount:n,...a}=e,r=ow(gs,e.__scopeScrollArea);return c.jsx(jt,{present:n||r.hasThumb,children:c.jsx(f1,{ref:t,...a})})}),f1=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:a,...r}=e,o=vt(gs,n),i=ow(gs,n),{onThumbPositionChange:s}=i,l=ye(t,d=>i.onThumbChange(d)),u=p.useRef(void 0),h=Qs(()=>{u.current&&(u.current(),u.current=void 0)},100);return p.useEffect(()=>{const d=o.viewport;if(d){const f=()=>{if(h(),!u.current){const w=g1(d,s);u.current=w,s()}};return s(),d.addEventListener("scroll",f),()=>d.removeEventListener("scroll",f)}},[o.viewport,h,s]),c.jsx(K.div,{"data-state":i.hasThumb?"visible":"hidden",...r,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...a},onPointerDownCapture:B(e.onPointerDownCapture,d=>{const w=d.target.getBoundingClientRect(),x=d.clientX-w.left,m=d.clientY-w.top;i.onThumbPointerDown({x,y:m})}),onPointerUp:B(e.onPointerUp,i.onThumbPointerUp)})});sw.displayName=gs;var Lh="ScrollAreaCorner",cw=p.forwardRef((e,t)=>{const n=vt(Lh,e.__scopeScrollArea),a=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&a?c.jsx(p1,{...e,ref:t}):null});cw.displayName=Lh;var p1=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,...a}=e,r=vt(Lh,n),[o,i]=p.useState(0),[s,l]=p.useState(0),u=!!(o&&s);return Sr(r.scrollbarX,()=>{var d;const h=((d=r.scrollbarX)==null?void 0:d.offsetHeight)||0;r.onCornerHeightChange(h),l(h)}),Sr(r.scrollbarY,()=>{var d;const h=((d=r.scrollbarY)==null?void 0:d.offsetWidth)||0;r.onCornerWidthChange(h),i(h)}),u?c.jsx(K.div,{...a,ref:t,style:{width:o,height:s,position:"absolute",right:r.dir==="ltr"?0:void 0,left:r.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function ys(e){return e?parseInt(e,10):0}function lw(e,t){const n=e/t;return isNaN(n)?0:n}function Ks(e){const t=lw(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=(e.scrollbar.size-n)*t;return Math.max(a,18)}function m1(e,t,n,a="ltr"){const r=Ks(n),o=r/2,i=t||o,s=r-i,l=n.scrollbar.paddingStart+i,u=n.scrollbar.size-n.scrollbar.paddingEnd-s,h=n.content-n.viewport,d=a==="ltr"?[0,h]:[h*-1,0];return uw([l,u],d)(e)}function Uf(e,t,n="ltr"){const a=Ks(t),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-r,i=t.content-t.viewport,s=o-a,l=n==="ltr"?[0,i]:[i*-1,0],u=o1(e,l);return uw([0,i],[0,s])(u)}function uw(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const a=(t[1]-t[0])/(e[1]-e[0]);return t[0]+a*(n-e[0])}}function hw(e,t){return e>0&&e<t}var g1=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},a=0;return function r(){const o={left:e.scrollLeft,top:e.scrollTop},i=n.left!==o.left,s=n.top!==o.top;(i||s)&&t(),n=o,a=window.requestAnimationFrame(r)}(),()=>window.cancelAnimationFrame(a)};function Qs(e,t){const n=be(e),a=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(a.current),[]),p.useCallback(()=>{window.clearTimeout(a.current),a.current=window.setTimeout(n,t)},[n,t])}function Sr(e,t){const n=be(t);dn(()=>{let a=0;if(e){const r=new ResizeObserver(()=>{cancelAnimationFrame(a),a=window.requestAnimationFrame(n)});return r.observe(e),()=>{window.cancelAnimationFrame(a),r.unobserve(e)}}},[e,n])}var dw=tw,y1=aw,v1=cw;const fw=p.forwardRef(({className:e,children:t,...n},a)=>c.jsxs(dw,{ref:a,className:ne("relative overflow-hidden",e),...n,children:[c.jsx(y1,{className:"h-full w-full rounded-[inherit]",children:t}),c.jsx(pw,{}),c.jsx(v1,{})]}));fw.displayName=dw.displayName;const pw=p.forwardRef(({className:e,orientation:t="vertical",...n},a)=>c.jsx(Rh,{ref:a,orientation:t,className:ne("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:c.jsx(sw,{className:"relative flex-1 rounded-full bg-border"})}));pw.displayName=Rh.displayName;const $f={choice:Po,relationship:Me,discovery:LS,backstory:jo,recovery:Dy},Gf={choice:"bg-blue-500/20 text-blue-200",relationship:"bg-red-500/20 text-red-200",discovery:"bg-yellow-500/20 text-yellow-200",backstory:"bg-purple-500/20 text-purple-200",recovery:"bg-green-500/20 text-green-200"};function w1(){const{gameState:e}=Nt(),[t,n]=p.useState(null),a=[...e.journal].sort((s,l)=>l.timestamp-s.timestamp),r={all:a,choice:a.filter(s=>s.type==="choice"),relationship:a.filter(s=>s.type==="relationship"),discovery:a.filter(s=>s.type==="discovery"),backstory:a.filter(s=>s.type==="backstory"),recovery:a.filter(s=>s.type==="recovery")},o=s=>new Date(s).toLocaleString(),i=s=>c.jsx(fw,{className:"h-96",children:c.jsx("div",{className:"space-y-2 p-2",children:s.length===0?c.jsx("p",{className:"text-gray-400 text-center py-8",children:"No entries of this type yet."}):s.map(l=>{const u=$f[l.type];return c.jsx(ue,{className:`cursor-pointer transition-colors hover:bg-gray-800/50 ${(t==null?void 0:t.id)===l.id?"ring-2 ring-purple-500":""}`,onClick:()=>n(l),children:c.jsx(de,{className:"p-3",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(u,{className:"w-4 h-4 mt-1 text-purple-400"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("h4",{className:"font-medium text-sm truncate",children:l.title}),c.jsx(tt,{className:`text-xs ${Gf[l.type]}`,children:l.type})]}),c.jsx("p",{className:"text-xs text-gray-400 line-clamp-2",children:l.description}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:o(l.timestamp)})]})]})})},l.id)})})});return c.jsxs("div",{className:"flex h-full gap-4",children:[c.jsx("div",{className:"flex-1",children:c.jsxs(ue,{className:"h-full",children:[c.jsxs(Ce,{children:[c.jsxs(Ie,{className:"flex items-center gap-2",children:[c.jsx(Po,{className:"w-5 h-5"}),"Personal Journal"]}),c.jsx("p",{className:"text-sm text-gray-400",children:"A record of your journey through Ravencroft Manor"})]}),c.jsx(de,{children:c.jsxs(jh,{defaultValue:"all",className:"w-full",children:[c.jsxs(Gs,{className:"grid w-full grid-cols-6",children:[c.jsx(Ee,{value:"all",children:"All"}),c.jsx(Ee,{value:"choice",children:"Choices"}),c.jsx(Ee,{value:"relationship",children:"Relations"}),c.jsx(Ee,{value:"discovery",children:"Discoveries"}),c.jsx(Ee,{value:"backstory",children:"Stories"}),c.jsx(Ee,{value:"recovery",children:"Recovery"})]}),Object.entries(r).map(([s,l])=>c.jsx(Tn,{value:s,children:i(l)},s))]})})]})}),c.jsx("div",{className:"w-80",children:c.jsxs(ue,{className:"h-full",children:[c.jsx(Ce,{children:c.jsx(Ie,{children:"Entry Details"})}),c.jsx(de,{children:t?c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[(()=>{const s=$f[t.type];return c.jsx(s,{className:"w-5 h-5 text-purple-400"})})(),c.jsx(tt,{className:`${Gf[t.type]}`,children:t.type})]}),c.jsx("h3",{className:"font-semibold text-lg mb-2",children:t.title}),c.jsx("p",{className:"text-sm text-gray-300 mb-3",children:t.description}),t.characterId&&c.jsxs("div",{className:"mb-3",children:[c.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Related Character:"}),c.jsx("p",{className:"text-sm text-purple-300 capitalize",children:t.characterId.replace("_"," ")})]}),t.sceneId&&c.jsxs("div",{className:"mb-3",children:[c.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Scene:"}),c.jsx("p",{className:"text-sm text-blue-300",children:t.sceneId.replace(/_/g," ").replace(/\b\w/g,s=>s.toUpperCase())})]}),c.jsx("div",{className:"text-xs text-gray-500",children:o(t.timestamp)}),t.metadata&&Object.keys(t.metadata).length>0&&c.jsxs("div",{className:"mt-4 p-3 bg-gray-800/50 rounded",children:[c.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Additional Details:"}),Object.entries(t.metadata).map(([s,l])=>c.jsxs("div",{className:"text-xs",children:[c.jsxs("span",{className:"text-gray-400",children:[s,":"]})," ",c.jsx("span",{className:"text-gray-200",children:String(l)})]},s))]})]})}):c.jsxs("div",{className:"text-center text-gray-400 py-8",children:[c.jsx(Po,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),c.jsx("p",{children:"Select an entry to view details"})]})})]})})]})}const Kf={story:Po,relationship:Me,exploration:DS,survival:mh},Ac={story:"text-blue-400",relationship:"text-red-400",exploration:"text-yellow-400",survival:"text-green-400"};function b1(){const{gameState:e}=Nt(),t={all:Jt,story:Jt.filter(l=>l.category==="story"),relationship:Jt.filter(l=>l.category==="relationship"),exploration:Jt.filter(l=>l.category==="exploration"),survival:Jt.filter(l=>l.category==="survival")},n=e.achievements.filter(l=>l.unlocked).length,a=Jt.length,r=n/a*100,o=l=>e.achievements.some(u=>u.id===l&&u.unlocked),i=l=>{const u=e.achievements.find(h=>h.id===l&&h.unlocked);return u!=null&&u.unlockedAt?new Date(u.unlockedAt).toLocaleDateString():null},s=l=>{const u=o(l.id),h=i(l.id),d=Kf[l.category];return c.jsx(ue,{className:`transition-all ${u?"bg-gradient-to-br from-yellow-900/20 to-yellow-800/10 border-yellow-500/30":"opacity-60"}`,children:c.jsx(de,{className:"p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:`p-2 rounded-lg ${u?"bg-yellow-500/20":"bg-gray-800"}`,children:u?c.jsx(Li,{className:"w-6 h-6 text-yellow-400"}):c.jsx(OS,{className:"w-6 h-6 text-gray-500"})}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("h3",{className:`font-semibold ${u?"text-yellow-200":"text-gray-400"}`,children:l.name}),c.jsxs(tt,{variant:"outline",className:`text-xs ${Ac[l.category]||"text-purple-300"}`,children:[c.jsx(d,{className:"w-3 h-3 mr-1"}),l.category]})]}),c.jsx("p",{className:`text-sm mb-2 ${u?"text-gray-200":"text-gray-500"}`,children:l.description}),u&&h&&c.jsxs("div",{className:"flex items-center gap-2 text-xs text-yellow-400",children:[c.jsx(jo,{className:"w-3 h-3"}),c.jsxs("span",{children:["Unlocked on ",h]})]}),!u&&c.jsx("div",{className:"text-xs text-gray-500",children:" Keep playing to unlock this achievement"})]})]})})},l.id)};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs(ue,{children:[c.jsx(Ce,{children:c.jsxs(Ie,{className:"flex items-center gap-2",children:[c.jsx(Li,{className:"w-5 h-5 text-yellow-400"}),"Achievement Progress"]})}),c.jsx(de,{children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-sm font-medium",children:"Overall Progress"}),c.jsxs("span",{className:"text-sm font-bold text-yellow-400",children:[n," / ",a]})]}),c.jsx(rn,{value:r,className:"h-3"}),c.jsx("div",{className:"grid grid-cols-4 gap-4 text-center",children:Object.entries(Ac).map(([l,u])=>{const h=t[l],d=h.filter(w=>o(w.id)).length,f=Kf[l];return c.jsxs("div",{className:"space-y-2",children:[c.jsx(f,{className:`w-6 h-6 mx-auto ${Ac[l]}`}),c.jsx("div",{className:"text-xs font-medium capitalize",children:l}),c.jsxs("div",{className:"text-xs text-gray-400",children:[d," / ",h.length]})]},l)})})]})})]}),c.jsxs(ue,{children:[c.jsxs(Ce,{children:[c.jsx(Ie,{children:"All Achievements"}),c.jsx("p",{className:"text-sm text-gray-400",children:"Discover and unlock achievements as you progress through your journey"})]}),c.jsx(de,{children:c.jsxs(jh,{defaultValue:"all",className:"w-full",children:[c.jsxs(Gs,{className:"grid w-full grid-cols-5",children:[c.jsx(Ee,{value:"all",children:"All"}),c.jsx(Ee,{value:"story",children:"Story"}),c.jsx(Ee,{value:"relationship",children:"Relationships"}),c.jsx(Ee,{value:"exploration",children:"Exploration"}),c.jsx(Ee,{value:"survival",children:"Survival"})]}),Object.entries(t).map(([l,u])=>c.jsx(Tn,{value:l,children:c.jsx("div",{className:"grid gap-3",children:u.map(s)})},l))]})})]}),e.achievements.some(l=>l.unlocked)&&c.jsxs(ue,{children:[c.jsx(Ce,{children:c.jsxs(Ie,{className:"flex items-center gap-2",children:[c.jsx(jo,{className:"w-5 h-5 text-yellow-400"}),"Recent Achievements"]})}),c.jsx(de,{children:c.jsx("div",{className:"space-y-2",children:e.achievements.filter(l=>l.unlocked).sort((l,u)=>(u.unlockedAt||0)-(l.unlockedAt||0)).slice(0,3).map(l=>{const u=Jt.find(h=>h.id===l.id);return u?c.jsxs("div",{className:"flex items-center gap-3 p-2 bg-yellow-900/10 rounded",children:[c.jsx(Li,{className:"w-4 h-4 text-yellow-400"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("span",{className:"text-sm font-medium text-yellow-200",children:u.name}),c.jsx("div",{className:"text-xs text-gray-400",children:l.unlockedAt&&new Date(l.unlockedAt).toLocaleDateString()})]})]},l.id):null})})})]})]})}const x1={basic_rest:{id:"basic_rest",name:"Rest",type:"rest",healthRestore:20,sanityRestore:10,cooldown:4,description:"Take time to rest and recover your strength. Restores moderate health and some sanity."},meditation:{id:"meditation",name:"Meditate",type:"meditation",healthRestore:15,sanityRestore:25,cooldown:6,description:"Center your mind through meditation. Restores significant sanity and some health."},social_recovery:{id:"social_recovery",name:"Seek Comfort",type:"social",healthRestore:10,sanityRestore:15,cooldown:3,requirements:{minAffection:30},description:"Find comfort in the company of a trusted companion. Requires good relationship with at least one character."},library_study:{id:"library_study",name:"Study in Library",type:"mystical",healthRestore:5,sanityRestore:20,cooldown:8,requirements:{location:"library"},description:"Study ancient texts to understand your situation better. Available only in the library."},garden_walk:{id:"garden_walk",name:"Walk in Gardens",type:"rest",healthRestore:15,sanityRestore:18,cooldown:2,requirements:{location:"garden"},description:"Take a peaceful walk through the manor gardens. Available only in the garden courtyard."},music_therapy:{id:"music_therapy",name:"Listen to Music",type:"social",healthRestore:8,sanityRestore:22,cooldown:4,requirements:{location:"music_room",characterPresent:"elena"},description:"Let Elena's music soothe your troubled mind. Requires Elena's presence in the music room."},morgana_guidance:{id:"morgana_guidance",name:"Seek Morgana's Guidance",type:"mystical",healthRestore:12,sanityRestore:30,cooldown:12,requirements:{characterPresent:"morgana",minAffection:50},description:"Morgana helps you understand and cope with supernatural stress. Requires high affection with Morgana."},seraphina_blessing:{id:"seraphina_blessing",name:"Receive Seraphina's Blessing",type:"mystical",healthRestore:25,sanityRestore:20,cooldown:24,requirements:{characterPresent:"seraphina",minAffection:60},description:"Seraphina's divine nature provides powerful healing. Requires very high affection with Seraphina."}},_1=e=>{const t=Date.now();return Object.values(x1).filter(n=>{const a=e.lastRecoveryTimes[n.id]||0,r=n.cooldown*60*60*1e3;if(t-a<r)return!1;if(n.requirements){if(n.requirements.location&&e.playerStats.location!==n.requirements.location||n.requirements.minAffection&&!Object.values(e.characters).some(i=>i.affection>=n.requirements.minAffection))return!1;if(n.requirements.characterPresent){const o=e.characters[n.requirements.characterPresent];if(!o||o.affection<30)return!1}}return!0})},k1={rest:Me,meditation:Ly,social:Xa,mystical:Oy};function S1(){const{gameState:e,performRecoveryAction:t}=Nt(),n=_1(e),a=(i,s)=>{const l=e.lastRecoveryTimes[i];if(!l)return"Ready";const u=Date.now(),h=s*60*60*1e3,d=u-l;if(d>=h)return"Ready";const f=h-d;return`${Math.ceil(f/(60*60*1e3))}h remaining`},r=i=>i>=80?"text-green-400":i>=60?"text-yellow-400":i>=40?"text-orange-400":"text-red-400",o=i=>i>=80?"text-blue-400":i>=60?"text-cyan-400":i>=40?"text-purple-400":"text-pink-400";return c.jsxs("div",{className:"space-y-6",children:[c.jsxs(ue,{children:[c.jsx(Ce,{children:c.jsxs(Ie,{className:"flex items-center gap-2",children:[c.jsx(Me,{className:"w-5 h-5"}),"Your Current Status"]})}),c.jsxs(de,{children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("span",{className:"text-sm font-medium",children:"Health"}),c.jsxs("span",{className:`text-sm font-bold ${r(e.playerStats.health)}`,children:[e.playerStats.health,"/",e.playerStats.maxHealth]})]}),c.jsx(rn,{value:e.playerStats.health,max:e.playerStats.maxHealth,className:"h-2"})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("span",{className:"text-sm font-medium",children:"Sanity"}),c.jsxs("span",{className:`text-sm font-bold ${o(e.playerStats.sanity)}`,children:[e.playerStats.sanity,"/",e.playerStats.maxSanity]})]}),c.jsx(rn,{value:e.playerStats.sanity,max:e.playerStats.maxSanity,className:"h-2"})]})]}),c.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400",children:"Times Rested:"}),c.jsx("span",{className:"ml-2 text-green-400",children:e.playerStats.restCount})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400",children:"Times Meditated:"}),c.jsx("span",{className:"ml-2 text-blue-400",children:e.playerStats.meditationCount})]})]}),c.jsxs("div",{className:"mt-2 text-sm",children:[c.jsx("span",{className:"text-gray-400",children:"Current Location:"}),c.jsx("span",{className:"ml-2 text-purple-400 capitalize",children:e.playerStats.location.replace(/_/g," ")})]})]})]}),c.jsxs(ue,{children:[c.jsxs(Ce,{children:[c.jsx(Ie,{children:"Recovery Options"}),c.jsx("p",{className:"text-sm text-gray-400",children:"Choose an action to restore your health and sanity"})]}),c.jsx(de,{children:n.length===0?c.jsxs("div",{className:"text-center py-8 text-gray-400",children:[c.jsx(Pf,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),c.jsx("p",{children:"No recovery actions available right now."}),c.jsx("p",{className:"text-xs mt-1",children:"Try changing locations or wait for cooldowns."})]}):c.jsx("div",{className:"grid gap-3",children:n.map(i=>{const s=k1[i.type],l=a(i.id,i.cooldown),u=l==="Ready";return c.jsx(ue,{className:`transition-colors ${u?"hover:bg-gray-800/50":"opacity-60"}`,children:c.jsx(de,{className:"p-4",children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[c.jsx(s,{className:"w-5 h-5 mt-1 text-purple-400"}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("h4",{className:"font-medium",children:i.name}),c.jsx(tt,{variant:"outline",className:"text-xs",children:i.type})]}),c.jsx("p",{className:"text-sm text-gray-300 mb-3",children:i.description}),c.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Me,{className:"w-3 h-3 text-red-400"}),c.jsxs("span",{className:"text-green-400",children:["+",i.healthRestore]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Ly,{className:"w-3 h-3 text-blue-400"}),c.jsxs("span",{className:"text-blue-400",children:["+",i.sanityRestore]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Pf,{className:"w-3 h-3 text-gray-400"}),c.jsxs("span",{className:"text-gray-400",children:[i.cooldown,"h cooldown"]})]})]}),i.requirements&&c.jsxs("div",{className:"mt-2 text-xs text-gray-400",children:["Requirements: ",Object.entries(i.requirements).map(([h,d])=>h==="location"?`Location: ${String(d).replace(/_/g," ")}`:h==="characterPresent"?`With: ${String(d).replace(/_/g," ")}`:h==="minAffection"?`Affection: ${d}+`:`${h}: ${d}`).join(", ")]})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-xs text-gray-400 mb-2",children:l}),c.jsx(J,{size:"sm",disabled:!u,onClick:()=>t(i.id),className:"w-20",children:u?"Use":"Wait"})]})]})})},i.id)})})})]}),c.jsxs(ue,{children:[c.jsx(Ce,{children:c.jsx(Ie,{className:"text-sm",children:"Recovery Tips"})}),c.jsx(de,{children:c.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[c.jsx("p",{children:" Different locations offer unique recovery options"}),c.jsx("p",{children:" Building relationships unlocks social recovery methods"}),c.jsx("p",{children:" Meditation is more effective for sanity, rest for health"}),c.jsx("p",{children:" Some actions require specific characters to be present"})]})})]})]})}function C1({onClose:e}){const{gameState:t}=Nt(),[n,a]=p.useState("characters"),r=(i,s)=>s<=10?{status:"Hostile",color:"bg-red-700",icon:co}:s<=20?{status:"Deeply Suspicious",color:"bg-red-600",icon:co}:s<=30?{status:"Distrustful",color:"bg-orange-600",icon:co}:s<=40?{status:"Wary",color:"bg-yellow-600",icon:mh}:i>=80?{status:"Deeply in Love",color:"bg-pink-500",icon:Me}:i>=60?{status:"Smitten",color:"bg-red-500",icon:Me}:i>=40?{status:"Interested",color:"bg-orange-500",icon:Me}:i>=20?{status:"Curious",color:"bg-yellow-500",icon:Me}:{status:"Neutral",color:"bg-gray-500",icon:Xa},o=i=>i<=10?"text-red-500":i<=20?"text-orange-500":i<=40?"text-yellow-500":i<=60?"text-blue-500":"text-green-500";return c.jsxs("div",{className:"lg:w-80 w-80 bg-gradient-to-b from-red-900/90 to-purple-900/90 backdrop-blur-sm border-r border-red-500/30",children:[c.jsxs("div",{className:"p-6 border-b border-red-500/30",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("h1",{className:"font-story text-xl lg:text-2xl font-bold text-white text-shadow animate-fade-in",children:[c.jsx(Me,{className:"inline-block text-red-400 mr-2 h-5 w-5"}),"Crimson Embrace"]}),e&&c.jsx(J,{onClick:e,variant:"ghost",size:"sm",className:"lg:hidden text-gray-300 hover:text-white",children:c.jsx(Vo,{className:"h-4 w-4"})})]}),c.jsx("p",{className:"text-gray-300 text-sm font-ui",children:"Chapter 1: The Awakening"})]}),c.jsx("div",{className:"flex-1 overflow-y-auto",children:c.jsxs(jh,{value:n,onValueChange:a,className:"h-full",children:[c.jsx("div",{className:"p-4 border-b border-red-500/30",children:c.jsxs(Gs,{className:"grid w-full grid-cols-5 bg-black/40",children:[c.jsxs(Ee,{value:"characters",className:"flex items-center gap-1 text-xs",children:[c.jsx(Xa,{className:"w-3 h-3"}),c.jsx("span",{className:"hidden sm:inline",children:"Characters"})]}),c.jsxs(Ee,{value:"journal",className:"flex items-center gap-1 text-xs",children:[c.jsx(Po,{className:"w-3 h-3"}),c.jsx("span",{className:"hidden sm:inline",children:"Journal"})]}),c.jsxs(Ee,{value:"recovery",className:"flex items-center gap-1 text-xs",children:[c.jsx(Dy,{className:"w-3 h-3"}),c.jsx("span",{className:"hidden sm:inline",children:"Recovery"})]}),c.jsxs(Ee,{value:"achievements",className:"flex items-center gap-1 text-xs",children:[c.jsx(Li,{className:"w-3 h-3"}),c.jsx("span",{className:"hidden sm:inline",children:"Achievements"})]}),c.jsxs(Ee,{value:"hints",className:"flex items-center gap-1 text-xs",children:[c.jsx(Zl,{className:"w-3 h-3"}),c.jsx("span",{className:"hidden sm:inline",children:"Hints"})]})]})}),c.jsxs("div",{className:"p-4 space-y-4",children:[c.jsxs(Tn,{value:"characters",className:"mt-0",children:[c.jsxs(ue,{className:"bg-black/40 border-red-500/30 mb-4",children:[c.jsx(Ce,{className:"pb-3",children:c.jsxs(Ie,{className:"text-white text-sm flex items-center gap-2",children:[c.jsx(Me,{className:"w-4 h-4"}),"Your Status"]})}),c.jsxs(de,{className:"space-y-3",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[c.jsx("span",{className:"text-gray-400",children:"Health"}),c.jsxs("span",{className:`font-bold ${t.playerStats.health>=80?"text-green-400":t.playerStats.health>=60?"text-yellow-400":t.playerStats.health>=40?"text-orange-400":"text-red-400"}`,children:[t.playerStats.health,"/100"]})]}),c.jsx(rn,{value:t.playerStats.health,max:100,className:"h-2"})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[c.jsx("span",{className:"text-gray-400",children:"Sanity"}),c.jsxs("span",{className:`font-bold ${t.playerStats.sanity>=80?"text-blue-400":t.playerStats.sanity>=60?"text-cyan-400":t.playerStats.sanity>=40?"text-purple-400":"text-pink-400"}`,children:[t.playerStats.sanity,"/100"]})]}),c.jsx(rn,{value:t.playerStats.sanity,max:100,className:"h-2"})]})]}),c.jsxs("div",{className:"text-xs text-gray-400",children:[c.jsx(Oy,{className:"w-3 h-3 inline mr-1"}),t.playerStats.location.replace(/_/g," ").replace(/\b\w/g,i=>i.toUpperCase())]})]})]}),c.jsxs(ue,{className:"bg-black/40 border-red-500/30",children:[c.jsx(Ce,{className:"pb-3",children:c.jsxs(Ie,{className:"text-white text-sm flex items-center gap-2",children:[c.jsx(Xa,{className:"w-4 h-4"}),"Relationships"]})}),c.jsx(de,{className:"space-y-3",children:Object.values(t.characters).map(i=>{const{status:s,color:l,icon:u}=r(i.affection,i.trust);return c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:`w-3 h-3 rounded-full ${i.color}`}),c.jsx("span",{className:"text-white text-sm font-medium",children:i.name})]}),c.jsxs(tt,{variant:"outline",className:`text-xs px-2 py-0.5 ${l} border-current flex items-center gap-1`,children:[c.jsx(u,{className:"w-3 h-3"}),s]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsx("span",{className:"text-gray-400",children:"Affection"}),c.jsxs("span",{className:"text-pink-400",children:[i.affection,"/100"]})]}),c.jsx(rn,{value:i.affection,max:100,className:"h-1.5"}),c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsx("span",{className:"text-gray-400",children:"Trust"}),c.jsxs("span",{className:o(i.trust),children:[i.trust,"/100"]})]}),c.jsx(rn,{value:i.trust,max:100,className:"h-1.5"}),c.jsx("p",{className:"text-xs text-gray-400",children:i.title})]})]},i.id)})})]})]}),c.jsx(Tn,{value:"journal",className:"mt-0",children:c.jsx(w1,{})}),c.jsx(Tn,{value:"recovery",className:"mt-0",children:c.jsx(S1,{})}),c.jsx(Tn,{value:"achievements",className:"mt-0",children:c.jsx(b1,{})}),c.jsx(Tn,{value:"hints",className:"mt-0",children:c.jsx(r1,{})})]})]})})]})}function I1(){const{currentScene:e}=Nt();return e?c.jsxs("div",{className:"flex-1 p-8 lg:p-12 overflow-y-auto relative",children:[e.background&&c.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat opacity-30",style:{backgroundImage:`url(${e.background})`,filter:"blur(1px) brightness(0.4)"}}),c.jsxs("div",{className:"max-w-4xl mx-auto relative z-10",children:[c.jsxs("div",{className:"mb-8 animate-fade-in",children:[c.jsx("h2",{className:"font-story text-2xl lg:text-4xl font-bold text-white text-shadow mb-2",children:e.title}),c.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-red-500 to-red-600 rounded-full"})]}),c.jsx("div",{className:"bg-gray-900/90 backdrop-blur-sm rounded-xl p-8 lg:p-12 border border-red-500/30 mb-8 animate-slide-up shadow-2xl",children:c.jsx("div",{className:"font-story text-lg lg:text-xl story-text text-white leading-relaxed",children:e.text.map((t,n)=>c.jsx("p",{className:"mb-6 last:mb-0",children:t},n))})}),e.character&&c.jsx("div",{className:"mb-8 animate-fade-in",children:c.jsx("div",{className:"bg-gradient-to-br from-red-900/40 to-purple-900/40 rounded-xl p-6 border border-red-500/30",children:c.jsxs("div",{className:"flex items-start space-x-4",children:[c.jsx("div",{className:"w-20 h-20 bg-red-600 rounded-full flex items-center justify-center flex-shrink-0 pulse-glow",children:c.jsx(Me,{className:"h-8 w-8 text-white"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-story text-xl font-bold text-white mb-1",children:e.character.name}),c.jsx("p",{className:"text-gray-300 text-sm mb-2",children:e.character.title}),c.jsxs("p",{className:"text-gray-200 text-sm font-ui",children:[c.jsx(Me,{className:"inline-block text-red-400 mr-1 h-4 w-4"}),"Currently: ",e.character.status]})]})]})})})]})]}):c.jsx("div",{className:"flex-1 p-8 lg:p-12 overflow-y-auto",children:c.jsx("div",{className:"max-w-4xl mx-auto",children:c.jsx("div",{className:"bg-midnight/60 backdrop-blur-sm rounded-xl p-8 lg:p-12 border border-blood-red/20",children:c.jsx("p",{className:"font-story text-lg text-parchment text-center",children:"Loading story..."})})})})}function T1(){const{currentScene:e,makeChoice:t,gameState:n}=Nt();if(!e||!e.choices.length)return null;const a=Tv(e.choices,n.playerCharacter),r=jI(n.playerCharacter),o=[...a,...r],i=s=>{const l=s.text.includes("[");let u="group w-full text-center p-4 rounded-lg border-2 transition-all duration-300 hover:scale-105 active:scale-95 min-h-[60px] flex items-center justify-center";return l?u+" bg-gradient-to-r from-purple-900 to-purple-800 border-purple-600 hover:border-purple-400 text-white hover:shadow-purple-500/50 hover:shadow-lg":u+" bg-gradient-to-r from-gray-800 to-gray-700 border-gray-600 hover:border-gray-400 text-white hover:shadow-white/20 hover:shadow-lg"};return c.jsx("div",{className:"bg-gradient-to-t from-red-900/90 to-purple-900/90 backdrop-blur-sm border-t border-red-500/30 p-6 lg:p-8",children:c.jsxs("div",{className:"max-w-4xl mx-auto",children:[c.jsxs("h3",{className:"font-ui font-semibold text-white mb-4 flex items-center",children:[c.jsx(AS,{className:"text-red-400 mr-2 h-5 w-5"}),"Choose your response:"]}),c.jsx("div",{className:"space-y-3",children:o.map((s,l)=>(s.text.includes("["),c.jsx(J,{onClick:()=>t(s),className:i(s),variant:"outline",children:c.jsx("div",{className:"w-full",children:c.jsx("p",{className:"font-story text-white leading-relaxed text-center",children:s.text})})},s.id)))})]})})}var Lc="focusScope.autoFocusOnMount",Mc="focusScope.autoFocusOnUnmount",Qf={bubbles:!1,cancelable:!0},q1="FocusScope",mw=p.forwardRef((e,t)=>{const{loop:n=!1,trapped:a=!1,onMountAutoFocus:r,onUnmountAutoFocus:o,...i}=e,[s,l]=p.useState(null),u=be(r),h=be(o),d=p.useRef(null),f=ye(t,m=>l(m)),w=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(a){let m=function(v){if(w.paused||!s)return;const k=v.target;s.contains(k)?d.current=k:_n(d.current,{select:!0})},_=function(v){if(w.paused||!s)return;const k=v.relatedTarget;k!==null&&(s.contains(k)||_n(d.current,{select:!0}))},g=function(v){if(document.activeElement===document.body)for(const S of v)S.removedNodes.length>0&&_n(s)};document.addEventListener("focusin",m),document.addEventListener("focusout",_);const y=new MutationObserver(g);return s&&y.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",_),y.disconnect()}}},[a,s,w.paused]),p.useEffect(()=>{if(s){Zf.add(w);const m=document.activeElement;if(!s.contains(m)){const g=new CustomEvent(Lc,Qf);s.addEventListener(Lc,u),s.dispatchEvent(g),g.defaultPrevented||(E1(A1(gw(s)),{select:!0}),document.activeElement===m&&_n(s))}return()=>{s.removeEventListener(Lc,u),setTimeout(()=>{const g=new CustomEvent(Mc,Qf);s.addEventListener(Mc,h),s.dispatchEvent(g),g.defaultPrevented||_n(m??document.body,{select:!0}),s.removeEventListener(Mc,h),Zf.remove(w)},0)}}},[s,u,h,w]);const x=p.useCallback(m=>{if(!n&&!a||w.paused)return;const _=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,g=document.activeElement;if(_&&g){const y=m.currentTarget,[v,k]=P1(y);v&&k?!m.shiftKey&&g===k?(m.preventDefault(),n&&_n(v,{select:!0})):m.shiftKey&&g===v&&(m.preventDefault(),n&&_n(k,{select:!0})):g===y&&m.preventDefault()}},[n,a,w.paused]);return c.jsx(K.div,{tabIndex:-1,...i,ref:f,onKeyDown:x})});mw.displayName=q1;function E1(e,{select:t=!1}={}){const n=document.activeElement;for(const a of e)if(_n(a,{select:t}),document.activeElement!==n)return}function P1(e){const t=gw(e),n=Xf(t,e),a=Xf(t.reverse(),e);return[n,a]}function gw(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const r=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||r?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Xf(e,t){for(const n of e)if(!j1(n,{upTo:t}))return n}function j1(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function N1(e){return e instanceof HTMLInputElement&&"select"in e}function _n(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&N1(e)&&t&&e.select()}}var Zf=R1();function R1(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=Jf(e,t),e.unshift(t)},remove(t){var n;e=Jf(e,t),(n=e[0])==null||n.resume()}}}function Jf(e,t){const n=[...e],a=n.indexOf(t);return a!==-1&&n.splice(a,1),n}function A1(e){return e.filter(t=>t.tagName!=="A")}var Oc=0;function L1(){p.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??ep()),document.body.insertAdjacentElement("beforeend",e[1]??ep()),Oc++,()=>{Oc===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Oc--}},[])}function ep(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Ft=function(){return Ft=Object.assign||function(t){for(var n,a=1,r=arguments.length;a<r;a++){n=arguments[a];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Ft.apply(this,arguments)};function yw(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n}function M1(e,t,n){if(n||arguments.length===2)for(var a=0,r=t.length,o;a<r;a++)(o||!(a in t))&&(o||(o=Array.prototype.slice.call(t,0,a)),o[a]=t[a]);return e.concat(o||Array.prototype.slice.call(t))}var Oi="right-scroll-bar-position",Di="width-before-scroll-bar",O1="with-scroll-bars-hidden",D1="--removed-body-scroll-bar-size";function Dc(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function z1(e,t){var n=p.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(a){var r=n.value;r!==a&&(n.value=a,n.callback(a,r))}}}})[0];return n.callback=t,n.facade}var W1=typeof window<"u"?p.useLayoutEffect:p.useEffect,tp=new WeakMap;function F1(e,t){var n=z1(null,function(a){return e.forEach(function(r){return Dc(r,a)})});return W1(function(){var a=tp.get(n);if(a){var r=new Set(a),o=new Set(e),i=n.current;r.forEach(function(s){o.has(s)||Dc(s,null)}),o.forEach(function(s){r.has(s)||Dc(s,i)})}tp.set(n,e)},[e]),n}function Y1(e){return e}function H1(e,t){t===void 0&&(t=Y1);var n=[],a=!1,r={read:function(){if(a)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(o){var i=t(o,a);return n.push(i),function(){n=n.filter(function(s){return s!==i})}},assignSyncMedium:function(o){for(a=!0;n.length;){var i=n;n=[],i.forEach(o)}n={push:function(s){return o(s)},filter:function(){return n}}},assignMedium:function(o){a=!0;var i=[];if(n.length){var s=n;n=[],s.forEach(o),i=n}var l=function(){var h=i;i=[],h.forEach(o)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(h){i.push(h),u()},filter:function(h){return i=i.filter(h),n}}}};return r}function B1(e){e===void 0&&(e={});var t=H1(null);return t.options=Ft({async:!0,ssr:!1},e),t}var vw=function(e){var t=e.sideCar,n=yw(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var a=t.read();if(!a)throw new Error("Sidecar medium not found");return p.createElement(a,Ft({},n))};vw.isSideCarExport=!0;function V1(e,t){return e.useMedium(t),vw}var ww=B1(),zc=function(){},Xs=p.forwardRef(function(e,t){var n=p.useRef(null),a=p.useState({onScrollCapture:zc,onWheelCapture:zc,onTouchMoveCapture:zc}),r=a[0],o=a[1],i=e.forwardProps,s=e.children,l=e.className,u=e.removeScrollBar,h=e.enabled,d=e.shards,f=e.sideCar,w=e.noIsolation,x=e.inert,m=e.allowPinchZoom,_=e.as,g=_===void 0?"div":_,y=e.gapMode,v=yw(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=f,S=F1([n,t]),T=Ft(Ft({},v),r);return p.createElement(p.Fragment,null,h&&p.createElement(k,{sideCar:ww,removeScrollBar:u,shards:d,noIsolation:w,inert:x,setCallbacks:o,allowPinchZoom:!!m,lockRef:n,gapMode:y}),i?p.cloneElement(p.Children.only(s),Ft(Ft({},T),{ref:S})):p.createElement(g,Ft({},T,{className:l,ref:S}),s))});Xs.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Xs.classNames={fullWidth:Di,zeroRight:Oi};var U1=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function $1(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=U1();return t&&e.setAttribute("nonce",t),e}function G1(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function K1(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Q1=function(){var e=0,t=null;return{add:function(n){e==0&&(t=$1())&&(G1(t,n),K1(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},X1=function(){var e=Q1();return function(t,n){p.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},bw=function(){var e=X1(),t=function(n){var a=n.styles,r=n.dynamic;return e(a,r),null};return t},Z1={left:0,top:0,right:0,gap:0},Wc=function(e){return parseInt(e||"",10)||0},J1=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],a=t[e==="padding"?"paddingTop":"marginTop"],r=t[e==="padding"?"paddingRight":"marginRight"];return[Wc(n),Wc(a),Wc(r)]},eT=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Z1;var t=J1(e),n=document.documentElement.clientWidth,a=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,a-n+t[2]-t[0])}},tT=bw(),er="data-scroll-locked",nT=function(e,t,n,a){var r=e.left,o=e.top,i=e.right,s=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(O1,` {
   overflow: hidden `).concat(a,`;
   padding-right: `).concat(s,"px ").concat(a,`;
  }
  body[`).concat(er,`] {
    overflow: hidden `).concat(a,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(a,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(a,`;
    `),n==="padding"&&"padding-right: ".concat(s,"px ").concat(a,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Oi,` {
    right: `).concat(s,"px ").concat(a,`;
  }
  
  .`).concat(Di,` {
    margin-right: `).concat(s,"px ").concat(a,`;
  }
  
  .`).concat(Oi," .").concat(Oi,` {
    right: 0 `).concat(a,`;
  }
  
  .`).concat(Di," .").concat(Di,` {
    margin-right: 0 `).concat(a,`;
  }
  
  body[`).concat(er,`] {
    `).concat(D1,": ").concat(s,`px;
  }
`)},np=function(){var e=parseInt(document.body.getAttribute(er)||"0",10);return isFinite(e)?e:0},aT=function(){p.useEffect(function(){return document.body.setAttribute(er,(np()+1).toString()),function(){var e=np()-1;e<=0?document.body.removeAttribute(er):document.body.setAttribute(er,e.toString())}},[])},rT=function(e){var t=e.noRelative,n=e.noImportant,a=e.gapMode,r=a===void 0?"margin":a;aT();var o=p.useMemo(function(){return eT(r)},[r]);return p.createElement(tT,{styles:nT(o,!t,r,n?"":"!important")})},su=!1;if(typeof window<"u")try{var gi=Object.defineProperty({},"passive",{get:function(){return su=!0,!0}});window.addEventListener("test",gi,gi),window.removeEventListener("test",gi,gi)}catch{su=!1}var Ea=su?{passive:!1}:!1,oT=function(e){return e.tagName==="TEXTAREA"},xw=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!oT(e)&&n[t]==="visible")},iT=function(e){return xw(e,"overflowY")},sT=function(e){return xw(e,"overflowX")},ap=function(e,t){var n=t.ownerDocument,a=t;do{typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&(a=a.host);var r=_w(e,a);if(r){var o=kw(e,a),i=o[1],s=o[2];if(i>s)return!0}a=a.parentNode}while(a&&a!==n.body);return!1},cT=function(e){var t=e.scrollTop,n=e.scrollHeight,a=e.clientHeight;return[t,n,a]},lT=function(e){var t=e.scrollLeft,n=e.scrollWidth,a=e.clientWidth;return[t,n,a]},_w=function(e,t){return e==="v"?iT(t):sT(t)},kw=function(e,t){return e==="v"?cT(t):lT(t)},uT=function(e,t){return e==="h"&&t==="rtl"?-1:1},hT=function(e,t,n,a,r){var o=uT(e,window.getComputedStyle(t).direction),i=o*a,s=n.target,l=t.contains(s),u=!1,h=i>0,d=0,f=0;do{var w=kw(e,s),x=w[0],m=w[1],_=w[2],g=m-_-o*x;(x||g)&&_w(e,s)&&(d+=g,f+=x),s instanceof ShadowRoot?s=s.host:s=s.parentNode}while(!l&&s!==document.body||l&&(t.contains(s)||t===s));return(h&&(Math.abs(d)<1||!r)||!h&&(Math.abs(f)<1||!r))&&(u=!0),u},yi=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},rp=function(e){return[e.deltaX,e.deltaY]},op=function(e){return e&&"current"in e?e.current:e},dT=function(e,t){return e[0]===t[0]&&e[1]===t[1]},fT=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},pT=0,Pa=[];function mT(e){var t=p.useRef([]),n=p.useRef([0,0]),a=p.useRef(),r=p.useState(pT++)[0],o=p.useState(bw)[0],i=p.useRef(e);p.useEffect(function(){i.current=e},[e]),p.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(r));var m=M1([e.lockRef.current],(e.shards||[]).map(op),!0).filter(Boolean);return m.forEach(function(_){return _.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),m.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(r))})}}},[e.inert,e.lockRef.current,e.shards]);var s=p.useCallback(function(m,_){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!i.current.allowPinchZoom;var g=yi(m),y=n.current,v="deltaX"in m?m.deltaX:y[0]-g[0],k="deltaY"in m?m.deltaY:y[1]-g[1],S,T=m.target,I=Math.abs(v)>Math.abs(k)?"h":"v";if("touches"in m&&I==="h"&&T.type==="range")return!1;var q=ap(I,T);if(!q)return!0;if(q?S=I:(S=I==="v"?"h":"v",q=ap(I,T)),!q)return!1;if(!a.current&&"changedTouches"in m&&(v||k)&&(a.current=S),!S)return!0;var P=a.current||S;return hT(P,_,m,P==="h"?v:k,!0)},[]),l=p.useCallback(function(m){var _=m;if(!(!Pa.length||Pa[Pa.length-1]!==o)){var g="deltaY"in _?rp(_):yi(_),y=t.current.filter(function(S){return S.name===_.type&&(S.target===_.target||_.target===S.shadowParent)&&dT(S.delta,g)})[0];if(y&&y.should){_.cancelable&&_.preventDefault();return}if(!y){var v=(i.current.shards||[]).map(op).filter(Boolean).filter(function(S){return S.contains(_.target)}),k=v.length>0?s(_,v[0]):!i.current.noIsolation;k&&_.cancelable&&_.preventDefault()}}},[]),u=p.useCallback(function(m,_,g,y){var v={name:m,delta:_,target:g,should:y,shadowParent:gT(g)};t.current.push(v),setTimeout(function(){t.current=t.current.filter(function(k){return k!==v})},1)},[]),h=p.useCallback(function(m){n.current=yi(m),a.current=void 0},[]),d=p.useCallback(function(m){u(m.type,rp(m),m.target,s(m,e.lockRef.current))},[]),f=p.useCallback(function(m){u(m.type,yi(m),m.target,s(m,e.lockRef.current))},[]);p.useEffect(function(){return Pa.push(o),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Ea),document.addEventListener("touchmove",l,Ea),document.addEventListener("touchstart",h,Ea),function(){Pa=Pa.filter(function(m){return m!==o}),document.removeEventListener("wheel",l,Ea),document.removeEventListener("touchmove",l,Ea),document.removeEventListener("touchstart",h,Ea)}},[]);var w=e.removeScrollBar,x=e.inert;return p.createElement(p.Fragment,null,x?p.createElement(o,{styles:fT(r)}):null,w?p.createElement(rT,{gapMode:e.gapMode}):null)}function gT(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const yT=V1(ww,mT);var Sw=p.forwardRef(function(e,t){return p.createElement(Xs,Ft({},e,{ref:t,sideCar:yT}))});Sw.classNames=Xs.classNames;var vT=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},ja=new WeakMap,vi=new WeakMap,wi={},Fc=0,Cw=function(e){return e&&(e.host||Cw(e.parentNode))},wT=function(e,t){return t.map(function(n){if(e.contains(n))return n;var a=Cw(n);return a&&e.contains(a)?a:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},bT=function(e,t,n,a){var r=wT(t,Array.isArray(e)?e:[e]);wi[n]||(wi[n]=new WeakMap);var o=wi[n],i=[],s=new Set,l=new Set(r),u=function(d){!d||s.has(d)||(s.add(d),u(d.parentNode))};r.forEach(u);var h=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(s.has(f))h(f);else try{var w=f.getAttribute(a),x=w!==null&&w!=="false",m=(ja.get(f)||0)+1,_=(o.get(f)||0)+1;ja.set(f,m),o.set(f,_),i.push(f),m===1&&x&&vi.set(f,!0),_===1&&f.setAttribute(n,"true"),x||f.setAttribute(a,"true")}catch(g){console.error("aria-hidden: cannot operate on ",f,g)}})};return h(t),s.clear(),Fc++,function(){i.forEach(function(d){var f=ja.get(d)-1,w=o.get(d)-1;ja.set(d,f),o.set(d,w),f||(vi.has(d)||d.removeAttribute(a),vi.delete(d)),w||d.removeAttribute(n)}),Fc--,Fc||(ja=new WeakMap,ja=new WeakMap,vi=new WeakMap,wi={})}},xT=function(e,t,n){n===void 0&&(n="data-aria-hidden");var a=Array.from(Array.isArray(e)?e:[e]),r=vT(e);return r?(a.push.apply(a,Array.from(r.querySelectorAll("[aria-live]"))),bT(a,r,n,"aria-hidden")):function(){return null}},Mh="Dialog",[Iw,cq]=gn(Mh),[_T,Rt]=Iw(Mh),Tw=e=>{const{__scopeDialog:t,children:n,open:a,defaultOpen:r,onOpenChange:o,modal:i=!0}=e,s=p.useRef(null),l=p.useRef(null),[u=!1,h]=Ds({prop:a,defaultProp:r,onChange:o});return c.jsx(_T,{scope:t,triggerRef:s,contentRef:l,contentId:lo(),titleId:lo(),descriptionId:lo(),open:u,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(d=>!d),[h]),modal:i,children:n})};Tw.displayName=Mh;var qw="DialogTrigger",kT=p.forwardRef((e,t)=>{const{__scopeDialog:n,...a}=e,r=Rt(qw,n),o=ye(t,r.triggerRef);return c.jsx(K.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":zh(r.open),...a,ref:o,onClick:B(e.onClick,r.onOpenToggle)})});kT.displayName=qw;var Oh="DialogPortal",[ST,Ew]=Iw(Oh,{forceMount:void 0}),Pw=e=>{const{__scopeDialog:t,forceMount:n,children:a,container:r}=e,o=Rt(Oh,t);return c.jsx(ST,{scope:t,forceMount:n,children:p.Children.map(a,i=>c.jsx(jt,{present:n||o.open,children:c.jsx(uh,{asChild:!0,container:r,children:i})}))})};Pw.displayName=Oh;var vs="DialogOverlay",jw=p.forwardRef((e,t)=>{const n=Ew(vs,e.__scopeDialog),{forceMount:a=n.forceMount,...r}=e,o=Rt(vs,e.__scopeDialog);return o.modal?c.jsx(jt,{present:a||o.open,children:c.jsx(IT,{...r,ref:t})}):null});jw.displayName=vs;var CT=Eo("DialogOverlay.RemoveScroll"),IT=p.forwardRef((e,t)=>{const{__scopeDialog:n,...a}=e,r=Rt(vs,n);return c.jsx(Sw,{as:CT,allowPinchZoom:!0,shards:[r.contentRef],children:c.jsx(K.div,{"data-state":zh(r.open),...a,ref:t,style:{pointerEvents:"auto",...a.style}})})}),Ca="DialogContent",Nw=p.forwardRef((e,t)=>{const n=Ew(Ca,e.__scopeDialog),{forceMount:a=n.forceMount,...r}=e,o=Rt(Ca,e.__scopeDialog);return c.jsx(jt,{present:a||o.open,children:o.modal?c.jsx(TT,{...r,ref:t}):c.jsx(qT,{...r,ref:t})})});Nw.displayName=Ca;var TT=p.forwardRef((e,t)=>{const n=Rt(Ca,e.__scopeDialog),a=p.useRef(null),r=ye(t,n.contentRef,a);return p.useEffect(()=>{const o=a.current;if(o)return xT(o)},[]),c.jsx(Rw,{...e,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:B(e.onCloseAutoFocus,o=>{var i;o.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:B(e.onPointerDownOutside,o=>{const i=o.detail.originalEvent,s=i.button===0&&i.ctrlKey===!0;(i.button===2||s)&&o.preventDefault()}),onFocusOutside:B(e.onFocusOutside,o=>o.preventDefault())})}),qT=p.forwardRef((e,t)=>{const n=Rt(Ca,e.__scopeDialog),a=p.useRef(!1),r=p.useRef(!1);return c.jsx(Rw,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,s;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(a.current||(s=n.triggerRef.current)==null||s.focus(),o.preventDefault()),a.current=!1,r.current=!1},onInteractOutside:o=>{var l,u;(l=e.onInteractOutside)==null||l.call(e,o),o.defaultPrevented||(a.current=!0,o.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const i=o.target;((u=n.triggerRef.current)==null?void 0:u.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&r.current&&o.preventDefault()}})}),Rw=p.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:a,onOpenAutoFocus:r,onCloseAutoFocus:o,...i}=e,s=Rt(Ca,n),l=p.useRef(null),u=ye(t,l);return L1(),c.jsxs(c.Fragment,{children:[c.jsx(mw,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:r,onUnmountAutoFocus:o,children:c.jsx(Os,{role:"dialog",id:s.contentId,"aria-describedby":s.descriptionId,"aria-labelledby":s.titleId,"data-state":zh(s.open),...i,ref:u,onDismiss:()=>s.onOpenChange(!1)})}),c.jsxs(c.Fragment,{children:[c.jsx(ET,{titleId:s.titleId}),c.jsx(jT,{contentRef:l,descriptionId:s.descriptionId})]})]})}),Dh="DialogTitle",Aw=p.forwardRef((e,t)=>{const{__scopeDialog:n,...a}=e,r=Rt(Dh,n);return c.jsx(K.h2,{id:r.titleId,...a,ref:t})});Aw.displayName=Dh;var Lw="DialogDescription",Mw=p.forwardRef((e,t)=>{const{__scopeDialog:n,...a}=e,r=Rt(Lw,n);return c.jsx(K.p,{id:r.descriptionId,...a,ref:t})});Mw.displayName=Lw;var Ow="DialogClose",Dw=p.forwardRef((e,t)=>{const{__scopeDialog:n,...a}=e,r=Rt(Ow,n);return c.jsx(K.button,{type:"button",...a,ref:t,onClick:B(e.onClick,()=>r.onOpenChange(!1))})});Dw.displayName=Ow;function zh(e){return e?"open":"closed"}var zw="DialogTitleWarning",[lq,Ww]=Fk(zw,{contentName:Ca,titleName:Dh,docsSlug:"dialog"}),ET=({titleId:e})=>{const t=Ww(zw),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return p.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},PT="DialogDescriptionWarning",jT=({contentRef:e,descriptionId:t})=>{const a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Ww(PT).contentName}}.`;return p.useEffect(()=>{var o;const r=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&r&&(document.getElementById(t)||console.warn(a))},[a,e,t]),null},NT=Tw,RT=Pw,Fw=jw,Yw=Nw,Hw=Aw,Bw=Mw,AT=Dw;const Vw=NT,LT=RT,Uw=p.forwardRef(({className:e,...t},n)=>c.jsx(Fw,{ref:n,className:ne("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));Uw.displayName=Fw.displayName;const Wh=p.forwardRef(({className:e,children:t,...n},a)=>c.jsxs(LT,{children:[c.jsx(Uw,{}),c.jsxs(Yw,{ref:a,className:ne("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,c.jsxs(AT,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[c.jsx(Vo,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Wh.displayName=Yw.displayName;const Fh=({className:e,...t})=>c.jsx("div",{className:ne("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Fh.displayName="DialogHeader";const Yh=p.forwardRef(({className:e,...t},n)=>c.jsx(Hw,{ref:n,className:ne("text-lg font-semibold leading-none tracking-tight",e),...t}));Yh.displayName=Hw.displayName;const MT=p.forwardRef(({className:e,...t},n)=>c.jsx(Bw,{ref:n,className:ne("text-sm text-muted-foreground",e),...t}));MT.displayName=Bw.displayName;const Hh=p.forwardRef(({className:e,type:t,...n},a)=>c.jsx("input",{type:t,className:ne("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...n}));Hh.displayName="Input";function ws({isOpen:e,onClose:t,mode:n}){const{gameState:a,loadGame:r,saveGame:o}=Nt(),{toast:i}=oy(),s=lh(),[l,u]=p.useState(""),{data:h=[],isLoading:d}=Rk({queryKey:["/api/game-states"],enabled:e}),f=xf({mutationFn:async S=>(await _f("POST","/api/game-states",S)).json(),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/game-states"]}),i({title:"Game Saved",description:"Your game has been saved successfully."}),u("")},onError:()=>{i({title:"Save Failed",description:"Failed to save your game. Please try again.",variant:"destructive"})}}),w=xf({mutationFn:async S=>{await _f("DELETE",`/api/game-states/${S}`)},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/game-states"]}),i({title:"Save Deleted",description:"Save file has been deleted successfully."})},onError:()=>{i({title:"Delete Failed",description:"Failed to delete save file. Please try again.",variant:"destructive"})}}),x=()=>{if(!l.trim()){i({title:"Enter Slot Name",description:"Please enter a name for your save slot.",variant:"destructive"});return}f.mutate({slotName:l,gameData:a})},m=S=>{r(S.gameData),t(),i({title:"Game Loaded",description:`Loaded save: ${S.slotName}`})},_=S=>{w.mutate(S)},g=S=>new Date(S).toLocaleString(),v=(()=>{const S=[];for(let T=0;T<localStorage.length;T++){const I=localStorage.key(T);if(I&&I.startsWith("crimsonEmbrace_save_")){const q=I.replace("crimsonEmbrace_save_",""),P=localStorage.getItem(I);if(P)try{const N=JSON.parse(P);S.push({id:`local_${q}`,slotName:q,gameData:N,timestamp:N.timestamp||"Unknown",isLocal:!0})}catch{}}}return S})(),k=[...h,...v];return c.jsx(Vw,{open:e,onOpenChange:t,children:c.jsxs(Wh,{className:"bg-gradient-to-br from-vampire-red to-gothic-purple border-blood-red/30 max-w-md w-full max-h-[80vh] overflow-y-auto",children:[c.jsx(Fh,{children:c.jsxs(Yh,{className:"font-story text-xl font-bold text-parchment flex items-center justify-between",children:[n==="save"?"Save Game":"Load Game",c.jsx(J,{onClick:t,variant:"ghost",size:"sm",className:"text-moonlight hover:text-parchment",children:c.jsx(Vo,{className:"h-4 w-4"})})]})}),n==="save"&&c.jsx("div",{className:"mb-4",children:c.jsxs("div",{className:"flex gap-2",children:[c.jsx(Hh,{value:l,onChange:S=>u(S.target.value),placeholder:"Enter save name...",className:"bg-midnight/70 border-blood-red/30 text-parchment placeholder:text-moonlight/50"}),c.jsx(J,{onClick:x,disabled:f.isPending,className:"bg-blood-red/20 hover:bg-blood-red/40",children:c.jsx(Jl,{className:"h-4 w-4"})})]})}),c.jsx("div",{className:"space-y-3",children:d?c.jsx("div",{className:"text-center text-parchment",children:"Loading saves..."}):k.length===0?c.jsx("div",{className:"text-center text-moonlight/70",children:"No save files found"}):k.map(S=>c.jsx("div",{className:"bg-midnight/70 rounded-lg p-3 border border-blood-red/20",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-ui font-semibold text-sm text-parchment",children:S.slotName}),c.jsxs("p",{className:"text-xs text-moonlight/70",children:[S.isLocal?g(S.timestamp):g(S.updatedAt),S.isLocal&&" (Local)"]})]}),c.jsxs("div",{className:"flex space-x-2",children:[n==="load"&&c.jsxs(J,{onClick:()=>m(S),size:"sm",className:"bg-blood-red/20 hover:bg-blood-red/40 text-xs",children:[c.jsx(My,{className:"h-3 w-3 mr-1"}),"Load"]}),n==="save"&&c.jsxs(J,{onClick:()=>{f.mutate({slotName:S.slotName,gameData:a})},size:"sm",className:"bg-vampire-red/20 hover:bg-vampire-red/40 text-xs",disabled:f.isPending,children:[c.jsx(Jl,{className:"h-3 w-3 mr-1"}),"Overwrite"]}),!S.isLocal&&c.jsx(J,{onClick:()=>_(S.id),size:"sm",variant:"destructive",className:"text-xs",disabled:w.isPending,children:c.jsx(WS,{className:"h-3 w-3"})})]})]})},S.id))})]})})}var OT="Separator",ip="horizontal",DT=["horizontal","vertical"],$w=p.forwardRef((e,t)=>{const{decorative:n,orientation:a=ip,...r}=e,o=zT(a)?a:ip,s=n?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return c.jsx(K.div,{"data-orientation":o,...s,...r,ref:t})});$w.displayName=OT;function zT(e){return DT.includes(e)}var Gw=$w;const Cr=p.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...a},r)=>c.jsx(Gw,{ref:r,decorative:n,orientation:t,className:ne("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...a}));Cr.displayName=Gw.displayName;function WT({onShowSaveModal:e,onShowLoadModal:t,onToggleSidebar:n}){const[a,r]=p.useState(!1),{gameState:o,resetGame:i}=Nt(),[s,l]=rh(),u=()=>{confirm("Are you sure you want to start a new game? This will erase your current progress.")&&(i(),r(!1))};return c.jsxs(c.Fragment,{children:[c.jsx(J,{onClick:()=>r(!0),variant:"outline",size:"sm",className:"fixed top-4 right-4 z-50 bg-gray-800/70 hover:bg-red-600/50 border border-red-500/30 text-white",children:c.jsx(Nf,{className:"h-4 w-4"})}),c.jsx(Vw,{open:a,onOpenChange:r,children:c.jsxs(Wh,{className:"bg-gradient-to-br from-red-900 to-purple-900 border-red-500/30 max-w-md w-full max-h-[80vh] overflow-y-auto",children:[c.jsx(Fh,{children:c.jsxs(Yh,{className:"font-story text-xl font-bold text-white flex items-center justify-between",children:[c.jsxs("span",{className:"flex items-center",children:[c.jsx(Nf,{className:"h-5 w-5 text-red-400 mr-2"}),"Game Menu"]}),c.jsx(J,{onClick:()=>r(!1),variant:"ghost",size:"sm",className:"text-gray-300 hover:text-white",children:c.jsx(Vo,{className:"h-4 w-4"})})]})}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-ui font-semibold text-white mb-3 flex items-center",children:"View Options"}),c.jsx("div",{className:"space-y-2",children:c.jsxs(J,{onClick:()=>{n(),r(!1)},className:"w-full bg-gray-800/70 hover:bg-red-600/50 border border-red-500/30 text-sm text-white",variant:"outline",children:[c.jsx(Xa,{className:"mr-2 h-4 w-4"}),"Relationships & Insights"]})})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-ui font-semibold text-white mb-3 flex items-center",children:"Game Controls"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs(J,{onClick:()=>{e(),r(!1)},className:"w-full bg-gray-800/70 hover:bg-red-600/50 border border-red-500/30 text-sm text-white",variant:"outline",children:[c.jsx(Jl,{className:"mr-2 h-4 w-4"}),"Save Game"]}),c.jsxs(J,{onClick:()=>{t(),r(!1)},className:"w-full bg-gray-800/70 hover:bg-red-600/50 border border-red-500/30 text-sm text-white",variant:"outline",children:[c.jsx(My,{className:"mr-2 h-4 w-4"}),"Load Game"]}),c.jsxs(J,{onClick:u,className:"w-full bg-gray-800/70 hover:bg-orange-600/50 border border-orange-500/30 text-sm text-white",variant:"outline",children:[c.jsx(zS,{className:"mr-2 h-4 w-4"}),"New Game"]}),c.jsx(J,{onClick:()=>{localStorage.clear(),window.location.reload()},className:"w-full bg-red-800/70 hover:bg-red-600/50 border border-red-500/30 text-xs text-white",variant:"outline",children:"Clear All Data & Restart"})]})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"font-ui font-semibold text-white mb-3 flex items-center",children:[c.jsx(jf,{className:"text-purple-400 mr-2 h-5 w-5"}),"Developer Tools"]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs(J,{onClick:()=>{l("/dev/story-tree"),r(!1)},className:"w-full bg-purple-800/70 hover:bg-purple-600/50 border border-purple-500/30 text-sm text-white",variant:"outline",children:[c.jsx(jf,{className:"mr-2 h-4 w-4"}),"Story Tree Visualizer"]}),s!=="/"&&c.jsx(J,{onClick:()=>{l("/"),r(!1)},className:"w-full bg-gray-800/70 hover:bg-gray-600/50 border border-gray-500/30 text-sm text-white",variant:"outline",children:"Back to Game"})]})]}),c.jsx(Cr,{className:"bg-gray-700"}),s==="/"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"font-ui font-semibold text-white mb-3 flex items-center",children:[c.jsx(Xa,{className:"text-red-400 mr-2 h-5 w-5"}),"Relationships"]}),c.jsx("div",{className:"space-y-3",children:Object.values(o.characters).map(h=>c.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-3 border border-red-500/20",children:[c.jsxs("div",{className:"flex items-center mb-2",children:[c.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center mr-3",children:c.jsx(Me,{className:"h-4 w-4 text-white"})}),c.jsx("span",{className:"font-story font-semibold text-white",children:h.name})]}),c.jsx(rn,{value:h.affection,className:"w-full h-2 mb-1 bg-gray-700/70"}),c.jsx("span",{className:"text-xs text-gray-300",children:h.status})]},h.id))})]}),c.jsx(Cr,{className:"bg-gray-700"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-ui font-semibold text-white mb-3",children:"Your Status"}),c.jsx("div",{className:"bg-gray-800/50 rounded-lg p-4",children:c.jsxs("div",{className:"space-y-2 text-xs",children:[c.jsxs("div",{className:"flex",children:[c.jsx("span",{className:"text-gray-300",children:"Health: "}),c.jsxs("span",{className:`${o.playerStats.health>75?"text-green-400":o.playerStats.health>50?"text-yellow-400":o.playerStats.health>25?"text-orange-400":"text-red-400"}`,children:[o.playerStats.health,"/100"]})]}),c.jsxs("div",{className:"flex",children:[c.jsx("span",{className:"text-gray-300",children:"Sanity: "}),c.jsxs("span",{className:`${o.playerStats.sanity>75?"text-green-400":o.playerStats.sanity>50?"text-yellow-400":o.playerStats.sanity>25?"text-orange-400":"text-red-400"}`,children:[o.playerStats.sanity,"/100"]})]}),c.jsxs("div",{className:"flex",children:[c.jsx("span",{className:"text-gray-300",children:"Location: "}),c.jsx("span",{className:"text-white",children:o.playerStats.location})]})]})})]})]})]})]})})]})}function FT(){const[e,t]=p.useState(!1),[n,a]=p.useState(!1),[r,o]=p.useState(!1);return c.jsxs("div",{className:"min-h-screen relative overflow-hidden bg-midnight",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-midnight via-gothic-purple/20 to-vampire-red/30"}),c.jsx(WT,{onShowSaveModal:()=>t(!0),onShowLoadModal:()=>a(!0),onToggleSidebar:()=>o(!r)}),c.jsxs("div",{className:"relative z-10 flex min-h-screen",children:[r&&c.jsxs("div",{className:"fixed inset-0 z-40 lg:relative lg:inset-auto lg:w-80",children:[c.jsx("div",{className:"absolute inset-0 bg-black/50 lg:hidden",onClick:()=>o(!1)}),c.jsx("div",{className:"relative z-50 h-full",children:c.jsx(C1,{onClose:()=>o(!1)})})]}),c.jsxs("div",{className:"flex-1 flex flex-col",children:[c.jsx(I1,{}),c.jsx(T1,{})]})]}),c.jsx(ws,{isOpen:e,onClose:()=>t(!1),mode:"save"}),c.jsx(ws,{isOpen:n,onClose:()=>a(!1),mode:"load"})]})}const YT=[{id:"athletic",name:"Athletic",description:"You are in excellent physical condition, giving you stamina and grace in dangerous situations.",category:"physical"},{id:"fragile",name:"Delicate",description:"Your ethereal beauty is matched by a fragile constitution that vampires find irresistible.",category:"physical"},{id:"striking",name:"Striking",description:"Your unusual beauty draws attention wherever you go, for better or worse.",category:"physical"},{id:"plain",name:"Unassuming",description:"You blend into crowds easily, making you skilled at observation and avoiding unwanted attention.",category:"physical"},{id:"charismatic",name:"Charismatic",description:"You have a natural magnetism that draws others to you and makes them want to trust you.",category:"social"},{id:"empathetic",name:"Empathetic",description:"You have an uncanny ability to understand and connect with others' emotions.",category:"social"},{id:"intimidating",name:"Intimidating",description:"There's something about your presence that makes others think twice before crossing you.",category:"social"},{id:"shy",name:"Reserved",description:"You prefer to observe rather than participate, which often reveals hidden truths.",category:"social"},{id:"intelligent",name:"Brilliant",description:"Your sharp intellect allows you to solve complex problems and see through deceptions.",category:"mental"},{id:"intuitive",name:"Intuitive",description:"You have an almost supernatural ability to sense danger and read between the lines.",category:"mental"},{id:"stubborn",name:"Determined",description:"Once you set your mind to something, nothing can deter you from your path.",category:"mental"},{id:"creative",name:"Creative",description:"Your artistic soul sees beauty and solutions where others see only problems.",category:"mental"}],HT=[{id:"bloodphobia",name:"Hemophobia",description:"The sight of blood makes you queasy and weak, a problematic trait in a world of vampires.",points:3},{id:"nightmares",name:"Haunted Dreams",description:"Disturbing nightmares plague your sleep, leaving you tired and on edge.",points:2},{id:"trusting",name:"Overly Trusting",description:"You see the best in everyone, sometimes to your detriment.",points:2},{id:"reckless",name:"Reckless",description:"You often act without thinking, rushing into dangerous situations.",points:2},{id:"curious",name:"Dangerously Curious",description:"Your insatiable curiosity often leads you into trouble you should avoid.",points:2},{id:"isolated",name:"Socially Isolated",description:"You have few connections to the mortal world, making you more vulnerable but also less tied down.",points:3},{id:"haunted",name:"Haunted Past",description:"A dark secret from your past occasionally resurfaces to complicate your life.",points:4}],BT=[{id:"psychic",name:"Psychic Sensitivity",description:"You can sense supernatural presences and sometimes glimpse the future in dreams.",cost:4},{id:"resistance",name:"Mental Fortitude",description:"Your mind is unusually resistant to supernatural influence and mind control.",cost:3},{id:"healing",name:"Quick Recovery",description:"You heal from injuries faster than normal humans.",cost:3},{id:"charm",name:"Natural Charm",description:"There's something supernaturally appealing about you that draws others in.",cost:2},{id:"courage",name:"Fearless",description:"You rarely feel fear, even in the most terrifying situations.",cost:2},{id:"lucky",name:"Unnaturally Lucky",description:"Fortune seems to favor you in critical moments.",cost:3},{id:"bloodsight",name:"Blood Sight",description:"You can see the supernatural nature of beings by looking at them closely.",cost:4},{id:"willpower",name:"Iron Will",description:"Your determination can overcome almost any obstacle or temptation.",cost:2}],sp=5;function VT(){const{createCharacter:e}=Nt(),[t,n]=p.useState(""),[a,r]=p.useState([]),[o,i]=p.useState([]),[s,l]=p.useState([]),u=o.reduce((v,k)=>v+k.points,0),h=s.reduce((v,k)=>v+k.cost,0),f=sp+u-h,w=v=>{const k=a.findIndex(S=>S.category===v.category);if(k>=0)if(a[k].id===v.id)r(a.filter((S,T)=>T!==k));else{const S=[...a];S[k]=v,r(S)}else r([...a,v])},x=v=>{o.find(k=>k.id===v.id)?i(o.filter(k=>k.id!==v.id)):i([...o,v])},m=v=>{s.find(k=>k.id===v.id)?l(s.filter(k=>k.id!==v.id)):f>=v.cost&&l([...s,v])},_=()=>t.trim()!==""&&a.length===3&&f>=0,g=()=>{if(!_())return;const v={name:t.trim(),traits:a,flaws:o,boons:s,availablePoints:f};e(v)},y=v=>{switch(v){case"physical":return mh;case"social":return Me;case"mental":return YS;default:return jo}};return c.jsxs("div",{className:"min-h-screen bg-midnight relative overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-midnight via-purple-900/20 to-red-900/30"}),c.jsxs("div",{className:"relative z-10 p-8 max-w-6xl mx-auto",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsxs("h1",{className:"font-story text-4xl font-bold text-white text-shadow mb-2",children:[c.jsx(FS,{className:"inline-block text-red-400 mr-3 h-8 w-8"}),"Create Your Character"]}),c.jsx("p",{className:"text-gray-300 text-lg font-ui",children:"Shape the mortal woman who will enter the world of vampires"})]}),c.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[c.jsx("div",{className:"lg:col-span-3",children:c.jsxs(ue,{className:"bg-gray-900/80 border-red-500/30",children:[c.jsxs(Ce,{children:[c.jsx(Ie,{className:"text-white font-story",children:"Character Name"}),c.jsx(Xr,{className:"text-gray-300",children:"What is your name?"})]}),c.jsx(de,{children:c.jsx(Hh,{value:t,onChange:v=>n(v.target.value),placeholder:"Enter your character's name...",className:"bg-gray-800/70 border-red-500/30 text-white placeholder:text-gray-400"})})]})}),c.jsxs(ue,{className:"bg-gray-900/80 border-red-500/30",children:[c.jsxs(Ce,{children:[c.jsx(Ie,{className:"text-white font-story",children:"Core Traits"}),c.jsx(Xr,{className:"text-gray-300",children:"Choose one trait from each category (Physical, Social, Mental)"})]}),c.jsx(de,{className:"space-y-4",children:["physical","social","mental"].map(v=>c.jsxs("div",{children:[c.jsxs("h4",{className:"text-white font-semibold mb-2 capitalize flex items-center",children:[Xt.createElement(y(v),{className:"h-4 w-4 text-red-400 mr-2"}),v]}),c.jsx("div",{className:"space-y-2",children:YT.filter(k=>k.category===v).map(k=>c.jsxs("div",{onClick:()=>w(k),className:`p-3 rounded-lg border cursor-pointer transition-all duration-200 ${a.find(S=>S.id===k.id)?"bg-red-600/20 border-red-400/50":"bg-gray-800/50 border-gray-600/30 hover:border-red-500/30"}`,children:[c.jsx("div",{className:"font-semibold text-white text-sm",children:k.name}),c.jsx("div",{className:"text-xs text-gray-300 mt-1",children:k.description})]},k.id))})]},v))})]}),c.jsxs(ue,{className:"bg-gray-900/80 border-red-500/30",children:[c.jsxs(Ce,{children:[c.jsxs(Ie,{className:"text-white font-story flex items-center",children:[c.jsx(co,{className:"h-5 w-5 text-orange-400 mr-2"}),"Flaws"]}),c.jsx(Xr,{className:"text-gray-300",children:"Take drawbacks to gain points for boons"})]}),c.jsx(de,{className:"space-y-2",children:HT.map(v=>c.jsx("div",{onClick:()=>x(v),className:`p-3 rounded-lg border cursor-pointer transition-all duration-200 ${o.find(k=>k.id===v.id)?"bg-orange-600/20 border-orange-400/50":"bg-gray-800/50 border-gray-600/30 hover:border-orange-500/30"}`,children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"font-semibold text-white text-sm",children:v.name}),c.jsx("div",{className:"text-xs text-gray-300 mt-1",children:v.description})]}),c.jsxs(tt,{variant:"outline",className:"ml-2 text-orange-400 border-orange-400/50",children:["+",v.points]})]})},v.id))})]}),c.jsxs(ue,{className:"bg-gray-900/80 border-red-500/30",children:[c.jsxs(Ce,{children:[c.jsxs(Ie,{className:"text-white font-story flex items-center",children:[c.jsx(jo,{className:"h-5 w-5 text-blue-400 mr-2"}),"Boons"]}),c.jsx(Xr,{className:"text-gray-300",children:"Spend points on special abilities"})]}),c.jsx(de,{className:"space-y-2",children:BT.map(v=>c.jsx("div",{onClick:()=>m(v),className:`p-3 rounded-lg border cursor-pointer transition-all duration-200 ${s.find(k=>k.id===v.id)?"bg-blue-600/20 border-blue-400/50":f>=v.cost?"bg-gray-800/50 border-gray-600/30 hover:border-blue-500/30":"bg-gray-800/30 border-gray-700/30 opacity-50 cursor-not-allowed"}`,children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"font-semibold text-white text-sm",children:v.name}),c.jsx("div",{className:"text-xs text-gray-300 mt-1",children:v.description})]}),c.jsx(tt,{variant:"outline",className:"ml-2 text-blue-400 border-blue-400/50",children:v.cost})]})},v.id))})]}),c.jsx("div",{className:"lg:col-span-3",children:c.jsxs(ue,{className:"bg-gray-900/80 border-red-500/30",children:[c.jsx(Ce,{children:c.jsx(Ie,{className:"text-white font-story",children:"Character Summary"})}),c.jsxs(de,{children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"text-white",children:[c.jsx("span",{className:"text-gray-300",children:"Available Points: "}),c.jsx("span",{className:f>=0?"text-green-400":"text-red-400",children:f})]}),c.jsxs("div",{className:"text-gray-300 text-sm",children:["Base: ",sp," + Flaws: ",u," - Boons: ",h]})]}),c.jsx(Cr,{className:"my-4 bg-gray-700"}),c.jsx(J,{onClick:g,disabled:!_(),className:"w-full bg-red-600/20 hover:bg-red-600/40 border border-red-500/30 text-white disabled:opacity-50",size:"lg",children:"Begin Your Story"}),!_()&&c.jsx("p",{className:"text-red-400 text-sm mt-2 text-center",children:"Please enter a name, select one trait from each category, and balance your points."})]})]})})]})]})]})}function UT(){const{gameState:e}=Nt(),[t,n]=p.useState(!1);return p.useEffect(()=>{new URLSearchParams(window.location.search).get("load")==="true"&&(n(!0),window.history.replaceState({},"","/game"))},[]),e.isCharacterCreated?c.jsxs(c.Fragment,{children:[c.jsx(FT,{}),c.jsx(ws,{isOpen:t,onClose:()=>n(!1),mode:"load"})]}):c.jsxs(c.Fragment,{children:[c.jsx(VT,{}),c.jsx(ws,{isOpen:t,onClose:()=>n(!1),mode:"load"})]})}function $T(){return c.jsx(Ev,{children:c.jsx(UT,{})})}function GT(){return c.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:c.jsx(ue,{className:"w-full max-w-md mx-4",children:c.jsxs(de,{className:"pt-6",children:[c.jsxs("div",{className:"flex mb-4 gap-2",children:[c.jsx(RS,{className:"h-8 w-8 text-red-500"}),c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),c.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function KT(){const[e,t]=p.useState(null),[n,a]=p.useState(new Set),[r,o]=rh(),i=p.useMemo(()=>{const h=xn.flatMap(g=>g.scenes),d=new Map(h.map(g=>[g.id,g])),f=(g,y=0,v=new Set)=>{if(v.has(g)||y>10)return null;const k=d.get(g);if(!k)return null;v.add(g);const S=[];for(const T of k.choices)if(T.nextScene){const I=f(T.nextScene,y+1,new Set(v));I&&S.push(I)}return{id:k.id,title:k.title,text:k.text,choices:k.choices,children:S,level:y}},w=[];xn.forEach((g,y)=>{const v=[],k=new Set;g.scenes.forEach(S=>{if(!k.has(S.id)){const T=f(S.id);if(T){v.push(T);const I=q=>{k.add(q.id),q.children.forEach(I)};I(T)}}}),v.length>0&&w.push({id:`chapter_${y}`,title:`${g.title} (${v.length} scenes)`,text:[`Chapter ${y+1}: ${g.title}`],choices:[],children:v,level:0})});const x=new Set(xn.flatMap(g=>g.scenes.map(y=>y.id))),m=new Set;h.forEach(g=>{g.choices.forEach(y=>{y.nextScene&&m.add(y.nextScene)})});const _=[];return m.forEach(g=>{if(!x.has(g)&&d.has(g)){const y=f(g);y&&_.push(y)}}),_.length>0&&w.push({id:"orphaned_scenes",title:`Orphaned Scenes (${_.length} scenes)`,text:["Scenes referenced in choices but not in chapter definitions"],choices:[],children:_,level:0}),{id:"root",title:`Story Tree (${w.length} chapters, ${h.length} total scenes)`,text:["All story branches organized by chapters"],choices:[],children:w,level:-1}},[]),s=h=>{const d=new Set(n);d.has(h)?d.delete(h):d.add(h),a(d)},l=h=>{localStorage.setItem("devJumpToScene",h),o("/")},u=(h,d="")=>{const f=`${d}-${h.id}`,w=n.has(h.id),x=h.children.length>0;return c.jsxs("div",{className:"mb-1",children:[c.jsx("div",{className:"flex items-center gap-2 p-2 rounded hover:bg-muted/50 min-w-max",style:{marginLeft:`${h.level*24}px`},children:c.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[x?c.jsx(J,{variant:"ghost",size:"sm",onClick:()=>s(h.id),className:"w-6 h-6 p-0 flex-shrink-0",children:w?"":"+"}):c.jsx("div",{className:"w-6 h-6 flex items-center justify-center text-muted-foreground",children:""}),c.jsx(J,{variant:(e==null?void 0:e.id)===h.id?"default":"outline",size:"sm",onClick:()=>t(h),className:"text-left flex-shrink-0 max-w-[200px] truncate",title:h.title,children:h.title}),c.jsx(J,{variant:"secondary",size:"sm",onClick:()=>l(h.id),className:"text-xs flex-shrink-0",children:"Jump"}),c.jsx(tt,{variant:"secondary",className:"text-xs flex-shrink-0",children:h.choices.length})]})}),w&&x&&c.jsx("div",{className:"border-l border-muted/30",style:{marginLeft:`${(h.level+1)*24-12}px`},children:h.children.map((m,_)=>u(m,`${d}-${_}`))})]},f)};return c.jsxs("div",{className:"h-screen flex gap-4 p-4",children:[c.jsx("div",{className:"w-1/2 h-full flex flex-col",children:c.jsxs(ue,{className:"h-full flex flex-col",children:[c.jsxs(Ce,{className:"flex-shrink-0",children:[c.jsx(Ie,{className:"text-xl",children:"Story Tree"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:'Click + to expand branches, scene names to view details, or "Jump" to test that path'}),c.jsxs("div",{className:"flex gap-2 mt-2",children:[c.jsx(J,{variant:"outline",size:"sm",onClick:()=>a(new Set),className:"text-xs",children:"Collapse All"}),c.jsx(J,{variant:"outline",size:"sm",onClick:()=>{const h=new Set;i&&(h.add(i.id),i.children.forEach(d=>{h.add(d.id),d.children.forEach(f=>{f.children.length>0&&h.add(f.id)})})),a(h)},className:"text-xs",children:"Expand All"}),c.jsx(J,{variant:"outline",size:"sm",onClick:()=>{var w,x;const h=xn.flatMap(m=>m.scenes),d=new Map(h.map(m=>[m.id,m])),f=[];if(h.forEach(m=>{m.choices.forEach(_=>{_.nextScene&&!d.has(_.nextScene)&&(f.includes(_.nextScene)||f.push(_.nextScene))})}),f.length>0){const m=document.createElement("div");m.style.cssText=`
                      position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
                      background: white; border: 2px solid #333; border-radius: 8px;
                      padding: 20px; max-width: 500px; max-height: 400px;
                      overflow-y: auto; z-index: 1000; box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                      font-family: monospace;
                    `;const _=document.createElement("div");_.style.cssText=`
                      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                      background: rgba(0,0,0,0.5); z-index: 999;
                    `;const g=document.createElement("h3");g.style.cssText="margin: 0 0 15px 0; color: #333;",g.textContent=`Missing Scenes (${f.length})`;const y=document.createElement("div");y.style.cssText="background: #f5f5f5; padding: 10px; border-radius: 4px; margin-bottom: 15px;";const v=document.createElement("pre");v.style.cssText="margin: 0; white-space: pre-wrap; user-select: text;",v.textContent=f.join(`
`),y.appendChild(v);const k=document.createElement("button");k.id="copyBtn",k.style.cssText="margin-right: 10px; padding: 8px 16px; background: #007acc; color: white; border: none; border-radius: 4px; cursor: pointer;",k.textContent="Copy to Clipboard";const S=document.createElement("button");S.id="closeBtn",S.style.cssText="padding: 8px 16px; background: #666; color: white; border: none; border-radius: 4px; cursor: pointer;",S.textContent="Close",m.appendChild(g),m.appendChild(y),m.appendChild(k),m.appendChild(S),document.body.appendChild(_),document.body.appendChild(m),(w=document.getElementById("copyBtn"))==null||w.addEventListener("click",()=>{navigator.clipboard.writeText(f.join(`
`))});const T=()=>{document.body.removeChild(m),document.body.removeChild(_)};(x=document.getElementById("closeBtn"))==null||x.addEventListener("click",T),_.addEventListener("click",T)}else alert("No missing scenes found! All story paths are complete.")},className:"text-xs",children:"Check Missing"})]})]}),c.jsx(de,{className:"flex-1 overflow-hidden p-0",children:c.jsx("div",{className:"h-full overflow-auto",children:c.jsx("div",{className:"p-4 min-w-max",children:i&&u(i)})})})]})}),c.jsx("div",{className:"w-1/2 h-full flex flex-col",children:c.jsxs(ue,{className:"h-full flex flex-col",children:[c.jsxs(Ce,{className:"flex-shrink-0",children:[c.jsx(Ie,{className:"text-xl",children:"Scene Details"}),e&&c.jsxs("div",{className:"flex gap-2",children:[c.jsx(J,{variant:"outline",size:"sm",onClick:()=>l(e.id),className:"text-xs",children:"Jump to This Scene"}),c.jsx(J,{variant:"outline",size:"sm",onClick:()=>{const h=xn.flatMap(f=>f.scenes),d=h.findIndex(f=>f.id===e.id);d>0&&t(h[d-1])},className:"text-xs",disabled:!e,children:"Previous"}),c.jsx(J,{variant:"outline",size:"sm",onClick:()=>{const h=xn.flatMap(f=>f.scenes),d=h.findIndex(f=>f.id===e.id);d<h.length-1&&t(h[d+1])},className:"text-xs",disabled:!e,children:"Next"})]})]}),c.jsx(de,{className:"flex-1 overflow-hidden p-0",children:c.jsx("div",{className:"h-full overflow-auto p-4",children:e?c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold mb-2",children:e.title}),c.jsxs("div",{className:"flex gap-2 mb-2",children:[c.jsxs(tt,{variant:"outline",children:["ID: ",e.id]}),c.jsxs(tt,{variant:"outline",children:["Level: ",e.level||0]})]})]}),c.jsx(Cr,{}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium mb-2",children:"Story Text:"}),c.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto bg-muted/10 p-3 rounded",children:e.text.map((h,d)=>c.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:h},d))})]}),c.jsx(Cr,{}),c.jsxs("div",{children:[c.jsxs("h4",{className:"font-medium mb-2",children:["Choices (",e.choices.length,"):"]}),c.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:e.choices.map((h,d)=>c.jsx(ue,{className:"p-3 hover:bg-muted/50",children:c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"text-sm font-medium",children:h.text}),c.jsx("p",{className:"text-xs text-blue-400",children:h.consequence}),c.jsxs("div",{className:"flex flex-wrap gap-1",children:[h.nextScene&&c.jsxs(tt,{variant:"secondary",className:"text-xs cursor-pointer hover:bg-primary/20",onClick:()=>{const w=xn.flatMap(x=>x.scenes).find(x=>x.id===h.nextScene);w&&t(w)},children:[" ",h.nextScene]}),h.effects.length>0&&h.effects.map((f,w)=>c.jsxs(tt,{variant:f.affectionChange>0?"default":"destructive",className:"text-xs",children:[f.characterId,": ",f.affectionChange>0?"+":"",f.affectionChange]},w))]})]})},h.id))})]})]}):c.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Select a scene from the tree to view its details"})})})]})})]})}function cp(){return c.jsx(Ev,{children:c.jsx(KT,{})})}function QT(){return c.jsxs(tk,{children:[c.jsx(Hr,{path:"/",component:tI}),c.jsx(Hr,{path:"/game",component:$T}),c.jsx(Hr,{path:"/dev",component:cp}),c.jsx(Hr,{path:"/dev/story-tree",component:cp}),c.jsx(Hr,{component:GT})]})}function XT(){return c.jsx(xk,{client:Lk,children:c.jsxs(Z0,{children:[c.jsx(SC,{}),c.jsx(QT,{})]})})}Rg(document.getElementById("root")).render(c.jsx(XT,{}));
